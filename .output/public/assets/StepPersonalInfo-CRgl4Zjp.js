const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/core-Cn7r35DE.js","assets/dist-C8bHO1wO.js"])))=>i.map(i=>d[i]);
import{a as e,i as t,n,r,t as i}from"./dist-C8bHO1wO.js";import{$ as a,A as o,B as s,C as c,D as l,E as u,F as d,G as f,H as p,I as m,J as h,K as g,L as _,M as v,N as ee,O as te,P as y,Q as b,R as x,T as ne,U as re,V as S,W as ie,X as C,Y as w,_ as ae,at as oe,d as se,et as T,g as ce,h as le,it as E,j as ue,k as de,m as D,nt as O,o as fe,ot as k,p as pe,q as me,rt as he,tt as ge,u as _e}from"./main-DjdsgoKC.js";import{A as ve,C as ye,D as be,E as xe,M as Se,N as A,O as Ce,P as we,S as Te,T as Ee,_ as De,a as Oe,b as ke,c as Ae,d as je,f as Me,g as Ne,h as Pe,i as Fe,j as Ie,k as Le,l as Re,m as ze,n as Be,o as Ve,p as He,r as Ue,s as We,u as Ge,v as Ke,w as qe,x as Je,y as Ye}from"./button-Cn66Fygb.js";function Xe(e,{insertAt:t}={}){if(!e||typeof document>`u`)return;let n=document.head||document.getElementsByTagName(`head`)[0],r=document.createElement(`style`);r.type=`text/css`,t===`top`&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Xe(`:where(html[dir=ltr]),
:where([data-sonner-toaster][dir=ltr]) {
  --toast-icon-margin-start: -3px;
  --toast-icon-margin-end: 4px;
  --toast-svg-margin-start: -1px;
  --toast-svg-margin-end: 0px;
  --toast-button-margin-start: auto;
  --toast-button-margin-end: 0;
  --toast-close-button-start: 0;
  --toast-close-button-end: unset;
  --toast-close-button-transform: translate(-35%, -35%);
}
:where(html[dir=rtl]),
:where([data-sonner-toaster][dir=rtl]) {
  --toast-icon-margin-start: 4px;
  --toast-icon-margin-end: -3px;
  --toast-svg-margin-start: 0px;
  --toast-svg-margin-end: -1px;
  --toast-button-margin-start: 0;
  --toast-button-margin-end: auto;
  --toast-close-button-start: unset;
  --toast-close-button-end: 0;
  --toast-close-button-transform: translate(35%, -35%);
}
:where([data-sonner-toaster]) {
  position: fixed;
  width: var(--width);
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    Segoe UI,
    Roboto,
    Helvetica Neue,
    Arial,
    Noto Sans,
    sans-serif,
    Apple Color Emoji,
    Segoe UI Emoji,
    Segoe UI Symbol,
    Noto Color Emoji;
  --gray1: hsl(0, 0%, 99%);
  --gray2: hsl(0, 0%, 97.3%);
  --gray3: hsl(0, 0%, 95.1%);
  --gray4: hsl(0, 0%, 93%);
  --gray5: hsl(0, 0%, 90.9%);
  --gray6: hsl(0, 0%, 88.7%);
  --gray7: hsl(0, 0%, 85.8%);
  --gray8: hsl(0, 0%, 78%);
  --gray9: hsl(0, 0%, 56.1%);
  --gray10: hsl(0, 0%, 52.3%);
  --gray11: hsl(0, 0%, 43.5%);
  --gray12: hsl(0, 0%, 9%);
  --border-radius: 8px;
  box-sizing: border-box;
  padding: 0;
  margin: 0;
  list-style: none;
  outline: none;
  z-index: 999999999;
}
:where([data-sonner-toaster][data-x-position=right]) {
  right: max(var(--offset), env(safe-area-inset-right));
}
:where([data-sonner-toaster][data-x-position=left]) {
  left: max(var(--offset), env(safe-area-inset-left));
}
:where([data-sonner-toaster][data-x-position=center]) {
  left: 50%;
  transform: translateX(-50%);
}
:where([data-sonner-toaster][data-y-position=top]) {
  top: max(var(--offset), env(safe-area-inset-top));
}
:where([data-sonner-toaster][data-y-position=bottom]) {
  bottom: max(var(--offset), env(safe-area-inset-bottom));
}
:where([data-sonner-toast]) {
  --y: translateY(100%);
  --lift-amount: calc(var(--lift) * var(--gap));
  z-index: var(--z-index);
  position: absolute;
  opacity: 0;
  transform: var(--y);
  filter: blur(0);
  touch-action: none;
  transition:
    transform 400ms,
    opacity 400ms,
    height 400ms,
    box-shadow 200ms;
  box-sizing: border-box;
  outline: none;
  overflow-wrap: anywhere;
}
:where([data-sonner-toast][data-styled=true]) {
  padding: 16px;
  background: var(--normal-bg);
  border: 1px solid var(--normal-border);
  color: var(--normal-text);
  border-radius: var(--border-radius);
  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
  width: var(--width);
  font-size: 13px;
  display: flex;
  align-items: center;
  gap: 6px;
}
:where([data-sonner-toast]:focus-visible) {
  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1), 0 0 0 2px rgba(0, 0, 0, 0.2);
}
:where([data-sonner-toast][data-y-position=top]) {
  top: 0;
  --y: translateY(-100%);
  --lift: 1;
  --lift-amount: calc(1 * var(--gap));
}
:where([data-sonner-toast][data-y-position=bottom]) {
  bottom: 0;
  --y: translateY(100%);
  --lift: -1;
  --lift-amount: calc(var(--lift) * var(--gap));
}
:where([data-sonner-toast]) :where([data-description]) {
  font-weight: 400;
  line-height: 1.4;
  color: inherit;
}
:where([data-sonner-toast]) :where([data-title]) {
  font-weight: 500;
  line-height: 1.5;
  color: inherit;
}
:where([data-sonner-toast]) :where([data-icon]) {
  display: flex;
  height: 16px;
  width: 16px;
  position: relative;
  justify-content: flex-start;
  align-items: center;
  flex-shrink: 0;
  margin-left: var(--toast-icon-margin-start);
  margin-right: var(--toast-icon-margin-end);
}
:where([data-sonner-toast][data-promise=true]) :where([data-icon]) > svg {
  opacity: 0;
  transform: scale(0.8);
  transform-origin: center;
  animation: sonner-fade-in 300ms ease forwards;
}
:where([data-sonner-toast]) :where([data-icon]) > * {
  flex-shrink: 0;
}
:where([data-sonner-toast]) :where([data-icon]) svg {
  margin-left: var(--toast-svg-margin-start);
  margin-right: var(--toast-svg-margin-end);
}
:where([data-sonner-toast]) :where([data-content]) {
  display: flex;
  flex-direction: column;
  gap: 2px;
}
[data-sonner-toast][data-styled=true] [data-button] {
  border-radius: 4px;
  padding-left: 8px;
  padding-right: 8px;
  height: 24px;
  font-size: 12px;
  color: var(--normal-bg);
  background: var(--normal-text);
  margin-left: var(--toast-button-margin-start);
  margin-right: var(--toast-button-margin-end);
  border: none;
  cursor: pointer;
  outline: none;
  display: flex;
  align-items: center;
  flex-shrink: 0;
  transition: opacity 400ms, box-shadow 200ms;
}
:where([data-sonner-toast]) :where([data-button]):focus-visible {
  box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.4);
}
:where([data-sonner-toast]) :where([data-button]):first-of-type {
  margin-left: var(--toast-button-margin-start);
  margin-right: var(--toast-button-margin-end);
}
:where([data-sonner-toast]) :where([data-cancel]) {
  color: var(--normal-text);
  background: rgba(0, 0, 0, 0.08);
}
:where([data-sonner-toast][data-theme=dark]) :where([data-cancel]) {
  background: rgba(255, 255, 255, 0.3);
}
:where([data-sonner-toast]) :where([data-close-button]) {
  position: absolute;
  left: var(--toast-close-button-start);
  right: var(--toast-close-button-end);
  top: 0;
  height: 20px;
  width: 20px;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0;
  background: var(--gray1);
  color: var(--gray12);
  border: 1px solid var(--gray4);
  transform: var(--toast-close-button-transform);
  border-radius: 50%;
  cursor: pointer;
  z-index: 1;
  transition:
    opacity 100ms,
    background 200ms,
    border-color 200ms;
}
:where([data-sonner-toast]) :where([data-close-button]):focus-visible {
  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1), 0 0 0 2px rgba(0, 0, 0, 0.2);
}
:where([data-sonner-toast]) :where([data-disabled=true]) {
  cursor: not-allowed;
}
:where([data-sonner-toast]):hover :where([data-close-button]):hover {
  background: var(--gray2);
  border-color: var(--gray5);
}
:where([data-sonner-toast][data-swiping=true])::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  height: 100%;
  z-index: -1;
}
:where([data-sonner-toast][data-y-position=top][data-swiping=true])::before {
  bottom: 50%;
  transform: scaleY(3) translateY(50%);
}
:where([data-sonner-toast][data-y-position=bottom][data-swiping=true])::before {
  top: 50%;
  transform: scaleY(3) translateY(-50%);
}
:where([data-sonner-toast][data-swiping=false][data-removed=true])::before {
  content: "";
  position: absolute;
  inset: 0;
  transform: scaleY(2);
}
:where([data-sonner-toast])::after {
  content: "";
  position: absolute;
  left: 0;
  height: calc(var(--gap) + 1px);
  bottom: 100%;
  width: 100%;
}
:where([data-sonner-toast][data-mounted=true]) {
  --y: translateY(0);
  opacity: 1;
}
:where([data-sonner-toast][data-expanded=false][data-front=false]) {
  --scale: var(--toasts-before) * 0.05 + 1;
  --y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));
  height: var(--front-toast-height);
}
:where([data-sonner-toast]) > * {
  transition: opacity 400ms;
}
:where([data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]) > * {
  opacity: 0;
}
:where([data-sonner-toast][data-visible=false]) {
  opacity: 0;
  pointer-events: none;
}
:where([data-sonner-toast][data-mounted=true][data-expanded=true]) {
  --y: translateY(calc(var(--lift) * var(--offset)));
  height: var(--initial-height);
}
:where([data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]) {
  --y: translateY(calc(var(--lift) * -100%));
  opacity: 0;
}
:where([data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]) {
  --y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));
  opacity: 0;
}
:where([data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]) {
  --y: translateY(40%);
  opacity: 0;
  transition: transform 500ms, opacity 200ms;
}
:where([data-sonner-toast][data-removed=true][data-front=false])::before {
  height: calc(var(--initial-height) + 20%);
}
[data-sonner-toast][data-swiping=true] {
  transform: var(--y) translateY(var(--swipe-amount, 0px));
  transition: none;
}
[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],
[data-sonner-toast][data-swipe-out=true][data-y-position=top] {
  animation: swipe-out 200ms ease-out forwards;
}
@keyframes swipe-out {
  from {
    transform: translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));
    opacity: 1;
  }
  to {
    transform: translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));
    opacity: 0;
  }
}
@media (max-width: 600px) {
  [data-sonner-toaster] {
    position: fixed;
    --mobile-offset: 16px;
    right: var(--mobile-offset);
    left: var(--mobile-offset);
    width: 100%;
  }
  [data-sonner-toaster] [data-sonner-toast] {
    left: 0;
    right: 0;
    width: calc(100% - var(--mobile-offset) * 2);
  }
  [data-sonner-toaster][data-x-position=left] {
    left: var(--mobile-offset);
  }
  [data-sonner-toaster][data-y-position=bottom] {
    bottom: 20px;
  }
  [data-sonner-toaster][data-y-position=top] {
    top: 20px;
  }
  [data-sonner-toaster][data-x-position=center] {
    left: var(--mobile-offset);
    right: var(--mobile-offset);
    transform: none;
  }
}
[data-sonner-toaster][data-theme=light] {
  --normal-bg: #fff;
  --normal-border: var(--gray4);
  --normal-text: var(--gray12);
  --success-bg: hsl(143, 85%, 96%);
  --success-border: hsl(145, 92%, 91%);
  --success-text: hsl(140, 100%, 27%);
  --info-bg: hsl(208, 100%, 97%);
  --info-border: hsl(221, 91%, 91%);
  --info-text: hsl(210, 92%, 45%);
  --warning-bg: hsl(49, 100%, 97%);
  --warning-border: hsl(49, 91%, 91%);
  --warning-text: hsl(31, 92%, 45%);
  --error-bg: hsl(359, 100%, 97%);
  --error-border: hsl(359, 100%, 94%);
  --error-text: hsl(360, 100%, 45%);
}
[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true] {
  --normal-bg: #000;
  --normal-border: hsl(0, 0%, 20%);
  --normal-text: var(--gray1);
}
[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true] {
  --normal-bg: #fff;
  --normal-border: var(--gray3);
  --normal-text: var(--gray12);
}
[data-sonner-toaster][data-theme=dark] {
  --normal-bg: #000;
  --normal-border: hsl(0, 0%, 20%);
  --normal-text: var(--gray1);
  --success-bg: hsl(150, 100%, 6%);
  --success-border: hsl(147, 100%, 12%);
  --success-text: hsl(150, 86%, 65%);
  --info-bg: hsl(215, 100%, 6%);
  --info-border: hsl(223, 100%, 12%);
  --info-text: hsl(216, 87%, 65%);
  --warning-bg: hsl(64, 100%, 6%);
  --warning-border: hsl(60, 100%, 12%);
  --warning-text: hsl(46, 87%, 65%);
  --error-bg: hsl(358, 76%, 10%);
  --error-border: hsl(357, 89%, 16%);
  --error-text: hsl(358, 100%, 81%);
}
[data-rich-colors=true] [data-sonner-toast][data-type=success] {
  background: var(--success-bg);
  border-color: var(--success-border);
  color: var(--success-text);
}
[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button] {
  background: var(--success-bg);
  border-color: var(--success-border);
  color: var(--success-text);
}
[data-rich-colors=true] [data-sonner-toast][data-type=info] {
  background: var(--info-bg);
  border-color: var(--info-border);
  color: var(--info-text);
}
[data-rich-colors=true] [data-sonner-toast][data-type=info] [data-close-button] {
  background: var(--info-bg);
  border-color: var(--info-border);
  color: var(--info-text);
}
[data-rich-colors=true] [data-sonner-toast][data-type=warning] {
  background: var(--warning-bg);
  border-color: var(--warning-border);
  color: var(--warning-text);
}
[data-rich-colors=true] [data-sonner-toast][data-type=warning] [data-close-button] {
  background: var(--warning-bg);
  border-color: var(--warning-border);
  color: var(--warning-text);
}
[data-rich-colors=true] [data-sonner-toast][data-type=error] {
  background: var(--error-bg);
  border-color: var(--error-border);
  color: var(--error-text);
}
[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button] {
  background: var(--error-bg);
  border-color: var(--error-border);
  color: var(--error-text);
}
.sonner-loading-wrapper {
  --size: 16px;
  height: var(--size);
  width: var(--size);
  position: absolute;
  inset: 0;
  z-index: 10;
}
.sonner-loading-wrapper[data-visible=false] {
  transform-origin: center;
  animation: sonner-fade-out 0.2s ease forwards;
}
.sonner-spinner {
  position: relative;
  top: 50%;
  left: 50%;
  height: var(--size);
  width: var(--size);
}
.sonner-loading-bar {
  animation: sonner-spin 1.2s linear infinite;
  background: var(--gray11);
  border-radius: 6px;
  height: 8%;
  left: -10%;
  position: absolute;
  top: -3.9%;
  width: 24%;
}
.sonner-loading-bar:nth-child(1) {
  animation-delay: -1.2s;
  transform: rotate(0.0001deg) translate(146%);
}
.sonner-loading-bar:nth-child(2) {
  animation-delay: -1.1s;
  transform: rotate(30deg) translate(146%);
}
.sonner-loading-bar:nth-child(3) {
  animation-delay: -1s;
  transform: rotate(60deg) translate(146%);
}
.sonner-loading-bar:nth-child(4) {
  animation-delay: -0.9s;
  transform: rotate(90deg) translate(146%);
}
.sonner-loading-bar:nth-child(5) {
  animation-delay: -0.8s;
  transform: rotate(120deg) translate(146%);
}
.sonner-loading-bar:nth-child(6) {
  animation-delay: -0.7s;
  transform: rotate(150deg) translate(146%);
}
.sonner-loading-bar:nth-child(7) {
  animation-delay: -0.6s;
  transform: rotate(180deg) translate(146%);
}
.sonner-loading-bar:nth-child(8) {
  animation-delay: -0.5s;
  transform: rotate(210deg) translate(146%);
}
.sonner-loading-bar:nth-child(9) {
  animation-delay: -0.4s;
  transform: rotate(240deg) translate(146%);
}
.sonner-loading-bar:nth-child(10) {
  animation-delay: -0.3s;
  transform: rotate(270deg) translate(146%);
}
.sonner-loading-bar:nth-child(11) {
  animation-delay: -0.2s;
  transform: rotate(300deg) translate(146%);
}
.sonner-loading-bar:nth-child(12) {
  animation-delay: -0.1s;
  transform: rotate(330deg) translate(146%);
}
@keyframes sonner-fade-in {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}
@keyframes sonner-fade-out {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(0.8);
  }
}
@keyframes sonner-spin {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0.15;
  }
}
@media (prefers-reduced-motion) {
  [data-sonner-toast],
  [data-sonner-toast] > *,
  .sonner-loading-bar {
    transition: none !important;
    animation: none !important;
  }
}
.sonner-loader {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center;
  transition: opacity 200ms, transform 200ms;
}
.sonner-loader[data-visible=false] {
  opacity: 0;
  transform: scale(0.8) translate(-50%, -50%);
}
`),Array(12).fill(0);var Ze=0,Qe=new class{subscribers;toasts;constructor(){this.subscribers=[],this.toasts=[]}subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)});publish=e=>{this.subscribers.forEach(t=>t(e))};addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]};create=e=>{let{message:t,...n}=e,r=typeof e?.id==`number`||e.id&&e.id?.length>0?e.id:Ze++;return this.toasts.find(e=>e.id===r)?this.toasts=this.toasts.map(n=>n.id===r?(this.publish({...n,...e,id:r,title:t}),{...n,...e,id:r,title:t}):n):this.addToast({title:t,...n,id:r}),r};dismiss=e=>(e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e);message=(e,t)=>this.create({...t,message:e});error=(e,t)=>this.create({...t,message:e,type:`error`});success=(e,t)=>this.create({...t,type:`success`,message:e});info=(e,t)=>this.create({...t,type:`info`,message:e});warning=(e,t)=>this.create({...t,type:`warning`,message:e});promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:`loading`,message:t.loading}));let r=e instanceof Promise?e:e(),i=n!==void 0;return r.then(e=>{if(e&&typeof e.ok==`boolean`&&!e.ok){i=!1;let r=typeof t.error==`function`?t.error(`HTTP error! status: ${e.status}`):t.error;this.create({id:n,type:`error`,message:r})}else if(t.success!==void 0){i=!1;let r=typeof t.success==`function`?t.success(e):t.success;this.create({id:n,type:`success`,message:r})}}).catch(e=>{if(t.error!==void 0){i=!1;let r=typeof t.error==`function`?t.error(e):t.error;this.create({id:n,type:`error`,message:r})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),t.finally?.()}),n};loading=(e,t)=>this.create({...t,type:`loading`,message:e});custom=(e,t)=>{let n=t?.id||Ze++;return this.publish({jsx:e(n),id:n,...t}),n}};function $e(e,t){let n=t?.id||Ze++;return Qe.addToast({title:e,...t,id:n}),n}var et=$e,tt=Object.assign(et,{success:Qe.success,info:Qe.info,warning:Qe.warning,error:Qe.error,custom:Qe.custom,message:Qe.message,promise:Qe.promise,dismiss:Qe.dismiss,loading:Qe.loading});
/*!
* Original code by Emil Kowalski
* MIT Licensed, Copyright 2023 Emil Kowalski, see https://github.com/emilkowalski/sonner/blob/main/LICENSE.md for details
*
* Credits:
* https://github.com/emilkowalski/sonner/blob/main/src/index.tsx
*/
u([`pointerdown`,`pointerup`,`pointermove`,`click`,`mousemove`]);var nt=(e,t)=>{let n=t?.length?{}:null;if(n)for(let e of t)n[e.part.charCodeAt(0)]=e;return{part:e,store:null,inert:n,params:null,wildcardStore:null}},rt=(e,t)=>({...e,part:t}),it=e=>({name:e,store:null,inert:null}),at=class e{constructor(e={}){this.config=e,e.lazy&&(this.find=this.lazyFind),e.onParam&&!Array.isArray(e.onParam)&&(this.config.onParam=[this.config.onParam])}root={};history=[];deferred=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/(\/:\w+\?)/g};lazyFind=(e,t)=>this.config.lazy?(this.build(),this.find(e,t)):this.find;build(){if(this.config.lazy){for(let[e,t,n]of this.deferred)this.add(e,t,n,{lazy:!1,ignoreHistory:!0});this.deferred=[],this.find=(e,t)=>{let n=this.root[e];return n?ot(t,t.length,n,0,this.config.onParam):null}}}add(t,n,r,{ignoreError:i=!1,ignoreHistory:a=!1,lazy:o=this.config.lazy}={}){if(o)return this.find=this.lazyFind,this.deferred.push([t,n,r]),r;if(typeof n!=`string`)throw TypeError(`Route path must be a string`);n===``?n=`/`:n[0]!==`/`&&(n=`/${n}`);let s=n[n.length-1]===`*`,c=n.match(e.regex.optionalParams);if(c){let e=n.replaceAll(`?`,``);this.add(t,e,r,{ignoreError:i,ignoreHistory:a,lazy:o});for(let e=0;e<c.length;e++){let i=n.replace(c[e],``);this.add(t,i,r,{ignoreError:!0,ignoreHistory:a,lazy:o})}return r}if(c&&(n=n.replaceAll(`?`,``)),this.history.find(([e,r,i])=>e===t&&r===n))return r;(s||c&&n.charCodeAt(n.length-1)===63)&&(n=n.slice(0,-1)),a||this.history.push([t,n,r]);let l=n.split(e.regex.static),u=n.match(e.regex.params)||[];l[l.length-1]===``&&l.pop();let d;d=this.root[t]?this.root[t]:this.root[t]=nt(`/`);let f=0;for(let e=0;e<l.length;++e){let t=l[e];if(e>0){let e=u[f++].slice(1);if(d.params===null)d.params=it(e);else if(d.params.name!==e){if(i)return r;throw Error(`Cannot create route "${n}" with parameter "${e}" because a route already exists with a different parameter name ("${d.params.name}") in the same location`)}let a=d.params;if(a.inert===null){d=a.inert=nt(t);continue}d=a.inert}for(let e=0;;){if(e===t.length){if(e<d.part.length){let n=rt(d,d.part.slice(e));Object.assign(d,nt(t,[n]))}break}if(e===d.part.length){d.inert===null&&(d.inert={});let n=d.inert[t.charCodeAt(e)];if(n){d=n,t=t.slice(e),e=0;continue}let r=nt(t.slice(e));d.inert[t.charCodeAt(e)]=r,d=r;break}if(t[e]!==d.part[e]){let n=rt(d,d.part.slice(e)),r=nt(t.slice(e));Object.assign(d,nt(d.part.slice(0,e),[n,r])),d=r;break}++e}}if(f<u.length){let e=u[f].slice(1);if(d.params===null)d.params=it(e);else if(d.params.name!==e){if(i)return r;throw Error(`Cannot create route "${n}" with parameter "${e}" because a route already exists with a different parameter name ("${d.params.name}") in the same location`)}return d.params.store===null&&(d.params.store=r),d.params.store}return s?(d.wildcardStore===null&&(d.wildcardStore=r),d.wildcardStore):(d.store===null&&(d.store=r),d.store)}find(e,t){let n=this.root[e];return n?ot(t,t.length,n,0,this.config.onParam):null}},ot=(e,t,n,r,i)=>{let a=n.part,o=a.length,s=r+o;if(o>1){if(s>t)return null;if(o<15){for(let t=1,n=r+1;t<o;++t,++n)if(a.charCodeAt(t)!==e.charCodeAt(n))return null}else if(e.slice(r,s)!==a)return null}if(s===t)return n.store===null?n.wildcardStore===null?null:{store:n.wildcardStore,params:{"*":``}}:{store:n.store,params:{}};if(n.inert!==null){let r=n.inert[e.charCodeAt(s)];if(r!==void 0){let n=ot(e,t,r,s,i);if(n!==null)return n}}if(n.params!==null){let{store:r,name:a,inert:o}=n.params,c=e.indexOf(`/`,s);if(c!==s){if(c===-1||c>=t){if(r!==null){let n={};if(n[a]=e.substring(s,t),i)for(let e=0;e<i.length;e++){let t=i[e](n[a],a);t!==void 0&&(n[a]=t)}return{store:r,params:n}}}else if(o!==null){let n=ot(e,t,o,c,i);if(n!==null){if(n.params[a]=e.substring(s,c),i)for(let e=0;e<i.length;e++){let t=i[e](n.params[a],a);t!==void 0&&(n.params[a]=t)}return n}}}}return n.wildcardStore===null?null:{store:n.wildcardStore,params:{"*":e.substring(s,t)}}};function st(e){return gt(e)&&!ct(e)&&!bt(e)&&Symbol.asyncIterator in e}function ct(e){return Array.isArray(e)}function lt(e){return typeof e==`bigint`}function ut(e){return typeof e==`boolean`}function dt(e){return e instanceof globalThis.Date}function ft(e){return typeof e==`function`}function pt(e){return gt(e)&&!ct(e)&&!bt(e)&&Symbol.iterator in e}function mt(e){return e===null}function ht(e){return typeof e==`number`}function gt(e){return typeof e==`object`&&!!e}function _t(e){return e instanceof globalThis.RegExp}function vt(e){return typeof e==`string`}function yt(e){return typeof e==`symbol`}function bt(e){return e instanceof globalThis.Uint8Array}function xt(e){return e===void 0}function St(e){return e.map(e=>Dt(e))}function Ct(e){return new Date(e.getTime())}function wt(e){return new Uint8Array(e)}function Tt(e){return new RegExp(e.source,e.flags)}function Et(e){let t={};for(let n of Object.getOwnPropertyNames(e))t[n]=Dt(e[n]);for(let n of Object.getOwnPropertySymbols(e))t[n]=Dt(e[n]);return t}function Dt(e){return ct(e)?St(e):dt(e)?Ct(e):bt(e)?wt(e):_t(e)?Tt(e):gt(e)?Et(e):e}function Ot(e){return Dt(e)}function kt(e,t){return Ot(t===void 0?e:{...t,...e})}function At(e){return zt(e)&&globalThis.Symbol.asyncIterator in e}function jt(e){return zt(e)&&globalThis.Symbol.iterator in e}function Mt(e){return e instanceof globalThis.Promise}function Nt(e){return e instanceof Date&&globalThis.Number.isFinite(e.getTime())}function Pt(e){return e instanceof globalThis.Map}function Ft(e){return e instanceof globalThis.Set}function It(e){return globalThis.ArrayBuffer.isView(e)}function Lt(e){return e instanceof globalThis.Uint8Array}function Rt(e,t){return t in e}function zt(e){return typeof e==`object`&&!!e}function Bt(e){return globalThis.Array.isArray(e)&&!globalThis.ArrayBuffer.isView(e)}function Vt(e){return e===void 0}function Ht(e){return e===null}function Ut(e){return typeof e==`boolean`}function Wt(e){return typeof e==`number`}function Gt(e){return globalThis.Number.isInteger(e)}function Kt(e){return typeof e==`bigint`}function qt(e){return typeof e==`string`}function Jt(e){return typeof e==`function`}function Yt(e){return typeof e==`symbol`}function Xt(e){return Kt(e)||Ut(e)||Ht(e)||Wt(e)||qt(e)||Yt(e)||Vt(e)}var Zt;(function(e){e.InstanceMode=`default`,e.ExactOptionalPropertyTypes=!1,e.AllowArrayObject=!1,e.AllowNaN=!1,e.AllowNullVoid=!1;function t(t,n){return e.ExactOptionalPropertyTypes?n in t:t[n]!==void 0}e.IsExactOptionalProperty=t;function n(t){let n=zt(t);return e.AllowArrayObject?n:n&&!Bt(t)}e.IsObjectLike=n;function r(e){return n(e)&&!(e instanceof Date)&&!(e instanceof Uint8Array)}e.IsRecordLike=r;function i(t){return e.AllowNaN?Wt(t):Number.isFinite(t)}e.IsNumberLike=i;function a(t){let n=Vt(t);return e.AllowNullVoid?n||t===null:n}e.IsVoidLike=a})(Zt||={});function Qt(e){return globalThis.Object.freeze(e).map(e=>nn(e))}function eee(e){return e}function $t(e){return e}function en(e){return e}function tn(e){let t={};for(let n of Object.getOwnPropertyNames(e))t[n]=nn(e[n]);for(let n of Object.getOwnPropertySymbols(e))t[n]=nn(e[n]);return globalThis.Object.freeze(t)}function nn(e){return ct(e)?Qt(e):dt(e)?eee(e):bt(e)?$t(e):_t(e)?en(e):gt(e)?tn(e):e}function j(e,t){let n=t===void 0?e:{...t,...e};switch(Zt.InstanceMode){case`freeze`:return nn(n);case`clone`:return Ot(n);default:return n}}var rn=class extends Error{constructor(e){super(e)}};const an=Symbol.for(`TypeBox.Transform`),on=Symbol.for(`TypeBox.Readonly`),sn=Symbol.for(`TypeBox.Optional`),cn=Symbol.for(`TypeBox.Hint`),M=Symbol.for(`TypeBox.Kind`);function ln(e){return gt(e)&&e[on]===`Readonly`}function un(e){return gt(e)&&e[sn]===`Optional`}function dn(e){return Cn(e,`Any`)}function fn(e){return Cn(e,`Argument`)}function pn(e){return Cn(e,`Array`)}function mn(e){return Cn(e,`AsyncIterator`)}function hn(e){return Cn(e,`BigInt`)}function gn(e){return Cn(e,`Boolean`)}function _n(e){return Cn(e,`Computed`)}function vn(e){return Cn(e,`Constructor`)}function tee(e){return Cn(e,`Date`)}function yn(e){return Cn(e,`Function`)}function bn(e){return Cn(e,`Integer`)}function xn(e){return Cn(e,`Intersect`)}function Sn(e){return Cn(e,`Iterator`)}function Cn(e,t){return gt(e)&&M in e&&e[M]===t}function wn(e){return ut(e)||ht(e)||vt(e)}function Tn(e){return Cn(e,`Literal`)}function En(e){return Cn(e,`MappedKey`)}function Dn(e){return Cn(e,`MappedResult`)}function On(e){return Cn(e,`Never`)}function nee(e){return Cn(e,`Not`)}function kn(e){return Cn(e,`Null`)}function An(e){return Cn(e,`Number`)}function jn(e){return Cn(e,`Object`)}function Mn(e){return Cn(e,`Promise`)}function Nn(e){return Cn(e,`Record`)}function Pn(e){return Cn(e,`Ref`)}function Fn(e){return Cn(e,`RegExp`)}function In(e){return Cn(e,`String`)}function Ln(e){return Cn(e,`Symbol`)}function Rn(e){return Cn(e,`TemplateLiteral`)}function zn(e){return Cn(e,`This`)}function Bn(e){return gt(e)&&an in e}function Vn(e){return Cn(e,`Tuple`)}function Hn(e){return Cn(e,`Undefined`)}function Un(e){return Cn(e,`Union`)}function Wn(e){return Cn(e,`Uint8Array`)}function ree(e){return Cn(e,`Unknown`)}function iee(e){return Cn(e,`Unsafe`)}function aee(e){return Cn(e,`Void`)}function Gn(e){return gt(e)&&M in e&&vt(e[M])}function Kn(e){return dn(e)||fn(e)||pn(e)||gn(e)||hn(e)||mn(e)||_n(e)||vn(e)||tee(e)||yn(e)||bn(e)||xn(e)||Sn(e)||Tn(e)||En(e)||Dn(e)||On(e)||nee(e)||kn(e)||An(e)||jn(e)||Mn(e)||Nn(e)||Pn(e)||Fn(e)||In(e)||Ln(e)||Rn(e)||zn(e)||Vn(e)||Hn(e)||Un(e)||Wn(e)||ree(e)||iee(e)||aee(e)||Gn(e)}var oee=`Argument.Any.Array.AsyncIterator.BigInt.Boolean.Computed.Constructor.Date.Enum.Function.Integer.Intersect.Iterator.Literal.MappedKey.MappedResult.Not.Null.Number.Object.Promise.Record.Ref.RegExp.String.Symbol.TemplateLiteral.This.Tuple.Undefined.Union.Uint8Array.Unknown.Void`.split(`.`);function qn(e){try{return new RegExp(e),!0}catch{return!1}}function Jn(e){if(!vt(e))return!1;for(let t=0;t<e.length;t++){let n=e.charCodeAt(t);if(n>=7&&n<=13||n===27||n===127)return!1}return!0}function Yn(e){return Qn(e)||Ur(e)}function Xn(e){return xt(e)||lt(e)}function Zn(e){return xt(e)||ht(e)}function Qn(e){return xt(e)||ut(e)}function $n(e){return xt(e)||vt(e)}function see(e){return xt(e)||vt(e)&&Jn(e)&&qn(e)}function cee(e){return xt(e)||vt(e)&&Jn(e)}function er(e){return xt(e)||Ur(e)}function tr(e){return gt(e)&&e[sn]===`Optional`}function nr(e){return gr(e,`Any`)&&$n(e.$id)}function rr(e){return gr(e,`Argument`)&&ht(e.index)}function ir(e){return gr(e,`Array`)&&e.type===`array`&&$n(e.$id)&&Ur(e.items)&&Zn(e.minItems)&&Zn(e.maxItems)&&Qn(e.uniqueItems)&&er(e.contains)&&Zn(e.minContains)&&Zn(e.maxContains)}function ar(e){return gr(e,`AsyncIterator`)&&e.type===`AsyncIterator`&&$n(e.$id)&&Ur(e.items)}function or(e){return gr(e,`BigInt`)&&e.type===`bigint`&&$n(e.$id)&&Xn(e.exclusiveMaximum)&&Xn(e.exclusiveMinimum)&&Xn(e.maximum)&&Xn(e.minimum)&&Xn(e.multipleOf)}function sr(e){return gr(e,`Boolean`)&&e.type===`boolean`&&$n(e.$id)}function cr(e){return gr(e,`Computed`)&&vt(e.target)&&ct(e.parameters)&&e.parameters.every(e=>Ur(e))}function lr(e){return gr(e,`Constructor`)&&e.type===`Constructor`&&$n(e.$id)&&ct(e.parameters)&&e.parameters.every(e=>Ur(e))&&Ur(e.returns)}function ur(e){return gr(e,`Date`)&&e.type===`Date`&&$n(e.$id)&&Zn(e.exclusiveMaximumTimestamp)&&Zn(e.exclusiveMinimumTimestamp)&&Zn(e.maximumTimestamp)&&Zn(e.minimumTimestamp)&&Zn(e.multipleOfTimestamp)}function dr(e){return gr(e,`Function`)&&e.type===`Function`&&$n(e.$id)&&ct(e.parameters)&&e.parameters.every(e=>Ur(e))&&Ur(e.returns)}function fr(e){return gr(e,`Integer`)&&e.type===`integer`&&$n(e.$id)&&Zn(e.exclusiveMaximum)&&Zn(e.exclusiveMinimum)&&Zn(e.maximum)&&Zn(e.minimum)&&Zn(e.multipleOf)}function pr(e){return gt(e)&&Object.entries(e).every(([e,t])=>Jn(e)&&Ur(t))}function mr(e){return gr(e,`Intersect`)&&!(vt(e.type)&&e.type!==`object`)&&ct(e.allOf)&&e.allOf.every(e=>Ur(e)&&!lee(e))&&$n(e.type)&&(Qn(e.unevaluatedProperties)||er(e.unevaluatedProperties))&&$n(e.$id)}function hr(e){return gr(e,`Iterator`)&&e.type===`Iterator`&&$n(e.$id)&&Ur(e.items)}function gr(e,t){return gt(e)&&M in e&&e[M]===t}function _r(e){return br(e)&&vt(e.const)}function vr(e){return br(e)&&ht(e.const)}function yr(e){return br(e)&&ut(e.const)}function br(e){return gr(e,`Literal`)&&$n(e.$id)&&xr(e.const)}function xr(e){return ut(e)||ht(e)||vt(e)}function Sr(e){return gr(e,`MappedKey`)&&ct(e.keys)&&e.keys.every(e=>ht(e)||vt(e))}function Cr(e){return gr(e,`MappedResult`)&&pr(e.properties)}function wr(e){return gr(e,`Never`)&&gt(e.not)&&Object.getOwnPropertyNames(e.not).length===0}function Tr(e){return gr(e,`Not`)&&Ur(e.not)}function Er(e){return gr(e,`Null`)&&e.type===`null`&&$n(e.$id)}function Dr(e){return gr(e,`Number`)&&e.type===`number`&&$n(e.$id)&&Zn(e.exclusiveMaximum)&&Zn(e.exclusiveMinimum)&&Zn(e.maximum)&&Zn(e.minimum)&&Zn(e.multipleOf)}function Or(e){return gr(e,`Object`)&&e.type===`object`&&$n(e.$id)&&pr(e.properties)&&Yn(e.additionalProperties)&&Zn(e.minProperties)&&Zn(e.maxProperties)}function kr(e){return gr(e,`Promise`)&&e.type===`Promise`&&$n(e.$id)&&Ur(e.item)}function Ar(e){return gr(e,`Record`)&&e.type===`object`&&$n(e.$id)&&Yn(e.additionalProperties)&&gt(e.patternProperties)&&(e=>{let t=Object.getOwnPropertyNames(e.patternProperties);return t.length===1&&qn(t[0])&&gt(e.patternProperties)&&Ur(e.patternProperties[t[0]])})(e)}function jr(e){return gr(e,`Ref`)&&$n(e.$id)&&vt(e.$ref)}function Mr(e){return gr(e,`RegExp`)&&$n(e.$id)&&vt(e.source)&&vt(e.flags)&&Zn(e.maxLength)&&Zn(e.minLength)}function Nr(e){return gr(e,`String`)&&e.type===`string`&&$n(e.$id)&&Zn(e.minLength)&&Zn(e.maxLength)&&see(e.pattern)&&cee(e.format)}function Pr(e){return gr(e,`Symbol`)&&e.type===`symbol`&&$n(e.$id)}function Fr(e){return gr(e,`TemplateLiteral`)&&e.type===`string`&&vt(e.pattern)&&e.pattern[0]===`^`&&e.pattern[e.pattern.length-1]===`$`}function Ir(e){return gr(e,`This`)&&$n(e.$id)&&vt(e.$ref)}function lee(e){return gt(e)&&an in e}function Lr(e){return gr(e,`Tuple`)&&e.type===`array`&&$n(e.$id)&&ht(e.minItems)&&ht(e.maxItems)&&e.minItems===e.maxItems&&(xt(e.items)&&xt(e.additionalItems)&&e.minItems===0||ct(e.items)&&e.items.every(e=>Ur(e)))}function Rr(e){return gr(e,`Undefined`)&&e.type===`undefined`&&$n(e.$id)}function zr(e){return gr(e,`Union`)&&$n(e.$id)&&gt(e)&&ct(e.anyOf)&&e.anyOf.every(e=>Ur(e))}function Br(e){return gr(e,`Uint8Array`)&&e.type===`Uint8Array`&&$n(e.$id)&&Zn(e.minByteLength)&&Zn(e.maxByteLength)}function Vr(e){return gr(e,`Unknown`)&&$n(e.$id)}function uee(e){return gr(e,`Unsafe`)}function Hr(e){return gr(e,`Void`)&&e.type===`void`&&$n(e.$id)}function dee(e){return gt(e)&&M in e&&vt(e[M])&&!oee.includes(e[M])}function Ur(e){return gt(e)&&(nr(e)||rr(e)||ir(e)||sr(e)||or(e)||ar(e)||cr(e)||lr(e)||ur(e)||dr(e)||fr(e)||mr(e)||hr(e)||br(e)||Sr(e)||Cr(e)||wr(e)||Tr(e)||Er(e)||Dr(e)||Or(e)||kr(e)||Ar(e)||jr(e)||Mr(e)||Nr(e)||Pr(e)||Fr(e)||Ir(e)||Lr(e)||Rr(e)||zr(e)||Br(e)||Vr(e)||uee(e)||Hr(e)||dee(e))}const Wr=`(true|false)`,Gr=`(0|[1-9][0-9]*)`,Kr=`(.*)`;`${Wr}`;const qr=`^${Gr}$`,Jr=`^${Kr}$`;var Yr=new Map;function Xr(e){return Yr.has(e)}function Zr(e,t){Yr.set(e,t)}function Qr(e){return Yr.get(e)}var $r=new Map;function ei(e){return $r.has(e)}function fee(e,t){$r.set(e,t)}function ti(e){return $r.get(e)}function pee(e,t){return e.includes(t)}function mee(e){return[...new Set(e)]}function hee(e,t){return e.filter(e=>t.includes(e))}function gee(e,t){return e.reduce((e,t)=>hee(e,t),t)}function ni(e){return e.length===1?e[0]:e.length>1?gee(e.slice(1),e[0]):[]}function ri(e){let t=[];for(let n of e)t.push(...n);return t}function ii(e){return j({[M]:`Any`},e)}function ai(e,t){return j({[M]:`Array`,type:`array`,items:e},t)}function _ee(e){return j({[M]:`Argument`,index:e})}function oi(e,t){return j({[M]:`AsyncIterator`,type:`AsyncIterator`,items:e},t)}function si(e,t,n){return j({[M]:`Computed`,target:e,parameters:t},n)}function vee(e,t){let{[t]:n,...r}=e;return r}function ci(e,t){return t.reduce((e,t)=>vee(e,t),e)}function li(e){return j({[M]:`Never`,not:{}},e)}function ui(e){return j({[M]:`MappedResult`,properties:e})}function di(e,t,n){return j({[M]:`Constructor`,type:`Constructor`,parameters:e,returns:t},n)}function fi(e,t,n){return j({[M]:`Function`,type:`Function`,parameters:e,returns:t},n)}function pi(e,t){return j({[M]:`Union`,anyOf:e},t)}function mi(e){return e.some(e=>un(e))}function hi(e){return e.map(e=>un(e)?gi(e):e)}function gi(e){return ci(e,[sn])}function yee(e,t){return mi(e)?to(pi(hi(e),t)):pi(hi(e),t)}function _i(e,t){return e.length===1?j(e[0],t):e.length===0?li(t):yee(e,t)}function vi(e,t){return e.length===0?li(t):e.length===1?j(e[0],t):pi(e,t)}var yi=class extends rn{};function bi(e){return e.replace(/\\\$/g,`$`).replace(/\\\*/g,`*`).replace(/\\\^/g,`^`).replace(/\\\|/g,`|`).replace(/\\\(/g,`(`).replace(/\\\)/g,`)`)}function xi(e,t,n){return e[t]===n&&e.charCodeAt(t-1)!==92}function Si(e,t){return xi(e,t,`(`)}function Ci(e,t){return xi(e,t,`)`)}function wi(e,t){return xi(e,t,`|`)}function Ti(e){if(!(Si(e,0)&&Ci(e,e.length-1)))return!1;let t=0;for(let n=0;n<e.length;n++)if(Si(e,n)&&(t+=1),Ci(e,n)&&--t,t===0&&n!==e.length-1)return!1;return!0}function Ei(e){return e.slice(1,e.length-1)}function Di(e){let t=0;for(let n=0;n<e.length;n++)if(Si(e,n)&&(t+=1),Ci(e,n)&&--t,wi(e,n)&&t===0)return!0;return!1}function Oi(e){for(let t=0;t<e.length;t++)if(Si(e,t))return!0;return!1}function ki(e){let[t,n]=[0,0],r=[];for(let i=0;i<e.length;i++)if(Si(e,i)&&(t+=1),Ci(e,i)&&--t,wi(e,i)&&t===0){let t=e.slice(n,i);t.length>0&&r.push(ji(t)),n=i+1}let i=e.slice(n);return i.length>0&&r.push(ji(i)),r.length===0?{type:`const`,const:``}:r.length===1?r[0]:{type:`or`,expr:r}}function Ai(e){function t(e,t){if(!Si(e,t))throw new yi(`TemplateLiteralParser: Index must point to open parens`);let n=0;for(let r=t;r<e.length;r++)if(Si(e,r)&&(n+=1),Ci(e,r)&&--n,n===0)return[t,r];throw new yi(`TemplateLiteralParser: Unclosed group parens in expression`)}function n(e,t){for(let n=t;n<e.length;n++)if(Si(e,n))return[t,n];return[t,e.length]}let r=[];for(let i=0;i<e.length;i++)if(Si(e,i)){let[n,a]=t(e,i),o=e.slice(n,a+1);r.push(ji(o)),i=a}else{let[t,a]=n(e,i),o=e.slice(t,a);o.length>0&&r.push(ji(o)),i=a-1}return r.length===0?{type:`const`,const:``}:r.length===1?r[0]:{type:`and`,expr:r}}function ji(e){return Ti(e)?ji(Ei(e)):Di(e)?ki(e):Oi(e)?Ai(e):{type:`const`,const:bi(e)}}function Mi(e){return ji(e.slice(1,e.length-1))}var Ni=class extends rn{};function Pi(e){return e.type===`or`&&e.expr.length===2&&e.expr[0].type===`const`&&e.expr[0].const===`0`&&e.expr[1].type===`const`&&e.expr[1].const===`[1-9][0-9]*`}function Fi(e){return e.type===`or`&&e.expr.length===2&&e.expr[0].type===`const`&&e.expr[0].const===`true`&&e.expr[1].type===`const`&&e.expr[1].const===`false`}function Ii(e){return e.type===`const`&&e.const===`.*`}function Li(e){return Pi(e)||Ii(e)?!1:Fi(e)?!0:e.type===`and`||e.type===`or`?e.expr.every(e=>Li(e)):e.type===`const`?!0:(()=>{throw new Ni(`Unknown expression type`)})()}function Ri(e){return Li(Mi(e.pattern))}var zi=class extends rn{};function*Bi(e){if(e.length===1)return yield*e[0];for(let t of e[0])for(let n of Bi(e.slice(1)))yield`${t}${n}`}function*Vi(e){return yield*Bi(e.expr.map(e=>[...Wi(e)]))}function*Hi(e){for(let t of e.expr)yield*Wi(t)}function*Ui(e){return yield e.const}function*Wi(e){return e.type===`and`?yield*Vi(e):e.type===`or`?yield*Hi(e):e.type===`const`?yield*Ui(e):(()=>{throw new zi(`Unknown expression`)})()}function Gi(e){let t=Mi(e.pattern);return Li(t)?[...Wi(t)]:[]}function Ki(e,t){return j({[M]:`Literal`,const:e,type:typeof e},t)}function qi(e){return j({[M]:`Boolean`,type:`boolean`},e)}function Ji(e){return j({[M]:`BigInt`,type:`bigint`},e)}function Yi(e){return j({[M]:`Number`,type:`number`},e)}function Xi(e){return j({[M]:`String`,type:`string`},e)}function*Zi(e){let t=e.trim().replace(/"|'/g,``);return t===`boolean`?yield qi():t===`number`?yield Yi():t===`bigint`?yield Ji():t===`string`?yield Xi():yield(()=>{let e=t.split(`|`).map(e=>Ki(e.trim()));return e.length===0?li():e.length===1?e[0]:_i(e)})()}function*Qi(e){if(e[1]!==`{`)return yield*[Ki(`$`),...$i(e.slice(1))];for(let t=2;t<e.length;t++)if(e[t]===`}`){let n=Zi(e.slice(2,t)),r=$i(e.slice(t+1));return yield*[...n,...r]}yield Ki(e)}function*$i(e){for(let t=0;t<e.length;t++)if(e[t]===`$`)return yield*[Ki(e.slice(0,t)),...Qi(e.slice(t))];yield Ki(e)}function ea(e){return[...$i(e)]}var ta=class extends rn{};function na(e){return e.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`)}function ra(e,t){return Rn(e)?e.pattern.slice(1,e.pattern.length-1):Un(e)?`(${e.anyOf.map(e=>ra(e,t)).join(`|`)})`:An(e)||bn(e)||hn(e)?`${t}${Gr}`:In(e)?`${t}${Kr}`:Tn(e)?`${t}${na(e.const.toString())}`:gn(e)?`${t}${Wr}`:(()=>{throw new ta(`Unexpected Kind '${e[M]}'`)})()}function ia(e){return`^${e.map(e=>ra(e,``)).join(``)}\$`}function aa(e){return _i(Gi(e).map(e=>Ki(e)))}function oa(e,t){let n=vt(e)?ia(ea(e)):ia(e);return j({[M]:`TemplateLiteral`,type:`string`,pattern:n},t)}function sa(e){return Gi(e).map(e=>e.toString())}function ca(e){let t=[];for(let n of e)t.push(...ua(n));return t}function la(e){return[e.toString()]}function ua(e){return[...new Set(Rn(e)?sa(e):Un(e)?ca(e.anyOf):Tn(e)?la(e.const):An(e)||bn(e)?[`[number]`]:[])]}function da(e,t,n){let r={};for(let i of Object.getOwnPropertyNames(t))r[i]=Ta(e,ua(t[i]),n);return r}function fa(e,t,n){return da(e,t.properties,n)}function pa(e,t,n){return ui(fa(e,t,n))}function ma(e,t){return e.map(e=>Sa(e,t))}function ha(e){return e.filter(e=>!On(e))}function ga(e,t){return io(ha(ma(e,t)))}function _a(e){return e.some(e=>On(e))?[]:e}function va(e,t){return _i(_a(ma(e,t)))}function ya(e,t){return t in e?e[t]:t===`[number]`?_i(e):li()}function ba(e,t){return t===`[number]`?e:li()}function xa(e,t){return t in e?e[t]:li()}function Sa(e,t){return xn(e)?ga(e.allOf,t):Un(e)?va(e.anyOf,t):Vn(e)?ya(e.items??[],t):pn(e)?ba(e.items,t):jn(e)?xa(e.properties,t):li()}function Ca(e,t){return t.map(t=>Sa(e,t))}function wa(e,t){return _i(Ca(e,t))}function Ta(e,t,n){if(Pn(e)||Pn(t)){if(!Kn(e)||!Kn(t))throw new rn(`Index types using Ref parameters require both Type and Key to be of TSchema`);return si(`Index`,[e,t])}return Dn(t)?pa(e,t,n):En(t)?ka(e,t,n):j(Kn(t)?wa(e,ua(t)):wa(e,t),n)}function Ea(e,t,n){return{[t]:Ta(e,[t],Ot(n))}}function Da(e,t,n){return t.reduce((t,r)=>({...t,...Ea(e,r,n)}),{})}function Oa(e,t,n){return Da(e,t.keys,n)}function ka(e,t,n){return ui(Oa(e,t,n))}function Aa(e,t){return j({[M]:`Iterator`,type:`Iterator`,items:e},t)}function ja(e){let t=[];for(let n in e)un(e[n])||t.push(n);return t}function Ma(e,t){let n=ja(e);return j(n.length>0?{[M]:`Object`,type:`object`,properties:e,required:n}:{[M]:`Object`,type:`object`,properties:e},t)}var Na=Ma;function Pa(e,t){return j({[M]:`Promise`,type:`Promise`,item:e},t)}function Fa(e){return j(ci(e,[on]))}function Ia(e){return j({...e,[on]:`Readonly`})}function La(e,t){return t===!1?Fa(e):Ia(e)}function Ra(e,t){let n=t??!0;return Dn(e)?Va(e,n):La(e,n)}function za(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=Ra(e[r],t);return n}function Ba(e,t){return za(e.properties,t)}function Va(e,t){return ui(Ba(e,t))}function Ha(e,t){return j(e.length>0?{[M]:`Tuple`,type:`array`,items:e,additionalItems:!1,minItems:e.length,maxItems:e.length}:{[M]:`Tuple`,type:`array`,minItems:e.length,maxItems:e.length},t)}function Ua(e,t){return e in t?Xa(e,t[e]):ui(t)}function Wa(e){return{[e]:Ki(e)}}function Ga(e){let t={};for(let n of e)t[n]=Ki(n);return t}function Ka(e,t){return pee(t,e)?Wa(e):Ga(t)}function qa(e,t){return Ua(e,Ka(e,t))}function Ja(e,t){return t.map(t=>Xa(e,t))}function Ya(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=Xa(e,t[r]);return n}function Xa(e,t){let n={...t};return un(t)?to(Xa(e,ci(t,[sn]))):ln(t)?Ra(Xa(e,ci(t,[on]))):Dn(t)?Ua(e,t.properties):En(t)?qa(e,t.keys):vn(t)?di(Ja(e,t.parameters),Xa(e,t.returns),n):yn(t)?fi(Ja(e,t.parameters),Xa(e,t.returns),n):mn(t)?oi(Xa(e,t.items),n):Sn(t)?Aa(Xa(e,t.items),n):xn(t)?ao(Ja(e,t.allOf),n):Un(t)?vi(Ja(e,t.anyOf),n):Vn(t)?Ha(Ja(e,t.items??[]),n):jn(t)?Na(Ya(e,t.properties),n):pn(t)?ai(Xa(e,t.items),n):Mn(t)?Pa(Xa(e,t.item),n):t}function Za(e,t){let n={};for(let r of e)n[r]=Xa(r,t);return n}function Qa(e,t,n){let r=Kn(e)?ua(e):e;return Na(Za(r,t({[M]:`MappedKey`,keys:r})),n)}function $a(e){return j(ci(e,[sn]))}function eo(e){return j({...e,[sn]:`Optional`})}function bee(e,t){return t===!1?$a(e):eo(e)}function to(e,t){let n=t??!0;return Dn(e)?Cee(e,n):bee(e,n)}function xee(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=to(e[r],t);return n}function See(e,t){return xee(e.properties,t)}function Cee(e,t){return ui(See(e,t))}function no(e,t={}){let n=e.every(e=>jn(e)),r=Kn(t.unevaluatedProperties)?{unevaluatedProperties:t.unevaluatedProperties}:{};return j(t.unevaluatedProperties===!1||Kn(t.unevaluatedProperties)||n?{...r,[M]:`Intersect`,type:`object`,allOf:e}:{...r,[M]:`Intersect`,allOf:e},t)}function wee(e){return e.every(e=>un(e))}function Tee(e){return ci(e,[sn])}function ro(e){return e.map(e=>un(e)?Tee(e):e)}function Eee(e,t){return wee(e)?to(no(ro(e),t)):no(ro(e),t)}function io(e,t={}){if(e.length===1)return j(e[0],t);if(e.length===0)return li(t);if(e.some(e=>Bn(e)))throw Error(`Cannot intersect transform types`);return Eee(e,t)}function ao(e,t){if(e.length===1)return j(e[0],t);if(e.length===0)return li(t);if(e.some(e=>Bn(e)))throw Error(`Cannot intersect transform types`);return no(e,t)}function oo(...e){let[t,n]=typeof e[0]==`string`?[e[0],e[1]]:[e[0].$id,e[1]];if(typeof t!=`string`)throw new rn(`Ref: $ref must be a string`);return j({[M]:`Ref`,$ref:t},n)}function Dee(e,t){return si(`Awaited`,[si(e,t)])}function Oee(e){return si(`Awaited`,[oo(e)])}function kee(e){return ao(so(e))}function Aee(e){return vi(so(e))}function jee(e){return co(e)}function so(e){return e.map(e=>co(e))}function co(e,t){return j(_n(e)?Dee(e.target,e.parameters):xn(e)?kee(e.allOf):Un(e)?Aee(e.anyOf):Mn(e)?jee(e.item):Pn(e)?Oee(e.$ref):e,t)}function lo(e){let t=[];for(let n of e)t.push(uo(n));return t}function Mee(e){return ri(lo(e))}function Nee(e){return ni(lo(e))}function Pee(e){return e.map((e,t)=>t.toString())}function Fee(e){return[`[number]`]}function Iee(e){return globalThis.Object.getOwnPropertyNames(e)}function Lee(e){return fo?globalThis.Object.getOwnPropertyNames(e).map(e=>e[0]===`^`&&e[e.length-1]===`$`?e.slice(1,e.length-1):e):[]}function uo(e){return xn(e)?Mee(e.allOf):Un(e)?Nee(e.anyOf):Vn(e)?Pee(e.items??[]):pn(e)?Fee(e.items):jn(e)?Iee(e.properties):Nn(e)?Lee(e.patternProperties):[]}var fo=!1;function po(e){fo=!0;let t=uo(e);return fo=!1,`^(${t.map(e=>`(${e})`).join(`|`)})$`}function Ree(e,t){return si(`KeyOf`,[si(e,t)])}function zee(e){return si(`KeyOf`,[oo(e)])}function Bee(e,t){return j(_i(Vee(uo(e))),t)}function Vee(e){return e.map(e=>e===`[number]`?Yi():Ki(e))}function mo(e,t){return _n(e)?Ree(e.target,e.parameters):Pn(e)?zee(e.$ref):Dn(e)?Wee(e,t):Bee(e,t)}function Hee(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=mo(e[r],Ot(t));return n}function Uee(e,t){return Hee(e.properties,t)}function Wee(e,t){return ui(Uee(e,t))}function ho(e){let t=uo(e),n=Ca(e,t);return t.map((e,r)=>[t[r],n[r]])}function Gee(e){let t=[];for(let n of e)t.push(...uo(n));return mee(t)}function Kee(e){return e.filter(e=>!On(e))}function qee(e,t){let n=[];for(let r of e)n.push(...Ca(r,[t]));return Kee(n)}function Jee(e,t){let n={};for(let r of t)n[r]=io(qee(e,r));return n}function Yee(e,t){return Na(Jee(e,Gee(e)),t)}function go(e){return j({[M]:`Date`,type:`Date`},e)}function _o(e){return j({[M]:`Null`,type:`null`},e)}function vo(e){return j({[M]:`Symbol`,type:`symbol`},e)}function yo(e){return j({[M]:`Undefined`,type:`undefined`},e)}function bo(e){return j({[M]:`Uint8Array`,type:`Uint8Array`},e)}function xo(e){return j({[M]:`Unknown`},e)}function Xee(e){return e.map(e=>Co(e,!1))}function Zee(e){let t={};for(let n of globalThis.Object.getOwnPropertyNames(e))t[n]=Ra(Co(e[n],!1));return t}function So(e,t){return t===!0?e:Ra(e)}function Co(e,t){return st(e)||pt(e)?So(ii(),t):ct(e)?Ra(Ha(Xee(e))):bt(e)?bo():dt(e)?go():gt(e)?So(Na(Zee(e)),t):ft(e)?So(fi([],xo()),t):xt(e)?yo():mt(e)?_o():yt(e)?vo():lt(e)?Ji():ht(e)||ut(e)||vt(e)?Ki(e):Na({})}function Qee(e,t){return j(Co(e,!0),t)}function $ee(e,t){return vn(e)?Ha(e.parameters,t):li(t)}function ete(e,t){if(xt(e))throw Error(`Enum undefined or empty`);let n=globalThis.Object.getOwnPropertyNames(e).filter(e=>isNaN(e)).map(t=>e[t]);return vi([...new Set(n)].map(e=>Ki(e)),{...t,[cn]:`Enum`})}var tte=class extends rn{},N;(function(e){e[e.Union=0]=`Union`,e[e.True=1]=`True`,e[e.False=2]=`False`})(N||={});function wo(e){return e===N.False?e:N.True}function To(e){throw new tte(e)}function Eo(e){return wr(e)||mr(e)||zr(e)||Vr(e)||nr(e)}function Do(e,t){return wr(t)?Mo(e,t):mr(t)?jo(e,t):zr(t)?Yo(e,t):Vr(t)?Xo(e,t):nr(t)?Oo(e,t):To(`StructuralRight`)}function Oo(e,t){return N.True}function nte(e,t){return mr(t)?jo(e,t):zr(t)&&t.anyOf.some(e=>nr(e)||Vr(e))?N.True:zr(t)?N.Union:Vr(t)||nr(t)?N.True:N.Union}function rte(e,t){return Vr(e)?N.False:nr(e)?N.Union:wr(e)?N.True:N.False}function ite(e,t){return Or(t)&&Bo(t)?N.True:Eo(t)?Do(e,t):ir(t)?wo($o(e.items,t.items)):N.False}function ate(e,t){return Eo(t)?Do(e,t):ar(t)?wo($o(e.items,t.items)):N.False}function ote(e,t){return Eo(t)?Do(e,t):Or(t)?Ho(e,t):Ar(t)?Go(e,t):or(t)?N.True:N.False}function ko(e,t){return yr(e)||sr(e)?N.True:N.False}function ste(e,t){return Eo(t)?Do(e,t):Or(t)?Ho(e,t):Ar(t)?Go(e,t):sr(t)?N.True:N.False}function cte(e,t){return Eo(t)?Do(e,t):Or(t)?Ho(e,t):lr(t)?e.parameters.length>t.parameters.length?N.False:e.parameters.every((e,n)=>wo($o(t.parameters[n],e))===N.True)?wo($o(e.returns,t.returns)):N.False:N.False}function lte(e,t){return Eo(t)?Do(e,t):Or(t)?Ho(e,t):Ar(t)?Go(e,t):ur(t)?N.True:N.False}function ute(e,t){return Eo(t)?Do(e,t):Or(t)?Ho(e,t):dr(t)?e.parameters.length>t.parameters.length?N.False:e.parameters.every((e,n)=>wo($o(t.parameters[n],e))===N.True)?wo($o(e.returns,t.returns)):N.False:N.False}function Ao(e,t){return br(e)&&ht(e.const)||Dr(e)||fr(e)?N.True:N.False}function dte(e,t){return fr(t)||Dr(t)?N.True:Eo(t)?Do(e,t):Or(t)?Ho(e,t):Ar(t)?Go(e,t):N.False}function jo(e,t){return t.allOf.every(t=>$o(e,t)===N.True)?N.True:N.False}function fte(e,t){return e.allOf.some(e=>$o(e,t)===N.True)?N.True:N.False}function pte(e,t){return Eo(t)?Do(e,t):hr(t)?wo($o(e.items,t.items)):N.False}function mte(e,t){return br(t)&&t.const===e.const?N.True:Eo(t)?Do(e,t):Or(t)?Ho(e,t):Ar(t)?Go(e,t):Nr(t)?Ko(e,t):Dr(t)?Po(e,t):fr(t)?Ao(e,t):sr(t)?ko(e,t):N.False}function Mo(e,t){return N.False}function hte(e,t){return N.True}function No(e){let[t,n]=[e,0];for(;Tr(t);)t=t.not,n+=1;return n%2==0?t:xo()}function gte(e,t){return Tr(e)?$o(No(e),t):Tr(t)?$o(e,No(t)):To(`Invalid fallthrough for Not`)}function _te(e,t){return Eo(t)?Do(e,t):Or(t)?Ho(e,t):Ar(t)?Go(e,t):Er(t)?N.True:N.False}function Po(e,t){return vr(e)||Dr(e)||fr(e)?N.True:N.False}function vte(e,t){return Eo(t)?Do(e,t):Or(t)?Ho(e,t):Ar(t)?Go(e,t):fr(t)||Dr(t)?N.True:N.False}function Fo(e,t){return Object.getOwnPropertyNames(e.properties).length===t}function Io(e){return Bo(e)}function Lo(e){return Fo(e,0)||Fo(e,1)&&`description`in e.properties&&zr(e.properties.description)&&e.properties.description.anyOf.length===2&&(Nr(e.properties.description.anyOf[0])&&Rr(e.properties.description.anyOf[1])||Nr(e.properties.description.anyOf[1])&&Rr(e.properties.description.anyOf[0]))}function Ro(e){return Fo(e,0)}function zo(e){return Fo(e,0)}function yte(e){return Fo(e,0)}function bte(e){return Fo(e,0)}function xte(e){return Bo(e)}function Ste(e){let t=Yi();return Fo(e,0)||Fo(e,1)&&`length`in e.properties&&wo($o(e.properties.length,t))===N.True}function Cte(e){return Fo(e,0)}function Bo(e){let t=Yi();return Fo(e,0)||Fo(e,1)&&`length`in e.properties&&wo($o(e.properties.length,t))===N.True}function wte(e){let t=fi([ii()],ii());return Fo(e,0)||Fo(e,1)&&`then`in e.properties&&wo($o(e.properties.then,t))===N.True}function Vo(e,t){return $o(e,t)===N.False||tr(e)&&!tr(t)?N.False:N.True}function Ho(e,t){return Vr(e)?N.False:nr(e)?N.Union:wr(e)||_r(e)&&Io(t)||vr(e)&&Ro(t)||yr(e)&&zo(t)||Pr(e)&&Lo(t)||or(e)&&yte(t)||Nr(e)&&Io(t)||Pr(e)&&Lo(t)||Dr(e)&&Ro(t)||fr(e)&&Ro(t)||sr(e)&&zo(t)||Br(e)&&xte(t)||ur(e)&&bte(t)||lr(e)&&Cte(t)||dr(e)&&Ste(t)?N.True:Ar(e)&&Nr(Uo(e))?(()=>t[cn]===`Record`?N.True:N.False)():Ar(e)&&Dr(Uo(e))?(()=>Fo(t,0)?N.True:N.False)():N.False}function Tte(e,t){return Eo(t)?Do(e,t):Ar(t)?Go(e,t):Or(t)?(()=>{for(let n of Object.getOwnPropertyNames(t.properties)){if(!(n in e.properties)&&!tr(t.properties[n]))return N.False;if(tr(t.properties[n]))return N.True;if(Vo(e.properties[n],t.properties[n])===N.False)return N.False}return N.True})():N.False}function Ete(e,t){return Eo(t)?Do(e,t):Or(t)&&wte(t)?N.True:kr(t)?wo($o(e.item,t.item)):N.False}function Uo(e){return qr in e.patternProperties?Yi():Jr in e.patternProperties?Xi():To(`Unknown record key pattern`)}function Wo(e){return qr in e.patternProperties?e.patternProperties[qr]:Jr in e.patternProperties?e.patternProperties[Jr]:To(`Unable to get record value schema`)}function Go(e,t){let[n,r]=[Uo(t),Wo(t)];return _r(e)&&Dr(n)&&wo($o(e,r))===N.True?N.True:Br(e)&&Dr(n)||Nr(e)&&Dr(n)||ir(e)&&Dr(n)?$o(e,r):Or(e)?(()=>{for(let t of Object.getOwnPropertyNames(e.properties))if(Vo(r,e.properties[t])===N.False)return N.False;return N.True})():N.False}function Dte(e,t){return Eo(t)?Do(e,t):Or(t)?Ho(e,t):Ar(t)?$o(Wo(e),Wo(t)):N.False}function Ote(e,t){return $o(Mr(e)?Xi():e,Mr(t)?Xi():t)}function Ko(e,t){return br(e)&&vt(e.const)||Nr(e)?N.True:N.False}function kte(e,t){return Eo(t)?Do(e,t):Or(t)?Ho(e,t):Ar(t)?Go(e,t):Nr(t)?N.True:N.False}function Ate(e,t){return Eo(t)?Do(e,t):Or(t)?Ho(e,t):Ar(t)?Go(e,t):Pr(t)?N.True:N.False}function jte(e,t){return Fr(e)?$o(aa(e),t):Fr(t)?$o(e,aa(t)):To(`Invalid fallthrough for TemplateLiteral`)}function Mte(e,t){return ir(t)&&e.items!==void 0&&e.items.every(e=>$o(e,t.items)===N.True)}function Nte(e,t){return wr(e)?N.True:Vr(e)?N.False:nr(e)?N.Union:N.False}function Pte(e,t){return Eo(t)?Do(e,t):Or(t)&&Bo(t)||ir(t)&&Mte(e,t)?N.True:Lr(t)?xt(e.items)&&!xt(t.items)||!xt(e.items)&&xt(t.items)?N.False:xt(e.items)&&!xt(t.items)||e.items.every((e,n)=>$o(e,t.items[n])===N.True)?N.True:N.False:N.False}function qo(e,t){return Eo(t)?Do(e,t):Or(t)?Ho(e,t):Ar(t)?Go(e,t):Br(t)?N.True:N.False}function Jo(e,t){return Eo(t)?Do(e,t):Or(t)?Ho(e,t):Ar(t)?Go(e,t):Hr(t)?Zo(e,t):Rr(t)?N.True:N.False}function Yo(e,t){return t.anyOf.some(t=>$o(e,t)===N.True)?N.True:N.False}function Fte(e,t){return e.anyOf.every(e=>$o(e,t)===N.True)?N.True:N.False}function Xo(e,t){return N.True}function Ite(e,t){return wr(t)?Mo(e,t):mr(t)?jo(e,t):zr(t)?Yo(e,t):nr(t)?Oo(e,t):Nr(t)?Ko(e,t):Dr(t)?Po(e,t):fr(t)?Ao(e,t):sr(t)?ko(e,t):ir(t)?rte(e,t):Lr(t)?Nte(e,t):Or(t)?Ho(e,t):Vr(t)?N.True:N.False}function Zo(e,t){return Rr(e)||Rr(e)?N.True:N.False}function Qo(e,t){return mr(t)?jo(e,t):zr(t)?Yo(e,t):Vr(t)?Xo(e,t):nr(t)?Oo(e,t):Or(t)?Ho(e,t):Hr(t)?N.True:N.False}function $o(e,t){return Fr(e)||Fr(t)?jte(e,t):Mr(e)||Mr(t)?Ote(e,t):Tr(e)||Tr(t)?gte(e,t):nr(e)?nte(e,t):ir(e)?ite(e,t):or(e)?ote(e,t):sr(e)?ste(e,t):ar(e)?ate(e,t):lr(e)?cte(e,t):ur(e)?lte(e,t):dr(e)?ute(e,t):fr(e)?dte(e,t):mr(e)?fte(e,t):hr(e)?pte(e,t):br(e)?mte(e,t):wr(e)?hte(e,t):Er(e)?_te(e,t):Dr(e)?vte(e,t):Or(e)?Tte(e,t):Ar(e)?Dte(e,t):Nr(e)?kte(e,t):Pr(e)?Ate(e,t):Lr(e)?Pte(e,t):kr(e)?Ete(e,t):Br(e)?qo(e,t):Rr(e)?Jo(e,t):zr(e)?Fte(e,t):Vr(e)?Ite(e,t):Hr(e)?Qo(e,t):To(`Unknown left type operand '${e[M]}'`)}function es(e,t){return $o(e,t)}function ts(e,t,n,r,i){let a={};for(let o of globalThis.Object.getOwnPropertyNames(e))a[o]=as(e[o],t,n,r,Ot(i));return a}function ns(e,t,n,r,i){return ts(e.properties,t,n,r,i)}function rs(e,t,n,r,i){return ui(ns(e,t,n,r,i))}function is(e,t,n,r){let i=es(e,t);return i===N.Union?vi([n,r]):i===N.True?n:r}function as(e,t,n,r,i){return Dn(e)?rs(e,t,n,r,i):En(e)?j(ls(e,t,n,r,i)):j(is(e,t,n,r),i)}function os(e,t,n,r,i){return{[e]:as(Ki(e),t,n,r,Ot(i))}}function ss(e,t,n,r,i){return e.reduce((e,a)=>({...e,...os(a,t,n,r,i)}),{})}function cs(e,t,n,r,i){return ss(e.keys,t,n,r,i)}function ls(e,t,n,r,i){return ui(cs(e,t,n,r,i))}function us(e){return e.allOf.every(e=>ps(e))}function ds(e){return e.anyOf.some(e=>ps(e))}function fs(e){return!ps(e.not)}function ps(e){return e[M]===`Intersect`?us(e):e[M]===`Union`?ds(e):e[M]===`Not`?fs(e):e[M]===`Undefined`}function ms(e,t){return hs(aa(e),t)}function Lte(e,t){let n=e.filter(e=>es(e,t)===N.False);return n.length===1?n[0]:vi(n)}function hs(e,t,n={}){return Rn(e)?j(ms(e,t),n):Dn(e)?j(vs(e,t),n):j(Un(e)?Lte(e.anyOf,t):es(e,t)===N.False?e:li(),n)}function gs(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=hs(e[r],t);return n}function _s(e,t){return gs(e.properties,t)}function vs(e,t){return ui(_s(e,t))}function ys(e,t){return xs(aa(e),t)}function bs(e,t){let n=e.filter(e=>es(e,t)!==N.False);return n.length===1?n[0]:vi(n)}function xs(e,t,n){return Rn(e)?j(ys(e,t),n):Dn(e)?j(ws(e,t),n):j(Un(e)?bs(e.anyOf,t):es(e,t)===N.False?li():e,n)}function Ss(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=xs(e[r],t);return n}function Cs(e,t){return Ss(e.properties,t)}function ws(e,t){return ui(Cs(e,t))}function Rte(e,t){return vn(e)?j(e.returns,t):li(t)}function Ts(e){return Ra(to(e))}function Es(e,t,n){return j({[M]:`Record`,type:`object`,patternProperties:{[e]:t}},n)}function Ds(e,t,n){let r={};for(let n of e)r[n]=t;return Na(r,{...n,[cn]:`Record`})}function zte(e,t,n){return Ri(e)?Ds(ua(e),t,n):Es(e.pattern,t,n)}function Bte(e,t,n){return Ds(ua(vi(e)),t,n)}function Vte(e,t,n){return Ds([e.toString()],t,n)}function Hte(e,t,n){return Es(e.source,t,n)}function Ute(e,t,n){return Es(xt(e.pattern)?Jr:e.pattern,t,n)}function Wte(e,t,n){return Es(Jr,t,n)}function Gte(e,t,n){return Es(`^(?!.*)$`,t,n)}function Kte(e,t,n){return Na({true:t,false:t},n)}function qte(e,t,n){return Es(qr,t,n)}function Jte(e,t,n){return Es(qr,t,n)}function Os(e,t,n={}){return Un(e)?Bte(e.anyOf,t,n):Rn(e)?zte(e,t,n):Tn(e)?Vte(e.const,t,n):gn(e)?Kte(e,t,n):bn(e)?qte(e,t,n):An(e)?Jte(e,t,n):Fn(e)?Hte(e,t,n):In(e)?Ute(e,t,n):dn(e)?Wte(e,t,n):On(e)?Gte(e,t,n):li(n)}function ks(e){return globalThis.Object.getOwnPropertyNames(e.patternProperties)[0]}function As(e){let t=ks(e);return t===Jr?Xi():t===qr?Yi():Xi({pattern:t})}function js(e){return e.patternProperties[ks(e)]}function Ms(e,t){return t.parameters=Ks(e,t.parameters),t.returns=qs(e,t.returns),t}function Ns(e,t){return t.parameters=Ks(e,t.parameters),t.returns=qs(e,t.returns),t}function Ps(e,t){return t.allOf=Ks(e,t.allOf),t}function Fs(e,t){return t.anyOf=Ks(e,t.anyOf),t}function Is(e,t){return xt(t.items)||(t.items=Ks(e,t.items)),t}function Ls(e,t){return t.items=qs(e,t.items),t}function Rs(e,t){return t.items=qs(e,t.items),t}function zs(e,t){return t.items=qs(e,t.items),t}function Bs(e,t){return t.item=qs(e,t.item),t}function Vs(e,t){let n=Gs(e,t.properties);return{...t,...Na(n)}}function Hs(e,t){let n=Os(qs(e,As(t)),qs(e,js(t)));return{...t,...n}}function Us(e,t){return t.index in e?e[t.index]:xo()}function Ws(e,t){let n=ln(t),r=un(t),i=qs(e,t);return n&&r?Ts(i):n&&!r?Ra(i):!n&&r?to(i):i}function Gs(e,t){return globalThis.Object.getOwnPropertyNames(t).reduce((n,r)=>({...n,[r]:Ws(e,t[r])}),{})}function Ks(e,t){return t.map(t=>qs(e,t))}function qs(e,t){return vn(t)?Ms(e,t):yn(t)?Ns(e,t):xn(t)?Ps(e,t):Un(t)?Fs(e,t):Vn(t)?Is(e,t):pn(t)?Ls(e,t):mn(t)?Rs(e,t):Sn(t)?zs(e,t):Mn(t)?Bs(e,t):jn(t)?Vs(e,t):Nn(t)?Hs(e,t):fn(t)?Us(e,t):t}function Js(e,t){return qs(t,kt(e))}function Ys(e){return j({[M]:`Integer`,type:`integer`},e)}function Xs(e,t,n){return{[e]:sc(Ki(e),t,Ot(n))}}function Zs(e,t,n){return e.reduce((e,r)=>({...e,...Xs(r,t,n)}),{})}function Qs(e,t,n){return Zs(e.keys,t,n)}function $s(e,t,n){return ui(Qs(e,t,n))}function ec(e){let[t,n]=[e.slice(0,1),e.slice(1)];return[t.toLowerCase(),n].join(``)}function tc(e){let[t,n]=[e.slice(0,1),e.slice(1)];return[t.toUpperCase(),n].join(``)}function nc(e){return e.toUpperCase()}function rc(e){return e.toLowerCase()}function ic(e,t,n){let r=Mi(e.pattern);return Li(r)?oa([vi(oc([...Wi(r)].map(e=>Ki(e)),t))],n):{...e,pattern:ac(e.pattern,t)}}function ac(e,t){return typeof e==`string`?t===`Uncapitalize`?ec(e):t===`Capitalize`?tc(e):t===`Uppercase`?nc(e):t===`Lowercase`?rc(e):e:e.toString()}function oc(e,t){return e.map(e=>sc(e,t))}function sc(e,t,n={}){return En(e)?$s(e,t,n):Rn(e)?ic(e,t,n):Un(e)?vi(oc(e.anyOf,t),n):Tn(e)?Ki(ac(e.const,t),n):j(e,n)}function cc(e,t={}){return sc(e,`Capitalize`,t)}function lc(e,t={}){return sc(e,`Lowercase`,t)}function uc(e,t={}){return sc(e,`Uncapitalize`,t)}function dc(e,t={}){return sc(e,`Uppercase`,t)}function fc(e,t,n){let r={};for(let i of globalThis.Object.getOwnPropertyNames(e))r[i]=Sc(e[i],t,Ot(n));return r}function pc(e,t,n){return fc(e.properties,t,n)}function mc(e,t,n){return ui(pc(e,t,n))}function hc(e,t){return e.map(e=>xc(e,t))}function gc(e,t){return e.map(e=>xc(e,t))}function _c(e,t){let{[t]:n,...r}=e;return r}function vc(e,t){return t.reduce((e,t)=>_c(e,t),e)}function yc(e,t){let n=ci(e,[an,`$id`,`required`,`properties`]);return Na(vc(e.properties,t),n)}function bc(e){return vi(e.reduce((e,t)=>wn(t)?[...e,Ki(t)]:e,[]))}function xc(e,t){return xn(e)?ao(hc(e.allOf,t)):Un(e)?vi(gc(e.anyOf,t)):jn(e)?yc(e,t):Na({})}function Sc(e,t,n){let r=ct(t)?bc(t):t,i=Kn(t)?ua(t):t,a=Pn(e),o=Pn(t);return Dn(e)?mc(e,i,n):En(t)?Ec(e,t,n):a&&o||!a&&o||a&&!o?si(`Omit`,[e,r],n):j({...xc(e,i),...n})}function Cc(e,t,n){return{[t]:Sc(e,[t],Ot(n))}}function wc(e,t,n){return t.reduce((t,r)=>({...t,...Cc(e,r,n)}),{})}function Tc(e,t,n){return wc(e,t.keys,n)}function Ec(e,t,n){return ui(Tc(e,t,n))}function Dc(e,t,n){let r={};for(let i of globalThis.Object.getOwnPropertyNames(e))r[i]=Ic(e[i],t,Ot(n));return r}function Oc(e,t,n){return Dc(e.properties,t,n)}function kc(e,t,n){return ui(Oc(e,t,n))}function Ac(e,t){return e.map(e=>Fc(e,t))}function jc(e,t){return e.map(e=>Fc(e,t))}function Mc(e,t){let n={};for(let r of t)r in e&&(n[r]=e[r]);return n}function Nc(e,t){let n=ci(e,[an,`$id`,`required`,`properties`]);return Na(Mc(e.properties,t),n)}function Pc(e){return vi(e.reduce((e,t)=>wn(t)?[...e,Ki(t)]:e,[]))}function Fc(e,t){return xn(e)?ao(Ac(e.allOf,t)):Un(e)?vi(jc(e.anyOf,t)):jn(e)?Nc(e,t):Na({})}function Ic(e,t,n){let r=ct(t)?Pc(t):t,i=Kn(t)?ua(t):t,a=Pn(e),o=Pn(t);return Dn(e)?kc(e,i,n):En(t)?Bc(e,t,n):a&&o||!a&&o||a&&!o?si(`Pick`,[e,r],n):j({...Fc(e,i),...n})}function Lc(e,t,n){return{[t]:Ic(e,[t],Ot(n))}}function Rc(e,t,n){return t.reduce((t,r)=>({...t,...Lc(e,r,n)}),{})}function zc(e,t,n){return Rc(e,t.keys,n)}function Bc(e,t,n){return ui(zc(e,t,n))}function Vc(e,t){return si(`Partial`,[si(e,t)])}function Hc(e){return si(`Partial`,[oo(e)])}function Uc(e){let t={};for(let n of globalThis.Object.getOwnPropertyNames(e))t[n]=to(e[n]);return t}function Wc(e){let t=ci(e,[an,`$id`,`required`,`properties`]);return Na(Uc(e.properties),t)}function Gc(e){return e.map(e=>Kc(e))}function Kc(e){return _n(e)?Vc(e.target,e.parameters):Pn(e)?Hc(e.$ref):xn(e)?ao(Gc(e.allOf)):Un(e)?vi(Gc(e.anyOf)):jn(e)?Wc(e):hn(e)||gn(e)||bn(e)||Tn(e)||kn(e)||An(e)||In(e)||Ln(e)||Hn(e)?e:Na({})}function qc(e,t){return Dn(e)?Xc(e,t):j({...Kc(e),...t})}function Jc(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=qc(e[r],Ot(t));return n}function Yc(e,t){return Jc(e.properties,t)}function Xc(e,t){return ui(Yc(e,t))}function Zc(e,t){return si(`Required`,[si(e,t)])}function Qc(e){return si(`Required`,[oo(e)])}function Yte(e){let t={};for(let n of globalThis.Object.getOwnPropertyNames(e))t[n]=ci(e[n],[sn]);return t}function Xte(e){let t=ci(e,[an,`$id`,`required`,`properties`]);return Na(Yte(e.properties),t)}function $c(e){return e.map(e=>el(e))}function el(e){return _n(e)?Zc(e.target,e.parameters):Pn(e)?Qc(e.$ref):xn(e)?ao($c(e.allOf)):Un(e)?vi($c(e.anyOf)):jn(e)?Xte(e):hn(e)||gn(e)||bn(e)||Tn(e)||kn(e)||An(e)||In(e)||Ln(e)||Hn(e)?e:Na({})}function tl(e,t){return Dn(e)?$te(e,t):j({...el(e),...t})}function Zte(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=tl(e[r],t);return n}function Qte(e,t){return Zte(e.properties,t)}function $te(e,t){return ui(Qte(e,t))}function ene(e,t){return t.map(t=>Pn(t)?nl(e,t.$ref):xl(e,t))}function nl(e,t){return t in e?Pn(e[t])?nl(e,e[t].$ref):xl(e,e[t]):li()}function tne(e){return co(e[0])}function nne(e){return Ta(e[0],e[1])}function rl(e){return mo(e[0])}function il(e){return qc(e[0])}function al(e){return Sc(e[0],e[1])}function ol(e){return Ic(e[0],e[1])}function sl(e){return tl(e[0])}function cl(e,t,n){let r=ene(e,n);return t===`Awaited`?tne(r):t===`Index`?nne(r):t===`KeyOf`?rl(r):t===`Partial`?il(r):t===`Omit`?al(r):t===`Pick`?ol(r):t===`Required`?sl(r):li()}function ll(e,t){return ai(xl(e,t))}function ul(e,t){return oi(xl(e,t))}function dl(e,t,n){return di(bl(e,t),xl(e,n))}function fl(e,t,n){return fi(bl(e,t),xl(e,n))}function pl(e,t){return ao(bl(e,t))}function ml(e,t){return Aa(xl(e,t))}function hl(e,t){return Na(globalThis.Object.keys(t).reduce((n,r)=>({...n,[r]:xl(e,t[r])}),{}))}function gl(e,t){let[n,r]=[xl(e,js(t)),ks(t)],i=kt(t);return i.patternProperties[r]=n,i}function _l(e,t){return Pn(t)?{...nl(e,t.$ref),[an]:t[an]}:t}function vl(e,t){return Ha(bl(e,t))}function yl(e,t){return vi(bl(e,t))}function bl(e,t){return t.map(t=>xl(e,t))}function xl(e,t){return un(t)?j(xl(e,ci(t,[sn])),t):ln(t)?j(xl(e,ci(t,[on])),t):Bn(t)?j(_l(e,t),t):pn(t)?j(ll(e,t.items),t):mn(t)?j(ul(e,t.items),t):_n(t)?j(cl(e,t.target,t.parameters)):vn(t)?j(dl(e,t.parameters,t.returns),t):yn(t)?j(fl(e,t.parameters,t.returns),t):xn(t)?j(pl(e,t.allOf),t):Sn(t)?j(ml(e,t.items),t):jn(t)?j(hl(e,t.properties),t):Nn(t)?j(gl(e,t)):Vn(t)?j(vl(e,t.items||[]),t):Un(t)?j(yl(e,t.anyOf),t):t}function Sl(e,t){return t in e?xl(e,e[t]):li()}function Cl(e){return globalThis.Object.getOwnPropertyNames(e).reduce((t,n)=>({...t,[n]:Sl(e,n)}),{})}var wl=class{constructor(e){let t=Cl(e);this.$defs=this.WithIdentifiers(t)}Import(e,t){let n={...this.$defs,[e]:j(this.$defs[e],t)};return j({[M]:`Import`,$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((t,n)=>({...t,[n]:{...e[n],$id:n}}),{})}};function Tl(e){return new wl(e)}function El(e,t){return j({[M]:`Not`,not:e},t)}function Dl(e,t){return yn(e)?Ha(e.parameters,t):li()}var Ol=0;function kl(e,t={}){xt(t.$id)&&(t.$id=`T${Ol++}`);let n=kt(e({[M]:`This`,$ref:`${t.$id}`}));return n.$id=t.$id,j({[cn]:`Recursive`,...n},t)}function Al(e,t){let n=vt(e)?new globalThis.RegExp(e):e;return j({[M]:`RegExp`,type:`RegExp`,source:n.source,flags:n.flags},t)}function jl(e){return xn(e)?e.allOf:Un(e)?e.anyOf:Vn(e)?e.items??[]:[]}function Ml(e){return jl(e)}function Nl(e,t){return yn(e)?j(e.returns,t):li(t)}var Pl=class{constructor(e){this.schema=e}Decode(e){return new Fl(this.schema,e)}},Fl=class{constructor(e,t){this.schema=e,this.decode=t}EncodeTransform(e,t){let n={Encode:n=>t[an].Encode(e(n)),Decode:e=>this.decode(t[an].Decode(e))};return{...t,[an]:n}}EncodeSchema(e,t){let n={Decode:this.decode,Encode:e};return{...t,[an]:n}}Encode(e){return Bn(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function Il(e){return new Pl(e)}function Ll(e={}){return j({[M]:e[M]??`Unsafe`},e)}function Rl(e){return j({[M]:`Void`,type:`void`},e)}var zl=t({Any:()=>ii,Argument:()=>_ee,Array:()=>ai,AsyncIterator:()=>oi,Awaited:()=>co,BigInt:()=>Ji,Boolean:()=>qi,Capitalize:()=>cc,Composite:()=>Yee,Const:()=>Qee,Constructor:()=>di,ConstructorParameters:()=>$ee,Date:()=>go,Enum:()=>ete,Exclude:()=>hs,Extends:()=>as,Extract:()=>xs,Function:()=>fi,Index:()=>Ta,InstanceType:()=>Rte,Instantiate:()=>Js,Integer:()=>Ys,Intersect:()=>ao,Iterator:()=>Aa,KeyOf:()=>mo,Literal:()=>Ki,Lowercase:()=>lc,Mapped:()=>Qa,Module:()=>Tl,Never:()=>li,Not:()=>El,Null:()=>_o,Number:()=>Yi,Object:()=>Na,Omit:()=>Sc,Optional:()=>to,Parameters:()=>Dl,Partial:()=>qc,Pick:()=>Ic,Promise:()=>Pa,Readonly:()=>Ra,ReadonlyOptional:()=>Ts,Record:()=>Os,Recursive:()=>kl,Ref:()=>oo,RegExp:()=>Al,Required:()=>tl,Rest:()=>Ml,ReturnType:()=>Nl,String:()=>Xi,Symbol:()=>vo,TemplateLiteral:()=>oa,Transform:()=>Il,Tuple:()=>Ha,Uint8Array:()=>bo,Uncapitalize:()=>uc,Undefined:()=>yo,Union:()=>vi,Unknown:()=>xo,Unsafe:()=>Ll,Uppercase:()=>dc,Void:()=>Rl}),Bl=r(((e,t)=>{var n=12,r=0,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function a(e){var t=e.indexOf(`%`);if(t===-1)return e;for(var a=e.length,o=``,c=0,l=0,u=t,d=n;t>-1&&t<a;){var f=s(e[t+1],4)|s(e[t+2],0),p=i[f];if(d=i[256+d+p],l=l<<6|f&i[364+p],d===n)o+=e.slice(c,u),o+=l<=65535?String.fromCharCode(l):String.fromCharCode(55232+(l>>10),56320+(l&1023)),l=0,c=t+3,t=u=e.indexOf(`%`,c);else if(d===r)return null;else{if(t+=3,t<a&&e.charCodeAt(t)===37)continue;return null}}return o+e.slice(c)}var o={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function s(e,t){var n=o[e];return n===void 0?255:n<<t}t.exports=a}));function Vl(e){switch(e.errorType){case P.ArrayContains:return`Expected array to contain at least one matching value`;case P.ArrayMaxContains:return`Expected array to contain no more than ${e.schema.maxContains} matching values`;case P.ArrayMinContains:return`Expected array to contain at least ${e.schema.minContains} matching values`;case P.ArrayMaxItems:return`Expected array length to be less or equal to ${e.schema.maxItems}`;case P.ArrayMinItems:return`Expected array length to be greater or equal to ${e.schema.minItems}`;case P.ArrayUniqueItems:return`Expected array elements to be unique`;case P.Array:return`Expected array`;case P.AsyncIterator:return`Expected AsyncIterator`;case P.BigIntExclusiveMaximum:return`Expected bigint to be less than ${e.schema.exclusiveMaximum}`;case P.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${e.schema.exclusiveMinimum}`;case P.BigIntMaximum:return`Expected bigint to be less or equal to ${e.schema.maximum}`;case P.BigIntMinimum:return`Expected bigint to be greater or equal to ${e.schema.minimum}`;case P.BigIntMultipleOf:return`Expected bigint to be a multiple of ${e.schema.multipleOf}`;case P.BigInt:return`Expected bigint`;case P.Boolean:return`Expected boolean`;case P.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${e.schema.exclusiveMinimumTimestamp}`;case P.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${e.schema.exclusiveMaximumTimestamp}`;case P.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${e.schema.minimumTimestamp}`;case P.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${e.schema.maximumTimestamp}`;case P.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${e.schema.multipleOfTimestamp}`;case P.Date:return`Expected Date`;case P.Function:return`Expected function`;case P.IntegerExclusiveMaximum:return`Expected integer to be less than ${e.schema.exclusiveMaximum}`;case P.IntegerExclusiveMinimum:return`Expected integer to be greater than ${e.schema.exclusiveMinimum}`;case P.IntegerMaximum:return`Expected integer to be less or equal to ${e.schema.maximum}`;case P.IntegerMinimum:return`Expected integer to be greater or equal to ${e.schema.minimum}`;case P.IntegerMultipleOf:return`Expected integer to be a multiple of ${e.schema.multipleOf}`;case P.Integer:return`Expected integer`;case P.IntersectUnevaluatedProperties:return`Unexpected property`;case P.Intersect:return`Expected all values to match`;case P.Iterator:return`Expected Iterator`;case P.Literal:return`Expected ${typeof e.schema.const==`string`?`'${e.schema.const}'`:e.schema.const}`;case P.Never:return`Never`;case P.Not:return`Value should not match`;case P.Null:return`Expected null`;case P.NumberExclusiveMaximum:return`Expected number to be less than ${e.schema.exclusiveMaximum}`;case P.NumberExclusiveMinimum:return`Expected number to be greater than ${e.schema.exclusiveMinimum}`;case P.NumberMaximum:return`Expected number to be less or equal to ${e.schema.maximum}`;case P.NumberMinimum:return`Expected number to be greater or equal to ${e.schema.minimum}`;case P.NumberMultipleOf:return`Expected number to be a multiple of ${e.schema.multipleOf}`;case P.Number:return`Expected number`;case P.Object:return`Expected object`;case P.ObjectAdditionalProperties:return`Unexpected property`;case P.ObjectMaxProperties:return`Expected object to have no more than ${e.schema.maxProperties} properties`;case P.ObjectMinProperties:return`Expected object to have at least ${e.schema.minProperties} properties`;case P.ObjectRequiredProperty:return`Expected required property`;case P.Promise:return`Expected Promise`;case P.RegExp:return`Expected string to match regular expression`;case P.StringFormatUnknown:return`Unknown format '${e.schema.format}'`;case P.StringFormat:return`Expected string to match '${e.schema.format}' format`;case P.StringMaxLength:return`Expected string length less or equal to ${e.schema.maxLength}`;case P.StringMinLength:return`Expected string length greater or equal to ${e.schema.minLength}`;case P.StringPattern:return`Expected string to match '${e.schema.pattern}'`;case P.String:return`Expected string`;case P.Symbol:return`Expected symbol`;case P.TupleLength:return`Expected tuple to have ${e.schema.maxItems||0} elements`;case P.Tuple:return`Expected tuple`;case P.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${e.schema.maxByteLength}`;case P.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${e.schema.minByteLength}`;case P.Uint8Array:return`Expected Uint8Array`;case P.Undefined:return`Expected undefined`;case P.Union:return`Expected union value`;case P.Void:return`Expected void`;case P.Kind:return`Expected kind '${e.schema[M]}'`;default:return`Unknown error type`}}var Hl=Vl;function Ul(){return Hl}var Wl=class extends rn{constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function Gl(e,t){let n=t.find(t=>t.$id===e.$ref);if(n===void 0)throw new Wl(e);return ql(n,t)}function Kl(e,t){return!qt(e.$id)||t.some(t=>t.$id===e.$id)||t.push(e),t}function ql(e,t){return e[M]===`This`||e[M]===`Ref`?Gl(e,t):e}var Jl=class extends rn{constructor(e){super(`Unable to hash value`),this.value=e}},Yl;(function(e){e[e.Undefined=0]=`Undefined`,e[e.Null=1]=`Null`,e[e.Boolean=2]=`Boolean`,e[e.Number=3]=`Number`,e[e.String=4]=`String`,e[e.Object=5]=`Object`,e[e.Array=6]=`Array`,e[e.Date=7]=`Date`,e[e.Uint8Array=8]=`Uint8Array`,e[e.Symbol=9]=`Symbol`,e[e.BigInt=10]=`BigInt`})(Yl||={});var Xl=BigInt(`14695981039346656037`),[Zl,Ql]=[BigInt(`1099511628211`),BigInt(`18446744073709551616`)],$l=Array.from({length:256}).map((e,t)=>BigInt(t)),eu=new Float64Array(1),tu=new DataView(eu.buffer),nu=new Uint8Array(eu.buffer);function*ru(e){let t=e===0?1:Math.ceil(Math.floor(Math.log2(e)+1)/8);for(let n=0;n<t;n++)yield e>>8*(t-1-n)&255}function iu(e){gu(Yl.Array);for(let t of e)hu(t)}function au(e){gu(Yl.Boolean),gu(e?1:0)}function ou(e){gu(Yl.BigInt),tu.setBigInt64(0,e);for(let e of nu)gu(e)}function su(e){gu(Yl.Date),hu(e.getTime())}function cu(e){gu(Yl.Null)}function lu(e){gu(Yl.Number),tu.setFloat64(0,e);for(let e of nu)gu(e)}function uu(e){gu(Yl.Object);for(let t of globalThis.Object.getOwnPropertyNames(e).sort())hu(t),hu(e[t])}function du(e){gu(Yl.String);for(let t=0;t<e.length;t++)for(let n of ru(e.charCodeAt(t)))gu(n)}function fu(e){gu(Yl.Symbol),hu(e.description)}function pu(e){gu(Yl.Uint8Array);for(let t=0;t<e.length;t++)gu(e[t])}function mu(e){return gu(Yl.Undefined)}function hu(e){if(Bt(e))return iu(e);if(Ut(e))return au(e);if(Kt(e))return ou(e);if(Nt(e))return su(e);if(Ht(e))return cu(e);if(Wt(e))return lu(e);if(zt(e))return uu(e);if(qt(e))return du(e);if(Yt(e))return fu(e);if(Lt(e))return pu(e);if(Vt(e))return mu(e);throw new Jl(e)}function gu(e){Xl^=$l[e],Xl=Xl*Zl%Ql}function _u(e){return Xl=BigInt(`14695981039346656037`),hu(e),Xl}var vu=class extends rn{constructor(e){super(`Unknown type`),this.schema=e}};function yu(e){return e[M]===`Any`||e[M]===`Unknown`}function bu(e){return e!==void 0}function xu(e,t,n){return!0}function Su(e,t,n){return!0}function Cu(e,t,n){if(!Bt(n)||bu(e.minItems)&&!(n.length>=e.minItems)||bu(e.maxItems)&&!(n.length<=e.maxItems)||!n.every(n=>td(e.items,t,n))||e.uniqueItems===!0&&!(function(){let e=new Set;for(let t of n){let n=_u(t);if(e.has(n))return!1;e.add(n)}return!0})())return!1;if(!(bu(e.contains)||Wt(e.minContains)||Wt(e.maxContains)))return!0;let r=bu(e.contains)?e.contains:li(),i=n.reduce((e,n)=>td(r,t,n)?e+1:e,0);return!(i===0||Wt(e.minContains)&&i<e.minContains||Wt(e.maxContains)&&i>e.maxContains)}function wu(e,t,n){return At(n)}function Tu(e,t,n){return!(!Kt(n)||bu(e.exclusiveMaximum)&&!(n<e.exclusiveMaximum)||bu(e.exclusiveMinimum)&&!(n>e.exclusiveMinimum)||bu(e.maximum)&&!(n<=e.maximum)||bu(e.minimum)&&!(n>=e.minimum)||bu(e.multipleOf)&&n%e.multipleOf!==BigInt(0))}function Eu(e,t,n){return Ut(n)}function Du(e,t,n){return td(e.returns,t,n.prototype)}function Ou(e,t,n){return!(!Nt(n)||bu(e.exclusiveMaximumTimestamp)&&!(n.getTime()<e.exclusiveMaximumTimestamp)||bu(e.exclusiveMinimumTimestamp)&&!(n.getTime()>e.exclusiveMinimumTimestamp)||bu(e.maximumTimestamp)&&!(n.getTime()<=e.maximumTimestamp)||bu(e.minimumTimestamp)&&!(n.getTime()>=e.minimumTimestamp)||bu(e.multipleOfTimestamp)&&n.getTime()%e.multipleOfTimestamp!==0)}function ku(e,t,n){return Jt(n)}function Au(e,t,n){let r=globalThis.Object.values(e.$defs),i=e.$defs[e.$ref];return td(i,[...t,...r],n)}function ju(e,t,n){return!(!Gt(n)||bu(e.exclusiveMaximum)&&!(n<e.exclusiveMaximum)||bu(e.exclusiveMinimum)&&!(n>e.exclusiveMinimum)||bu(e.maximum)&&!(n<=e.maximum)||bu(e.minimum)&&!(n>=e.minimum)||bu(e.multipleOf)&&n%e.multipleOf!==0)}function Mu(e,t,n){let r=e.allOf.every(e=>td(e,t,n));if(e.unevaluatedProperties===!1){let t=new RegExp(po(e)),i=Object.getOwnPropertyNames(n).every(e=>t.test(e));return r&&i}else if(Kn(e.unevaluatedProperties)){let i=new RegExp(po(e)),a=Object.getOwnPropertyNames(n).every(r=>i.test(r)||td(e.unevaluatedProperties,t,n[r]));return r&&a}else return r}function Nu(e,t,n){return jt(n)}function Pu(e,t,n){return n===e.const}function Fu(e,t,n){return!1}function Iu(e,t,n){return!td(e.not,t,n)}function Lu(e,t,n){return Ht(n)}function Ru(e,t,n){return!(!Zt.IsNumberLike(n)||bu(e.exclusiveMaximum)&&!(n<e.exclusiveMaximum)||bu(e.exclusiveMinimum)&&!(n>e.exclusiveMinimum)||bu(e.minimum)&&!(n>=e.minimum)||bu(e.maximum)&&!(n<=e.maximum)||bu(e.multipleOf)&&n%e.multipleOf!==0)}function zu(e,t,n){if(!Zt.IsObjectLike(n)||bu(e.minProperties)&&!(Object.getOwnPropertyNames(n).length>=e.minProperties)||bu(e.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=e.maxProperties))return!1;let r=Object.getOwnPropertyNames(e.properties);for(let i of r){let r=e.properties[i];if(e.required&&e.required.includes(i)){if(!td(r,t,n[i])||(ps(r)||yu(r))&&!(i in n))return!1}else if(Zt.IsExactOptionalProperty(n,i)&&!td(r,t,n[i]))return!1}if(e.additionalProperties===!1){let t=Object.getOwnPropertyNames(n);return e.required&&e.required.length===r.length&&t.length===r.length?!0:t.every(e=>r.includes(e))}else if(typeof e.additionalProperties==`object`)return Object.getOwnPropertyNames(n).every(i=>r.includes(i)||td(e.additionalProperties,t,n[i]));else return!0}function Bu(e,t,n){return Mt(n)}function Vu(e,t,n){if(!Zt.IsRecordLike(n)||bu(e.minProperties)&&!(Object.getOwnPropertyNames(n).length>=e.minProperties)||bu(e.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=e.maxProperties))return!1;let[r,i]=Object.entries(e.patternProperties)[0],a=new RegExp(r),o=Object.entries(n).every(([e,n])=>a.test(e)?td(i,t,n):!0),s=typeof e.additionalProperties==`object`?Object.entries(n).every(([n,r])=>a.test(n)?!0:td(e.additionalProperties,t,r)):!0,c=e.additionalProperties===!1?Object.getOwnPropertyNames(n).every(e=>a.test(e)):!0;return o&&s&&c}function Hu(e,t,n){return td(ql(e,t),t,n)}function Uu(e,t,n){let r=new RegExp(e.source,e.flags);return bu(e.minLength)&&!(n.length>=e.minLength)||bu(e.maxLength)&&!(n.length<=e.maxLength)?!1:r.test(n)}function Wu(e,t,n){return!qt(n)||bu(e.minLength)&&!(n.length>=e.minLength)||bu(e.maxLength)&&!(n.length<=e.maxLength)||bu(e.pattern)&&!new RegExp(e.pattern).test(n)?!1:bu(e.format)?Xr(e.format)?Qr(e.format)(n):!1:!0}function Gu(e,t,n){return Yt(n)}function Ku(e,t,n){return qt(n)&&new RegExp(e.pattern).test(n)}function qu(e,t,n){return td(ql(e,t),t,n)}function Ju(e,t,n){if(!Bt(n)||e.items===void 0&&n.length!==0||n.length!==e.maxItems)return!1;if(!e.items)return!0;for(let r=0;r<e.items.length;r++)if(!td(e.items[r],t,n[r]))return!1;return!0}function Yu(e,t,n){return Vt(n)}function Xu(e,t,n){return e.anyOf.some(e=>td(e,t,n))}function Zu(e,t,n){return!(!Lt(n)||bu(e.maxByteLength)&&!(n.length<=e.maxByteLength)||bu(e.minByteLength)&&!(n.length>=e.minByteLength))}function Qu(e,t,n){return!0}function $u(e,t,n){return Zt.IsVoidLike(n)}function ed(e,t,n){return ei(e[M])?ti(e[M])(e,n):!1}function td(e,t,n){let r=bu(e.$id)?Kl(e,t):t,i=e;switch(i[M]){case`Any`:return xu(i,r,n);case`Argument`:return Su(i,r,n);case`Array`:return Cu(i,r,n);case`AsyncIterator`:return wu(i,r,n);case`BigInt`:return Tu(i,r,n);case`Boolean`:return Eu(i,r,n);case`Constructor`:return Du(i,r,n);case`Date`:return Ou(i,r,n);case`Function`:return ku(i,r,n);case`Import`:return Au(i,r,n);case`Integer`:return ju(i,r,n);case`Intersect`:return Mu(i,r,n);case`Iterator`:return Nu(i,r,n);case`Literal`:return Pu(i,r,n);case`Never`:return Fu(i,r,n);case`Not`:return Iu(i,r,n);case`Null`:return Lu(i,r,n);case`Number`:return Ru(i,r,n);case`Object`:return zu(i,r,n);case`Promise`:return Bu(i,r,n);case`Record`:return Vu(i,r,n);case`Ref`:return Hu(i,r,n);case`RegExp`:return Uu(i,r,n);case`String`:return Wu(i,r,n);case`Symbol`:return Gu(i,r,n);case`TemplateLiteral`:return Ku(i,r,n);case`This`:return qu(i,r,n);case`Tuple`:return Ju(i,r,n);case`Undefined`:return Yu(i,r,n);case`Union`:return Xu(i,r,n);case`Uint8Array`:return Zu(i,r,n);case`Unknown`:return Qu(i,r,n);case`Void`:return $u(i,r,n);default:if(!ei(i[M]))throw new vu(i);return ed(i,r,n)}}function nd(...e){return e.length===3?td(e[0],e[1],e[2]):td(e[0],[],e[1])}var P;(function(e){e[e.ArrayContains=0]=`ArrayContains`,e[e.ArrayMaxContains=1]=`ArrayMaxContains`,e[e.ArrayMaxItems=2]=`ArrayMaxItems`,e[e.ArrayMinContains=3]=`ArrayMinContains`,e[e.ArrayMinItems=4]=`ArrayMinItems`,e[e.ArrayUniqueItems=5]=`ArrayUniqueItems`,e[e.Array=6]=`Array`,e[e.AsyncIterator=7]=`AsyncIterator`,e[e.BigIntExclusiveMaximum=8]=`BigIntExclusiveMaximum`,e[e.BigIntExclusiveMinimum=9]=`BigIntExclusiveMinimum`,e[e.BigIntMaximum=10]=`BigIntMaximum`,e[e.BigIntMinimum=11]=`BigIntMinimum`,e[e.BigIntMultipleOf=12]=`BigIntMultipleOf`,e[e.BigInt=13]=`BigInt`,e[e.Boolean=14]=`Boolean`,e[e.DateExclusiveMaximumTimestamp=15]=`DateExclusiveMaximumTimestamp`,e[e.DateExclusiveMinimumTimestamp=16]=`DateExclusiveMinimumTimestamp`,e[e.DateMaximumTimestamp=17]=`DateMaximumTimestamp`,e[e.DateMinimumTimestamp=18]=`DateMinimumTimestamp`,e[e.DateMultipleOfTimestamp=19]=`DateMultipleOfTimestamp`,e[e.Date=20]=`Date`,e[e.Function=21]=`Function`,e[e.IntegerExclusiveMaximum=22]=`IntegerExclusiveMaximum`,e[e.IntegerExclusiveMinimum=23]=`IntegerExclusiveMinimum`,e[e.IntegerMaximum=24]=`IntegerMaximum`,e[e.IntegerMinimum=25]=`IntegerMinimum`,e[e.IntegerMultipleOf=26]=`IntegerMultipleOf`,e[e.Integer=27]=`Integer`,e[e.IntersectUnevaluatedProperties=28]=`IntersectUnevaluatedProperties`,e[e.Intersect=29]=`Intersect`,e[e.Iterator=30]=`Iterator`,e[e.Kind=31]=`Kind`,e[e.Literal=32]=`Literal`,e[e.Never=33]=`Never`,e[e.Not=34]=`Not`,e[e.Null=35]=`Null`,e[e.NumberExclusiveMaximum=36]=`NumberExclusiveMaximum`,e[e.NumberExclusiveMinimum=37]=`NumberExclusiveMinimum`,e[e.NumberMaximum=38]=`NumberMaximum`,e[e.NumberMinimum=39]=`NumberMinimum`,e[e.NumberMultipleOf=40]=`NumberMultipleOf`,e[e.Number=41]=`Number`,e[e.ObjectAdditionalProperties=42]=`ObjectAdditionalProperties`,e[e.ObjectMaxProperties=43]=`ObjectMaxProperties`,e[e.ObjectMinProperties=44]=`ObjectMinProperties`,e[e.ObjectRequiredProperty=45]=`ObjectRequiredProperty`,e[e.Object=46]=`Object`,e[e.Promise=47]=`Promise`,e[e.RegExp=48]=`RegExp`,e[e.StringFormatUnknown=49]=`StringFormatUnknown`,e[e.StringFormat=50]=`StringFormat`,e[e.StringMaxLength=51]=`StringMaxLength`,e[e.StringMinLength=52]=`StringMinLength`,e[e.StringPattern=53]=`StringPattern`,e[e.String=54]=`String`,e[e.Symbol=55]=`Symbol`,e[e.TupleLength=56]=`TupleLength`,e[e.Tuple=57]=`Tuple`,e[e.Uint8ArrayMaxByteLength=58]=`Uint8ArrayMaxByteLength`,e[e.Uint8ArrayMinByteLength=59]=`Uint8ArrayMinByteLength`,e[e.Uint8Array=60]=`Uint8Array`,e[e.Undefined=61]=`Undefined`,e[e.Union=62]=`Union`,e[e.Void=63]=`Void`})(P||={});var rd=class extends rn{constructor(e){super(`Unknown type`),this.schema=e}};function id(e){return e.replace(/~/g,`~0`).replace(/\//g,`~1`)}function ad(e){return e!==void 0}var od=class{constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function F(e,t,n,r,i=[]){return{type:e,schema:t,path:n,value:r,message:Ul()({errorType:e,path:n,schema:t,value:r,errors:i}),errors:i}}function*sd(e,t,n,r){}function*cd(e,t,n,r){}function*ld(e,t,n,r){if(!Bt(r))return yield F(P.Array,e,n,r);ad(e.minItems)&&!(r.length>=e.minItems)&&(yield F(P.ArrayMinItems,e,n,r)),ad(e.maxItems)&&!(r.length<=e.maxItems)&&(yield F(P.ArrayMaxItems,e,n,r));for(let i=0;i<r.length;i++)yield*Vd(e.items,t,`${n}/${i}`,r[i]);if(e.uniqueItems===!0&&!(function(){let e=new Set;for(let t of r){let n=_u(t);if(e.has(n))return!1;e.add(n)}return!0})()&&(yield F(P.ArrayUniqueItems,e,n,r)),!(ad(e.contains)||ad(e.minContains)||ad(e.maxContains)))return;let i=ad(e.contains)?e.contains:li(),a=r.reduce((e,r,a)=>Vd(i,t,`${n}${a}`,r).next().done===!0?e+1:e,0);a===0&&(yield F(P.ArrayContains,e,n,r)),Wt(e.minContains)&&a<e.minContains&&(yield F(P.ArrayMinContains,e,n,r)),Wt(e.maxContains)&&a>e.maxContains&&(yield F(P.ArrayMaxContains,e,n,r))}function*ud(e,t,n,r){At(r)||(yield F(P.AsyncIterator,e,n,r))}function*dd(e,t,n,r){if(!Kt(r))return yield F(P.BigInt,e,n,r);ad(e.exclusiveMaximum)&&!(r<e.exclusiveMaximum)&&(yield F(P.BigIntExclusiveMaximum,e,n,r)),ad(e.exclusiveMinimum)&&!(r>e.exclusiveMinimum)&&(yield F(P.BigIntExclusiveMinimum,e,n,r)),ad(e.maximum)&&!(r<=e.maximum)&&(yield F(P.BigIntMaximum,e,n,r)),ad(e.minimum)&&!(r>=e.minimum)&&(yield F(P.BigIntMinimum,e,n,r)),ad(e.multipleOf)&&r%e.multipleOf!==BigInt(0)&&(yield F(P.BigIntMultipleOf,e,n,r))}function*fd(e,t,n,r){Ut(r)||(yield F(P.Boolean,e,n,r))}function*pd(e,t,n,r){yield*Vd(e.returns,t,n,r.prototype)}function*md(e,t,n,r){if(!Nt(r))return yield F(P.Date,e,n,r);ad(e.exclusiveMaximumTimestamp)&&!(r.getTime()<e.exclusiveMaximumTimestamp)&&(yield F(P.DateExclusiveMaximumTimestamp,e,n,r)),ad(e.exclusiveMinimumTimestamp)&&!(r.getTime()>e.exclusiveMinimumTimestamp)&&(yield F(P.DateExclusiveMinimumTimestamp,e,n,r)),ad(e.maximumTimestamp)&&!(r.getTime()<=e.maximumTimestamp)&&(yield F(P.DateMaximumTimestamp,e,n,r)),ad(e.minimumTimestamp)&&!(r.getTime()>=e.minimumTimestamp)&&(yield F(P.DateMinimumTimestamp,e,n,r)),ad(e.multipleOfTimestamp)&&r.getTime()%e.multipleOfTimestamp!==0&&(yield F(P.DateMultipleOfTimestamp,e,n,r))}function*hd(e,t,n,r){Jt(r)||(yield F(P.Function,e,n,r))}function*gd(e,t,n,r){let i=globalThis.Object.values(e.$defs),a=e.$defs[e.$ref];yield*Vd(a,[...t,...i],n,r)}function*_d(e,t,n,r){if(!Gt(r))return yield F(P.Integer,e,n,r);ad(e.exclusiveMaximum)&&!(r<e.exclusiveMaximum)&&(yield F(P.IntegerExclusiveMaximum,e,n,r)),ad(e.exclusiveMinimum)&&!(r>e.exclusiveMinimum)&&(yield F(P.IntegerExclusiveMinimum,e,n,r)),ad(e.maximum)&&!(r<=e.maximum)&&(yield F(P.IntegerMaximum,e,n,r)),ad(e.minimum)&&!(r>=e.minimum)&&(yield F(P.IntegerMinimum,e,n,r)),ad(e.multipleOf)&&r%e.multipleOf!==0&&(yield F(P.IntegerMultipleOf,e,n,r))}function*vd(e,t,n,r){let i=!1;for(let a of e.allOf)for(let e of Vd(a,t,n,r))i=!0,yield e;if(i)return yield F(P.Intersect,e,n,r);if(e.unevaluatedProperties===!1){let t=new RegExp(po(e));for(let i of Object.getOwnPropertyNames(r))t.test(i)||(yield F(P.IntersectUnevaluatedProperties,e,`${n}/${i}`,r))}if(typeof e.unevaluatedProperties==`object`){let i=new RegExp(po(e));for(let a of Object.getOwnPropertyNames(r))if(!i.test(a)){let i=Vd(e.unevaluatedProperties,t,`${n}/${a}`,r[a]).next();i.done||(yield i.value)}}}function*yd(e,t,n,r){jt(r)||(yield F(P.Iterator,e,n,r))}function*bd(e,t,n,r){r!==e.const&&(yield F(P.Literal,e,n,r))}function*xd(e,t,n,r){yield F(P.Never,e,n,r)}function*Sd(e,t,n,r){Vd(e.not,t,n,r).next().done===!0&&(yield F(P.Not,e,n,r))}function*Cd(e,t,n,r){Ht(r)||(yield F(P.Null,e,n,r))}function*wd(e,t,n,r){if(!Zt.IsNumberLike(r))return yield F(P.Number,e,n,r);ad(e.exclusiveMaximum)&&!(r<e.exclusiveMaximum)&&(yield F(P.NumberExclusiveMaximum,e,n,r)),ad(e.exclusiveMinimum)&&!(r>e.exclusiveMinimum)&&(yield F(P.NumberExclusiveMinimum,e,n,r)),ad(e.maximum)&&!(r<=e.maximum)&&(yield F(P.NumberMaximum,e,n,r)),ad(e.minimum)&&!(r>=e.minimum)&&(yield F(P.NumberMinimum,e,n,r)),ad(e.multipleOf)&&r%e.multipleOf!==0&&(yield F(P.NumberMultipleOf,e,n,r))}function*Td(e,t,n,r){if(!Zt.IsObjectLike(r))return yield F(P.Object,e,n,r);ad(e.minProperties)&&!(Object.getOwnPropertyNames(r).length>=e.minProperties)&&(yield F(P.ObjectMinProperties,e,n,r)),ad(e.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=e.maxProperties)&&(yield F(P.ObjectMaxProperties,e,n,r));let i=Array.isArray(e.required)?e.required:[],a=Object.getOwnPropertyNames(e.properties),o=Object.getOwnPropertyNames(r);for(let t of i)o.includes(t)||(yield F(P.ObjectRequiredProperty,e.properties[t],`${n}/${id(t)}`,void 0));if(e.additionalProperties===!1)for(let t of o)a.includes(t)||(yield F(P.ObjectAdditionalProperties,e,`${n}/${id(t)}`,r[t]));if(typeof e.additionalProperties==`object`)for(let i of o)a.includes(i)||(yield*Vd(e.additionalProperties,t,`${n}/${id(i)}`,r[i]));for(let i of a){let a=e.properties[i];e.required&&e.required.includes(i)?(yield*Vd(a,t,`${n}/${id(i)}`,r[i]),ps(e)&&!(i in r)&&(yield F(P.ObjectRequiredProperty,a,`${n}/${id(i)}`,void 0))):Zt.IsExactOptionalProperty(r,i)&&(yield*Vd(a,t,`${n}/${id(i)}`,r[i]))}}function*Ed(e,t,n,r){Mt(r)||(yield F(P.Promise,e,n,r))}function*Dd(e,t,n,r){if(!Zt.IsRecordLike(r))return yield F(P.Object,e,n,r);ad(e.minProperties)&&!(Object.getOwnPropertyNames(r).length>=e.minProperties)&&(yield F(P.ObjectMinProperties,e,n,r)),ad(e.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=e.maxProperties)&&(yield F(P.ObjectMaxProperties,e,n,r));let[i,a]=Object.entries(e.patternProperties)[0],o=new RegExp(i);for(let[e,i]of Object.entries(r))o.test(e)&&(yield*Vd(a,t,`${n}/${id(e)}`,i));if(typeof e.additionalProperties==`object`)for(let[i,a]of Object.entries(r))o.test(i)||(yield*Vd(e.additionalProperties,t,`${n}/${id(i)}`,a));if(e.additionalProperties===!1){for(let[t,i]of Object.entries(r))if(!o.test(t))return yield F(P.ObjectAdditionalProperties,e,`${n}/${id(t)}`,i)}}function*Od(e,t,n,r){yield*Vd(ql(e,t),t,n,r)}function*kd(e,t,n,r){if(!qt(r))return yield F(P.String,e,n,r);if(ad(e.minLength)&&!(r.length>=e.minLength)&&(yield F(P.StringMinLength,e,n,r)),ad(e.maxLength)&&!(r.length<=e.maxLength)&&(yield F(P.StringMaxLength,e,n,r)),!new RegExp(e.source,e.flags).test(r))return yield F(P.RegExp,e,n,r)}function*Ad(e,t,n,r){if(!qt(r))return yield F(P.String,e,n,r);ad(e.minLength)&&!(r.length>=e.minLength)&&(yield F(P.StringMinLength,e,n,r)),ad(e.maxLength)&&!(r.length<=e.maxLength)&&(yield F(P.StringMaxLength,e,n,r)),qt(e.pattern)&&(new RegExp(e.pattern).test(r)||(yield F(P.StringPattern,e,n,r))),qt(e.format)&&(Xr(e.format)?Qr(e.format)(r)||(yield F(P.StringFormat,e,n,r)):yield F(P.StringFormatUnknown,e,n,r))}function*jd(e,t,n,r){Yt(r)||(yield F(P.Symbol,e,n,r))}function*Md(e,t,n,r){if(!qt(r))return yield F(P.String,e,n,r);new RegExp(e.pattern).test(r)||(yield F(P.StringPattern,e,n,r))}function*Nd(e,t,n,r){yield*Vd(ql(e,t),t,n,r)}function*Pd(e,t,n,r){if(!Bt(r))return yield F(P.Tuple,e,n,r);if(e.items===void 0&&r.length!==0||r.length!==e.maxItems)return yield F(P.TupleLength,e,n,r);if(e.items)for(let i=0;i<e.items.length;i++)yield*Vd(e.items[i],t,`${n}/${i}`,r[i])}function*Fd(e,t,n,r){Vt(r)||(yield F(P.Undefined,e,n,r))}function*Id(e,t,n,r){if(nd(e,t,r))return;let i=e.anyOf.map(e=>new od(Vd(e,t,n,r)));yield F(P.Union,e,n,r,i)}function*Ld(e,t,n,r){if(!Lt(r))return yield F(P.Uint8Array,e,n,r);ad(e.maxByteLength)&&!(r.length<=e.maxByteLength)&&(yield F(P.Uint8ArrayMaxByteLength,e,n,r)),ad(e.minByteLength)&&!(r.length>=e.minByteLength)&&(yield F(P.Uint8ArrayMinByteLength,e,n,r))}function*Rd(e,t,n,r){}function*zd(e,t,n,r){Zt.IsVoidLike(r)||(yield F(P.Void,e,n,r))}function*Bd(e,t,n,r){ti(e[M])(e,r)||(yield F(P.Kind,e,n,r))}function*Vd(e,t,n,r){let i=ad(e.$id)?[...t,e]:t,a=e;switch(a[M]){case`Any`:return yield*sd(a,i,n,r);case`Argument`:return yield*cd(a,i,n,r);case`Array`:return yield*ld(a,i,n,r);case`AsyncIterator`:return yield*ud(a,i,n,r);case`BigInt`:return yield*dd(a,i,n,r);case`Boolean`:return yield*fd(a,i,n,r);case`Constructor`:return yield*pd(a,i,n,r);case`Date`:return yield*md(a,i,n,r);case`Function`:return yield*hd(a,i,n,r);case`Import`:return yield*gd(a,i,n,r);case`Integer`:return yield*_d(a,i,n,r);case`Intersect`:return yield*vd(a,i,n,r);case`Iterator`:return yield*yd(a,i,n,r);case`Literal`:return yield*bd(a,i,n,r);case`Never`:return yield*xd(a,i,n,r);case`Not`:return yield*Sd(a,i,n,r);case`Null`:return yield*Cd(a,i,n,r);case`Number`:return yield*wd(a,i,n,r);case`Object`:return yield*Td(a,i,n,r);case`Promise`:return yield*Ed(a,i,n,r);case`Record`:return yield*Dd(a,i,n,r);case`Ref`:return yield*Od(a,i,n,r);case`RegExp`:return yield*kd(a,i,n,r);case`String`:return yield*Ad(a,i,n,r);case`Symbol`:return yield*jd(a,i,n,r);case`TemplateLiteral`:return yield*Md(a,i,n,r);case`This`:return yield*Nd(a,i,n,r);case`Tuple`:return yield*Pd(a,i,n,r);case`Undefined`:return yield*Fd(a,i,n,r);case`Union`:return yield*Id(a,i,n,r);case`Uint8Array`:return yield*Ld(a,i,n,r);case`Unknown`:return yield*Rd(a,i,n,r);case`Void`:return yield*zd(a,i,n,r);default:if(!ei(a[M]))throw new rd(e);return yield*Bd(a,i,n,r)}}function Hd(...e){return new od(e.length===3?Vd(e[0],e[1],``,e[2]):Vd(e[0],[],``,e[1]))}function Ud(e){let t={};for(let n of Object.getOwnPropertyNames(e))t[n]=Xd(e[n]);for(let n of Object.getOwnPropertySymbols(e))t[n]=Xd(e[n]);return t}function Wd(e){return e.map(e=>Xd(e))}function Gd(e){return e.slice()}function Kd(e){return new Map(Xd([...e.entries()]))}function qd(e){return new Set(Xd([...e.entries()]))}function Jd(e){return new Date(e.toISOString())}function Yd(e){return e}function Xd(e){if(Bt(e))return Wd(e);if(Nt(e))return Jd(e);if(It(e))return Gd(e);if(Pt(e))return Kd(e);if(Ft(e))return qd(e);if(zt(e))return Ud(e);if(Xt(e))return Yd(e);throw Error(`ValueClone: Unable to clone value`)}var Zd=class extends rn{constructor(e,t){super(t),this.schema=e}};function Qd(e){return Jt(e)?e():Xd(e)}function $d(e,t){return Rt(e,`default`)?Qd(e.default):{}}function ef(e,t){return{}}function tf(e,t){if(e.uniqueItems===!0&&!Rt(e,`default`))throw new Zd(e,`Array with the uniqueItems constraint requires a default value`);if(`contains`in e&&!Rt(e,`default`))throw new Zd(e,`Array with the contains constraint requires a default value`);return`default`in e?Qd(e.default):e.minItems===void 0?[]:Array.from({length:e.minItems}).map(n=>Pf(e.items,t))}function nf(e,t){return Rt(e,`default`)?Qd(e.default):(async function*(){})()}function rf(e,t){return Rt(e,`default`)?Qd(e.default):BigInt(0)}function af(e,t){return Rt(e,`default`)?Qd(e.default):!1}function of(e,t){if(Rt(e,`default`))return Qd(e.default);{let n=Pf(e.returns,t);return typeof n==`object`&&!Array.isArray(n)?class{constructor(){for(let[e,t]of Object.entries(n)){let n=this;n[e]=t}}}:class{}}}function sf(e,t){return Rt(e,`default`)?Qd(e.default):e.minimumTimestamp===void 0?new Date:new Date(e.minimumTimestamp)}function cf(e,t){return Rt(e,`default`)?Qd(e.default):()=>Pf(e.returns,t)}function lf(e,t){let n=globalThis.Object.values(e.$defs),r=e.$defs[e.$ref];return Pf(r,[...t,...n])}function uf(e,t){return Rt(e,`default`)?Qd(e.default):e.minimum===void 0?0:e.minimum}function df(e,t){if(Rt(e,`default`))return Qd(e.default);{let n=e.allOf.reduce((e,n)=>{let r=Pf(n,t);return typeof r==`object`?{...e,...r}:r},{});if(!nd(e,t,n))throw new Zd(e,`Intersect produced invalid value. Consider using a default value.`);return n}}function ff(e,t){return Rt(e,`default`)?Qd(e.default):(function*(){})()}function pf(e,t){return Rt(e,`default`)?Qd(e.default):e.const}function mf(e,t){if(Rt(e,`default`))return Qd(e.default);throw new Zd(e,`Never types cannot be created. Consider using a default value.`)}function hf(e,t){if(Rt(e,`default`))return Qd(e.default);throw new Zd(e,`Not types must have a default value`)}function gf(e,t){return Rt(e,`default`)?Qd(e.default):null}function _f(e,t){return Rt(e,`default`)?Qd(e.default):e.minimum===void 0?0:e.minimum}function vf(e,t){if(Rt(e,`default`))return Qd(e.default);{let n=new Set(e.required),r={};for(let[i,a]of Object.entries(e.properties))n.has(i)&&(r[i]=Pf(a,t));return r}}function yf(e,t){return Rt(e,`default`)?Qd(e.default):Promise.resolve(Pf(e.item,t))}function bf(e,t){return Rt(e,`default`)?Qd(e.default):{}}function xf(e,t){return Rt(e,`default`)?Qd(e.default):Pf(ql(e,t),t)}function Sf(e,t){if(Rt(e,`default`))return Qd(e.default);throw new Zd(e,`RegExp types cannot be created. Consider using a default value.`)}function Cf(e,t){if(e.pattern!==void 0){if(Rt(e,`default`))return Qd(e.default);throw new Zd(e,`String types with patterns must specify a default value`)}else if(e.format!==void 0){if(Rt(e,`default`))return Qd(e.default);throw new Zd(e,`String types with formats must specify a default value`)}else if(Rt(e,`default`))return Qd(e.default);else if(e.minLength!==void 0)return Array.from({length:e.minLength}).map(()=>` `).join(``);else return``}function wf(e,t){return Rt(e,`default`)?Qd(e.default):`value`in e?Symbol.for(e.value):Symbol()}function Tf(e,t){if(Rt(e,`default`))return Qd(e.default);if(!Ri(e))throw new Zd(e,`Can only create template literals that produce a finite variants. Consider using a default value.`);return Gi(e)[0]}function Ef(e,t){if(If++>Ff)throw new Zd(e,`Cannot create recursive type as it appears possibly infinite. Consider using a default.`);return Rt(e,`default`)?Qd(e.default):Pf(ql(e,t),t)}function Df(e,t){return Rt(e,`default`)?Qd(e.default):e.items===void 0?[]:Array.from({length:e.minItems}).map((n,r)=>Pf(e.items[r],t))}function Of(e,t){if(Rt(e,`default`))return Qd(e.default)}function kf(e,t){if(Rt(e,`default`))return Qd(e.default);if(e.anyOf.length===0)throw Error(`ValueCreate.Union: Cannot create Union with zero variants`);return Pf(e.anyOf[0],t)}function Af(e,t){return Rt(e,`default`)?Qd(e.default):e.minByteLength===void 0?new Uint8Array:new Uint8Array(e.minByteLength)}function jf(e,t){return Rt(e,`default`)?Qd(e.default):{}}function Mf(e,t){if(Rt(e,`default`))return Qd(e.default)}function Nf(e,t){if(Rt(e,`default`))return Qd(e.default);throw Error(`User defined types must specify a default value`)}function Pf(e,t){let n=Kl(e,t),r=e;switch(r[M]){case`Any`:return $d(r,n);case`Argument`:return ef(r,n);case`Array`:return tf(r,n);case`AsyncIterator`:return nf(r,n);case`BigInt`:return rf(r,n);case`Boolean`:return af(r,n);case`Constructor`:return of(r,n);case`Date`:return sf(r,n);case`Function`:return cf(r,n);case`Import`:return lf(r,n);case`Integer`:return uf(r,n);case`Intersect`:return df(r,n);case`Iterator`:return ff(r,n);case`Literal`:return pf(r,n);case`Never`:return mf(r,n);case`Not`:return hf(r,n);case`Null`:return gf(r,n);case`Number`:return _f(r,n);case`Object`:return vf(r,n);case`Promise`:return yf(r,n);case`Record`:return bf(r,n);case`Ref`:return xf(r,n);case`RegExp`:return Sf(r,n);case`String`:return Cf(r,n);case`Symbol`:return wf(r,n);case`TemplateLiteral`:return Tf(r,n);case`This`:return Ef(r,n);case`Tuple`:return Df(r,n);case`Undefined`:return Of(r,n);case`Union`:return kf(r,n);case`Uint8Array`:return Af(r,n);case`Unknown`:return jf(r,n);case`Void`:return Mf(r,n);default:if(!ei(r[M]))throw new Zd(r,`Unknown type`);return Nf(r,n)}}var Ff=512,If=0;function Lf(...e){return If=0,e.length===2?Pf(e[0],e[1]):Pf(e[0],[])}function Rf(e){return Gn(e)&&e[M]!==`Unsafe`}function zf(e,t,n){return Bt(n)?n.map(n=>Jf(e.items,t,n)):n}function Bf(e,t,n){let r=globalThis.Object.values(e.$defs),i=e.$defs[e.$ref];return Jf(i,[...t,...r],n)}function Vf(e,t,n){let r=e.unevaluatedProperties,i=e.allOf.map(e=>Jf(e,t,Xd(n))).reduce((e,t)=>zt(t)?{...e,...t}:t,{});if(!zt(n)||!zt(i)||!Gn(r))return i;let a=uo(e);for(let e of Object.getOwnPropertyNames(n))a.includes(e)||nd(r,t,n[e])&&(i[e]=Jf(r,t,n[e]));return i}function Hf(e,t,n){if(!zt(n)||Bt(n))return n;let r=e.additionalProperties;for(let i of Object.getOwnPropertyNames(n)){if(Rt(e.properties,i)){n[i]=Jf(e.properties[i],t,n[i]);continue}if(Gn(r)&&nd(r,t,n[i])){n[i]=Jf(r,t,n[i]);continue}delete n[i]}return n}function Uf(e,t,n){if(!zt(n))return n;let r=e.additionalProperties,i=Object.getOwnPropertyNames(n),[a,o]=Object.entries(e.patternProperties)[0],s=new RegExp(a);for(let e of i){if(s.test(e)){n[e]=Jf(o,t,n[e]);continue}if(Gn(r)&&nd(r,t,n[e])){n[e]=Jf(r,t,n[e]);continue}delete n[e]}return n}function Wf(e,t,n){return Jf(ql(e,t),t,n)}function Gf(e,t,n){return Jf(ql(e,t),t,n)}function Kf(e,t,n){if(!Bt(n))return n;if(Vt(e.items))return[];let r=Math.min(n.length,e.items.length);for(let i=0;i<r;i++)n[i]=Jf(e.items[i],t,n[i]);return n.length>r?n.slice(0,r):n}function qf(e,t,n){for(let r of e.anyOf)if(Rf(r)&&nd(r,t,n))return Jf(r,t,n);return n}function Jf(e,t,n){let r=qt(e.$id)?Kl(e,t):t,i=e;switch(i[M]){case`Array`:return zf(i,r,n);case`Import`:return Bf(i,r,n);case`Intersect`:return Vf(i,r,n);case`Object`:return Hf(i,r,n);case`Record`:return Uf(i,r,n);case`Ref`:return Wf(i,r,n);case`This`:return Gf(i,r,n);case`Tuple`:return Kf(i,r,n);case`Union`:return qf(i,r,n);default:return n}}function Yf(...e){return e.length===3?Jf(e[0],e[1],e[2]):Jf(e[0],[],e[1])}var Xf=class extends rn{constructor(e,t,n){super(`Unable to decode value as it does not match the expected schema`),this.schema=e,this.value=t,this.error=n}},Zf=class extends rn{constructor(e,t,n,r){super(r instanceof Error?r.message:`Unknown error`),this.schema=e,this.path=t,this.value=n,this.error=r}};function Qf(e,t,n){try{return Bn(e)?e[an].Decode(n):n}catch(r){throw new Zf(e,t,n,r)}}function $f(e,t,n,r){return Bt(r)?Qf(e,n,r.map((r,i)=>lp(e.items,t,`${n}/${i}`,r))):Qf(e,n,r)}function ep(e,t,n,r){if(!zt(r)||Xt(r))return Qf(e,n,r);let i=ho(e),a=i.map(e=>e[0]),o={...r};for(let[e,r]of i)e in o&&(o[e]=lp(r,t,`${n}/${e}`,o[e]));if(!Bn(e.unevaluatedProperties))return Qf(e,n,o);let s=Object.getOwnPropertyNames(o),c=e.unevaluatedProperties,l={...o};for(let e of s)a.includes(e)||(l[e]=Qf(c,`${n}/${e}`,l[e]));return Qf(e,n,l)}function tp(e,t,n,r){let i=globalThis.Object.values(e.$defs),a=e.$defs[e.$ref];return Qf(e,n,lp(a,[...t,...i],n,r))}function np(e,t,n,r){return Qf(e,n,lp(e.not,t,n,r))}function rp(e,t,n,r){if(!zt(r))return Qf(e,n,r);let i=uo(e),a={...r};for(let r of i)Rt(a,r)&&(Vt(a[r])&&(!Hn(e.properties[r])||Zt.IsExactOptionalProperty(a,r))||(a[r]=lp(e.properties[r],t,`${n}/${r}`,a[r])));if(!Kn(e.additionalProperties))return Qf(e,n,a);let o=Object.getOwnPropertyNames(a),s=e.additionalProperties,c={...a};for(let e of o)i.includes(e)||(c[e]=Qf(s,`${n}/${e}`,c[e]));return Qf(e,n,c)}function ip(e,t,n,r){if(!zt(r))return Qf(e,n,r);let i=Object.getOwnPropertyNames(e.patternProperties)[0],a=new RegExp(i),o={...r};for(let s of Object.getOwnPropertyNames(r))a.test(s)&&(o[s]=lp(e.patternProperties[i],t,`${n}/${s}`,o[s]));if(!Kn(e.additionalProperties))return Qf(e,n,o);let s=Object.getOwnPropertyNames(o),c=e.additionalProperties,l={...o};for(let e of s)a.test(e)||(l[e]=Qf(c,`${n}/${e}`,l[e]));return Qf(e,n,l)}function ap(e,t,n,r){return Qf(e,n,lp(ql(e,t),t,n,r))}function op(e,t,n,r){return Qf(e,n,lp(ql(e,t),t,n,r))}function sp(e,t,n,r){return Bt(r)&&Bt(e.items)?Qf(e,n,e.items.map((e,i)=>lp(e,t,`${n}/${i}`,r[i]))):Qf(e,n,r)}function cp(e,t,n,r){for(let i of e.anyOf)if(nd(i,t,r))return Qf(e,n,lp(i,t,n,r));return Qf(e,n,r)}function lp(e,t,n,r){let i=Kl(e,t),a=e;switch(e[M]){case`Array`:return $f(a,i,n,r);case`Import`:return tp(a,i,n,r);case`Intersect`:return ep(a,i,n,r);case`Not`:return np(a,i,n,r);case`Object`:return rp(a,i,n,r);case`Record`:return ip(a,i,n,r);case`Ref`:return ap(a,i,n,r);case`Symbol`:return Qf(a,n,r);case`This`:return op(a,i,n,r);case`Tuple`:return sp(a,i,n,r);case`Union`:return cp(a,i,n,r);default:return Qf(a,n,r)}}function up(e,t,n){return lp(e,t,``,n)}var dp=class extends rn{constructor(e,t,n){super(`The encoded value does not match the expected schema`),this.schema=e,this.value=t,this.error=n}},fp=class extends rn{constructor(e,t,n,r){super(`${r instanceof Error?r.message:`Unknown error`}`),this.schema=e,this.path=t,this.value=n,this.error=r}};function pp(e,t,n){try{return Bn(e)?e[an].Encode(n):n}catch(r){throw new fp(e,t,n,r)}}function mp(e,t,n,r){let i=pp(e,n,r);return Bt(i)?i.map((r,i)=>wp(e.items,t,`${n}/${i}`,r)):i}function hp(e,t,n,r){let i=globalThis.Object.values(e.$defs),a=e.$defs[e.$ref],o=pp(e,n,r);return wp(a,[...t,...i],n,o)}function gp(e,t,n,r){let i=pp(e,n,r);if(!zt(r)||Xt(r))return i;let a=ho(e),o=a.map(e=>e[0]),s={...i};for(let[e,r]of a)e in s&&(s[e]=wp(r,t,`${n}/${e}`,s[e]));if(!Bn(e.unevaluatedProperties))return s;let c=Object.getOwnPropertyNames(s),l=e.unevaluatedProperties,u={...s};for(let e of c)o.includes(e)||(u[e]=pp(l,`${n}/${e}`,u[e]));return u}function _p(e,t,n,r){return pp(e.not,n,pp(e,n,r))}function vp(e,t,n,r){let i=pp(e,n,r);if(!zt(i))return i;let a=uo(e),o={...i};for(let r of a)Rt(o,r)&&(Vt(o[r])&&(!Hn(e.properties[r])||Zt.IsExactOptionalProperty(o,r))||(o[r]=wp(e.properties[r],t,`${n}/${r}`,o[r])));if(!Kn(e.additionalProperties))return o;let s=Object.getOwnPropertyNames(o),c=e.additionalProperties,l={...o};for(let e of s)a.includes(e)||(l[e]=pp(c,`${n}/${e}`,l[e]));return l}function yp(e,t,n,r){let i=pp(e,n,r);if(!zt(r))return i;let a=Object.getOwnPropertyNames(e.patternProperties)[0],o=new RegExp(a),s={...i};for(let i of Object.getOwnPropertyNames(r))o.test(i)&&(s[i]=wp(e.patternProperties[a],t,`${n}/${i}`,s[i]));if(!Kn(e.additionalProperties))return s;let c=Object.getOwnPropertyNames(s),l=e.additionalProperties,u={...s};for(let e of c)o.test(e)||(u[e]=pp(l,`${n}/${e}`,u[e]));return u}function bp(e,t,n,r){return pp(e,n,wp(ql(e,t),t,n,r))}function xp(e,t,n,r){return pp(e,n,wp(ql(e,t),t,n,r))}function Sp(e,t,n,r){let i=pp(e,n,r);return Bt(e.items)?e.items.map((e,r)=>wp(e,t,`${n}/${r}`,i[r])):[]}function Cp(e,t,n,r){for(let i of e.anyOf)if(nd(i,t,r))return pp(e,n,wp(i,t,n,r));for(let i of e.anyOf){let a=wp(i,t,n,r);if(nd(e,t,a))return pp(e,n,a)}return pp(e,n,r)}function wp(e,t,n,r){let i=Kl(e,t),a=e;switch(e[M]){case`Array`:return mp(a,i,n,r);case`Import`:return hp(a,i,n,r);case`Intersect`:return gp(a,i,n,r);case`Not`:return _p(a,i,n,r);case`Object`:return vp(a,i,n,r);case`Record`:return yp(a,i,n,r);case`Ref`:return bp(a,i,n,r);case`This`:return xp(a,i,n,r);case`Tuple`:return Sp(a,i,n,r);case`Union`:return Cp(a,i,n,r);default:return pp(a,n,r)}}function Tp(e,t,n){return wp(e,t,``,n)}function Ep(e,t){return Bn(e)||Vp(e.items,t)}function Dp(e,t){return Bn(e)||Vp(e.items,t)}function Op(e,t){return Bn(e)||Vp(e.returns,t)||e.parameters.some(e=>Vp(e,t))}function kp(e,t){return Bn(e)||Vp(e.returns,t)||e.parameters.some(e=>Vp(e,t))}function Ap(e,t){return Bn(e)||Bn(e.unevaluatedProperties)||e.allOf.some(e=>Vp(e,t))}function jp(e,t){let n=globalThis.Object.getOwnPropertyNames(e.$defs).reduce((t,n)=>[...t,e.$defs[n]],[]),r=e.$defs[e.$ref];return Bn(e)||Vp(r,[...n,...t])}function Mp(e,t){return Bn(e)||Vp(e.items,t)}function Np(e,t){return Bn(e)||Vp(e.not,t)}function Pp(e,t){return Bn(e)||Object.values(e.properties).some(e=>Vp(e,t))||Kn(e.additionalProperties)&&Vp(e.additionalProperties,t)}function Fp(e,t){return Bn(e)||Vp(e.item,t)}function Ip(e,t){let n=Object.getOwnPropertyNames(e.patternProperties)[0],r=e.patternProperties[n];return Bn(e)||Vp(r,t)||Kn(e.additionalProperties)&&Bn(e.additionalProperties)}function Lp(e,t){return Bn(e)?!0:Vp(ql(e,t),t)}function Rp(e,t){return Bn(e)?!0:Vp(ql(e,t),t)}function zp(e,t){return Bn(e)||!Vt(e.items)&&e.items.some(e=>Vp(e,t))}function Bp(e,t){return Bn(e)||e.anyOf.some(e=>Vp(e,t))}function Vp(e,t){let n=Kl(e,t),r=e;if(e.$id&&Hp.has(e.$id))return!1;switch(e.$id&&Hp.add(e.$id),e[M]){case`Array`:return Ep(r,n);case`AsyncIterator`:return Dp(r,n);case`Constructor`:return Op(r,n);case`Function`:return kp(r,n);case`Import`:return jp(r,n);case`Intersect`:return Ap(r,n);case`Iterator`:return Mp(r,n);case`Not`:return Np(r,n);case`Object`:return Pp(r,n);case`Promise`:return Fp(r,n);case`Record`:return Ip(r,n);case`Ref`:return Lp(r,n);case`This`:return Rp(r,n);case`Tuple`:return zp(r,n);case`Union`:return Bp(r,n);default:return Bn(e)}}var Hp=new Set;function Up(e,t){return Hp.clear(),Vp(e,t)}function Wp(...e){let[t,n,r]=e.length===3?[e[0],e[1],e[2]]:[e[0],[],e[1]];if(!nd(t,n,r))throw new Xf(t,r,Hd(t,n,r).First());return Up(t,n)?up(t,n,r):r}function Gp(e,t){let n=Rt(e,`default`)?e.default:void 0,r=Jt(n)?n():Xd(n);return Vt(t)?r:zt(t)&&zt(r)?Object.assign(r,t):t}function Kp(e){return Gn(e)&&`default`in e}function qp(e,t,n){if(Bt(n)){for(let r=0;r<n.length;r++)n[r]=rm(e.items,t,n[r]);return n}let r=Gp(e,n);if(!Bt(r))return r;for(let n=0;n<r.length;n++)r[n]=rm(e.items,t,r[n]);return r}function Jp(e,t,n){return Nt(n)?n:Gp(e,n)}function Yp(e,t,n){let r=globalThis.Object.values(e.$defs),i=e.$defs[e.$ref];return rm(i,[...t,...r],n)}function Xp(e,t,n){let r=Gp(e,n);return e.allOf.reduce((e,n)=>{let i=rm(n,t,r);return zt(i)?{...e,...i}:i},{})}function Zp(e,t,n){let r=Gp(e,n);if(!zt(r))return r;let i=Object.getOwnPropertyNames(e.properties);for(let n of i)Vt(rm(e.properties[n],t,r[n]))||(r[n]=rm(e.properties[n],t,r[n]));if(!Kp(e.additionalProperties))return r;for(let n of Object.getOwnPropertyNames(r))i.includes(n)||(r[n]=rm(e.additionalProperties,t,r[n]));return r}function Qp(e,t,n){let r=Gp(e,n);if(!zt(r))return r;let i=e.additionalProperties,[a,o]=Object.entries(e.patternProperties)[0],s=new RegExp(a);for(let e of Object.getOwnPropertyNames(r))s.test(e)&&Kp(o)&&(r[e]=rm(o,t,r[e]));if(!Kp(i))return r;for(let e of Object.getOwnPropertyNames(r))s.test(e)||(r[e]=rm(i,t,r[e]));return r}function $p(e,t,n){return rm(ql(e,t),t,Gp(e,n))}function em(e,t,n){return rm(ql(e,t),t,n)}function tm(e,t,n){let r=Gp(e,n);if(!Bt(r)||Vt(e.items))return r;let[i,a]=[e.items,Math.max(e.items.length,r.length)];for(let e=0;e<a;e++)e<i.length&&(r[e]=rm(i[e],t,r[e]));return r}function nm(e,t,n){let r=Gp(e,n);for(let n of e.anyOf){let e=rm(n,t,Xd(r));if(nd(n,t,e))return e}return r}function rm(e,t,n){let r=Kl(e,t),i=e;switch(i[M]){case`Array`:return qp(i,r,n);case`Date`:return Jp(i,r,n);case`Import`:return Yp(i,r,n);case`Intersect`:return Xp(i,r,n);case`Object`:return Zp(i,r,n);case`Record`:return Qp(i,r,n);case`Ref`:return $p(i,r,n);case`This`:return em(i,r,n);case`Tuple`:return tm(i,r,n);case`Union`:return nm(i,r,n);default:return Gp(i,n)}}function im(...e){return e.length===3?rm(e[0],e[1],e[2]):rm(e[0],[],e[1])}function am(...e){let[t,n,r]=e.length===3?[e[0],e[1],e[2]]:[e[0],[],e[1]],i=Up(t,n)?Tp(t,n,r):r;if(!nd(t,n,i))throw new dp(t,i,Hd(t,n,i).First());return i}var om=class{constructor(e,t,n,r){this.schema=e,this.references=t,this.checkFunc=n,this.code=r,this.hasTransform=Up(e,t)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return Hd(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new Xf(this.schema,e,this.Errors(e).First());return this.hasTransform?up(this.schema,this.references,e):e}Encode(e){let t=this.hasTransform?Tp(this.schema,this.references,e):e;if(!this.checkFunc(t))throw new dp(this.schema,e,this.Errors(e).First());return t}},sm;(function(e){function t(e){return e===36}e.DollarSign=t;function n(e){return e===95}e.IsUnderscore=n;function r(e){return e>=65&&e<=90||e>=97&&e<=122}e.IsAlpha=r;function i(e){return e>=48&&e<=57}e.IsNumeric=i})(sm||={});var cm;(function(e){function t(e){return e.length===0?!1:sm.IsNumeric(e.charCodeAt(0))}function n(e){if(t(e))return!1;for(let t=0;t<e.length;t++){let n=e.charCodeAt(t);if(!(sm.IsAlpha(n)||sm.IsNumeric(n)||sm.DollarSign(n)||sm.IsUnderscore(n)))return!1}return!0}function r(e){return e.replace(/'/g,`\\'`)}function i(e,t){return n(t)?`${e}.${t}`:`${e}['${r(t)}']`}e.Encode=i})(cm||={});var lm;(function(e){function t(e){let t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);sm.IsNumeric(r)||sm.IsAlpha(r)?t.push(e.charAt(n)):t.push(`_${r}_`)}return t.join(``).replace(/__/g,`_`)}e.Encode=t})(lm||={});var um;(function(e){function t(e){return e.replace(/'/g,`\\'`)}e.Escape=t})(um||={});var dm=class extends rn{constructor(e){super(`Unknown type`),this.schema=e}},fm=class extends rn{constructor(e){super(`Preflight validation check failed to guard for the given schema`),this.schema=e}},pm;(function(e){function t(e,t,n){return Zt.ExactOptionalPropertyTypes?`('${t}' in ${e} ? ${n} : true)`:`(${cm.Encode(e,t)} !== undefined ? ${n} : true)`}e.IsExactOptionalProperty=t;function n(e){return Zt.AllowArrayObject?`(typeof ${e} === 'object' && ${e} !== null)`:`(typeof ${e} === 'object' && ${e} !== null && !Array.isArray(${e}))`}e.IsObjectLike=n;function r(e){return Zt.AllowArrayObject?`(typeof ${e} === 'object' && ${e} !== null && !(${e} instanceof Date) && !(${e} instanceof Uint8Array))`:`(typeof ${e} === 'object' && ${e} !== null && !Array.isArray(${e}) && !(${e} instanceof Date) && !(${e} instanceof Uint8Array))`}e.IsRecordLike=r;function i(e){return Zt.AllowNaN?`typeof ${e} === 'number'`:`Number.isFinite(${e})`}e.IsNumberLike=i;function a(e){return Zt.AllowNullVoid?`(${e} === undefined || ${e} === null)`:`${e} === undefined`}e.IsVoidLike=a})(pm||={});var mm;(function(e){function t(e){return e[M]===`Any`||e[M]===`Unknown`}function*n(e,t,n){yield`true`}function*r(e,t,n){yield`true`}function*i(e,t,n){yield`Array.isArray(${n})`;let[r,i]=[k(`value`,`any`),k(`acc`,`number`)];if(Wt(e.maxItems)&&(yield`${n}.length <= ${e.maxItems}`),Wt(e.minItems)&&(yield`${n}.length >= ${e.minItems}`),yield`${n}.every((${r}) => ${de(e.items,t,`value`)})`,Ur(e.contains)||Wt(e.minContains)||Wt(e.maxContains)){let a=de(Ur(e.contains)?e.contains:li(),t,`value`),o=Wt(e.minContains)?[`(count >= ${e.minContains})`]:[],s=Wt(e.maxContains)?[`(count <= ${e.maxContains})`]:[];yield`((${r}) => { ${`const count = value.reduce((${i}, ${r}) => ${a} ? acc + 1 : acc, 0)`}; return ${[`(count > 0)`,...o,...s].join(` && `)}})(${n})`}e.uniqueItems===!0&&(yield`((${r}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${n})`)}function*a(e,t,n){yield`(typeof value === 'object' && Symbol.asyncIterator in ${n})`}function*o(e,t,n){yield`(typeof ${n} === 'bigint')`,Kt(e.exclusiveMaximum)&&(yield`${n} < BigInt(${e.exclusiveMaximum})`),Kt(e.exclusiveMinimum)&&(yield`${n} > BigInt(${e.exclusiveMinimum})`),Kt(e.maximum)&&(yield`${n} <= BigInt(${e.maximum})`),Kt(e.minimum)&&(yield`${n} >= BigInt(${e.minimum})`),Kt(e.multipleOf)&&(yield`(${n} % BigInt(${e.multipleOf})) === 0`)}function*s(e,t,n){yield`(typeof ${n} === 'boolean')`}function*c(e,t,n){yield*E(e.returns,t,`${n}.prototype`)}function*l(e,t,n){yield`(${n} instanceof Date) && Number.isFinite(${n}.getTime())`,Wt(e.exclusiveMaximumTimestamp)&&(yield`${n}.getTime() < ${e.exclusiveMaximumTimestamp}`),Wt(e.exclusiveMinimumTimestamp)&&(yield`${n}.getTime() > ${e.exclusiveMinimumTimestamp}`),Wt(e.maximumTimestamp)&&(yield`${n}.getTime() <= ${e.maximumTimestamp}`),Wt(e.minimumTimestamp)&&(yield`${n}.getTime() >= ${e.minimumTimestamp}`),Wt(e.multipleOfTimestamp)&&(yield`(${n}.getTime() % ${e.multipleOfTimestamp}) === 0`)}function*u(e,t,n){yield`(typeof ${n} === 'function')`}function*d(e,t,n){let r=globalThis.Object.getOwnPropertyNames(e.$defs).reduce((t,n)=>[...t,e.$defs[n]],[]);yield*E(oo(e.$ref),[...t,...r],n)}function*f(e,t,n){yield`Number.isInteger(${n})`,Wt(e.exclusiveMaximum)&&(yield`${n} < ${e.exclusiveMaximum}`),Wt(e.exclusiveMinimum)&&(yield`${n} > ${e.exclusiveMinimum}`),Wt(e.maximum)&&(yield`${n} <= ${e.maximum}`),Wt(e.minimum)&&(yield`${n} >= ${e.minimum}`),Wt(e.multipleOf)&&(yield`(${n} % ${e.multipleOf}) === 0`)}function*p(e,t,n){let r=e.allOf.map(e=>de(e,t,n)).join(` && `);e.unevaluatedProperties===!1?yield`(${r} && ${`Object.getOwnPropertyNames(${n}).every(key => ${O(`${new RegExp(po(e))};`)}.test(key))`})`:Ur(e.unevaluatedProperties)?yield`(${r} && ${`Object.getOwnPropertyNames(${n}).every(key => ${O(`${new RegExp(po(e))};`)}.test(key) || ${de(e.unevaluatedProperties,t,`${n}[key]`)})`})`:yield`(${r})`}function*m(e,t,n){yield`(typeof value === 'object' && Symbol.iterator in ${n})`}function*h(e,t,n){typeof e.const==`number`||typeof e.const==`boolean`?yield`(${n} === ${e.const})`:yield`(${n} === '${um.Escape(e.const)}')`}function*g(e,t,n){yield`false`}function*_(e,t,n){yield`(!${de(e.not,t,n)})`}function*v(e,t,n){yield`(${n} === null)`}function*ee(e,t,n){yield pm.IsNumberLike(n),Wt(e.exclusiveMaximum)&&(yield`${n} < ${e.exclusiveMaximum}`),Wt(e.exclusiveMinimum)&&(yield`${n} > ${e.exclusiveMinimum}`),Wt(e.maximum)&&(yield`${n} <= ${e.maximum}`),Wt(e.minimum)&&(yield`${n} >= ${e.minimum}`),Wt(e.multipleOf)&&(yield`(${n} % ${e.multipleOf}) === 0`)}function*te(e,n,r){yield pm.IsObjectLike(r),Wt(e.minProperties)&&(yield`Object.getOwnPropertyNames(${r}).length >= ${e.minProperties}`),Wt(e.maxProperties)&&(yield`Object.getOwnPropertyNames(${r}).length <= ${e.maxProperties}`);let i=Object.getOwnPropertyNames(e.properties);for(let a of i){let i=cm.Encode(r,a),o=e.properties[a];if(e.required&&e.required.includes(a))yield*E(o,n,i),(ps(o)||t(o))&&(yield`('${a}' in ${r})`);else{let e=de(o,n,i);yield pm.IsExactOptionalProperty(r,a,e)}}if(e.additionalProperties===!1&&(e.required&&e.required.length===i.length?yield`Object.getOwnPropertyNames(${r}).length === ${i.length}`:yield`Object.getOwnPropertyNames(${r}).every(key => ${`[${i.map(e=>`'${e}'`).join(`, `)}]`}.includes(key))`),typeof e.additionalProperties==`object`){let t=de(e.additionalProperties,n,`${r}[key]`);yield`(Object.getOwnPropertyNames(${r}).every(key => ${`[${i.map(e=>`'${e}'`).join(`, `)}]`}.includes(key) || ${t}))`}}function*y(e,t,n){yield`${n} instanceof Promise`}function*b(e,t,n){yield pm.IsRecordLike(n),Wt(e.minProperties)&&(yield`Object.getOwnPropertyNames(${n}).length >= ${e.minProperties}`),Wt(e.maxProperties)&&(yield`Object.getOwnPropertyNames(${n}).length <= ${e.maxProperties}`);let[r,i]=Object.entries(e.patternProperties)[0];yield`(Object.entries(${n}).every(([key, value]) => ${`(${O(`${new RegExp(r)}`)}.test(key) ? ${de(i,t,`value`)} : ${Ur(e.additionalProperties)?de(e.additionalProperties,t,n):e.additionalProperties===!1?`false`:`true`})`}))`}function*x(e,t,n){let r=ql(e,t);if(ue.functions.has(e.$ref))return yield`${D(e.$ref)}(${n})`;yield*E(r,t,n)}function*ne(e,t,n){let r=O(`${new RegExp(e.source,e.flags)};`);yield`(typeof ${n} === 'string')`,Wt(e.maxLength)&&(yield`${n}.length <= ${e.maxLength}`),Wt(e.minLength)&&(yield`${n}.length >= ${e.minLength}`),yield`${r}.test(${n})`}function*re(e,t,n){yield`(typeof ${n} === 'string')`,Wt(e.maxLength)&&(yield`${n}.length <= ${e.maxLength}`),Wt(e.minLength)&&(yield`${n}.length >= ${e.minLength}`),e.pattern!==void 0&&(yield`${O(`${new RegExp(e.pattern)};`)}.test(${n})`),e.format!==void 0&&(yield`format('${e.format}', ${n})`)}function*S(e,t,n){yield`(typeof ${n} === 'symbol')`}function*ie(e,t,n){yield`(typeof ${n} === 'string')`,yield`${O(`${new RegExp(e.pattern)};`)}.test(${n})`}function*C(e,t,n){yield`${D(e.$ref)}(${n})`}function*w(e,t,n){if(yield`Array.isArray(${n})`,e.items===void 0)return yield`${n}.length === 0`;yield`(${n}.length === ${e.maxItems})`;for(let r=0;r<e.items.length;r++)yield`${de(e.items[r],t,`${n}[${r}]`)}`}function*ae(e,t,n){yield`${n} === undefined`}function*oe(e,t,n){yield`(${e.anyOf.map(e=>de(e,t,n)).join(` || `)})`}function*se(e,t,n){yield`${n} instanceof Uint8Array`,Wt(e.maxByteLength)&&(yield`(${n}.length <= ${e.maxByteLength})`),Wt(e.minByteLength)&&(yield`(${n}.length >= ${e.minByteLength})`)}function*T(e,t,n){yield`true`}function*ce(e,t,n){yield pm.IsVoidLike(n)}function*le(e,t,n){let r=ue.instances.size;ue.instances.set(r,e),yield`kind('${e[M]}', ${r}, ${n})`}function*E(e,t,E,de=!0){let O=qt(e.$id)?[...t,e]:t,k=e;if(de&&qt(e.$id)){let n=D(e.$id);if(ue.functions.has(n))return yield`${n}(${E})`;{ue.functions.set(n,`<deferred>`);let r=fe(n,e,t,`value`,!1);return ue.functions.set(n,r),yield`${n}(${E})`}}switch(k[M]){case`Any`:return yield*n(k,O,E);case`Argument`:return yield*r(k,O,E);case`Array`:return yield*i(k,O,E);case`AsyncIterator`:return yield*a(k,O,E);case`BigInt`:return yield*o(k,O,E);case`Boolean`:return yield*s(k,O,E);case`Constructor`:return yield*c(k,O,E);case`Date`:return yield*l(k,O,E);case`Function`:return yield*u(k,O,E);case`Import`:return yield*d(k,O,E);case`Integer`:return yield*f(k,O,E);case`Intersect`:return yield*p(k,O,E);case`Iterator`:return yield*m(k,O,E);case`Literal`:return yield*h(k,O,E);case`Never`:return yield*g(k,O,E);case`Not`:return yield*_(k,O,E);case`Null`:return yield*v(k,O,E);case`Number`:return yield*ee(k,O,E);case`Object`:return yield*te(k,O,E);case`Promise`:return yield*y(k,O,E);case`Record`:return yield*b(k,O,E);case`Ref`:return yield*x(k,O,E);case`RegExp`:return yield*ne(k,O,E);case`String`:return yield*re(k,O,E);case`Symbol`:return yield*S(k,O,E);case`TemplateLiteral`:return yield*ie(k,O,E);case`This`:return yield*C(k,O,E);case`Tuple`:return yield*w(k,O,E);case`Undefined`:return yield*ae(k,O,E);case`Union`:return yield*oe(k,O,E);case`Uint8Array`:return yield*se(k,O,E);case`Unknown`:return yield*T(k,O,E);case`Void`:return yield*ce(k,O,E);default:if(!ei(k[M]))throw new dm(e);return yield*le(k,O,E)}}let ue={language:`javascript`,functions:new Map,variables:new Map,instances:new Map};function de(e,t,n,r=!0){return`(${[...E(e,t,n,r)].join(` && `)})`}function D(e){return`check_${lm.Encode(e)}`}function O(e){let t=`local_${ue.variables.size}`;return ue.variables.set(t,`const ${t} = ${e}`),t}function fe(e,t,n,r,i=!0){let[a,o]=[`
`,e=>``.padStart(e,` `)],s=k(`value`,`any`),c=pe(`boolean`),l=[...E(t,n,r,i)].map(e=>`${o(4)}${e}`).join(` &&${a}`);return`function ${e}(${s})${c} {${a}${o(2)}return (${a}${l}${a}${o(2)})\n}`}function k(e,t){return`${e}${ue.language===`typescript`?`: ${t}`:``}`}function pe(e){return ue.language===`typescript`?`: ${e}`:``}function me(e,t,n){let r=fe(`check`,e,t,`value`),i=k(`value`,`any`),a=pe(`boolean`),o=[...ue.functions.values()],s=[...ue.variables.values()],c=qt(e.$id)?`return function check(${i})${a} {\n  return ${D(e.$id)}(value)\n}`:`return ${r}`;return[...s,...o,c].join(`
`)}function he(...e){let t={language:`javascript`},[n,r,i]=e.length===2&&Bt(e[1])?[e[0],e[1],t]:e.length===2&&!Bt(e[1])?[e[0],[],e[1]]:e.length===3?[e[0],e[1],e[2]]:e.length===1?[e[0],[],t]:[null,[],t];if(ue.language=i.language,ue.variables.clear(),ue.functions.clear(),ue.instances.clear(),!Ur(n))throw new fm(n);for(let e of r)if(!Ur(e))throw new fm(e);return me(n,r,i)}e.Code=he;function ge(e,t=[]){let n=he(e,t,{language:`javascript`}),r=globalThis.Function(`kind`,`format`,`hash`,n),i=new Map(ue.instances);function a(e,t,n){return!ei(e)||!i.has(t)?!1:ti(e)(i.get(t),n)}function o(e,t){return Xr(e)?Qr(e)(t):!1}function s(e){return _u(e)}return new om(e,t,r(a,o,s),n)}e.Compile=ge})(mm||={});var hm=typeof Bun<`u`;i();var gm={aac:`audio/aac`,abw:`application/x-abiword`,ai:`application/postscript`,arc:`application/octet-stream`,avi:`video/x-msvideo`,azw:`application/vnd.amazon.ebook`,bin:`application/octet-stream`,bz:`application/x-bzip`,bz2:`application/x-bzip2`,csh:`application/x-csh`,css:`text/css`,csv:`text/csv`,doc:`application/msword`,dll:`application/octet-stream`,eot:`application/vnd.ms-fontobject`,epub:`application/epub+zip`,gif:`image/gif`,htm:`text/html`,html:`text/html`,ico:`image/x-icon`,ics:`text/calendar`,jar:`application/java-archive`,jpeg:`image/jpeg`,jpg:`image/jpeg`,js:`application/javascript`,json:`application/json`,mid:`audio/midi`,midi:`audio/midi`,mp2:`audio/mpeg`,mp3:`audio/mpeg`,mp4:`video/mp4`,mpa:`video/mpeg`,mpe:`video/mpeg`,mpeg:`video/mpeg`,mpkg:`application/vnd.apple.installer+xml`,odp:`application/vnd.oasis.opendocument.presentation`,ods:`application/vnd.oasis.opendocument.spreadsheet`,odt:`application/vnd.oasis.opendocument.text`,oga:`audio/ogg`,ogv:`video/ogg`,ogx:`application/ogg`,otf:`font/otf`,png:`image/png`,pdf:`application/pdf`,ppt:`application/vnd.ms-powerpoint`,rar:`application/x-rar-compressed`,rtf:`application/rtf`,sh:`application/x-sh`,svg:`image/svg+xml`,swf:`application/x-shockwave-flash`,tar:`application/x-tar`,tif:`image/tiff`,tiff:`image/tiff`,ts:`application/typescript`,ttf:`font/ttf`,txt:`text/plain`,vsd:`application/vnd.visio`,wav:`audio/x-wav`,weba:`audio/webm`,webm:`video/webm`,webp:`image/webp`,woff:`font/woff`,woff2:`font/woff2`,xhtml:`application/xhtml+xml`,xls:`application/vnd.ms-excel`,xlsx:`application/vnd.ms-excel`,xlsx_OLD:`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`,xml:`application/xml`,xul:`application/vnd.mozilla.xul+xml`,zip:`application/zip`,"3gp":`video/3gpp`,"3gp_DOES_NOT_CONTAIN_VIDEO":`audio/3gpp`,"3gp2":`video/3gpp2`,"3gp2_DOES_NOT_CONTAIN_VIDEO":`audio/3gpp2`,"7z":`application/x-7z-compressed`},_m=e=>{let t=e.lastIndexOf(`.`);return t===-1?``:e.slice(t+1)},vm,ym,bm=class{constructor(e){if(this.path=e,hm)this.value=Bun.file(e);else{if(!vm||!ym){if(typeof window<`u`){console.warn(`Browser environment does not support file`);return}let e=e=>console.warn(Error(`[elysia] \`file\` require \`fs${e?`.`+e:``}\` ${e?.includes(`.`)?`module `:``}which is not available in this environment`));if(typeof n>`u`||typeof n.getBuiltinModule!=`function`){e();return}let t=n.getBuiltinModule(`fs`);if(!t){e();return}if(typeof t.createReadStream!=`function`){e();return}if(typeof t.promises?.stat!=`function`){e();return}vm=t.createReadStream,ym=t.promises.stat}this.value=vm(e),this.stats=ym(e)}}get type(){return gm[_m(this.path)]||`application/octet-stream`}get length(){return hm?this.value.size:this.stats?.then(e=>e.size)??0}},xm={},Sm={};Sm.byteLength=Am,Sm.toByteArray=Mm,Sm.fromByteArray=Fm;for(var Cm=[],wm=[],Tm=typeof Uint8Array<`u`?Uint8Array:Array,Em=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,Dm=0,Om=Em.length;Dm<Om;++Dm)Cm[Dm]=Em[Dm],wm[Em.charCodeAt(Dm)]=Dm;wm[45]=62,wm[95]=63;function km(e){var t=e.length;if(t%4>0)throw Error(`Invalid string. Length must be a multiple of 4`);var n=e.indexOf(`=`);n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function Am(e){var t=km(e),n=t[0],r=t[1];return(n+r)*3/4-r}function jm(e,t,n){return(t+n)*3/4-n}function Mm(e){var t,n=km(e),r=n[0],i=n[1],a=new Tm(jm(e,r,i)),o=0,s=i>0?r-4:r,c;for(c=0;c<s;c+=4)t=wm[e.charCodeAt(c)]<<18|wm[e.charCodeAt(c+1)]<<12|wm[e.charCodeAt(c+2)]<<6|wm[e.charCodeAt(c+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=t&255;return i===2&&(t=wm[e.charCodeAt(c)]<<2|wm[e.charCodeAt(c+1)]>>4,a[o++]=t&255),i===1&&(t=wm[e.charCodeAt(c)]<<10|wm[e.charCodeAt(c+1)]<<4|wm[e.charCodeAt(c+2)]>>2,a[o++]=t>>8&255,a[o++]=t&255),a}function Nm(e){return Cm[e>>18&63]+Cm[e>>12&63]+Cm[e>>6&63]+Cm[e&63]}function Pm(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(Nm(r));return i.join(``)}function Fm(e){for(var t,n=e.length,r=n%3,i=[],a=16383,o=0,s=n-r;o<s;o+=a)i.push(Pm(e,o,o+a>s?s:o+a));return r===1?(t=e[n-1],i.push(Cm[t>>2]+Cm[t<<4&63]+`==`)):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(Cm[t>>10]+Cm[t>>4&63]+Cm[t<<2&63]+`=`)),i.join(``)}var Im={};
/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/
Im.read=function(e,t,n,r,i){var a,o,s=i*8-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=a*256+e[t+d],d+=f,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=o*256+e[t+d],d+=f,u-=8);if(a===0)a=1-l;else if(a===c)return o?NaN:(p?-1:1)*(1/0);else o+=2**r,a-=l;return(p?-1:1)*o*2**(a-r)},Im.write=function(e,t,n,r,i,a){var o,s,c,l=a*8-i-1,u=(1<<l)-1,d=u>>1,f=i===23?2**-24-2**-77:0,p=r?0:a-1,m=r?1:-1,h=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=2**-o)<1&&(o--,c*=2),o+d>=1?t+=f/c:t+=f*2**(1-d),t*c>=2&&(o++,c/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*c-1)*2**i,o+=d):(s=t*2**(d-1)*2**i,o=0));i>=8;e[n+p]=s&255,p+=m,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+p]=o&255,p+=m,o/=256,l-=8);e[n+p-m]|=h*128},(function(e){let t=Sm,n=Im,r=typeof Symbol==`function`&&typeof Symbol.for==`function`?Symbol.for(`nodejs.util.inspect.custom`):null;e.Buffer=u,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50;let i=2147483647;e.kMaxLength=i;let{Uint8Array:a,ArrayBuffer:o,SharedArrayBuffer:s}=globalThis;u.TYPED_ARRAY_SUPPORT=c(),!u.TYPED_ARRAY_SUPPORT&&typeof console<`u`&&typeof console.error==`function`&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{let e=new a(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,a.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,`parent`,{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,`offset`,{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(e){if(e>i)throw RangeError(`The value "`+e+`" is invalid for option "size"`);let t=new a(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,n){if(typeof e==`number`){if(typeof t==`string`)throw TypeError(`The "string" argument must be of type string. Received type number`);return m(e)}return d(e,t,n)}u.poolSize=8192;function d(e,t,n){if(typeof e==`string`)return h(e,t);if(o.isView(e))return _(e);if(e==null)throw TypeError(`The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type `+typeof e);if(Ae(e,o)||e&&Ae(e.buffer,o)||s!==void 0&&(Ae(e,s)||e&&Ae(e.buffer,s)))return v(e,t,n);if(typeof e==`number`)throw TypeError(`The "value" argument must not be of type number. Received type number`);let r=e.valueOf&&e.valueOf();if(r!=null&&r!==e)return u.from(r,t,n);let i=ee(e);if(i)return i;if(typeof Symbol<`u`&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]==`function`)return u.from(e[Symbol.toPrimitive](`string`),t,n);throw TypeError(`The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type `+typeof e)}u.from=function(e,t,n){return d(e,t,n)},Object.setPrototypeOf(u.prototype,a.prototype),Object.setPrototypeOf(u,a);function f(e){if(typeof e!=`number`)throw TypeError(`"size" argument must be of type number`);if(e<0)throw RangeError(`The value "`+e+`" is invalid for option "size"`)}function p(e,t,n){return f(e),e<=0||t===void 0?l(e):typeof n==`string`?l(e).fill(t,n):l(e).fill(t)}u.alloc=function(e,t,n){return p(e,t,n)};function m(e){return f(e),l(e<0?0:te(e)|0)}u.allocUnsafe=function(e){return m(e)},u.allocUnsafeSlow=function(e){return m(e)};function h(e,t){if((typeof t!=`string`||t===``)&&(t=`utf8`),!u.isEncoding(t))throw TypeError(`Unknown encoding: `+t);let n=b(e,t)|0,r=l(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function g(e){let t=e.length<0?0:te(e.length)|0,n=l(t);for(let r=0;r<t;r+=1)n[r]=e[r]&255;return n}function _(e){if(Ae(e,a)){let t=new a(e);return v(t.buffer,t.byteOffset,t.byteLength)}return g(e)}function v(e,t,n){if(t<0||e.byteLength<t)throw RangeError(`"offset" is outside of buffer bounds`);if(e.byteLength<t+(n||0))throw RangeError(`"length" is outside of buffer bounds`);let r;return r=t===void 0&&n===void 0?new a(e):n===void 0?new a(e,t):new a(e,t,n),Object.setPrototypeOf(r,u.prototype),r}function ee(e){if(u.isBuffer(e)){let t=te(e.length)|0,n=l(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!=`number`||je(e.length)?l(0):g(e);if(e.type===`Buffer`&&Array.isArray(e.data))return g(e.data)}function te(e){if(e>=i)throw RangeError(`Attempt to allocate Buffer larger than maximum size: 0x`+i.toString(16)+` bytes`);return e|0}function y(e){return+e!=e&&(e=0),u.alloc(+e)}u.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==u.prototype},u.compare=function(e,t){if(Ae(e,a)&&(e=u.from(e,e.offset,e.byteLength)),Ae(t,a)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw TypeError(`The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array`);if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case`hex`:case`utf8`:case`utf-8`:case`ascii`:case`latin1`:case`binary`:case`base64`:case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw TypeError(`"list" argument must be an Array of Buffers`);if(e.length===0)return u.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){let t=e[n];if(Ae(t,a))i+t.length>r.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(r,i)):a.prototype.set.call(r,t,i);else if(u.isBuffer(t))t.copy(r,i);else throw TypeError(`"list" argument must be an Array of Buffers`);i+=t.length}return r};function b(e,t){if(u.isBuffer(e))return e.length;if(o.isView(e)||Ae(e,o))return e.byteLength;if(typeof e!=`string`)throw TypeError(`The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type `+typeof e);let n=e.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&n===0)return 0;let i=!1;for(;;)switch(t){case`ascii`:case`latin1`:case`binary`:return n;case`utf8`:case`utf-8`:return Te(e).length;case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return n*2;case`hex`:return n>>>1;case`base64`:return Oe(e).length;default:if(i)return r?-1:Te(e).length;t=(``+t).toLowerCase(),i=!0}}u.byteLength=b;function x(e,t,n){let r=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return``;for(e||=`utf8`;;)switch(e){case`hex`:return de(this,t,n);case`utf8`:case`utf-8`:return T(this,t,n);case`ascii`:return E(this,t,n);case`latin1`:case`binary`:return ue(this,t,n);case`base64`:return se(this,t,n);case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return D(this,t,n);default:if(r)throw TypeError(`Unknown encoding: `+e);e=(e+``).toLowerCase(),r=!0}}u.prototype._isBuffer=!0;function ne(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}u.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError(`Buffer size must be a multiple of 16-bits`);for(let t=0;t<e;t+=2)ne(this,t,t+1);return this},u.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError(`Buffer size must be a multiple of 32-bits`);for(let t=0;t<e;t+=4)ne(this,t,t+3),ne(this,t+1,t+2);return this},u.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError(`Buffer size must be a multiple of 64-bits`);for(let t=0;t<e;t+=8)ne(this,t,t+7),ne(this,t+1,t+6),ne(this,t+2,t+5),ne(this,t+3,t+4);return this},u.prototype.toString=function(){let e=this.length;return e===0?``:arguments.length===0?T(this,0,e):x.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw TypeError(`Argument must be a Buffer`);return this===e?!0:u.compare(this,e)===0},u.prototype.inspect=function(){let t=``,n=e.INSPECT_MAX_BYTES;return t=this.toString(`hex`,0,n).replace(/(.{2})/g,`$1 `).trim(),this.length>n&&(t+=` ... `),`<Buffer `+t+`>`},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(e,t,n,r,i){if(Ae(e,a)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw TypeError(`The "target" argument must be one of type Buffer or Uint8Array. Received type `+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),r===void 0&&(r=0),i===void 0&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw RangeError(`out of range index`);if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;let o=i-r,s=n-t,c=Math.min(o,s),l=this.slice(r,i),d=e.slice(t,n);for(let e=0;e<c;++e)if(l[e]!==d[e]){o=l[e],s=d[e];break}return o<s?-1:s<o?1:0};function re(e,t,n,r,i){if(e.length===0)return-1;if(typeof n==`string`?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,je(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0)if(i)n=0;else return-1;if(typeof t==`string`&&(t=u.from(t,r)),u.isBuffer(t))return t.length===0?-1:S(e,t,n,r,i);if(typeof t==`number`)return t&=255,typeof a.prototype.indexOf==`function`?i?a.prototype.indexOf.call(e,t,n):a.prototype.lastIndexOf.call(e,t,n):S(e,[t],n,r,i);throw TypeError(`val must be string, number or Buffer`)}function S(e,t,n,r,i){let a=1,o=e.length,s=t.length;if(r!==void 0&&(r=String(r).toLowerCase(),r===`ucs2`||r===`ucs-2`||r===`utf16le`||r===`utf-16le`)){if(e.length<2||t.length<2)return-1;a=2,o/=2,s/=2,n/=2}function c(e,t){return a===1?e[t]:e.readUInt16BE(t*a)}let l;if(i){let r=-1;for(l=n;l<o;l++)if(c(e,l)===c(t,r===-1?0:l-r)){if(r===-1&&(r=l),l-r+1===s)return r*a}else r!==-1&&(l-=l-r),r=-1}else for(n+s>o&&(n=o-s),l=n;l>=0;l--){let n=!0;for(let r=0;r<s;r++)if(c(e,l+r)!==c(t,r)){n=!1;break}if(n)return l}return-1}u.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},u.prototype.indexOf=function(e,t,n){return re(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return re(this,e,t,n,!1)};function ie(e,t,n,r){n=Number(n)||0;let i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;let a=t.length;r>a/2&&(r=a/2);let o;for(o=0;o<r;++o){let r=parseInt(t.substr(o*2,2),16);if(je(r))return o;e[n+o]=r}return o}function C(e,t,n,r){return ke(Te(t,e.length-n),e,n,r)}function w(e,t,n,r){return ke(Ee(t),e,n,r)}function ae(e,t,n,r){return ke(Oe(t),e,n,r)}function oe(e,t,n,r){return ke(De(t,e.length-n),e,n,r)}u.prototype.write=function(e,t,n,r){if(t===void 0)r=`utf8`,n=this.length,t=0;else if(n===void 0&&typeof t==`string`)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,r===void 0&&(r=`utf8`)):(r=n,n=void 0);else throw Error(`Buffer.write(string, encoding, offset[, length]) is no longer supported`);let i=this.length-t;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError(`Attempt to write outside buffer bounds`);r||=`utf8`;let a=!1;for(;;)switch(r){case`hex`:return ie(this,e,t,n);case`utf8`:case`utf-8`:return C(this,e,t,n);case`ascii`:case`latin1`:case`binary`:return w(this,e,t,n);case`base64`:return ae(this,e,t,n);case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return oe(this,e,t,n);default:if(a)throw TypeError(`Unknown encoding: `+r);r=(``+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:`Buffer`,data:Array.prototype.slice.call(this._arr||this,0)}};function se(e,n,r){return n===0&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function T(e,t,n){n=Math.min(e.length,n);let r=[],i=t;for(;i<n;){let t=e[i],a=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=n){let n,r,s,c;switch(o){case 1:t<128&&(a=t);break;case 2:n=e[i+1],(n&192)==128&&(c=(t&31)<<6|n&63,c>127&&(a=c));break;case 3:n=e[i+1],r=e[i+2],(n&192)==128&&(r&192)==128&&(c=(t&15)<<12|(n&63)<<6|r&63,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],(n&192)==128&&(r&192)==128&&(s&192)==128&&(c=(t&15)<<18|(n&63)<<12|(r&63)<<6|s&63,c>65535&&c<1114112&&(a=c))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|a&1023),r.push(a),i+=o}return le(r)}let ce=4096;function le(e){let t=e.length;if(t<=ce)return String.fromCharCode.apply(String,e);let n=``,r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ce));return n}function E(e,t,n){let r=``;n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]&127);return r}function ue(e,t,n){let r=``;n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function de(e,t,n){let r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i=``;for(let r=t;r<n;++r)i+=Me[e[r]];return i}function D(e,t,n){let r=e.slice(t,n),i=``;for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+r[e+1]*256);return i}u.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let r=this.subarray(e,t);return Object.setPrototypeOf(r,u.prototype),r};function O(e,t,n){if(e%1!=0||e<0)throw RangeError(`offset is not uint`);if(e+t>n)throw RangeError(`Trying to access beyond buffer length`)}u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=Ne(function(e){e>>>=0,Se(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&A(e,this.length-8);let r=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),u.prototype.readBigUInt64BE=Ne(function(e){e>>>=0,Se(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&A(e,this.length-8);let r=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),u.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=2**(8*t)),r},u.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=t,i=1,a=this[e+--r];for(;r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=2**(8*t)),a},u.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n},u.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=Ne(function(e){e>>>=0,Se(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&A(e,this.length-8);let r=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),u.prototype.readBigInt64BE=Ne(function(e){e>>>=0,Se(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&A(e,this.length-8);let r=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)}),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),n.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),n.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),n.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),n.read(this,e,!1,52,8)};function fe(e,t,n,r,i,a){if(!u.isBuffer(e))throw TypeError(`"buffer" argument must be a Buffer instance`);if(t>i||t<a)throw RangeError(`"value" argument is out of bounds`);if(n+r>e.length)throw RangeError(`Index out of range`)}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){let r=2**(8*n)-1;fe(this,e,t,n,r,0)}let i=1,a=0;for(this[t]=e&255;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){let r=2**(8*n)-1;fe(this,e,t,n,r,0)}let i=n-1,a=1;for(this[t+i]=e&255;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||fe(this,e,t,1,255,0),this[t]=e&255,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||fe(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||fe(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||fe(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||fe(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function k(e,t,n,r,i){xe(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function pe(e,t,n,r,i){xe(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}u.prototype.writeBigUInt64LE=Ne(function(e,t=0){return k(this,e,t,BigInt(0),BigInt(`0xffffffffffffffff`))}),u.prototype.writeBigUInt64BE=Ne(function(e,t=0){return pe(this,e,t,BigInt(0),BigInt(`0xffffffffffffffff`))}),u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=2**(8*n-1);fe(this,e,t,n,r-1,-r)}let i=0,a=1,o=0;for(this[t]=e&255;++i<n&&(a*=256);)e<0&&o===0&&this[t+i-1]!==0&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=2**(8*n-1);fe(this,e,t,n,r-1,-r)}let i=n-1,a=1,o=0;for(this[t+i]=e&255;--i>=0&&(a*=256);)e<0&&o===0&&this[t+i+1]!==0&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||fe(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||fe(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||fe(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||fe(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||fe(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},u.prototype.writeBigInt64LE=Ne(function(e,t=0){return k(this,e,t,-BigInt(`0x8000000000000000`),BigInt(`0x7fffffffffffffff`))}),u.prototype.writeBigInt64BE=Ne(function(e,t=0){return pe(this,e,t,-BigInt(`0x8000000000000000`),BigInt(`0x7fffffffffffffff`))});function me(e,t,n,r,i,a){if(n+r>e.length||n<0)throw RangeError(`Index out of range`)}function he(e,t,r,i,a){return t=+t,r>>>=0,a||me(e,t,r,4),n.write(e,t,r,i,23,4),r+4}u.prototype.writeFloatLE=function(e,t,n){return he(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return he(this,e,t,!1,n)};function ge(e,t,r,i,a){return t=+t,r>>>=0,a||me(e,t,r,8),n.write(e,t,r,i,52,8),r+8}u.prototype.writeDoubleLE=function(e,t,n){return ge(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return ge(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(!u.isBuffer(e))throw TypeError(`argument should be a Buffer`);if(n||=0,!r&&r!==0&&(r=this.length),t>=e.length&&(t=e.length),t||=0,r>0&&r<n&&(r=n),r===n||e.length===0||this.length===0)return 0;if(t<0)throw RangeError(`targetStart out of bounds`);if(n<0||n>=this.length)throw RangeError(`Index out of range`);if(r<0)throw RangeError(`sourceEnd out of bounds`);r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);let i=r-n;return this===e&&typeof a.prototype.copyWithin==`function`?this.copyWithin(t,n,r):a.prototype.set.call(e,this.subarray(n,r),t),i},u.prototype.fill=function(e,t,n,r){if(typeof e==`string`){if(typeof t==`string`?(r=t,t=0,n=this.length):typeof n==`string`&&(r=n,n=this.length),r!==void 0&&typeof r!=`string`)throw TypeError(`encoding must be a string`);if(typeof r==`string`&&!u.isEncoding(r))throw TypeError(`Unknown encoding: `+r);if(e.length===1){let t=e.charCodeAt(0);(r===`utf8`&&t<128||r===`latin1`)&&(e=t)}}else typeof e==`number`?e&=255:typeof e==`boolean`&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError(`Out of range index`);if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||=0;let i;if(typeof e==`number`)for(i=t;i<n;++i)this[i]=e;else{let a=u.isBuffer(e)?e:u.from(e,r),o=a.length;if(o===0)throw TypeError(`The value "`+e+`" is invalid for argument "value"`);for(i=0;i<n-t;++i)this[i+t]=a[i%o]}return this};let _e={};function ve(e,t,n){_e[e]=class extends n{constructor(){super(),Object.defineProperty(this,`message`,{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,`code`,{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}ve(`ERR_BUFFER_OUT_OF_BOUNDS`,function(e){return e?`${e} is outside of buffer bounds`:`Attempt to access memory outside buffer bounds`},RangeError),ve(`ERR_INVALID_ARG_TYPE`,function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),ve(`ERR_OUT_OF_RANGE`,function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=ye(String(n)):typeof n==`bigint`&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=ye(i)),i+=`n`),r+=` It must be ${t}. Received ${i}`,r},RangeError);function ye(e){let t=``,n=e.length,r=e[0]===`-`?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function be(e,t,n){Se(t,`offset`),(e[t]===void 0||e[t+n]===void 0)&&A(t,e.length-(n+1))}function xe(e,t,n,r,i,a){if(e>n||e<t){let r=typeof t==`bigint`?`n`:``,i;throw i=a>3?t===0||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${(a+1)*8}${r}`:`>= -(2${r} ** ${(a+1)*8-1}${r}) and < 2 ** ${(a+1)*8-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new _e.ERR_OUT_OF_RANGE(`value`,i,e)}be(r,i,a)}function Se(e,t){if(typeof e!=`number`)throw new _e.ERR_INVALID_ARG_TYPE(t,`number`,e)}function A(e,t,n){throw Math.floor(e)===e?t<0?new _e.ERR_BUFFER_OUT_OF_BOUNDS:new _e.ERR_OUT_OF_RANGE(n||`offset`,`>= ${n?1:0} and <= ${t}`,e):(Se(e,n),new _e.ERR_OUT_OF_RANGE(n||`offset`,`an integer`,e))}let Ce=/[^+/0-9A-Za-z-_]/g;function we(e){if(e=e.split(`=`)[0],e=e.trim().replace(Ce,``),e.length<2)return``;for(;e.length%4!=0;)e+=`=`;return e}function Te(e,t){t||=1/0;let n,r=e.length,i=null,a=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if(--t<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw Error(`Invalid code point`)}return a}function Ee(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function De(e,t){let n,r,i,a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function Oe(e){return t.toByteArray(we(e))}function ke(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Ae(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function je(e){return e!==e}let Me=(function(){let e=`0123456789abcdef`,t=Array(256);for(let n=0;n<16;++n){let r=n*16;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t})();function Ne(e){return typeof BigInt>`u`?Pe:e}function Pe(){throw Error(`BigInt not supported`)}})(xm);var Lm=xm.Buffer;xm.Blob,xm.BlobOptions,xm.Buffer,xm.File,xm.FileOptions,xm.INSPECT_MAX_BYTES,xm.SlowBuffer,xm.TranscodeEncoding,xm.atob,xm.btoa,xm.constants,xm.isAscii,xm.isUtf8,xm.kMaxLength,xm.kStringMaxLength,xm.resolveObjectURL,xm.transcode;var Rm=`toJSON`in new Headers,zm=(e,t)=>{let n=new URL(e);return n.pathname=t,n.toString()},Bm=e=>typeof e==`function`&&/^\s*class\s+/.test(e.toString())||e.toString&&e.toString().startsWith(`[object `)&&e.toString()!==`[object Object]`||wh(Object.getPrototypeOf(e)),Vm=e=>e&&typeof e==`object`&&!Array.isArray(e),Hm=(e,t,n)=>{let r=n?.skipKeys,i=n?.override??!0,a=n?.mergeArray??!1;if(!Vm(e)||!Vm(t))return e;for(let[n,o]of Object.entries(t))if(!r?.includes(n)){if(a&&Array.isArray(o)){e[n]=Array.isArray(e[n])?[...e[n],...o]:e[n]=o;continue}if(!Vm(o)||!(n in e)||Bm(o)){if((i||!(n in e))&&!Object.isFrozen(e))try{e[n]=o}catch{}continue}if(!Object.isFrozen(e[n]))try{e[n]=Hm(e[n],o,{skipKeys:r,override:i,mergeArray:a})}catch{}}return e},Um=(e,t)=>{let n=Hm(Object.assign({},e),t,{skipKeys:[`properties`],mergeArray:!1});return n.properties&&delete n.properties,n},Wm=(e,t)=>{if(!t)return e;let n=[],r=[];if(e){Array.isArray(e)||(e=[e]);for(let t of e)n.push(t),t.checksum&&r.push(t.checksum)}if(t){Array.isArray(t)||(t=[t]);for(let e of t)r.includes(e.checksum)||n.push(e)}return n};[`start`,`request`,`parse`,`transform`,`resolve`,`beforeHandle`,`afterHandle`,`mapResponse`,`afterResponse`,`trace`,`error`,`stop`,`body`,`headers`,`params`,`query`,`response`,`type`,`detail`].reduce((e,t)=>(e[t]=!0,e),{});var Gm=e=>typeof e==`object`&&Object.keys(e).every(e=>!isNaN(+e)),Km=(e,t)=>Gm(e)&&Gm(t)?Object.assign({},e,t):e&&!Gm(e)&&Gm(t)?Object.assign({200:e},t):t??e,qm=(e,t)=>!e&&!t?{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0}:{body:t?.body??e?.body,headers:t?.headers??e?.headers,params:t?.params??e?.params,query:t?.query??e?.query,cookie:t?.cookie??e?.cookie,response:Km(e?.response,t?.response)},Jm=(e,t)=>{if(!t)return e??{};if(!e)return t??{};if(!Object.values(t).find(e=>e!=null))return{...e};let n={...e,...t,body:t.body??e.body,headers:t.headers??e.headers,params:t.params??e.params,query:t.query??e.query,cookie:t.cookie??e.cookie,response:Km(e.response,t.response),type:e.type||t.type,detail:Hm(t.detail??{},e.detail??{}),parse:Wm(e.parse,t.parse),transform:Wm(e.transform,t.transform),beforeHandle:Wm(Wm(fh(e.resolve,`resolve`),e.beforeHandle),Wm(fh(t.resolve,`resolve`),t.beforeHandle)),afterHandle:Wm(e.afterHandle,t.afterHandle),mapResponse:Wm(e.mapResponse,t.mapResponse),afterResponse:Wm(e.afterResponse,t.afterResponse),trace:Wm(e.trace,t.trace),error:Wm(e.error,t.error),standaloneSchema:e.standaloneSchema||t.standaloneSchema?e.standaloneSchema&&!t.standaloneSchema?e.standaloneSchema:t.standaloneSchema&&!e.standaloneSchema?t.standaloneSchema:[...e.standaloneSchema??[],...t.standaloneSchema??[]]:void 0};return n.resolve&&delete n.resolve,n},Ym=e=>{e.parse&&!Array.isArray(e.parse)&&(e.parse=[e.parse]),e.transform&&!Array.isArray(e.transform)&&(e.transform=[e.transform]),e.afterHandle&&!Array.isArray(e.afterHandle)&&(e.afterHandle=[e.afterHandle]),e.mapResponse&&!Array.isArray(e.mapResponse)&&(e.mapResponse=[e.mapResponse]),e.afterResponse&&!Array.isArray(e.afterResponse)&&(e.afterResponse=[e.afterResponse]),e.trace&&!Array.isArray(e.trace)&&(e.trace=[e.trace]),e.error&&!Array.isArray(e.error)&&(e.error=[e.error]);let t=[];return e.resolve&&(t=fh(Array.isArray(e.resolve)?e.resolve:[e.resolve],`resolve`),delete e.resolve),e.beforeHandle&&(t=t.length?t.concat(Array.isArray(e.beforeHandle)?e.beforeHandle:[e.beforeHandle]):Array.isArray(e.beforeHandle)?e.beforeHandle:[e.beforeHandle]),t.length&&(e.beforeHandle=t),e};typeof Bun<`u`&&Bun.hash;var Xm=e=>{let t=9;for(let n=0;n<e.length;)t=Math.imul(t^e.charCodeAt(n++),9**9);return t^=t>>>9},Zm=(e,t)=>{if(!t)return;if(!Array.isArray(t)){let n=t;return e&&!n.checksum&&(n.checksum=e),n.scope===`scoped`&&(n.scope=`local`),n}let n=[...t];for(let t of n)e&&!t.checksum&&(t.checksum=e),t.scope===`scoped`&&(t.scope=`local`);return n},Qm=(e,t,n)=>({start:Wm(e.start,Zm(n,t?.start)),request:Wm(e.request,Zm(n,t?.request)),parse:Wm(e.parse,Zm(n,t?.parse)),transform:Wm(e.transform,Zm(n,t?.transform)),beforeHandle:Wm(Wm(fh(e.resolve,`resolve`),e.beforeHandle),Zm(n,Wm(fh(t?.resolve,`resolve`),t?.beforeHandle))),afterHandle:Wm(e.afterHandle,Zm(n,t?.afterHandle)),mapResponse:Wm(e.mapResponse,Zm(n,t?.mapResponse)),afterResponse:Wm(e.afterResponse,Zm(n,t?.afterResponse)),trace:Wm(e.trace,Zm(n,t?.trace)),error:Wm(e.error,Zm(n,t?.error)),stop:Wm(e.stop,Zm(n,t?.stop))}),$m=(e,t,{skipIfHasType:n=!1})=>{if(!e)return e;if(!Array.isArray(e))return n?e.scope??=t:e.scope=t,e;for(let r of e)n?r.scope??=t:r.scope=t;return e},eh=e=>{if(!e)return e;if(!Array.isArray(e))switch(e.scope){case`global`:case`scoped`:return{...e};default:return{fn:e}}let t=[];for(let n of e)switch(n.scope){case`global`:case`scoped`:t.push({...n});break}return t},th=e=>({...e,type:e?.type,detail:e?.detail,parse:eh(e?.parse),transform:eh(e?.transform),beforeHandle:eh(e?.beforeHandle),afterHandle:eh(e?.afterHandle),mapResponse:eh(e?.mapResponse),afterResponse:eh(e?.afterResponse),error:eh(e?.error),trace:eh(e?.trace)}),nh={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Enhance Your Calm":420,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},rh=Object.fromEntries(Object.entries(nh).map(([e,t])=>[t,e]));function ih(e){let t=e;for(;t.endsWith(`=`);)t=t.slice(0,-1);return t}var ah=new TextEncoder,oh=async(e,t)=>{if(typeof e==`object`?e=JSON.stringify(e):typeof e!=`string`&&(e+=``),t===null)throw TypeError(`Secret key must be provided.`);let n=await crypto.subtle.importKey(`raw`,ah.encode(t),{name:`HMAC`,hash:`SHA-256`},!1,[`sign`]),r=await crypto.subtle.sign(`HMAC`,n,ah.encode(e));return e+`.`+ih(Lm.from(r).toString(`base64`))},sh=async(e,t)=>{if(typeof e!=`string`)throw TypeError(`Signed cookie string must be provided.`);if(t===null)throw TypeError(`Secret key must be provided.`);let n=e.slice(0,e.lastIndexOf(`.`));return await oh(n,t)===e?n:!1},ch=(e,t,n)=>{if(!e.standaloneValidator?.length||!Array.isArray(e.standaloneValidator)){e.standaloneValidator=[{[t]:n}];return}let r=e.standaloneValidator[e.standaloneValidator.length-1];t in r?e.standaloneValidator.push({[t]:n}):r[t]=n},lh=e=>{if(typeof e==`number`)return e;if(e.length<16){if(e.trim().length===0)return null;let t=Number(e);return Number.isNaN(t)?null:t}if(e.length===16){if(e.trim().length===0)return null;let t=Number(e);return Number.isNaN(t)||t.toString()!==e?null:t}return null},uh=e=>lh(e)!==null,dh=class{constructor(e=console.error,t=()=>{}){this.onError=e,this.onFinally=t,this.root=null,this.promises=[]}get size(){return this.promises.length}add(e){return this.promises.push(e),this.root||=this.drain(),this.promises.length===1&&this.then(this.onFinally),e}async drain(){for(;this.promises.length>0;){try{await this.promises[0]}catch(e){this.onError(e)}this.promises.shift()}this.root=null}then(e,t){return(this.root??Promise.resolve()).then(e,t)}},fh=(e,t)=>{if(!e)return e;if(!Array.isArray(e)){if(typeof e==`function`||typeof e==`string`)return t?{fn:e,subType:t}:{fn:e};if(`fn`in e)return e}let n=[];for(let r of e)typeof r==`function`||typeof r==`string`?n.push(t?{fn:r,subType:t}:{fn:r}):`fn`in r&&n.push(r);return n},ph=e=>(e.start&&=fh(e.start),e.request&&=fh(e.request),e.parse&&=fh(e.parse),e.transform&&=fh(e.transform),e.beforeHandle&&=fh(e.beforeHandle),e.afterHandle&&=fh(e.afterHandle),e.mapResponse&&=fh(e.mapResponse),e.afterResponse&&=fh(e.afterResponse),e.trace&&=fh(e.trace),e.error&&=fh(e.error),e.stop&&=fh(e.stop),e),mh=e=>{let t=Object.create(null);return e.start?.map&&(t.start=e.start.map(e=>e.fn)),e.request?.map&&(t.request=e.request.map(e=>e.fn)),e.parse?.map&&(t.parse=e.parse.map(e=>e.fn)),e.transform?.map&&(t.transform=e.transform.map(e=>e.fn)),e.beforeHandle?.map&&(t.beforeHandle=e.beforeHandle.map(e=>e.fn)),e.afterHandle?.map&&(t.afterHandle=e.afterHandle.map(e=>e.fn)),e.mapResponse?.map&&(t.mapResponse=e.mapResponse.map(e=>e.fn)),e.afterResponse?.map&&(t.afterResponse=e.afterResponse.map(e=>e.fn)),e.error?.map&&(t.error=e.error.map(e=>e.fn)),e.stop?.map&&(t.stop=e.stop.map(e=>e.fn)),e.trace?.map?t.trace=e.trace.map(e=>e.fn):t.trace=[],t},hh=e=>({body:e.body,cookie:e.cookie,headers:e.headers,query:e.query,set:e.set,server:e.server,path:e.path,route:e.route,url:e.url}),gh=(e,t=302)=>Response.redirect(e,t),_h=Symbol(`ElysiaFormData`),vh=Symbol(`ElysiaRequestId`),yh=e=>{let t=new FormData;if(t[_h]={},e)for(let[n,r]of Object.entries(e)){if(Array.isArray(r)){t[_h][n]=[];for(let e of r)r instanceof File?t.append(n,r,r.name):r instanceof bm?t.append(n,r.value,r.value?.name):t.append(n,r),t[_h][n].push(r);continue}r instanceof File?t.append(n,r,r.name):r instanceof bm?t.append(n,r.value,r.value?.name):t.append(n,r),t[_h][n]=r}return t},bh=typeof crypto>`u`?()=>{let e=``;for(let t=0;t<16;t++)e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(Math.floor(Math.random()*62));return e}:()=>{let e=crypto.randomUUID();return e.slice(0,8)+e.slice(24,32)},xh=e=>{if(!e.length)return[];let t=[];for(let n=0;n<e.length;n++){let r=e[n];r.checksum&&(t.includes(r.checksum)&&(e.splice(n,1),n--),t.push(r.checksum))}return e},Sh=(e,t=`scoped`)=>{if(e){if(t===`scoped`){for(let t of e)`scope`in t&&t.scope===`local`&&(t.scope=`scoped`);return}for(let t of e)`scope`in t&&(t.scope=`global`)}},Ch=e=>e.charCodeAt(e.length-1)===47?e.slice(0,e.length-1):e+`/`,wh=e=>{if(!e)return!1;for(let t in e)return!0;return!1},Th=(e,{dynamic:t=!1}={})=>{let n=encodeURIComponent(e).replace(/%2F/g,`/`);return t&&(n=n.replace(/%3A/g,`:`).replace(/%3F/g,`?`)),n},Eh=!!(typeof Bun>`u`||Bun.semver?.satisfies?.(Bun.version,`>=1.2.14`));async function Dh(e){if(e.bodyUsed||!e.body)return 0;let t=0,n=e.body.getReader();for(;;){let{done:e,value:r}=await n.read();if(e)break;t+=r.byteLength}return t}var Oh={headers:!0,cookie:!0,query:!0,params:!0,body:!0,response:!0};i();var kh=typeof Bun<`u`?Bun.env:typeof n<`u`?{}:void 0,Ah=Symbol(`ElysiaErrorCode`),jh=(kh?.NODE_ENV??kh?.ENV)===`production`,Mh={101:void 0,204:void 0,205:void 0,304:void 0,307:void 0,308:void 0},Nh=class{constructor(e,t){let n=t??(e in rh?rh[e]:e);this.code=nh[e]??e,e in Mh?this.response=void 0:this.response=n}},Ph=(e,t)=>new Nh(e,t),Fh=class extends Error{constructor(e){super(e??`NOT_FOUND`),this.code=`NOT_FOUND`,this.status=404}},Ih=class extends Error{constructor(e){super(`Bad Request`,{cause:e}),this.code=`PARSE`,this.status=400}},Lh=class extends Error{constructor(e,t){super(t??`"${e}" has invalid cookie signature`),this.key=e,this.code=`INVALID_COOKIE_SIGNATURE`,this.status=400}},Rh=e=>{if(!e)return{summary:void 0};let{message:t,path:n,value:r,type:i}=e,a=n.slice(1).replaceAll(`/`,`.`),o=n===``;switch(i){case 42:return{...e,summary:o?`Value should not be provided`:`Property '${a}' should not be provided`};case 45:return{...e,summary:o?`Value is missing`:`Property '${a}' is missing`};case 50:let n=t.indexOf(`'`),i=t.slice(n+1,t.indexOf(`'`,n+1));return{...e,summary:o?`Value should be an email`:`Property '${a}' should be ${i}`};case 54:return{...e,summary:`${t.slice(0,9).trim()} property '${a}' to be ${t.slice(8).trim()} but found: ${r}`};case 62:let s=e.schema.anyOf.map(e=>`'${e?.format??e.type}'`).join(`, `);return{...e,summary:o?`Value should be one of ${s}`:`Property '${a}' should be one of: ${s}`};default:return{summary:t,...e}}},zh=class e extends Error{constructor(t,n,r=`"${t}" has invalid file type`){super(r),this.property=t,this.expected=n,this.message=r,this.code=`INVALID_FILE_TYPE`,this.status=422,Object.setPrototypeOf(this,e.prototype)}toResponse(e){return jh?new Response(JSON.stringify({type:`validation`,on:`body`}),{status:422,headers:{...e,"content-type":`application/json`}}):new Response(JSON.stringify({type:`validation`,on:`body`,summary:`Invalid file type`,message:this.message,property:this.property,expected:this.expected}),{status:422,headers:{...e,"content-type":`application/json`}})}},Bh=class e extends Error{constructor(t,n,r,i){let a=``,o,s,c;if(n?.provider===`standard`||`~standard`in n||n.schema&&`~standard`in n.schema){let e=(`~standard`in n?n:n.schema)[`~standard`];o=(i??e.validate(r).issues)?.[0],a=jh?JSON.stringify({type:`validation`,on:t,found:r}):JSON.stringify({type:`validation`,on:t,property:o.path?.[0]||`root`,message:o?.message,summary:o?.problem,expected:s,found:r,errors:i},null,2),c=o?.message}else{r&&typeof r==`object`&&r instanceof Nh&&(r=r.response),o=i?.First()??(`Errors`in n?n.Errors(r).First():Hd(n,r).First());let e=o?.path||`root`,l=n?.schema??n;if(!jh)try{s=Lf(l)}catch(e){s={type:`Could not create expected value`,message:e?.message,error:e}}c=o?.schema?.message||o?.schema?.error!==void 0?typeof o.schema.error==`function`?o.schema.error(jh?{type:`validation`,on:t,found:r}:{type:`validation`,on:t,value:r,property:e,message:o?.message,summary:Rh(o).summary,found:r,expected:s,errors:`Errors`in n?[...n.Errors(r)].map(Rh):[...Hd(n,r)].map(Rh)},n):o.schema.error:void 0,a=c===void 0?jh?JSON.stringify({type:`validation`,on:t,found:r}):JSON.stringify({type:`validation`,on:t,property:e,message:o?.message,summary:Rh(o).summary,expected:s,found:r,errors:`Errors`in n?[...n.Errors(r)].map(Rh):[...Hd(n,r)].map(Rh)},null,2):typeof c==`object`?JSON.stringify(c):c+``}super(a),this.type=t,this.validator=n,this.value=r,this.code=`VALIDATION`,this.status=422,this.valueError=o,this.expected=s,this.customError=c,Object.setPrototypeOf(this,e.prototype)}get all(){return`Errors`in this.validator?[...this.validator.Errors(this.value)].map(Rh):[...Hd(this.validator,this.value)].map(Rh)}static simplifyModel(e){let t=`schema`in e?e.schema:e;try{return Lf(t)}catch{return t}}get model(){return`~standard`in this.validator?this.validator:e.simplifyModel(this.validator)}toResponse(e){return new Response(this.message,{status:400,headers:{...e,"content-type":`application/json`}})}detail(e){if(!this.customError)return this.message;this.validator;let t=this.value,n=this.expected,r=this.all;return jh?{type:`validation`,on:this.type,found:t,message:e}:{type:`validation`,on:this.type,property:this.valueError?.path||`root`,message:e,summary:Rh(this.valueError).summary,found:t,expected:n,errors:r}}},Vh=(e,t)=>{try{return JSON.parse(e)}catch{throw new Bh(`property`,t,e)}};function Hh(e,t){return ei(e)||fee(e,t),(t={})=>Ll({...t,[M]:e})}var Uh=e=>{try{let t=mm.Compile(e);return t.Create=()=>Lf(e),t.Error=n=>new Bh(`property`,e,n,t.Errors(n)),t}catch{return{Check:t=>nd(e,t),CheckThrow:t=>{if(!nd(e,t))throw new Bh(`property`,e,t,Hd(e,t))},Decode:t=>Wp(e,t),Create:()=>Lf(e),Error:t=>new Bh(`property`,e,t,Hd(e,t))}}},Wh=e=>{if(typeof e==`string`)switch(e.slice(-1)){case`k`:return e.slice(0,e.length-1)*1024;case`m`:return e.slice(0,e.length-1)*1048576;default:return+e}return e},Gh=(e,t)=>e.startsWith(t)?!0:t.charCodeAt(t.length-1)===42&&t.charCodeAt(t.length-2)===47&&e.startsWith(t.slice(0,-1)),Kh=!1,qh=()=>{Kh||=(console.warn(`[Elysia] Attempt to validate file type without 'file-type'. This may lead to security risks. We recommend installing 'file-type' to properly validate file extension.`),!0)},Jh=async()=>_e(()=>import(`./core-Cn7r35DE.js`),__vite__mapDeps([0,1])).then(e=>(Yh=e.fileTypeFromBlob,Yh)).catch(qh),Yh,Xh=e=>Yh?Yh(e):Jh().then(t=>{if(t)return t(e)}),Zh=async(e,t,n=e?.name??``)=>{if(Array.isArray(e))return await Promise.all(e.map(e=>Zh(e,t,n))),!0;if(!e)return!1;let r=await Xh(e);if(!r||typeof t==`string`&&!Gh(r.mime,t))throw new zh(n,t);for(let e=0;e<t.length;e++)if(Gh(r.mime,t[e]))return!0;throw new zh(n,t)},Qh=(e,t)=>{if(t instanceof bm)return!0;if(!(t instanceof Blob)||e.minSize&&t.size<Wh(e.minSize)||e.maxSize&&t.size>Wh(e.maxSize))return!1;if(e.extension){if(typeof e.extension==`string`)return Gh(t.type,e.extension);for(let n=0;n<e.extension.length;n++)if(Gh(t.type,e.extension[n]))return!0;return!1}return!0},$h={date:rg,time:ag(!0),"date-time":cg(!0),"iso-time":ag(!1),"iso-date-time":cg(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:dg,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:bg,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:pg,int32:{type:`number`,validate:gg},int64:{type:`number`,validate:_g},float:{type:`number`,validate:vg},double:{type:`number`,validate:vg},password:!0,binary:!0};function eg(e){return e%4==0&&(e%100!=0||e%400==0)}var tg=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,ng=[0,31,28,31,30,31,30,31,31,30,31,30,31];function rg(e){let t=tg.exec(e);if(!t)return!1;let n=+t[1],r=+t[2],i=+t[3];return r>=1&&r<=12&&i>=1&&i<=(r===2&&eg(n)?29:ng[r])}var ig=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function ag(e){return function(t){let n=ig.exec(t);if(!n)return!1;let r=+n[1],i=+n[2],a=+n[3],o=n[4],s=n[5]===`-`?-1:1,c=+(n[6]||0),l=+(n[7]||0);if(c>23||l>59||e&&!o)return!1;if(r<=23&&i<=59&&a<60)return!0;let u=i-l*s,d=r-c*s-(u<0?1:0);return(d===23||d===-1)&&(u===59||u===-1)&&a<61}}var og=e=>e.charCodeAt(e.length-6)===32?e.slice(0,-6)+`+`+e.slice(-5):e,sg=/t|\s/i;function cg(e){let t=ag(e);return function(e){let n=e.split(sg);return n.length===2&&rg(n[0])&&t(n[1])}}var lg=/\/|:/,ug=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function dg(e){return lg.test(e)&&ug.test(e)}var fg=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function pg(e){return fg.lastIndex=0,fg.test(e)}var mg=-(2**31),hg=2**31-1;function gg(e){return Number.isInteger(e)&&e<=hg&&e>=mg}function _g(e){return Number.isInteger(e)}function vg(){return!0}var yg=/[^\\]\\Z/;function bg(e){if(yg.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}
/**
* @license
*
* MIT License
*
* Copyright (c) 2020 Evgeny Poberezkin
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*/
var xg=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,Sg=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,Cg=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,rne=$h.date,ine=$h[`date-time`];Xr(`date`)||Zr(`date`,e=>{let t=og(e).replace(/"/g,``);if(xg.test(t)||Sg.test(t)||Cg.test(t)||rne(t)){let e=new Date(t);if(!Number.isNaN(e.getTime()))return!0}return!1}),Xr(`date-time`)||Zr(`date-time`,e=>{let t=e.replace(/"/g,``);if(xg.test(t)||Sg.test(t)||Cg.test(t)||ine(t)){let e=new Date(t);if(!Number.isNaN(e.getTime()))return!0}return!1}),Object.entries($h).forEach(e=>{let[t,n]=e;Xr(t)||(n instanceof RegExp?Zr(t,e=>n.test(e)):typeof n==`function`&&Zr(t,n))}),Xr(`numeric`)||Zr(`numeric`,e=>!!e&&!isNaN(+e)),Xr(`integer`)||Zr(`integer`,e=>!!e&&Number.isInteger(+e)),Xr(`boolean`)||Zr(`boolean`,e=>e===`true`||e===`false`),Xr(`ObjectString`)||Zr(`ObjectString`,e=>{let t=e.charCodeAt(0);if((t===9||t===10||t===32)&&(t=e.trimStart().charCodeAt(0)),t!==123&&t!==91)return!1;try{return JSON.parse(e),!0}catch{return!1}}),Xr(`ArrayString`)||Zr(`ArrayString`,e=>{let t=e.charCodeAt(0);if((t===9||t===10||t===32)&&(t=e.trimStart().charCodeAt(0)),t!==123&&t!==91)return!1;try{return JSON.parse(e),!0}catch{return!1}});var I=Object.assign({},zl);Hh(`UnionEnum`,(e,t)=>(typeof t==`number`||typeof t==`string`||t===null)&&e.enum.includes(t)),Hh(`ArrayBuffer`,(e,t)=>t instanceof ArrayBuffer);var ane=Hh(`Files`,(e,t)=>{if(e.minItems&&e.minItems>1&&!Array.isArray(t))return!1;if(!Array.isArray(t))return Qh(e,t);if(e.minItems&&t.length<e.minItems||e.maxItems&&t.length>e.maxItems)return!1;for(let n=0;n<t.length;n++)if(!Qh(e,t[n]))return!1;return!0}),one=Hh(`ElysiaForm`,({compiler:e,...t},n)=>{if(!(n instanceof FormData))return!1;if(e){if(!(_h in n))throw new Bh(`property`,t,n);if(!e.Check(n[_h]))throw e.Error(n[_h])}return!0}),wg={String:e=>zl.String(e),Numeric:e=>{let t=Uh(zl.Number(e));return I.Transform(I.Union([I.String({format:`numeric`,default:0}),I.Number(e)],e)).Decode(n=>{let r=+n;if(isNaN(r))return n;if(e&&!t.Check(r))throw t.Error(r);return r}).Encode(e=>e)},Integer:e=>{let t=Uh(zl.Integer(e));return I.Transform(I.Union([I.String({format:`integer`,default:0}),zl.Integer(e)],e)).Decode(e=>{let n=+e;if(!t.Check(n))throw t.Error(n);return n}).Encode(e=>e)},Date:e=>{let t=zl.Date(e),n=Uh(t),r=e?.default?new Date(e.default):void 0;return I.Transform(I.Union([zl.Date(e),I.String({format:`date-time`,default:r?.toISOString()}),I.String({format:`date`,default:r?.toISOString()}),I.Number({default:r?.getTime()})],e)).Decode(e=>{if(typeof e==`number`){let t=new Date(e);if(!n.Check(t))throw n.Error(t);return t}if(e instanceof Date)return e;let r=new Date(og(e));if(!r||isNaN(r.getTime()))throw new Bh(`property`,t,r);if(!n.Check(r))throw n.Error(r);return r}).Encode(e=>{if(e instanceof Date)return e.toISOString();if(typeof e==`string`){if(isNaN(new Date(og(e)).getTime()))throw new Bh(`property`,t,e);return e}if(!n.Check(e))throw n.Error(e);return e})},BooleanString:e=>{let t=Uh(zl.Boolean(e));return I.Transform(I.Union([I.Boolean(e),I.String({format:`boolean`,default:!1})],e)).Decode(e=>{if(typeof e==`string`)return e===`true`;if(e!==void 0&&!t.Check(e))throw t.Error(e);return e}).Encode(e=>e)},ObjectString:(e,t)=>{let n=I.Object(e,t),r=Uh(n);return I.Transform(I.Union([I.String({format:`ObjectString`,default:`{}`}),n],{elysiaMeta:`ObjectString`})).Decode(e=>{if(typeof e==`string`){if(e.charCodeAt(0)!==123)throw new Bh(`property`,n,e);if(!r.Check(e=Vh(e,n)))throw r.Error(e);return r.Decode(e)}return e}).Encode(e=>{let t;if(typeof e==`string`&&(e=Vh(t=e,n)),!r.Check(e))throw r.Error(e);return t??JSON.stringify(e)})},ArrayString:(e=I.String(),t)=>{let n=I.Array(e,t),r=Uh(n),i=(e,t=!1)=>{if(e.charCodeAt(0)===91){if(!r.Check(e=Vh(e,n)))throw r.Error(e);return r.Decode(e)}if(t)return e;throw new Bh(`property`,n,e)};return I.Transform(I.Union([I.String({format:`ArrayString`,default:t?.default}),n])).Decode(e=>{if(Array.isArray(e)){let t=[];for(let n=0;n<e.length;n++){let r=e[n];if(typeof r==`string`){let e=i(r,!0);Array.isArray(e)?t=t.concat(e):t.push(e);continue}t.push(r)}return t}return typeof e==`string`?i(e):e}).Encode(e=>{let t;if(typeof e==`string`&&(e=Vh(t=e,n)),!r.Check(e))throw new Bh(`property`,n,e);return t??JSON.stringify(e)})},ArrayQuery:(e=I.String(),t)=>{let n=I.Array(e,t),r=Uh(n),i=e=>e.indexOf(`,`)===-1?[e]:r.Decode(e.split(`,`));return I.Transform(I.Union([I.String({default:t?.default}),n],{elysiaMeta:`ArrayQuery`})).Decode(e=>{if(Array.isArray(e)){let t=[];for(let n=0;n<e.length;n++){let r=e[n];if(typeof r==`string`){let e=i(r);Array.isArray(e)?t=t.concat(e):t.push(e);continue}t.push(r)}return t}return typeof e==`string`?i(e):e}).Encode(e=>{let t;if(typeof e==`string`&&(e=Vh(t=e,n)),!r.Check(e))throw new Bh(`property`,n,e);return t??JSON.stringify(e)})},File:Hh(`File`,Qh),Files:(e={})=>I.Transform(ane(e)).Decode(e=>Array.isArray(e)?e:[e]).Encode(e=>e),Nullable:(e,t)=>I.Union([e,I.Null()],{...t,nullable:!0}),MaybeEmpty:(e,t)=>I.Union([e,I.Null(),I.Undefined()],t),Cookie:(e,{domain:t,expires:n,httpOnly:r,maxAge:i,path:a,priority:o,sameSite:s,secure:c,secrets:l,sign:u,...d}={})=>{let f=I.Object(e,d);return f.config={domain:t,expires:n,httpOnly:r,maxAge:i,path:a,priority:o,sameSite:s,secure:c,secrets:l,sign:u},f},UnionEnum:(e,t={})=>{let n=e.every(e=>typeof e==`string`)?{type:`string`}:e.every(e=>typeof e==`number`)?{type:`number`}:e.every(e=>e===null)?{type:`null`}:{};if(e.some(e=>typeof e==`object`&&!!e))throw Error(`This type does not support objects or arrays`);return{default:e[0],...t,[M]:`UnionEnum`,...n,enum:e}},NoValidate:(e,t=!0)=>(e.noValidate=t,e),Form:(e,t={})=>{let n=I.Object(e,{default:yh({}),...t}),r=Uh(n);return I.Union([n,one({compiler:r})])},ArrayBuffer(e={}){return{default:[1,2,3],...e,[M]:`ArrayBuffer`}},Uint8Array:e=>{let t=Uh(zl.Uint8Array(e));return I.Transform(I.Union([I.ArrayBuffer(),zl.Uint8Array(e)])).Decode(e=>{if(e instanceof ArrayBuffer){if(!t.Check(e=new Uint8Array(e)))throw t.Error(e);return e}return e}).Encode(e=>e)}};I.BooleanString=wg.BooleanString,I.ObjectString=wg.ObjectString,I.ArrayString=wg.ArrayString,I.ArrayQuery=wg.ArrayQuery,I.Numeric=wg.Numeric,I.Integer=wg.Integer,I.File=e=>(e?.type&&Jh(),wg.File({default:`File`,...e,extension:e?.type,type:`string`,format:`binary`})),I.Files=e=>(e?.type&&Jh(),wg.Files({...e,elysiaMeta:`Files`,default:`Files`,extension:e?.type,type:`array`,items:{...e,default:`Files`,type:`string`,format:`binary`}})),I.Nullable=wg.Nullable,I.MaybeEmpty=wg.MaybeEmpty,I.Cookie=wg.Cookie,I.Date=wg.Date,I.UnionEnum=wg.UnionEnum,I.NoValidate=wg.NoValidate,I.Form=wg.Form,I.ArrayBuffer=wg.ArrayBuffer,I.Uint8Array=wg.Uint8Array;var Tg=e(r((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.parse=s,e.serialize=u;var t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function s(e,t){let n=new o,r=e.length;if(r<2)return n;let i=t?.decode||d,a=0;do{let t=e.indexOf(`=`,a);if(t===-1)break;let o=e.indexOf(`;`,a),s=o===-1?r:o;if(t>s){a=e.lastIndexOf(`;`,t-1)+1;continue}let u=c(e,a,t),d=l(e,t,u),f=e.slice(u,d);if(n[f]===void 0){let r=c(e,t+1,s),a=l(e,s,r);n[f]=i(e.slice(r,a))}a=s+1}while(a<r);return n}function c(e,t,n){do{let n=e.charCodeAt(t);if(n!==32&&n!==9)return t}while(++t<n);return n}function l(e,t,n){for(;t>n;){let n=e.charCodeAt(--t);if(n!==32&&n!==9)return t+1}return n}function u(e,a,o){let s=o?.encode||encodeURIComponent;if(!t.test(e))throw TypeError(`argument name is invalid: ${e}`);let c=s(a);if(!n.test(c))throw TypeError(`argument val is invalid: ${a}`);let l=e+`=`+c;if(!o)return l;if(o.maxAge!==void 0){if(!Number.isInteger(o.maxAge))throw TypeError(`option maxAge is invalid: ${o.maxAge}`);l+=`; Max-Age=`+o.maxAge}if(o.domain){if(!r.test(o.domain))throw TypeError(`option domain is invalid: ${o.domain}`);l+=`; Domain=`+o.domain}if(o.path){if(!i.test(o.path))throw TypeError(`option path is invalid: ${o.path}`);l+=`; Path=`+o.path}if(o.expires){if(!f(o.expires)||!Number.isFinite(o.expires.valueOf()))throw TypeError(`option expires is invalid: ${o.expires}`);l+=`; Expires=`+o.expires.toUTCString()}if(o.httpOnly&&(l+=`; HttpOnly`),o.secure&&(l+=`; Secure`),o.partitioned&&(l+=`; Partitioned`),o.priority)switch(typeof o.priority==`string`?o.priority.toLowerCase():void 0){case`low`:l+=`; Priority=Low`;break;case`medium`:l+=`; Priority=Medium`;break;case`high`:l+=`; Priority=High`;break;default:throw TypeError(`option priority is invalid: ${o.priority}`)}if(o.sameSite)switch(typeof o.sameSite==`string`?o.sameSite.toLowerCase():o.sameSite){case!0:case`strict`:l+=`; SameSite=Strict`;break;case`lax`:l+=`; SameSite=Lax`;break;case`none`:l+=`; SameSite=None`;break;default:throw TypeError(`option sameSite is invalid: ${o.sameSite}`)}return l}function d(e){if(e.indexOf(`%`)===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function f(e){return a.call(e)===`[object Date]`}}))(),1),sne=e(Bl(),1),Eg=class{constructor(e,t,n={}){this.name=e,this.jar=t,this.initial=n}get cookie(){return this.jar[this.name]??this.initial}set cookie(e){this.name in this.jar||(this.jar[this.name]=this.initial),this.jar[this.name]=e}get setCookie(){return this.name in this.jar||(this.jar[this.name]=this.initial),this.jar[this.name]}set setCookie(e){this.cookie=e}get value(){return this.cookie.value}set value(e){this.setCookie.value=e}get expires(){return this.cookie.expires}set expires(e){this.setCookie.expires=e}get maxAge(){return this.cookie.maxAge}set maxAge(e){this.setCookie.maxAge=e}get domain(){return this.cookie.domain}set domain(e){this.setCookie.domain=e}get path(){return this.cookie.path}set path(e){this.setCookie.path=e}get secure(){return this.cookie.secure}set secure(e){this.setCookie.secure=e}get httpOnly(){return this.cookie.httpOnly}set httpOnly(e){this.setCookie.httpOnly=e}get sameSite(){return this.cookie.sameSite}set sameSite(e){this.setCookie.sameSite=e}get priority(){return this.cookie.priority}set priority(e){this.setCookie.priority=e}get partitioned(){return this.cookie.partitioned}set partitioned(e){this.setCookie.partitioned=e}get secrets(){return this.cookie.secrets}set secrets(e){this.setCookie.secrets=e}update(e){return this.setCookie=Object.assign(this.cookie,typeof e==`function`?e(this.cookie):e),this}set(e){return this.setCookie=Object.assign({...this.initial,value:this.value},typeof e==`function`?e(this.cookie):e),this}remove(){if(this.value!==void 0)return this.set({expires:new Date(0),maxAge:0,value:``}),this}toString(){return typeof this.value==`object`?JSON.stringify(this.value):this.value?.toString()??``}},Dg=(e,t,n)=>(e.cookie||={},new Proxy(t,{get(r,i){return i in t?new Eg(i,e.cookie,Object.assign({},n??{},t[i])):new Eg(i,e.cookie,Object.assign({},n))}})),Og=async(e,t,{secrets:n,sign:r,...i}={})=>{if(!t)return Dg(e,{},i);let a=typeof n==`string`;r&&r!==!0&&!Array.isArray(r)&&(r=[r]);let o={},s=(0,Tg.parse)(t);for(let[e,t]of Object.entries(s)){if(t===void 0)continue;let i=(0,sne.default)(t);if(i){let e=i.charCodeAt(0),t=i.charCodeAt(i.length-1);if(e===123&&t===125||e===91&&t===93)try{i=JSON.parse(i)}catch{}}if(r===!0||r?.includes(e)){if(!n)throw Error(`No secret is provided to cookie plugin`);if(a){let t=await sh(i,n);if(t===!1)throw new Lh(e);i=t}else{let t=!0;for(let e=0;e<n.length;e++){let r=await sh(i,n[e]);if(r!==!1){t=!0,i=r;break}}if(!t)throw new Lh(e)}}o[e]={value:i}}return Dg(e,o,i)},kg=e=>{if(!e||!wh(e))return;let t=[];for(let[n,r]of Object.entries(e)){if(!n||!r)continue;let e=r.value;e!=null&&t.push((0,Tg.serialize)(n,typeof e==`object`?JSON.stringify(e):e+``,r))}if(t.length!==0)return t.length===1?t[0]:t},Ag=(e,t)=>{if(!hm&&e instanceof Promise)return e.then(e=>Ag(e,t));let n=e.size,r=t&&(t.status===206||t.status===304||t.status===412||t.status===416),i=r?{"transfer-encoding":`chunked`}:{"accept-ranges":`bytes`,"content-range":n?`bytes 0-${n-1}/${n}`:void 0,"transfer-encoding":`chunked`};if(!t&&!n)return new Response(e);if(!t)return new Response(e,{headers:i});if(t.headers instanceof Headers){for(let e of Object.keys(i))e in t.headers&&t.headers.append(e,i[e]);return r&&(t.headers.delete(`content-length`),t.headers.delete(`accept-ranges`)),new Response(e,t)}return wh(t.headers)?new Response(e,{status:t.status,headers:Object.assign(i,t.headers)}):new Response(e,{status:t.status,headers:i})},jg=(e,t)=>{if(!e)return e;e.delete(`set-cookie`);for(let n=0;n<t.length;n++){let r=t[n].indexOf(`=`);e.append(`set-cookie`,`${t[n].slice(0,r)}=${t[n].slice(r+1)||``}`)}return e},Mg=(e,t)=>{if(t?.headers){if(e)if(Rm)Object.assign(t.headers,e.headers.toJSON());else for(let[n,r]of e.headers.entries())n in t.headers&&(t.headers[n]=r);return t.status===200&&(t.status=e.status),t.headers[`content-encoding`]&&delete t.headers[`content-encoding`],t}if(!e)return{headers:{},status:t?.status??200};if(Rm)return t={headers:e.headers.toJSON(),status:t?.status??200},t.headers[`content-encoding`]&&delete t.headers[`content-encoding`],t;t={headers:{},status:t?.status??200};for(let[n,r]of e.headers.entries())n!==`content-encoding`&&n in t.headers&&(t.headers[n]=r);return t},Ng=({mapResponse:e,mapCompactResponse:t})=>async(n,r,i)=>{let a=n.next?.();if(r&&Fg(r),a instanceof Promise&&(a=await a),a?.value instanceof ReadableStream)n=a.value;else if(a&&(typeof a?.done>`u`||a?.done))return r?e(a.value,r,i):t(a.value,i);let o=a?.value?.sse??n?.sse??r?.headers[`content-type`]?.startsWith(`text/event-stream`),s=o?e=>`data: ${e}

`:e=>e,c=o?`text/event-stream`:a?.value&&typeof a?.value==`object`?`application/json`:`text/plain`;return r?.headers?(r.headers[`transfer-encoding`]||(r.headers[`transfer-encoding`]=`chunked`),r.headers[`content-type`]||(r.headers[`content-type`]=c),r.headers[`cache-control`]||(r.headers[`cache-control`]=`no-cache`)):r={status:200,headers:{"content-type":c,"transfer-encoding":`chunked`,"cache-control":`no-cache`,connection:`keep-alive`}},new Response(new ReadableStream({async start(e){let t=!1;if(i?.signal?.addEventListener(`abort`,()=>{t=!0;try{e.close()}catch{}}),!(!a||a.value instanceof ReadableStream)&&a.value!==void 0&&a.value!==null)if(a.value.toSSE)e.enqueue(a.value.toSSE());else if(typeof a.value==`object`)try{e.enqueue(s(JSON.stringify(a.value)))}catch{e.enqueue(s(a.value.toString()))}else e.enqueue(s(a.value.toString()));try{for await(let r of n){if(t)break;if(r!=null)if(r.toSSE)e.enqueue(r.toSSE());else{if(typeof r==`object`)try{e.enqueue(s(JSON.stringify(r)))}catch{e.enqueue(s(r.toString()))}else e.enqueue(s(r.toString()));o||await new Promise(e=>setTimeout(()=>e(),0))}}}catch(e){console.warn(e)}try{e.close()}catch{}}}),r)};async function*Pg(e){let t=e.body;if(!t)return;let n=t.getReader(),r=new TextDecoder;try{for(;;){let{done:e,value:t}=await n.read();if(e)break;typeof t==`string`?yield t:yield r.decode(t)}}finally{n.releaseLock()}}var Fg=e=>{if(typeof e.status==`string`&&(e.status=nh[e.status]),e.cookie&&wh(e.cookie)){let t=kg(e.cookie);t&&(e.headers[`set-cookie`]=t)}e.headers[`set-cookie`]&&Array.isArray(e.headers[`set-cookie`])&&(e.headers=jg(new Headers(e.headers),e.headers[`set-cookie`]))},Ig=e=>{let t=Ng(e);return(e,n,r)=>{let i=!1;if(n.headers instanceof Headers)for(let t of n.headers.keys())if(t===`set-cookie`){if(i)continue;i=!0;for(let t of n.headers.getSetCookie())e.headers.append(`set-cookie`,t)}else e.headers.append(t,n.headers?.get(t)??``);else for(let t in n.headers)e.headers.append(t,n.headers[t]);let a=n.status??200;if(e.status!==a&&a!==200&&(e.status<=300||e.status>400)){let i=new Response(e.body,{headers:e.headers,status:n.status});return!i.headers.has(`content-length`)&&i.headers.get(`transfer-encoding`)===`chunked`?t(Pg(i),Mg(i,n),r):i}return!e.headers.has(`content-length`)&&e.headers.get(`transfer-encoding`)===`chunked`?t(Pg(e),Mg(e,n),r):e}},Lg=(e,t={headers:{}})=>{let n=e.path,r=gm[n.slice(n.lastIndexOf(`.`)+1)];return r&&(t.headers[`content-type`]=r),e.stats&&t.status!==206&&t.status!==304&&t.status!==412&&t.status!==416?e.stats.then(n=>{let r=n.size;return r!==void 0&&(t.headers[`content-range`]=`bytes 0-${r-1}/${r}`,t.headers[`content-length`]=r),Ag(e.value,t)}):Ag(e.value,t)},Rg=(e,t,n)=>{if(wh(t.headers)||t.status!==200||t.cookie)switch(Fg(t),e?.constructor?.name){case`String`:return t.headers[`content-type`]=`text/plain`,new Response(e,t);case`Array`:case`Object`:return t.headers[`content-type`]=`application/json`,new Response(JSON.stringify(e),t);case`ElysiaFile`:return Lg(e,t);case`File`:return Ag(e,t);case`Blob`:return Ag(e,t);case`ElysiaCustomStatusResponse`:return t.status=e.code,Rg(e.response,t,n);case void 0:return e?new Response(JSON.stringify(e),t):new Response(``,t);case`Response`:return Hg(e,t,n);case`Error`:return Vg(e,t);case`Promise`:return e.then(e=>Rg(e,t,n));case`Function`:return Rg(e(),t,n);case`Number`:case`Boolean`:return new Response(e.toString(),t);case`Cookie`:return e instanceof Eg?new Response(e.value,t):new Response(e?.toString(),t);case`FormData`:return new Response(e,t);default:if(e instanceof Response)return Hg(e,t,n);if(e instanceof Promise)return e.then(e=>Rg(e,t));if(e instanceof Error)return Vg(e,t);if(e instanceof Nh)return t.status=e.code,Rg(e.response,t,n);if(typeof e?.next==`function`||e instanceof ReadableStream)return Ug(e,t,n);if(typeof e?.then==`function`)return e.then(e=>Rg(e,t));if(typeof e?.toResponse==`function`)return Rg(e.toResponse(),t);if(`charCodeAt`in e){let n=e.charCodeAt(0);if(n===123||n===91)return t.headers[`Content-Type`]||(t.headers[`Content-Type`]=`application/json`),new Response(JSON.stringify(e),t)}return new Response(e,t)}return typeof e?.next==`function`||e instanceof ReadableStream?Ug(e,t,n):Bg(e,n)},zg=(e,t,n)=>{if(e!=null)if(wh(t.headers)||t.status!==200||t.cookie)switch(Fg(t),e?.constructor?.name){case`String`:return t.headers[`content-type`]=`text/plain`,new Response(e,t);case`Array`:case`Object`:return t.headers[`content-type`]=`application/json`,new Response(JSON.stringify(e),t);case`ElysiaFile`:return Lg(e,t);case`File`:return Ag(e,t);case`Blob`:return Ag(e,t);case`ElysiaCustomStatusResponse`:return t.status=e.code,zg(e.response,t,n);case void 0:return e?new Response(JSON.stringify(e),t):void 0;case`Response`:return Hg(e,t,n);case`Promise`:return e.then(e=>zg(e,t));case`Error`:return Vg(e,t);case`Function`:return zg(e(),t);case`Number`:case`Boolean`:return new Response(e.toString(),t);case`FormData`:return new Response(e);case`Cookie`:return e instanceof Eg?new Response(e.value,t):new Response(e?.toString(),t);default:if(e instanceof Response)return Hg(e,t,n);if(e instanceof Promise)return e.then(e=>zg(e,t));if(e instanceof Error)return Vg(e,t);if(e instanceof Nh)return t.status=e.code,zg(e.response,t,n);if(typeof e?.next==`function`||e instanceof ReadableStream)return Ug(e,t,n);if(typeof e?.then==`function`)return e.then(e=>zg(e,t));if(typeof e?.toResponse==`function`)return zg(e.toResponse(),t);if(`charCodeAt`in e){let n=e.charCodeAt(0);if(n===123||n===91)return t.headers[`Content-Type`]||(t.headers[`Content-Type`]=`application/json`),new Response(JSON.stringify(e),t)}return new Response(e,t)}else switch(e?.constructor?.name){case`String`:return t.headers[`content-type`]=`text/plain`,new Response(e);case`Array`:case`Object`:return t.headers[`content-type`]=`application/json`,new Response(JSON.stringify(e),t);case`ElysiaFile`:return Lg(e,t);case`File`:return Ag(e,t);case`Blob`:return Ag(e,t);case`ElysiaCustomStatusResponse`:return t.status=e.code,zg(e.response,t,n);case void 0:return e?new Response(JSON.stringify(e),{headers:{"content-type":`application/json`}}):new Response(``);case`Response`:return e;case`Promise`:return e.then(e=>{let n=zg(e,t);if(n!==void 0)return n});case`Error`:return Vg(e,t);case`Function`:return Bg(e(),n);case`Number`:case`Boolean`:return new Response(e.toString());case`Cookie`:return e instanceof Eg?new Response(e.value,t):new Response(e?.toString(),t);case`FormData`:return new Response(e);default:if(e instanceof Response)return e;if(e instanceof Promise)return e.then(e=>zg(e,t));if(e instanceof Error)return Vg(e,t);if(e instanceof Nh)return t.status=e.code,zg(e.response,t,n);if(typeof e?.next==`function`||e instanceof ReadableStream)return Ug(e,t,n);if(typeof e?.then==`function`)return e.then(e=>zg(e,t));if(typeof e?.toResponse==`function`)return zg(e.toResponse(),t);if(`charCodeAt`in e){let n=e.charCodeAt(0);if(n===123||n===91)return t.headers[`Content-Type`]||(t.headers[`Content-Type`]=`application/json`),new Response(JSON.stringify(e),t)}return new Response(e)}},Bg=(e,t)=>{switch(e?.constructor?.name){case`String`:return new Response(e,{headers:{"Content-Type":`text/plain`}});case`Object`:case`Array`:return new Response(JSON.stringify(e),{headers:{"Content-Type":`application/json`}});case`ElysiaFile`:return Lg(e);case`File`:return Ag(e);case`Blob`:return Ag(e);case`ElysiaCustomStatusResponse`:return Rg(e.response,{status:e.code,headers:{}});case void 0:return e?new Response(JSON.stringify(e),{headers:{"content-type":`application/json`}}):new Response(``);case`Response`:return e;case`Error`:return Vg(e);case`Promise`:return e.then(e=>Bg(e,t));case`Function`:return Bg(e(),t);case`Number`:case`Boolean`:return new Response(e.toString());case`FormData`:return new Response(e);default:if(e instanceof Response)return e;if(e instanceof Promise)return e.then(e=>Bg(e,t));if(e instanceof Error)return Vg(e);if(e instanceof Nh)return Rg(e.response,{status:e.code,headers:{}});if(typeof e?.next==`function`||e instanceof ReadableStream)return Ug(e,void 0,t);if(typeof e?.then==`function`)return e.then(e=>Rg(e,set));if(typeof e?.toResponse==`function`)return Bg(e.toResponse());if(`charCodeAt`in e){let t=e.charCodeAt(0);if(t===123||t===91)return new Response(JSON.stringify(e),{headers:{"Content-Type":`application/json`}})}return new Response(e)}},Vg=(e,t)=>new Response(JSON.stringify({name:e?.name,message:e?.message,cause:e?.cause}),{status:t?.status===200?500:t?.status??500,headers:t?.headers}),cne=(e,t,n={})=>{if(typeof e==`function`)return;let r=Rg(e,{headers:n});if(!t.parse?.length&&!t.transform?.length&&!t.beforeHandle?.length&&!t.afterHandle?.length)return()=>r.clone()},Hg=Ig({mapResponse:Rg,mapCompactResponse:Bg}),Ug=Ng({mapResponse:Rg,mapCompactResponse:Bg}),Wg={name:`web-standard`,isWebStandard:!0,handler:{mapResponse:Rg,mapEarlyResponse:zg,mapCompactResponse:Bg,createStaticHandler:cne},composeHandler:{mapResponseContext:`c.request`,preferWebstandardHeaders:!0,headers:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`,parser:{json(e){return e?`try{c.body=await c.request.json()}catch{}
`:`c.body=await c.request.json()
`},text(){return`c.body=await c.request.text()
`},urlencoded(){return`c.body=parseQuery(await c.request.text())
`},arrayBuffer(){return`c.body=await c.request.arrayBuffer()
`},formData(e){let t=`
c.body={}
`;return e?t+=`let form;try{form=await c.request.formData()}catch{}`:t+=`const form=await c.request.formData()
`,t+`for(const key of form.keys()){if(c.body[key]) continue
const value=form.getAll(key)
if(value.length===1)c.body[key]=value[0]
else c.body[key]=value}`}}},async stop(e,t){if(!e.server)throw Error("Elysia isn't running. Call `app.listen` to start the server.");if(e.server&&(e.server.stop(t),e.server=null,e.event.stop?.length))for(let t=0;t<e.event.stop.length;t++)e.event.stop[t].fn(e)},composeGeneralHandler:{parameters:`r`,createContext(e){let t=``,n=``,r=e.setHeaders;for(let n of Object.keys(e.decorator))t+=`,'${n}':decorator['${n}']`;let i=e.config.handler?.standardHostname??!0,a=!!e.event.trace?.length;return n+=`const u=r.url,s=u.indexOf('/',${i?11:7}),qi=u.indexOf('?',s+1)
let p
if(qi===-1)p=u.substring(s)
else p=u.substring(s, qi)
`,a&&(n+=`const id=randomId()
`),n+=`const c={request:r,store,qi,path:p,url:u,redirect,status,set:{headers:`,n+=Object.keys(r??{}).length?`Object.assign({},app.setHeaders)`:`Object.create(null)`,n+=`,status:200}`,e.inference.server&&(n+=`,get server(){return app.getServer()}`),a&&(n+=`,[ELYSIA_REQUEST_ID]:id`),n+=t,n+=`}
`,n},error404(e,t,n=``){let r=`if(route===null){`+n+`
return `;return t?r+=`app.handleError(c,notFound,false,${this.parameters})`:r+=e?`new Response(error404Message,{status:c.set.status===200?404:c.set.status,headers:c.set.headers})`:`error404.clone()`,r+=`}`,{declare:t?``:`const error404Message=notFound.message.toString()
const error404=new Response(error404Message,{status:404})
`,code:r}}},composeError:{mapResponseContext:``,validationError:`return new Response(error.message,{headers:Object.assign({'content-type':'application/json'},set.headers),status:set.status})`,unknownError:`return new Response(error.message,{headers:set.headers,status:error.status??set.status??500})`},listen(){return()=>{throw Error(`WebStandard does not support listen, you might want to export default Elysia.fetch instead`)}}};function lne(){try{if(typeof caches<`u`&&typeof caches.default<`u`||typeof WebSocketPair<`u`)return!0}catch{return!1}return!1}({...Wg}),{...Wg.composeGeneralHandler};var une=e=>{e.startsWith(`async`)&&(e=e.slice(5)),e=e.trimStart();let t=-1;if(e.charCodeAt(0)===40&&(t=e.indexOf(`=>`,e.indexOf(`)`)),t!==-1)){let n=t;for(;n>0&&e.charCodeAt(--n)!==41;);let r=e.slice(t+2);return r.charCodeAt(0)===32&&(r=r.trimStart()),[e.slice(1,n),r,{isArrowReturn:r.charCodeAt(0)!==123}]}if(/^(\w+)=>/g.test(e)&&(t=e.indexOf(`=>`),t!==-1)){let n=e.slice(t+2);return n.charCodeAt(0)===32&&(n=n.trimStart()),[e.slice(0,t),n,{isArrowReturn:n.charCodeAt(0)!==123}]}if(e.startsWith(`function`)){t=e.indexOf(`(`);let n=e.indexOf(`)`);return[e.slice(t+1,n),e.slice(n+2),{isArrowReturn:!1}]}let n=e.indexOf(`(`);if(n!==-1){let t=e.indexOf(`
`,2),r=e.slice(0,t),i=r.lastIndexOf(`)`)+1,a=e.slice(t+1);return[r.slice(n,i),`{`+a,{isArrowReturn:!1}]}let r=e.split(`
`,2);return[r[0],r[1],{isArrowReturn:!1}]},dne=e=>{let t=e.indexOf(`{`);if(t===-1)return[-1,0];let n=t+1,r=1;for(;n<e.length;n++){let t=e.charCodeAt(n);if(t===123?r++:t===125&&r--,r===0)break}return r===0?[t,n+1]:[0,e.length]},fne=e=>{let t=e.lastIndexOf(`}`);if(t===-1)return[-1,0];let n=t-1,r=1;for(;n>=0;n--){let t=e.charCodeAt(n);if(t===125?r++:t===123&&r--,r===0)break}return r===0?[n,t+1]:[-1,0]},Gg=e=>{for(;;){let t=e.indexOf(`:`);if(t===-1)break;let n=e.indexOf(`,`,t);n===-1&&(n=e.indexOf(`}`,t)-1),n===-2&&(n=e.length),e=e.slice(0,t)+e.slice(n)}return e},Kg=e=>{let t=!1;e.charCodeAt(0)===40&&(e=e.slice(1,-1)),e.charCodeAt(0)===123&&(t=!0,e=e.slice(1,-1)),e=e.replace(/( |\t|\n)/g,``).trim();let n=[];for(;;){let[t,r]=dne(e);if(t===-1)break;n.push(e.slice(0,t-1)),e.charCodeAt(r)===44&&r++,e=e.slice(r)}e=Gg(e),e&&(n=n.concat(e.split(`,`)));let r=Object.create(null);for(let e of n){if(e.indexOf(`,`)===-1){r[e]=!0;continue}for(let t of e.split(`,`))r[t.trim()]=!0}return{hasParenthesis:t,parameters:r}},pne=(e,t)=>{let{parameters:n,hasParenthesis:r}=Kg(e);return n.query&&(t.query=!0),n.headers&&(t.headers=!0),n.body&&(t.body=!0),n.cookie&&(t.cookie=!0),n.set&&(t.set=!0),n.server&&(t.server=!0),n.route&&(t.route=!0),n.url&&(t.url=!0),n.path&&(t.path=!0),r?`{ ${Object.keys(n).join(`, `)} }`:Object.keys(n).join(`, `)},qg=(e,t,n)=>{let r=RegExp(`${e.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`)}[\\n\\t,; ]`);n!==void 0&&(r.lastIndex=n);let i=r.exec(t);return i?i.index:-1},Jg=(e,t,n=0)=>{if(n>5)return[];let r=[],i=t;for(;;){let t=qg(` = `+e,i);if(t===-1&&(t=qg(`=`+e,i)),t===-1){let n=i.indexOf(` = `+e);if(n===-1&&(n=i.indexOf(`=`+e)),n+3+e.length!==i.length)break;t=n}let n=i.slice(0,t),a=n.lastIndexOf(` `),o=n.slice(a===-1?-1:a+1);if(o===`}`){let[a,o]=fne(n);r.push(Gg(i.slice(a,o))),i=i.slice(t+3+e.length);continue}for(;o.charCodeAt(0)===44;)o=o.slice(1);for(;o.charCodeAt(0)===9;)o=o.slice(1);o.includes(`(`)||r.push(o),i=i.slice(t+3+e.length)}for(let e of r){if(e.charCodeAt(0)===123)continue;let n=Jg(e,t);n.length>0&&r.push(...n)}return r},mne=e=>{if(!e)return;if(e.charCodeAt(0)!==123)return e;if(e=e.slice(2,-2),!e.includes(`,`))return e.indexOf(`...`)===-1?void 0:e.slice(e.indexOf(`...`)+3);let t=e.indexOf(`...`);if(t!==-1)return e.slice(t+3).trimEnd()},hne=(e,t,n)=>{let r=(t,n)=>RegExp(`${n}\\.(${t})|${n}\\["${t}"\\]|${n}\\['${t}'\\]`).test(e);for(let i of t)if(i){if(i.charCodeAt(0)===123){let e=Kg(i).parameters;e.query&&(n.query=!0),e.headers&&(n.headers=!0),e.body&&(n.body=!0),e.cookie&&(n.cookie=!0),e.set&&(n.set=!0),e.server&&(n.server=!0),e.url&&(n.url=!0),e.route&&(n.route=!0),e.path&&(n.path=!0);continue}if(!n.query&&(r(`query`,i)||e.includes(`return `+i)||e.includes(`return `+i+`.query`))&&(n.query=!0),!n.headers&&r(`headers`,i)&&(n.headers=!0),!n.body&&r(`body`,i)&&(n.body=!0),!n.cookie&&r(`cookie`,i)&&(n.cookie=!0),!n.set&&r(`set`,i)&&(n.set=!0),!n.server&&r(`server`,i)&&(n.server=!0),!n.route&&r(`route`,i)&&(n.route=!0),!n.url&&r(`url`,i)&&(n.url=!0),!n.path&&r(`path`,i)&&(n.path=!0),n.query&&n.headers&&n.body&&n.cookie&&n.set&&n.server&&n.route&&n.url&&n.path)break}return t},gne=(e,t,n)=>{try{let r=RegExp(`\\w\\((.*?)?${e}`,`gs`);r.test(t);let i=t.charCodeAt(r.lastIndex);return i===41||i===44?(n.query=!0,n.headers=!0,n.body=!0,n.cookie=!0,n.set=!0,n.server=!0,n.url=!0,n.route=!0,n.path=!0,!0):!1}catch{return console.log(`[Sucrose] warning: unexpected isContextPassToFunction error, you may continue development as usual but please report the following to maintainers:`),console.log(`--- body ---`),console.log(t),console.log(`--- context ---`),console.log(e),!0}},Yg,Xg={},_ne=e=>{e===null||lne()||(e===void 0&&(e=295e3),Yg&&clearTimeout(Yg),Yg=setTimeout(()=>{Xg={},Yg=void 0,hm&&Bun.gc(!1)},e))},Zg=(e,t)=>({body:e.body||t.body,cookie:e.cookie||t.cookie,headers:e.headers||t.headers,query:e.query||t.query,set:e.set||t.set,server:e.server||t.server,url:e.url||t.url,route:e.route||t.route,path:e.path||t.path}),Qg=(e,t={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1},n={})=>{let r=[];e.request?.length&&r.push(...e.request),e.beforeHandle?.length&&r.push(...e.beforeHandle),e.parse?.length&&r.push(...e.parse),e.error?.length&&r.push(...e.error),e.transform?.length&&r.push(...e.transform),e.afterHandle?.length&&r.push(...e.afterHandle),e.mapResponse?.length&&r.push(...e.mapResponse),e.afterResponse?.length&&r.push(...e.afterResponse),e.handler&&typeof e.handler==`function`&&r.push(e.handler);for(let e=0;e<r.length;e++){let i=r[e];if(!i)continue;let a=typeof i==`object`?i.fn:i;if(typeof a!=`function`)continue;let o=a.toString(),s=Xm(o),c=Xg[s];if(c){t=Zg(t,c);continue}_ne(n.gcTime);let l={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1},[u,d]=une(o),f=mne(pne(u,l));if(f){let e=Jg(f,d.slice(1,-1));e.splice(0,-1,f);let t=d;t.charCodeAt(0)===123&&t.charCodeAt(d.length-1)===125&&(t=t.slice(1,-1)),gne(f,t,l)||hne(t,e,l),!l.query&&t.includes(`return `+f+`.query`)&&(l.query=!0)}if(Xg[s]||(Xg[s]=l),t=Zg(t,l),t.query&&t.headers&&t.body&&t.cookie&&t.set&&t.server&&t.url&&t.route&&t.path)break}return t},$g=(e,t,n)=>{if(wh(t.headers)||t.status!==200||t.cookie)switch(Fg(t),e?.constructor?.name){case`String`:return new Response(e,t);case`Array`:case`Object`:return t.headers[`content-type`]=`application/json`,new Response(JSON.stringify(e),t);case`ElysiaFile`:return Ag(e.value,t);case`File`:return Ag(e,t);case`Blob`:return Ag(e,t);case`ElysiaCustomStatusResponse`:return t.status=e.code,$g(e.response,t,n);case void 0:return e?new Response(JSON.stringify(e),t):new Response(``,t);case`Response`:return r_(e,t,n);case`Error`:return n_(e,t);case`Promise`:return e.then(e=>$g(e,t,n));case`Function`:return $g(e(),t,n);case`Number`:case`Boolean`:return new Response(e.toString(),t);case`Cookie`:return e instanceof Eg?new Response(e.value,t):new Response(e?.toString(),t);case`FormData`:return new Response(e,t);default:if(e instanceof Response)return r_(e,t,n);if(e instanceof Promise)return e.then(e=>$g(e,t));if(e instanceof Error)return n_(e,t);if(e instanceof Nh)return t.status=e.code,$g(e.response,t,n);if(typeof e?.next==`function`||e instanceof ReadableStream)return i_(e,t,n);if(typeof e?.then==`function`)return e.then(e=>$g(e,t));if(typeof e?.toResponse==`function`)return $g(e.toResponse(),t);if(`charCodeAt`in e){let n=e.charCodeAt(0);if(n===123||n===91)return t.headers[`Content-Type`]||(t.headers[`Content-Type`]=`application/json`),new Response(JSON.stringify(e),t)}return new Response(e,t)}return typeof e?.next==`function`||e instanceof ReadableStream?i_(e,t,n):t_(e,n)},e_=(e,t,n)=>{if(e!=null)if(wh(t.headers)||t.status!==200||t.cookie)switch(Fg(t),e?.constructor?.name){case`String`:return new Response(e,t);case`Array`:case`Object`:return t.headers[`content-type`]=`application/json`,new Response(JSON.stringify(e),t);case`ElysiaFile`:return Ag(e.value,t);case`File`:return Ag(e,t);case`Blob`:return Ag(e,t);case`ElysiaCustomStatusResponse`:return t.status=e.code,e_(e.response,t,n);case void 0:return e?new Response(JSON.stringify(e),t):void 0;case`Response`:return r_(e,t,n);case`Promise`:return e.then(e=>e_(e,t));case`Error`:return n_(e,t);case`Function`:return e_(e(),t);case`Number`:case`Boolean`:return new Response(e.toString(),t);case`FormData`:return new Response(e);case`Cookie`:return e instanceof Eg?new Response(e.value,t):new Response(e?.toString(),t);default:if(e instanceof Response)return r_(e,t,n);if(e instanceof Promise)return e.then(e=>e_(e,t));if(e instanceof Error)return n_(e,t);if(e instanceof Nh)return t.status=e.code,e_(e.response,t,n);if(typeof e?.next==`function`||e instanceof ReadableStream)return i_(e,t,n);if(typeof e?.then==`function`)return e.then(e=>e_(e,t));if(typeof e?.toResponse==`function`)return e_(e.toResponse(),t);if(`charCodeAt`in e){let n=e.charCodeAt(0);if(n===123||n===91)return t.headers[`Content-Type`]||(t.headers[`Content-Type`]=`application/json`),new Response(JSON.stringify(e),t)}return new Response(e,t)}else switch(e?.constructor?.name){case`String`:return new Response(e);case`Array`:case`Object`:return t.headers[`content-type`]=`application/json`,new Response(JSON.stringify(e),t);case`ElysiaFile`:return Ag(e.value,t);case`File`:return Ag(e,t);case`Blob`:return Ag(e,t);case`ElysiaCustomStatusResponse`:return t.status=e.code,e_(e.response,t,n);case void 0:return e?new Response(JSON.stringify(e),{headers:{"content-type":`application/json`}}):new Response(``);case`Response`:return e;case`Promise`:return e.then(e=>{let n=e_(e,t);if(n!==void 0)return n});case`Error`:return n_(e,t);case`Function`:return t_(e(),n);case`Number`:case`Boolean`:return new Response(e.toString());case`Cookie`:return e instanceof Eg?new Response(e.value,t):new Response(e?.toString(),t);case`FormData`:return new Response(e);default:if(e instanceof Response)return e;if(e instanceof Promise)return e.then(e=>e_(e,t));if(e instanceof Error)return n_(e,t);if(e instanceof Nh)return t.status=e.code,e_(e.response,t,n);if(typeof e?.next==`function`||e instanceof ReadableStream)return i_(e,t,n);if(typeof e?.then==`function`)return e.then(e=>e_(e,t));if(typeof e?.toResponse==`function`)return e_(e.toResponse(),t);if(`charCodeAt`in e){let n=e.charCodeAt(0);if(n===123||n===91)return t.headers[`Content-Type`]||(t.headers[`Content-Type`]=`application/json`),new Response(JSON.stringify(e),t)}return new Response(e)}},t_=(e,t)=>{switch(e?.constructor?.name){case`String`:return new Response(e);case`Object`:case`Array`:return new Response(JSON.stringify(e),{headers:{"Content-Type":`application/json`}});case`ElysiaFile`:return Ag(e.value);case`File`:return Ag(e);case`Blob`:return Ag(e);case`ElysiaCustomStatusResponse`:return $g(e.response,{status:e.code,headers:{}});case void 0:return e?new Response(JSON.stringify(e),{headers:{"content-type":`application/json`}}):new Response(``);case`Response`:return e;case`Error`:return n_(e);case`Promise`:return e.then(e=>t_(e,t));case`Function`:return t_(e(),t);case`Number`:case`Boolean`:return new Response(e.toString());case`FormData`:return new Response(e);default:if(e instanceof Response)return e;if(e instanceof Promise)return e.then(e=>t_(e,t));if(e instanceof Error)return n_(e);if(e instanceof Nh)return $g(e.response,{status:e.code,headers:{}});if(typeof e?.next==`function`||e instanceof ReadableStream)return i_(e,void 0,t);if(typeof e?.then==`function`)return e.then(e=>$g(e,set));if(typeof e?.toResponse==`function`)return t_(e.toResponse());if(`charCodeAt`in e){let t=e.charCodeAt(0);if(t===123||t===91)return new Response(JSON.stringify(e),{headers:{"Content-Type":`application/json`}})}return new Response(e)}},n_=(e,t)=>new Response(JSON.stringify({name:e?.name,message:e?.message,cause:e?.cause}),{status:t?.status===200?500:t?.status??500,headers:t?.headers}),vne=(e,t,n={})=>{if(typeof e==`function`)return;let r=$g(e,{headers:n});if(!t.parse?.length&&!t.transform?.length&&!t.beforeHandle?.length&&!t.afterHandle?.length)return()=>r.clone()},r_=Ig({mapResponse:$g,mapCompactResponse:t_}),i_=Ng({mapResponse:$g,mapCompactResponse:t_}),a_=e(Bl(),1),o_=1,s_=2,c_=4,l_=8;function u_(e,t=0,n,r){let i=Object.create(null),a=0,o=e.length,s=t-1,c=s;for(let t=0;t<o;t++)switch(e.charCodeAt(t)){case 38:l(e,t),s=t,c=t,a=0;break;case 61:c<=s?c=t:a|=l_;break;case 43:c>s?a|=c_:a|=o_;break;case 37:c>s?a|=l_:a|=s_;break}return s<o&&l(e,o),i;function l(e,t){let o=c>s,l=o?c:t,u=e.slice(s+1,l);if(!o&&u.length===0)return;let d=u;a&o_&&(d=d.replace(/\+/g,` `)),a&s_&&(d=(0,a_.default)(d)||d);let f=``;if(o){let n=e.slice(c+1,t);a&c_&&(n=n.replace(/\+/g,` `)),a&l_&&(n=(0,a_.default)(n)||n),f=n}let p=i[d];n?.[d]?f.charCodeAt(0)===91?(f=r?.[d]?JSON.parse(f):f.slice(1,-1).split(`,`),p===void 0?i[d]=f:Array.isArray(p)?p.push(...f):(i[d]=f,i[d].unshift(p))):p===void 0?i[d]=f:Array.isArray(p)?p.push(f):i[d]=[p,f]:i[d]=f}}function yne(e,t=0){let n=Object.create(null),r=0,i=e.length,a=t-1,o=a;for(let t=0;t<i;t++)switch(e.charCodeAt(t)){case 38:s(e,t),a=t,o=t,r=0;break;case 61:o<=a?o=t:r|=l_;break;case 43:o>a?r|=c_:r|=o_;break;case 37:o>a?r|=l_:r|=s_;break}return a<i&&s(e,i),n;function s(e,t){let i=o>a,s=i?o:t,c=e.slice(a+1,s);if(!i&&c.length===0)return;let l=c;r&o_&&(l=l.replace(/\+/g,` `)),r&s_&&(l=(0,a_.default)(l)||l);let u=``;if(i){let n=e.slice(o+1,t);r&c_&&(n=n.replace(/\+/g,` `)),r&l_&&(n=(0,a_.default)(n)||n),u=n}let d=n[l];if(u.charCodeAt(0)===91&&u.charCodeAt(u.length-1)===93){try{u=JSON.parse(u)}catch{}d===void 0?n[l]=u:Array.isArray(d)?d.push(u):n[l]=[d,u]}else if(u.charCodeAt(0)===123&&u.charCodeAt(u.length-1)===125){try{u=JSON.parse(u)}catch{}d===void 0?n[l]=u:Array.isArray(d)?d.push(u):n[l]=[d,u]}else u.includes(`,`)&&(u=u.split(`,`)),d===void 0?n[l]=u:Array.isArray(d)?d.push(u):n[l]=[d,u]}}function d_(e){let t=Object.create(null),n=0,r=e.length,i=-1,a=-1;for(let t=0;t<r;t++)switch(e.charCodeAt(t)){case 38:o(e,t),i=t,a=t,n=0;break;case 61:a<=i?a=t:n|=l_;break;case 43:a>i?n|=c_:n|=o_;break;case 37:a>i?n|=l_:n|=s_;break}return i<r&&o(e,r),t;function o(e,r){let o=a>i,s=o?a:r,c=e.slice(i+1,s);if(!o&&c.length===0)return;let l=c;n&o_&&(l=l.replace(/\+/g,` `)),n&s_&&(l=(0,a_.default)(l)||l);let u=``;if(o){let t=e.slice(a+1,r);n&c_&&(t=t.replace(/\+/g,` `)),n&l_&&(t=(0,a_.default)(t)||t),u=t}let d=t[l];d===void 0?t[l]=u:Array.isArray(d)?d.push(u):t[l]=[d,u]}}var f_=Symbol(`ElysiaTrace`),p_=()=>{let{promise:e,resolve:t}=Promise.withResolvers(),{promise:n,resolve:r}=Promise.withResolvers(),{promise:i,resolve:a}=Promise.withResolvers(),o=[],s=[];return[t=>(t&&o.push(t),e),e=>{let c=[],l=[],u=null;for(let t=0;t<(e.total??0);t++){let{promise:e,resolve:n}=Promise.withResolvers(),{promise:r,resolve:i}=Promise.withResolvers(),{promise:a,resolve:o}=Promise.withResolvers(),s=[],d=[];c.push(t=>(t&&s.push(t),e)),l.push(e=>{let c={...e,end:r,error:a,index:t,onStop(e){return e&&d.push(e),r}};n(c);for(let e=0;e<s.length;e++)s[e](c);return(t=null)=>{let n=performance.now();t&&(u=t);let r={end:n,error:t,get elapsed(){return n-e.begin}};for(let e=0;e<d.length;e++)d[e](r);i(n),o(t)}})}let d={...e,end:n,error:i,onEvent(e){for(let t=0;t<c.length;t++)c[t](e)},onStop(e){return e&&s.push(e),n}};t(d);for(let e=0;e<o.length;e++)o[e](d);return{resolveChild:l,resolve(t=null){let n=performance.now();!t&&u&&(t=u);let i={end:n,error:t,get elapsed(){return n-e.begin}};for(let e=0;e<s.length;e++)s[e](i);r(n),a(t)}}}]},bne=e=>t=>{let[n,r]=p_(),[i,a]=p_(),[o,s]=p_(),[c,l]=p_(),[u,d]=p_(),[f,p]=p_(),[m,h]=p_(),[g,_]=p_(),[v,ee]=p_();return e({id:t[vh],context:t,set:t.set,onRequest:n,onParse:i,onTransform:o,onBeforeHandle:c,onHandle:u,onAfterHandle:f,onMapResponse:g,onAfterResponse:v,onError:m,time:Date.now(),store:t.store}),{request:r,parse:a,transform:s,beforeHandle:l,handle:d,afterHandle:p,error:h,mapResponse:_,afterResponse:ee}},m_=Symbol.for(`TypeBox.Kind`),xne=Symbol.for(`TypeBox.Hint`),h_=e=>/(\ |-|\t|\n|\.)/.test(e)||!isNaN(+e[0]),g_=(e,t,n=!1)=>typeof t==`number`?`${e}[${t}]`:h_(t)?`${e}${n?`?.`:``}["${t}"]`:`${e}${n?`?`:``}.${t}`,Sne=e=>h_(e)?`"${e}"`:e,__=(e,t=0,n)=>{if(n.type!==`string`||n.const||n.trusted)return e;let r=``;for(let e=t-1;e>=0;e--)r+=`d.h${e}(`;return r+e+`)`.repeat(t)},v_=e=>{if(!e.allOf||m_ in e&&(e[m_]!==`Intersect`||e.type!==`object`))return e;let{allOf:t,...n}=e;n.properties={},m_ in n&&(n[m_]=`Object`);for(let e of t){if(e.type!==`object`)continue;let{properties:t,required:r,type:i,[m_]:a,...o}=e;for(let t in r&&(n.required=n.required?n.required.concat(r):r),Object.assign(n,o),e.properties)n.properties[t]=v_(e.properties[t])}return n},Cne=(e,t,n)=>{let r=e.patternProperties[`^(.*)$`]??e.patternProperties[Object.keys(e.patternProperties)[0]];if(!r)return t;let i=n.array;n.array++;let a=`(()=>{const ar${i}s=Object.keys(${t}),ar${i}v={};for(let i=0;i<ar${i}s.length;i++){const ar${i}p=${t}[ar${i}s[i]];ar${i}v[ar${i}s[i]]=${b_(r,`ar${i}p`,n)}`,o=n.optionalsInArray[i+1];if(o)for(let e=0;e<o.length;e++){let t=`ar${i}v[ar${i}s[i]].${o[e]}`;a+=`;if(${t}===undefined)delete ${t}`}return a+=`}return ar${i}v})()`,a},wne=(e,t,n)=>{let r=n.array;n.array++;let i=t===`v`&&!n.unions.length,a=``;i||(a=`(()=>{`),a+=`const ar${r}v=[`;for(let r=0;r<e.length;r++)r!==0&&(a+=`,`),a+=b_(e[r],g_(t,r,n.parentIsOptional),n);return a+=`];`,i||(a+=`return ar${r}v})()`),a};function y_(e,t=new WeakMap){if(typeof e!=`object`||!e||typeof e==`function`)return e;if(t.has(e))return t.get(e);if(Array.isArray(e)){let n=Array(e.length);t.set(e,n);for(let r=0;r<e.length;r++)n[r]=y_(e[r],t);return n}if(typeof e==`object`){let n=Object.keys(e).concat(Object.getOwnPropertySymbols(e)),r={};for(let i of n)r[i]=y_(e[i],t);return r}return e}var Tne=(e,t,n)=>{if(n.TypeCompiler===void 0)return n.typeCompilerWanred||=(console.warn(Error(`[exact-mirror] TypeBox's TypeCompiler is required to use Union`)),!0),t;n.unionKeys[t]=1;let r=n.unions.length,i=n.unions[r]=[],a=`(()=>{
`,o=e=>{if(!(m_ in e)||!e.$ref)return e;if(e[m_]===`This`)return y_(n.definitions[e.$ref]);if(e[m_]===`Ref`)if(!n.modules)console.warn(Error(`[exact-mirror] modules is required when using nested cyclic reference`));else return n.modules.Import(e.$ref);return e};for(let s=0;s<e.length;s++){let c=o(e[s]);if(Array.isArray(c.anyOf))for(let e=0;e<c.anyOf.length;e++)c.anyOf[e]=o(c.anyOf[e]);else if(c.items)if(Array.isArray(c.items))for(let e=0;e<c.items.length;e++)c.items[e]=o(c.items[e]);else c.items=o(c.items);i.push(mm.Compile(c)),a+=`if(d.unions[${r}][${s}].Check(${t})){return ${b_(c,t,{...n,recursion:n.recursion+1,parentIsOptional:!0})}}
`}return a+=`return ${n.removeUnknownUnionType?`undefined`:t}})()`,a},b_=(e,t,n)=>{if(!e)return``;let r=t===`v`&&!n.unions.length;if(m_ in e&&e[m_]===`Import`&&e.$ref in e.$defs)return b_(e.$defs[e.$ref],t,{...n,definitions:Object.assign(n.definitions,e.$defs)});if(r&&e.type!==`object`&&e.type!==`array`&&!e.anyOf)return`return ${__(`v`,n.sanitize?.length,e)}`;if(n.recursion>=n.recursionLimit)return t;let i=``;switch(e.$id&&xne in e&&(n.definitions[e.$id]=e),e.type){case`object`:if(e[m_]===`Record`){i=Cne(e,t,n);break}e=v_(e),i+=`{`,e.additionalProperties&&(i+=`...${t},`);let a=Object.keys(e.properties);for(let r=0;r<a.length;r++){let o=a[r],s=!e.required||e.required&&!e.required.includes(o)||Array.isArray(e.properties[o].anyOf),c=g_(t,o,n.parentIsOptional);if(s){let e=n.array;if(t.startsWith(`ar`)){let t=c.slice(c.indexOf(`.`)+1),r=n.optionalsInArray;r[e]?r[e].push(t):r[e]=[t]}else n.optionals.push(c)}let l=e.properties[o];r!==0&&(i+=`,`),i+=`${Sne(o)}:${s?`${c}===undefined?undefined:`:``}${b_(l,c,{...n,recursion:n.recursion+1,parentIsOptional:s})}`}i+=`}`;break;case`array`:if(e.items.type!==`object`&&e.items.type!==`array`)if(Array.isArray(e.items)){i=wne(e.items,t,n);break}else if(r)return`return v`;else if(m_ in e.items&&e.items.$ref&&(e.items[m_]===`Ref`||e.items[m_]===`This`))i=b_(y_(n.definitions[e.items.$ref]),t,{...n,parentIsOptional:!0,recursion:n.recursion+1});else{i=t;break}let o=n.array;n.array++;let s=t;r?i=`const ar${o}v=new Array(${t}.length);`:(s=`ar${o}s`,i=`((${s})=>{const ar${o}v=new Array(${s}.length);`),i+=`for(let i=0;i<${s}.length;i++){const ar${o}p=${s}[i];ar${o}v[i]=${b_(e.items,`ar${o}p`,n)}`;let c=n.optionalsInArray[o+1];if(c)for(let e=0;e<c.length;e++){let t=`ar${o}v[i].${c[e]}`;i+=`;if(${t}===undefined)delete ${t}`}i+=`}`,r||(i+=`return ar${o}v})(${t})`);break;default:if(e.$ref&&e.$ref in n.definitions)return b_(n.definitions[e.$ref],t,n);if(Array.isArray(e.anyOf)){i=Tne(e.anyOf,t,n);break}i=__(t,n.sanitize?.length,e);break}if(!r)return i;i=e.type===`array`?`${i}const x=ar0v;`:`const x=${i}
`;for(let t=0;t<n.optionals.length;t++){let r=n.optionals[t],a=r.slice(1);i+=`if(${r}===undefined`,n.unionKeys[r]&&(i+=`||x${a}===undefined`);let o=a.charCodeAt(0)!==63&&e.type!==`array`;i+=`)delete x${o?a.charCodeAt(0)===91?`?.`:`?`:``}${a}
`}return`${i}return x`},x_=(e,{TypeCompiler:t,modules:n,definitions:r,sanitize:i,recursionLimit:a=8,removeUnknownUnionType:o=!1}={})=>{let s=[];typeof i==`function`&&(i=[i]);let c=b_(e,`v`,{optionals:[],optionalsInArray:[],array:0,parentIsOptional:!1,unions:s,unionKeys:{},TypeCompiler:t,modules:n,definitions:r??n?.$defs??{},sanitize:i,recursion:0,recursionLimit:a,removeUnknownUnionType:o});if(!s.length&&!i?.length)return Function(`v`,c);let l;if(i?.length){l={};for(let e=0;e<i.length;e++)l[`h${e}`]=i[e]}return Function(`d`,`return function mirror(v){${c}}`)({unions:s,...l})},S_=e=>e?e?.[M]===`Import`&&e.References?e.References().some(S_):(e.schema&&(e=e.schema),!!e&&sn in e):!1,C_=e=>{if(!e)return!1;let t=e?.schema??e;if(t[M]===`Import`&&e.References)return e.References().some(C_);if(t.anyOf)return t.anyOf.some(C_);if(t.someOf)return t.someOf.some(C_);if(t.allOf)return t.allOf.some(C_);if(t.not)return t.not.some(C_);if(t.type===`object`){let e=t.properties;if(`additionalProperties`in t)return t.additionalProperties;if(`patternProperties`in t)return!1;for(let t of Object.keys(e)){let n=e[t];if(n.type===`object`){if(C_(n))return!0}else if(n.anyOf){for(let e=0;e<n.anyOf.length;e++)if(C_(n.anyOf[e]))return!0}return n.additionalProperties}return!1}return t.type===`array`&&t.items&&!Array.isArray(t.items)?C_(t.items):!1},w_=(e,t)=>{if(!t)return!1;if(M in t&&t[M]===e)return!0;if(t.type===`object`){let n=t.properties;if(!n)return!1;for(let t of Object.keys(n)){let r=n[t];if(r.type===`object`){if(w_(e,r))return!0}else if(r.anyOf){for(let t=0;t<r.anyOf.length;t++)if(w_(e,r.anyOf[t]))return!0}if(M in r&&r[M]===e)return!0}return!1}return!!t.properties&&M in t.properties&&t.properties[M]===e},T_=(e,t)=>{if(!t)return!1;let n=t?.schema??t;if(n.elysiaMeta===e)return!0;if(n[M]===`Import`&&t.References)return t.References().some(t=>T_(e,t));if(n.anyOf)return n.anyOf.some(t=>T_(e,t));if(n.someOf)return n.someOf.some(t=>T_(e,t));if(n.allOf)return n.allOf.some(t=>T_(e,t));if(n.not)return n.not.some(t=>T_(e,t));if(n.type===`object`){let t=n.properties;for(let r of Object.keys(t)){let i=t[r];if(i.type===`object`){if(T_(e,i))return!0}else if(i.anyOf){for(let t=0;t<i.anyOf.length;t++)if(T_(e,i.anyOf[t]))return!0}return n.elysiaMeta===e}return!1}return n.type===`array`&&n.items&&!Array.isArray(n.items)?T_(e,n.items):!1},E_=(e,t)=>{if(!t)return;let n=t.schema??t;if(n[M]===`Import`&&t.References)return t.References().some(t=>E_(e,t));if(n.type===`object`){let t=n.properties;if(!t)return!1;for(let n of Object.keys(t)){let r=t[n];if(e in r)return!0;if(r.type===`object`){if(E_(e,r))return!0}else if(r.anyOf){for(let t=0;t<r.anyOf.length;t++)if(E_(e,r.anyOf[t]))return!0}}return!1}return e in n},D_=e=>{if(!e)return!1;if(e.oneOf){for(let t=0;t<e.oneOf.length;t++)if(D_(e.oneOf[t]))return!0}if(e.anyOf){for(let t=0;t<e.anyOf.length;t++)if(D_(e.anyOf[t]))return!0}if(e.oneOf){for(let t=0;t<e.oneOf.length;t++)if(D_(e.oneOf[t]))return!0}if(e.allOf){for(let t=0;t<e.allOf.length;t++)if(D_(e.allOf[t]))return!0}if(e.not&&D_(e.not))return!0;if(e.type===`object`&&e.properties){let t=e.properties;for(let e of Object.keys(t)){let n=t[e];if(D_(n)||n.type===`array`&&n.items&&D_(n.items))return!0}}return e.type===`array`&&e.items&&D_(e.items)?!0:e[M]===`Ref`&&`$ref`in e},O_=e=>{if(!e)return!1;if(e.$ref&&e.$defs&&e.$ref in e.$defs&&O_(e.$defs[e.$ref]))return!0;if(e.oneOf){for(let t=0;t<e.oneOf.length;t++)if(O_(e.oneOf[t]))return!0}if(e.anyOf){for(let t=0;t<e.anyOf.length;t++)if(O_(e.anyOf[t]))return!0}if(e.allOf){for(let t=0;t<e.allOf.length;t++)if(O_(e.allOf[t]))return!0}if(e.not&&O_(e.not))return!0;if(e.type===`object`&&e.properties){let t=e.properties;for(let e of Object.keys(t)){let n=t[e];if(O_(n)||n.type===`array`&&n.items&&O_(n.items))return!0}}return e.type===`array`&&e.items&&O_(e.items)?!0:an in e},k_=(e,t,n={})=>{let r=n;if(r.root=!0,!Array.isArray(t))return t.original=e,A_(e,t,r);for(let n of t)n.original=e,e=A_(e,n,r);return e},A_=(e,t,n)=>{if(!e)return e;let r=n.root;if(t.onlyFirst&&e.type===t.onlyFirst)return t.to(e)??e;if(t.untilObjectFound&&!r&&e.type===`object`)return e;let i=t.from[M];if(e.oneOf){for(let r=0;r<e.oneOf.length;r++)e.oneOf[r]=A_(e.oneOf[r],t,n);return e}if(e.anyOf){for(let r=0;r<e.anyOf.length;r++)e.anyOf[r]=A_(e.anyOf[r],t,n);return e}if(e.allOf){for(let r=0;r<e.allOf.length;r++)e.allOf[r]=A_(e.allOf[r],t,n);return e}if(e.not)return A_(e.not,t,n);let a=r&&!!t.excludeRoot;if(e[M]===i){let{anyOf:r,oneOf:i,allOf:o,not:s,properties:c,items:l,...u}=e,d=t.to(u);if(!d)return e;let f,p=e=>{let t=m(e);return t.$id&&delete t.$id,t},m=e=>{if(c&&e.type===`object`){let r={};for(let[e,i]of Object.entries(c))r[e]=A_(i,t,{...n,root:!1});return{...u,...e,properties:r}}if(l&&e.type===`array`)return{...u,...e,items:A_(l,t,{...n,root:!1})};let r={...u,...e};return delete r.required,c&&e.type===`string`&&e.format===`ObjectString`&&e.default===`{}`?(f=I.ObjectString(c,u),r.properties=c):l&&e.type===`string`&&e.format===`ArrayString`&&e.default===`[]`&&(f=I.ArrayString(l,u),r.items=l),r};if(a){if(c){let e={};for(let[r,i]of Object.entries(c))e[r]=A_(i,t,{...n,root:!1});return{...u,properties:e}}else if(l?.map)return{...u,items:l.map(e=>A_(e,t,{...n,root:!1}))};return u}if(d.anyOf)for(let e=0;e<d.anyOf.length;e++)d.anyOf[e]=p(d.anyOf[e]);else if(d.oneOf)for(let e=0;e<d.oneOf.length;e++)d.oneOf[e]=p(d.oneOf[e]);else if(d.allOf)for(let e=0;e<d.allOf.length;e++)d.allOf[e]=p(d.allOf[e]);else d.not&&=p(d.not);if(f&&(d[an]=f[an]),d.anyOf||d.oneOf||d.allOf||d.not)return d;if(c){let e={};for(let[r,i]of Object.entries(c))e[r]=A_(i,t,{...n,root:!1});return{...u,...d,properties:e}}else if(l?.map)return{...u,...d,items:l.map(e=>A_(e,t,{...n,root:!1}))};return{...u,...d}}let o=e?.properties;if(o&&r&&t.rootOnly!==!0)for(let[r,a]of Object.entries(o))switch(a[M]){case i:let{anyOf:s,oneOf:c,allOf:l,not:u,type:d,...f}=a,p=t.to(f);if(!p)return e;if(p.anyOf)for(let e=0;e<p.anyOf.length;e++)p.anyOf[e]={...f,...p.anyOf[e]};else if(p.oneOf)for(let e=0;e<p.oneOf.length;e++)p.oneOf[e]={...f,...p.oneOf[e]};else if(p.allOf)for(let e=0;e<p.allOf.length;e++)p.allOf[e]={...f,...p.allOf[e]};else p.not&&={...f,...p.not};o[r]={...f,...A_(f,t,{...n,root:!1})};break;case`Object`:case`Union`:o[r]=A_(a,t,{...n,root:!1});break;default:if(Array.isArray(a.items))for(let e=0;e<a.items.length;e++)a.items[e]=A_(a.items[e],t,{...n,root:!1});else a.anyOf||a.oneOf||a.allOf||a.not?o[r]=A_(a,t,{...n,root:!1}):a.type===`array`&&(a.items=A_(a.items,t,{...n,root:!1}));break}return e.type===`array`&&e.items&&(Array.isArray(e.items)?e.items=e.items.map(e=>A_(e,t,{...n,root:!1})):e.items=A_(e.items,t,{...n,root:!1})),e},j_=e=>t=>{if(typeof t==`object`)try{return Yf(e,t)}catch{}return t},M_=(e,{models:t={},dynamic:n=!1,modules:r,normalize:i=!1,additionalProperties:a=!1,forceAdditionalProperties:o=!1,coerce:s=!1,additionalCoerce:c=[],validators:l,sanitize:u}={})=>{if(l=l?.filter(e=>e),!e){if(!l?.length)return;e=l[0],l=l.slice(1)}let d=e=>s?k_(e,[{from:I.Number(),to:e=>I.Numeric(e),untilObjectFound:!0},{from:I.Boolean(),to:e=>I.BooleanString(e),untilObjectFound:!0},...Array.isArray(c)?c:[c]]):k_(e,c),f=e=>{if(e&&typeof e!=`string`&&`~standard`in e)return e;if(!e)return;let n;if(typeof e!=`string`)n=e;else if(n=r&&e in r.$defs?r.Import(e):t[e],!n)return;if(M in n)if(n[M]===`Import`)D_(n.$defs[n.$ref])||(n=n.$defs[n.$ref],(s||c)&&(n=d(n)));else if(D_(n)){let e=bh();n=I.Module({...r?.$defs,[e]:n}).Import(e)}else (s||c)&&(n=d(n));return n},p=f(e),m=l;if(`~standard`in p||l?.length&&l.some(e=>e&&typeof e!=`string`&&`~standard`in e)){let e=e=>{let a;if(i===!0||i===`exactMirror`)try{a=x_(e,{TypeCompiler:mm,sanitize:u?.(),modules:r})}catch{console.warn(`Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues`),console.warn(e),a=j_(e)}let o=M_(e,{models:t,modules:r,dynamic:n,normalize:i,additionalProperties:!0,forceAdditionalProperties:!0,coerce:s,additionalCoerce:c});return o.Decode=a,e=>o.Check(e)?{value:o.Decode(e)}:{issues:[...o.Errors(e)]}},a=p[`~standard`]?p[`~standard`].validate:e(p),o=[];if(l?.length){for(let t of l)if(t&&typeof t!=`string`){if(t?.[`~standard`]){o.push(t[`~standard`]);continue}if(M in t){o.push(e(t));continue}}}async function d(e){let t=a(e);if(t instanceof Promise&&(t=await t),t.issues)return t;let n=[];t&&typeof t==`object`&&n.push(t.value);for(let r=0;r<o.length;r++){if(t=o[r].validate(e),t instanceof Promise&&(t=await t),t.issues)return t;t&&typeof t==`object`&&n.push(t.value)}if(!n.length)return{value:t};if(n.length===1)return{value:n[0]};if(n.length===2)return{value:Hm(n[0],n[1])};let r=Hm(n[0],n[1]);for(let e=2;e<n.length;e++)r=Hm(r,n[e]);return{value:r}}let f={provider:`standard`,schema:p,references:``,checkFunc:()=>{},code:``,Check:d,Errors:e=>d(e)?.then?.(e=>e?.issues),Code:()=>``,Decode:d,Encode:e=>e,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return f.parse=e=>{try{return f.Decode(f.Clean?.(e)??e)}catch{throw[...f.Errors(e)].map(Rh)}},f.safeParse=e=>{try{return{success:!0,data:f.Decode(f.Clean?.(e)??e),error:null}}catch{let t=[...h.Errors(e)].map(Rh);return{success:!1,data:null,error:t[0]?.summary,errors:t}}},f}else if(l?.length){let e=!1,{schema:t,notObjects:n}=Dne([p,...m.map(f)]);n&&(p=I.Intersect([...t?[t]:[],...n.map(t=>{let n=f(t);return n.type===`object`&&`additionalProperties`in n&&(!e&&n.additionalProperties===!1&&(e=!0),delete n.additionalProperties),n})]),p.type===`object`&&e&&(p.additionalProperties=!1))}else p.type===`object`&&(!(`additionalProperties`in p)||o)?p.additionalProperties=a:p=k_(p,{onlyFirst:`object`,from:I.Object({}),to({properties:e,...t}){if(e&&!(`additionalProperties`in p))return I.Object(e,{...t,additionalProperties:!1})}});if(n)if(M in p){let e={provider:`typebox`,schema:p,references:``,checkFunc:()=>{},code:``,Check:e=>nd(p,e),Errors:e=>Hd(p,e),Code:()=>``,Clean:j_(p),Decode:e=>Wp(p,e),Encode:e=>am(p,e),get hasAdditionalProperties(){return`~hasAdditionalProperties`in this?this[`~hasAdditionalProperties`]:this[`~hasAdditionalProperties`]=C_(p)},get hasDefault(){return`~hasDefault`in this?this[`~hasDefault`]:this[`~hasDefault`]=E_(`default`,p)},get isOptional(){return`~isOptional`in this?this[`~isOptional`]:this[`~isOptional`]=S_(p)},get hasTransform(){return`~hasTransform`in this?this[`~hasTransform`]:this[`~hasTransform`]=O_(p)},"~hasRef":void 0,get hasRef(){return`~hasRef`in this?this[`~hasRef`]:this[`~hasRef`]=O_(p)}};if(p.config&&(e.config=p.config,e?.schema?.config&&delete e.schema.config),i&&p.additionalProperties===!1)if(i===!0||i===`exactMirror`)try{e.Clean=x_(p,{TypeCompiler:mm,sanitize:u?.(),modules:r})}catch{console.warn(`Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues`),console.warn(p),e.Clean=j_(p)}else e.Clean=j_(p);return e.parse=t=>{try{return e.Decode(e.Clean?.(t)??t)}catch{throw[...e.Errors(t)].map(Rh)}},e.safeParse=t=>{try{return{success:!0,data:e.Decode(e.Clean?.(t)??t),error:null}}catch{let e=[...h.Errors(t)].map(Rh);return{success:!1,data:null,error:e[0]?.summary,errors:e}}},e}else{let e={provider:`standard`,schema:p,references:``,checkFunc:()=>{},code:``,Check:e=>p[`~standard`].validate(e),Errors(e){let t=p[`~standard`].validate(e);if(t instanceof Promise)throw Error(`Async validation is not supported in non-dynamic schema`);return t.issues},Code:()=>``,Decode(e){let t=p[`~standard`].validate(e);if(t instanceof Promise)throw Error(`Async validation is not supported in non-dynamic schema`);return t},Encode:e=>e,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return e.parse=t=>{try{return e.Decode(e.Clean?.(t)??t)}catch{throw[...e.Errors(t)].map(Rh)}},e.safeParse=t=>{try{return{success:!0,data:e.Decode(e.Clean?.(t)??t),error:null}}catch{let e=[...h.Errors(t)].map(Rh);return{success:!1,data:null,error:e[0]?.summary,errors:e}}},e}let h;if(M in p)if(h=mm.Compile(p,Object.values(t).filter(e=>M in e)),h.provider=`typebox`,p.config&&(h.config=p.config,h?.schema?.config&&delete h.schema.config),i===!0||i===`exactMirror`)try{h.Clean=x_(p,{TypeCompiler:mm,sanitize:u?.(),modules:r})}catch{console.warn(`Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues`),console.dir(p,{depth:null}),h.Clean=j_(p)}else i===`typebox`&&(h.Clean=j_(p));else h={provider:`standard`,schema:p,references:``,checkFunc(e){let t=p[`~standard`].validate(e);if(t instanceof Promise)throw Error(`Async validation is not supported in non-dynamic schema`);return t},code:``,Check:e=>p[`~standard`].validate(e),Errors(e){let t=p[`~standard`].validate(e);if(t instanceof Promise)throw Error(`Async validation is not supported in non-dynamic schema`);return t.issues},Code:()=>``,Decode(e){let t=p[`~standard`].validate(e);if(t instanceof Promise)throw Error(`Async validation is not supported in non-dynamic schema`);return t},Encode:e=>e,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return h.parse=e=>{try{return h.Decode(h.Clean?.(e)??e)}catch{throw[...h.Errors(e)].map(Rh)}},h.safeParse=e=>{try{return{success:!0,data:h.Decode(h.Clean?.(e)??e),error:null}}catch{let t=[...h.Errors(e)].map(Rh);return{success:!1,data:null,error:t[0]?.summary,errors:t}}},M in p&&Object.assign(h,{get hasAdditionalProperties(){return`~hasAdditionalProperties`in this?this[`~hasAdditionalProperties`]:this[`~hasAdditionalProperties`]=C_(h)},get hasDefault(){return`~hasDefault`in this?this[`~hasDefault`]:this[`~hasDefault`]=E_(`default`,h)},get isOptional(){return`~isOptional`in this?this[`~isOptional`]:this[`~isOptional`]=S_(h)},get hasTransform(){return`~hasTransform`in this?this[`~hasTransform`]:this[`~hasTransform`]=O_(p)},get hasRef(){return`~hasRef`in this?this[`~hasRef`]:this[`~hasRef`]=D_(p)},"~hasRef":void 0}),h},Ene=e=>e[M]===`Union`||!e.schema&&!!e.anyOf,Dne=e=>{if(e.length===0)return{schema:void 0,notObjects:[]};if(e.length===1)return e[0].type===`object`?{schema:e[0],notObjects:[]}:{schema:void 0,notObjects:e};let t,n=[],r=!1,i=!1;for(let a of e){if(a.type!==`object`){n.push(a);continue}if(`additionalProperties`in a&&(a.additionalProperties===!0?r=!0:a.additionalProperties===!1&&(i=!0)),!t){t=a;continue}t={...t,...a,properties:{...t.properties,...a.properties},required:[...t?.required??[],...a.required]}}return t&&(t.required&&=[...new Set(t.required)],i?t.additionalProperties=!1:r&&(t.additionalProperties=!0)),{schema:t,notObjects:n}},N_=(e,{models:t={},modules:n,dynamic:r=!1,normalize:i=!1,additionalProperties:a=!1,validators:o=[],sanitize:s})=>{if(o=o.filter(e=>e),!e){if(!o?.length)return;e=o[0],o=o.slice(1)}let c;if(typeof e!=`string`)c=e;else if(c=n&&e in n.$defs?n.Import(e):t[e],!c)return;if(!c)return;if(M in c||`~standard`in c)return{200:M_(c,{modules:n,models:t,additionalProperties:a,dynamic:r,normalize:i,coerce:!1,additionalCoerce:[],validators:o.map(e=>e[200]),sanitize:s})};let l={};return Object.keys(c).forEach(e=>{if(isNaN(+e))return;let u=c[+e];if(typeof u==`string`){if(u in t){let c=t[u];if(!c)return;l[+e]=M in c||`~standard`in c?M_(c,{modules:n,models:t,additionalProperties:a,dynamic:r,normalize:i,coerce:!1,additionalCoerce:[],validators:o.map(t=>t[+e]),sanitize:s}):c}return}l[+e]=M in u||`~standard`in u?M_(u,{modules:n,models:t,additionalProperties:a,dynamic:r,normalize:i,coerce:!1,additionalCoerce:[],validators:o.map(t=>t[+e]),sanitize:s}):u}),l},P_,F_=()=>(P_||=[{from:I.Object({}),to:()=>I.ObjectString({}),excludeRoot:!0},{from:I.Array(I.Any()),to:()=>I.ArrayString(I.Any())}],P_),I_,L_=()=>(I_||=[{from:I.Object({}),to:()=>I.ObjectString({}),excludeRoot:!0},{from:I.Array(I.Any()),to:()=>I.ArrayQuery(I.Any())}],I_),R_,z_=()=>(R_||=[{from:I.Number(),to:e=>I.Numeric(e),rootOnly:!0},{from:I.Boolean(),to:e=>I.BooleanString(e),rootOnly:!0}],R_),One=({validator:e,modules:t,defaultConfig:n={},config:r,dynamic:i,normalize:a=!1,models:o,validators:s,sanitize:c})=>{let l=e?.provider?e:M_(e,{modules:t,dynamic:i,models:o,normalize:a,additionalProperties:!0,coerce:!0,additionalCoerce:F_(),validators:s,sanitize:c});return l?l.config=Um(l.config,r):(l=M_(I.Cookie(I.Any()),{modules:t,dynamic:i,models:o,additionalProperties:!0,validators:s,sanitize:c}),l.config=n),l},B_=e=>e&&e[M]===`Import`&&e.$defs[e.$ref][M]===`Object`?e.$defs[e.$ref]:e;i();var kne=e(Bl(),1),V_=(e,t)=>t?e:``,Ane=[`json`,`text`,`urlencoded`,`arrayBuffer`,`formdata`,`application/json`,`text/plain`,`application/x-www-form-urlencoded`,`application/octet-stream`,`multipart/form-data`],H_=({context:e=`c`,trace:t=[],addFn:n})=>{if(!t.length)return()=>({resolveChild(){return()=>{}},resolve(){}});for(let r=0;r<t.length;r++)n(`let report${r},reportChild${r},reportErr${r},reportErrChild${r};let trace${r}=${e}[ELYSIA_TRACE]?.[${r}]??trace[${r}](${e});
`);return(e,{name:r,total:i=0}={})=>{r||=`anonymous`;let a=e===`error`?`reportErr`:`report`;for(let o=0;o<t.length;o++)n(`${a}${o} = trace${o}.${e}({id,event:'${e}',name:'${r}',begin:performance.now(),total:${i}})
`);return{resolve(){for(let e=0;e<t.length;e++)n(`${a}${e}.resolve()
`)},resolveChild(r){for(let i=0;i<t.length;i++)n(`${a}Child${i}=${a}${i}.resolveChild?.shift()?.({id,event:'${e}',name:'${r}',begin:performance.now()})
`);return e=>{for(let r=0;r<t.length;r++)n(e?`if(${e} instanceof Error){${a}Child${r}?.(${e}) }else{${a}Child${r}?.()}`:`${a}Child${r}?.()
`)}}}}},U_=({schema:e,name:t,type:n,typeAlias:r=n,normalize:i,ignoreTryCatch:a=!1})=>!i||!e.Clean?``:i===!0||i===`exactMirror`?a?`${t}=validator.${r}.Clean(${t})
`:`try{${t}=validator.${r}.Clean(${t})
}catch{}`:i===`typebox`?`${t}=validator.${r}.Clean(${t})
`:``,jne=({injectResponse:e=``,normalize:t=!1,validator:n,encodeSchema:r=!1,isStaticResponse:i=!1,hasSanitize:a=!1})=>({validate:(e,t=`c.${e}`,n)=>`c.set.status=422;throw new ValidationError('${e}',validator.${e},${t}${n?`,`+n:``})`,response:(o=`r`)=>{if(i||!n.response)return``;let s=e+`
`;s+=`if(${o} instanceof ElysiaCustomStatusResponse){c.set.status=${o}.code
${o}=${o}.response}if(${o} instanceof Response === false)switch(c.set.status){`;for(let[e,i]of Object.entries(n.response)){if(s+=`
case ${e}:
`,i.provider===`standard`){s+=`let vare${e}=validator.response[${e}].Check(${o})
if(vare${e} instanceof Promise)vare${e}=await vare${e}
if(vare${e}.issues)throw new ValidationError('response',validator.response[${e}],${o},vare${e}.issues)
${o}=vare${e}.value
c.set.status=${e}
break
`;continue}let n=i.schema?.noValidate===!0;if(!n&&i.schema?.$ref&&i.schema?.$defs){let e=i.schema.$ref,t=typeof e==`string`&&e.includes(`/`)?e.split(`/`).pop():e;i.schema.$defs[t]?.noValidate===!0&&(n=!0)}let c=n||a,l=({ignoreTryCatch:n=!1}={})=>U_({name:o,schema:i,type:`response`,typeAlias:`response[${e}]`,normalize:t,ignoreTryCatch:n});c&&(s+=l());let u=!c&&t&&!n;r&&i.hasTransform&&!n?(s+=`try{${o}=validator.response[${e}].Encode(${o})
`,c||(s+=l({ignoreTryCatch:!0})),s+=`c.set.status=${e}}catch{`+(u?`try{
`+l({ignoreTryCatch:!0})+`${o}=validator.response[${e}].Encode(${o})
}catch{throw new ValidationError('response',validator.response[${e}],${o})}`:`throw new ValidationError('response',validator.response[${e}],${o})`)+`}`):(c||(s+=l()),n||(s+=`if(validator.response[${e}].Check(${o})===false)throw new ValidationError('response',validator.response[${e}],${o})
c.set.status=${e}
`)),s+=`break
`}return s+`}`}}),W_=e=>(e?.fn??e).constructor.name===`AsyncFunction`,Mne=/=>\s?response\.clone\(/,Nne=/(?:return|=>)\s?\S+\(|a(?:sync|wait)/,G_=e=>{let t=typeof e==`object`;if(t&&e.isAsync!==void 0)return e.isAsync;let n=t?e.fn:e;if(n.constructor.name===`AsyncFunction`)return!0;let r=n.toString();if(Mne.test(r))return t&&(e.isAsync=!1),!1;let i=Nne.test(r);return t&&(e.isAsync=i),i},K_=e=>{let t=typeof e==`object`;if(t&&e.hasReturn!==void 0)return e.hasReturn;let n=t?e.fn.toString():typeof e==`string`?e.toString():e,r=n.indexOf(`)`);if(n.charCodeAt(r+2)===61&&n.charCodeAt(r+5)!==123)return t&&(e.hasReturn=!0),!0;let i=n.includes(`return`);return t&&(e.hasReturn=i),i},q_=e=>{let t=e?.fn??e;return t.constructor.name===`AsyncGeneratorFunction`||t.constructor.name===`GeneratorFunction`},J_=(e,t,n=`c.${t}`)=>`try{${e}}catch(error){if(error.constructor.name === 'TransformDecodeError'){c.set.status=422
throw error.error ?? new ValidationError('${t}',validator.${t},${n})}}`,Pne=({app:e,path:t,method:r,hooks:i,validator:a,handler:o,allowMeta:s=!1,inference:c})=>{let l=e[`~adapter`].composeHandler,u=e[`~adapter`].handler,d=typeof o==`function`;if(!d){o=u.mapResponse(o,{headers:e.setHeaders??{}});let t=o instanceof Response||o?.constructor?.name===`Response`&&typeof o?.clone==`function`;if(i.parse?.length&&i.transform?.length&&i.beforeHandle?.length&&i.afterHandle?.length)return t?Function(`a`,`"use strict";
return function(){return a.clone()}`)(o):Function(`a`,`"use strict";
return function(){return a}`)(o);if(t){let e=o;o=()=>e.clone()}}let f=d?`handler(c)`:`handler`,p=!!i.trace?.length,m=``;if(c=Qg(Object.assign({handler:o},i),c,e.config.sucrose),l.declare){let e=l.declare(c);e&&(m+=e)}c.server&&(m+=`Object.defineProperty(c,'server',{get:function(){return getServer()}})
`),a.createBody?.(),a.createQuery?.(),a.createHeaders?.(),a.createParams?.(),a.createCookie?.(),a.createResponse?.();let h=!!a.body||!!a.headers||!!a.params||!!a.query||!!a.cookie||!!a.response,g=c.query||!!a.query,_=i.parse?.length===1&&i.parse[0].fn===`none`,v=r!==``&&r!==`GET`&&r!==`HEAD`&&(c.body||!!a.body||!!i.parse?.length)&&!_,ee=e.setHeaders,te=ee&&!!Object.keys(ee).length,y=c.headers||!!a.headers||l.preferWebstandardHeaders!==!0&&c.body,b=c.cookie||!!a.cookie,x=a.cookie?.config?Um(a?.cookie?.config,e.config.cookie):e.config.cookie,ne=``,re=()=>{if(ne)return ne;if(x?.sign){if(!x.secrets)throw Error(`t.Cookie required secret which is not set in (${r}) ${t}.`);let e=x.secrets?typeof x.secrets==`string`?x.secrets:x.secrets[0]:void 0;if(ne+=`const _setCookie = c.set.cookie
if(_setCookie){`,x.sign===!0)ne+=`for(const [key, cookie] of Object.entries(_setCookie)){c.set.cookie[key].value=await signCookie(cookie.value,'${e}')}`;else for(let t of x.sign)ne+=`if(_setCookie['${t}']?.value)c.set.cookie['${t}'].value=await signCookie(_setCookie['${t}'].value,'${e}')
`;ne+=`}
`}return ne},S=e.config.normalize,ie=e.config.encodeSchema,C=jne({normalize:S,validator:a,encodeSchema:ie,isStaticResponse:o instanceof Response,hasSanitize:!!e.config.sanitize});y&&(m+=l.headers),p&&(m+=`const id=c[ELYSIA_REQUEST_ID]
`);let w=H_({trace:i.trace,addFn:e=>{m+=e}});if(m+=`try{`,b){let e=(e,t)=>{let n=x?.[e]??t;return n?typeof n==`string`?`${e}:'${n}',`:n instanceof Date?`${e}: new Date(${n.getTime()}),`:`${e}:${n},`:typeof t==`string`?`${e}:"${t}",`:`${e}:${t},`},t=x?`{secrets:${x.secrets===void 0?`undefined`:typeof x.secrets==`string`?`'${x.secrets}'`:`[`+x.secrets.reduce((e,t)=>e+`'${t}',`,``)+`]`},sign:${x.sign===!0?!0:x.sign===void 0?`undefined`:`[`+x.sign.reduce((e,t)=>e+`'${t}',`,``)+`]`},`+e(`domain`)+e(`expires`)+e(`httpOnly`)+e(`maxAge`)+e(`path`,`/`)+e(`priority`)+e(`sameSite`)+e(`secure`)+`}`:`undefined`;y?m+=`
c.cookie=await parseCookie(c.set,c.headers.cookie,${t})
`:m+=`
c.cookie=await parseCookie(c.set,c.request.headers.get('cookie'),${t})
`}if(g){let e={},t={},n=!1,r=!1;if(a.query?.schema){let i=B_(a.query?.schema);if(M in i&&i.properties)for(let[a,o]of Object.entries(i.properties))T_(`ArrayQuery`,o)&&(e[a]=1,n=!0),T_(`ObjectString`,o)&&(t[a]=1,r=!0)}m+=`if(c.qi===-1){c.query=Object.create(null)}else{c.query=parseQueryFromURL(c.url,c.qi+1,${n?JSON.stringify(e):void 0},${r?JSON.stringify(t):void 0})}`}let ae=typeof o==`function`&&G_(o),oe=p||i.afterResponse?.length?`c.response=c.responseValue= `:``,se=Object.keys(a.response??{}),T=se.length>1,ce=se.length===0||se.length===1&&se[0]===`200`,le=b||v||ae||!!i.parse?.length||!!i.afterHandle?.some(G_)||!!i.beforeHandle?.some(G_)||!!i.transform?.some(G_)||!!i.mapResponse?.some(G_)||a.body?.provider===`standard`||a.headers?.provider===`standard`||a.query?.provider===`standard`||a.params?.provider===`standard`||a.cookie?.provider===`standard`||Object.values(a.response??{}).find(e=>e.provider===`standard`),E=(typeof o==`function`?q_(o):!1)||!!i.beforeHandle?.some(q_)||!!i.afterHandle?.some(q_)||!!i.transform?.some(q_),ue=c.cookie||c.set||y||p||T||!ce||d&&te||E,de,D=()=>{if(de!==void 0)return de;if(!i.afterResponse?.length&&!p)return``;let e=``,t=i.afterResponse?.some(G_)?`async `:``;e+=`
setImmediate(${t}()=>{`;let n=H_({trace:i.trace,addFn:t=>{e+=t}})(`afterResponse`,{total:i.afterResponse?.length});if(i.afterResponse?.length&&i.afterResponse)for(let t=0;t<i.afterResponse.length;t++){let r=n.resolveChild(i.afterResponse[t].fn.name),a=G_(i.afterResponse[t])?`await `:``;e+=`
${a}e.afterResponse[${t}](c)
`,r()}return n.resolve(),e+=`})
`,de=e},O=(e=`r`)=>{let t=D(),n=`${ue?`mapResponse`:`mapCompactResponse`}(${oe}${e}${ue?`,c.set`:``}${fe})
`;return t?`const _res=${n}`+t+`return _res`:`return ${n}`},fe=E||l.mapResponseContext?`,${l.mapResponseContext}`:``;(p||c.route)&&(m+=`c.route=\`${t}\`
`);let k=w(`parse`,{total:i.parse?.length});if(v){let t=!!i.parse?.length||c.body||a.body;l.parser.declare&&(m+=l.parser.declare),m+=`
try{`;let n=typeof i.parse==`string`?i.parse:Array.isArray(i.parse)&&i.parse.length===1?typeof i.parse[0]==`string`?i.parse[0]:typeof i.parse[0].fn==`string`?i.parse[0].fn:void 0:void 0;if(!n&&a.body&&!i.parse?.length){let e=a.body.schema;e&&e.anyOf&&e[M]===`Union`&&e.anyOf?.length===2&&e.anyOf?.find(e=>e[M]===`ElysiaForm`)&&(n=`formdata`)}if(n&&Ane.includes(n)){let t=w(`parse`,{total:i.parse?.length}),r=!!a.body?.isOptional;switch(n){case`json`:case`application/json`:m+=l.parser.json(r);break;case`text`:case`text/plain`:m+=l.parser.text(r);break;case`urlencoded`:case`application/x-www-form-urlencoded`:m+=l.parser.urlencoded(r);break;case`arrayBuffer`:case`application/octet-stream`:m+=l.parser.arrayBuffer(r);break;case`formdata`:case`multipart/form-data`:m+=l.parser.formData(r);break;default:n[0]in e[`~parser`]&&(m+=y?`let contentType = c.headers['content-type']`:`let contentType = c.request.headers.get('content-type')`,m+=`
if(contentType){const index=contentType.indexOf(';')
if(index!==-1)contentType=contentType.substring(0,index)}
else{contentType=''}c.contentType=contentType
let result=parser['${n}'](c, contentType)
if(result instanceof Promise)result=await result
if(result instanceof ElysiaCustomStatusResponse)throw result
if(result!==undefined)c.body=result
delete c.contentType
`);break}t.resolve()}else if(t){m+=`
`,m+=`let contentType
if(c.request.body)`,m+=y?`contentType=c.headers['content-type']
`:`contentType=c.request.headers.get('content-type')
`;let t=!1;if(i.parse?.length)m+=`if(contentType){
const index=contentType.indexOf(';')

if(index!==-1)contentType=contentType.substring(0,index)}else{contentType=''}let used=false
c.contentType=contentType
`;else{t=!0;let e=!!a.body?.isOptional;m+=`if(contentType)switch(contentType.charCodeAt(12)){
case 106:`+l.parser.json(e)+`break
case 120:`+l.parser.urlencoded(e)+`break
case 111:`+l.parser.arrayBuffer(e)+`break
case 114:`+l.parser.formData(e)+`break
default:if(contentType.charCodeAt(0)===116){`+l.parser.text(e)+`}break
}`}let n=w(`parse`,{total:i.parse?.length});if(i.parse)for(let e=0;e<i.parse.length;e++){let r=`bo${e}`;if(e!==0&&(m+=`
if(!used){`),typeof i.parse[e].fn==`string`){let o=n.resolveChild(i.parse[e].fn),s=!!a.body?.isOptional;switch(i.parse[e].fn){case`json`:case`application/json`:t=!0,m+=l.parser.json(s);break;case`text`:case`text/plain`:t=!0,m+=l.parser.text(s);break;case`urlencoded`:case`application/x-www-form-urlencoded`:t=!0,m+=l.parser.urlencoded(s);break;case`arrayBuffer`:case`application/octet-stream`:t=!0,m+=l.parser.arrayBuffer(s);break;case`formdata`:case`multipart/form-data`:t=!0,m+=l.parser.formData(s);break;default:m+=`let ${r}=parser['${i.parse[e].fn}'](c,contentType)
if(${r} instanceof Promise)${r}=await ${r}
if(${r}!==undefined){c.body=${r};used=true;}
`}o()}else{let t=n.resolveChild(i.parse[e].fn.name);m+=`let ${r}=e.parse[${e}]
${r}=${r}(c,contentType)
if(${r} instanceof Promise)${r}=await ${r}
if(${r}!==undefined){c.body=${r};used=true}`,t()}if(e!==0&&(m+=`}`),t)break}if(n.resolve(),!t){let t=!!a.body?.isOptional;i.parse?.length&&(m+=`
if(!used){
`),m+=`switch(contentType){case 'application/json':
`+l.parser.json(t)+`break
case 'text/plain':`+l.parser.text(t)+`break
case 'application/x-www-form-urlencoded':`+l.parser.urlencoded(t)+`break
case 'application/octet-stream':`+l.parser.arrayBuffer(t)+`break
case 'multipart/form-data':`+l.parser.formData(t)+`break
`;for(let t of Object.keys(e[`~parser`]))m+=`case '${t}':let bo${t}=parser['${t}'](c,contentType)
if(bo${t} instanceof Promise)bo${t}=await bo${t}
if(bo${t} instanceof ElysiaCustomStatusResponse){`+O(`bo${t}`)+`}if(bo${t}!==undefined)c.body=bo${t}
break
`;i.parse?.length&&(m+=`}`),m+=`}`}i.parse?.length&&(m+=`
delete c.contentType`)}m+=`}catch(error){throw new ParseError(error)}`}if(k.resolve(),i?.transform||p){let e=w(`transform`,{total:i.transform?.length});if(i.transform?.length){m+=`let transformed
`;for(let t=0;t<i.transform.length;t++){let n=i.transform[t],r=e.resolveChild(n.fn.name);m+=G_(n)?`transformed=await e.transform[${t}](c)
`:`transformed=e.transform[${t}](c)
`,n.subType===`mapDerive`?m+=`if(transformed instanceof ElysiaCustomStatusResponse){`+O(`transformed`)+`}else{transformed.request=c.request
transformed.store=c.store
transformed.qi=c.qi
transformed.path=c.path
transformed.url=c.url
transformed.redirect=c.redirect
transformed.set=c.set
transformed.error=c.error
c=transformed}`:m+=`if(transformed instanceof ElysiaCustomStatusResponse){`+O(`transformed`)+`}else Object.assign(c,transformed)
`,r()}}e.resolve()}let pe=[];if(a){if(a.headers){if(a.headers.hasDefault)for(let[e,t]of Object.entries(im(a.headers.schema,{}))){let n=typeof t==`object`?JSON.stringify(t):typeof t==`string`?`'${t}'`:t;n!==void 0&&(m+=`c.headers['${e}']??=${n}
`)}m+=U_({name:`c.headers`,schema:a.headers,type:`headers`,normalize:S}),a.headers.isOptional&&(m+=`if(isNotEmpty(c.headers)){`),a.headers?.provider===`standard`?m+=`let vah=validator.headers.Check(c.headers)
if(vah instanceof Promise)vah=await vah
if(vah.issues){`+C.validate(`headers`,void 0,`vah.issues`)+`}else{c.headers=vah.value}
`:a.headers?.schema?.noValidate!==!0&&(m+=`if(validator.headers.Check(c.headers) === false){`+C.validate(`headers`)+`}`),a.headers.hasTransform&&(m+=J_(`c.headers=validator.headers.Decode(c.headers)
`,`headers`)),a.headers.isOptional&&(m+=`}`)}if(a.params){if(a.params.hasDefault)for(let[e,t]of Object.entries(im(a.params.schema,{}))){let n=typeof t==`object`?JSON.stringify(t):typeof t==`string`?`'${t}'`:t;n!==void 0&&(m+=`c.params['${e}']??=${n}
`)}a.params.provider===`standard`?m+=`let vap=validator.params.Check(c.params)
if(vap instanceof Promise)vap=await vap
if(vap.issues){`+C.validate(`params`,void 0,`vap.issues`)+`}else{c.params=vap.value}
`:a.params?.schema?.noValidate!==!0&&(m+=`if(validator.params.Check(c.params)===false){`+C.validate(`params`)+`}`),a.params.hasTransform&&(m+=J_(`c.params=validator.params.Decode(c.params)
`,`params`))}if(a.query){if(M in a.query?.schema&&a.query.hasDefault)for(let[e,t]of Object.entries(im(a.query.schema,{}))){let n=typeof t==`object`?JSON.stringify(t):typeof t==`string`?`'${t}'`:t;n!==void 0&&(m+=`if(c.query['${e}']===undefined)c.query['${e}']=${n}
`)}m+=U_({name:`c.query`,schema:a.query,type:`query`,normalize:S}),a.query.isOptional&&(m+=`if(isNotEmpty(c.query)){`),a.query.provider===`standard`?m+=`let vaq=validator.query.Check(c.query)
if(vaq instanceof Promise)vaq=await vaq
if(vaq.issues){`+C.validate(`query`,void 0,`vaq.issues`)+`}else{c.query=vaq.value}
`:a.query?.schema?.noValidate!==!0&&(m+=`if(validator.query.Check(c.query)===false){`+C.validate(`query`)+`}`),a.query.hasTransform&&(m+=J_(`c.query=validator.query.Decode(c.query)
`,`query`),m+=J_(`c.query=validator.query.Decode(c.query)
`,`query`)),a.query.isOptional&&(m+=`}`)}if(v&&a.body){(a.body.hasTransform||a.body.isOptional)&&(m+=`const isNotEmptyObject=c.body&&(typeof c.body==="object"&&(isNotEmpty(c.body)||c.body instanceof ArrayBuffer))
`);let t=Ene(a.body.schema),n=!1;if(a.body.hasDefault){let e=im(a.body.schema,a.body.schema.type===`object`||B_(a.body.schema)[M]===`Object`?{}:void 0),r=B_(a.body.schema);if(!t&&e&&typeof e==`object`&&(w_(`File`,r)||w_(`Files`,r))){n=!0;for(let[t,n]of Object.entries(e))(n===`File`||n===`Files`)&&delete e[t];wh(e)||(e=void 0)}let i=typeof e==`object`?JSON.stringify(e):typeof e==`string`?`'${e}'`:e;e!=null&&(Array.isArray(e)?m+=`if(!c.body)c.body=${i}
`:typeof e==`object`?m+=`c.body=Object.assign(${i},c.body)
`:m+=`c.body=${i}
`),m+=U_({name:`c.body`,schema:a.body,type:`body`,normalize:S}),a.body.provider===`standard`?m+=`let vab=validator.body.Check(c.body)
if(vab instanceof Promise)vab=await vab
if(vab.issues){`+C.validate(`body`,void 0,`vab.issues`)+`}else{c.body=vab.value}
`:a.body?.schema?.noValidate!==!0&&(a.body.isOptional?m+=`if(isNotEmptyObject&&validator.body.Check(c.body)===false){`+C.validate(`body`)+`}`:m+=`if(validator.body.Check(c.body)===false){`+C.validate(`body`)+`}`)}else m+=U_({name:`c.body`,schema:a.body,type:`body`,normalize:S}),a.body.provider===`standard`?m+=`let vab=validator.body.Check(c.body)
if(vab instanceof Promise)vab=await vab
if(vab.issues){`+C.validate(`body`,void 0,`vab.issues`)+`}else{c.body=vab.value}
`:a.body?.schema?.noValidate!==!0&&(a.body.isOptional?m+=`if(isNotEmptyObject&&validator.body.Check(c.body)===false){`+C.validate(`body`)+`}`:m+=`if(validator.body.Check(c.body)===false){`+C.validate(`body`)+`}`);if(a.body.hasTransform&&(m+=J_(`if(isNotEmptyObject)c.body=validator.body.Decode(c.body)
`,`body`)),t&&a.body.schema.anyOf?.length){let t=Object.values(a.body.schema.anyOf);for(let n=0;n<t.length;n++){let r=t[n];if(w_(`File`,r)||w_(`Files`,r)){let t=M_(r,{modules:e.definitions.typebox,dynamic:!e.config.aot,models:e.definitions.type,normalize:e.config.normalize,additionalCoerce:z_(),sanitize:()=>e.config.sanitize});if(t){let e=pe.length===0,n=Object.entries(r.properties),i=e?`
`:` else `;i+=`if(fileUnions[${pe.length}].Check(c.body)){`;let a=``,o=0;for(let e=0;e<n.length;e++){let[t,r]=n[e];!r.extension||r[M]!==`File`&&r[M]!==`Files`||(o&&(a+=`,`),a+=`fileType(c.body.${t},${JSON.stringify(r.extension)},'body.${t}')`,o++)}a&&(o===1?i+=`await ${a}
`:o>1&&(i+=`await Promise.all([${a}])
`),i+=`}`,m+=i,pe.push(t))}}}}else if(n||!t&&(w_(`File`,B_(a.body.schema))||w_(`Files`,B_(a.body.schema)))){let e=``,t=0;for(let[n,r]of Object.entries(B_(a.body.schema).properties))!r.extension||r[M]!==`File`&&r[M]!==`Files`||(t&&(e+=`,`),e+=`fileType(c.body.${n},${JSON.stringify(r.extension)},'body.${n}')`,t++);t&&(m+=`
`),t===1?m+=`await ${e}
`:t>1&&(m+=`await Promise.all([${e}])
`)}}a.cookie&&(a.cookie.config=Um(a.cookie.config,a.cookie?.config??{}),m+=`let cookieValue={}
for(const [key,value] of Object.entries(c.cookie))cookieValue[key]=value.value
`,a.cookie.isOptional&&(m+=`if(isNotEmpty(c.cookie)){`),a.cookie.provider===`standard`?(m+=`let vac=validator.cookie.Check(cookieValue)
if(vac instanceof Promise)vac=await vac
if(vac.issues){`+C.validate(`cookie`,void 0,`vac.issues`)+`}else{cookieValue=vac.value}
`,m+=`for(const k of Object.keys(cookieValue))c.cookie[k].value=cookieValue[k]
`):a.body?.schema?.noValidate!==!0&&(m+=`if(validator.cookie.Check(cookieValue)===false){`+C.validate(`cookie`,`cookieValue`)+`}`,a.cookie.hasTransform&&(m+=J_(`for(const [key,value] of Object.entries(validator.cookie.Decode(cookieValue))){c.cookie[key].value=value}`,`cookie`))),a.cookie.isOptional&&(m+=`}`))}if(i?.beforeHandle||p){let e=w(`beforeHandle`,{total:i.beforeHandle?.length}),t=!1;if(i.beforeHandle?.length)for(let n=0;n<i.beforeHandle.length;n++){let r=i.beforeHandle[n],s=e.resolveChild(r.fn.name),c=K_(r);if(r.subType===`resolve`||r.subType===`mapResolve`)t||(t=!0,m+=`
let resolved
`),m+=G_(r)?`resolved=await e.beforeHandle[${n}](c);
`:`resolved=e.beforeHandle[${n}](c);
`,r.subType===`mapResolve`?m+=`if(resolved instanceof ElysiaCustomStatusResponse){`+O(`resolved`)+`}else{resolved.request=c.request
resolved.store=c.store
resolved.qi=c.qi
resolved.path=c.path
resolved.url=c.url
resolved.redirect=c.redirect
resolved.set=c.set
resolved.error=c.error
c=resolved}`:m+=`if(resolved instanceof ElysiaCustomStatusResponse){`+O(`resolved`)+`}else Object.assign(c, resolved)
`,s();else if(!c)m+=G_(r)?`await e.beforeHandle[${n}](c)
`:`e.beforeHandle[${n}](c)
`,s();else{if(m+=G_(r)?`be=await e.beforeHandle[${n}](c)
`:`be=e.beforeHandle[${n}](c)
`,s(`be`),m+=`if(be!==undefined){`,e.resolve(),i.afterHandle?.length||p){w(`handle`,{name:d?o.name:void 0}).resolve();let e=w(`afterHandle`,{total:i.afterHandle?.length});if(i.afterHandle?.length)for(let t=0;t<i.afterHandle.length;t++){let n=i.afterHandle[t],r=K_(n),a=e.resolveChild(n.fn.name);m+=`c.response=c.responseValue=be
`,r?(m+=G_(n.fn)?`af=await e.afterHandle[${t}](c)
`:`af=e.afterHandle[${t}](c)
`,m+=`if(af!==undefined) c.response=c.responseValue=be=af
`):m+=G_(n.fn)?`await e.afterHandle[${t}](c, be)
`:`e.afterHandle[${t}](c, be)
`,a(`af`)}e.resolve()}a.response&&(m+=C.response(`be`));let t=w(`mapResponse`,{total:i.mapResponse?.length});if(i.mapResponse?.length){m+=`c.response=c.responseValue=be
`;for(let e=0;e<i.mapResponse.length;e++){let n=i.mapResponse[e],r=t.resolveChild(n.fn.name);m+=`if(mr===undefined){mr=${W_(n)?`await `:``}e.mapResponse[${e}](c)
if(mr!==undefined)be=c.response=c.responseValue=mr}`,r()}}t.resolve(),m+=D(),m+=re(),m+=`return mapEarlyResponse(${oe}be,c.set${fe})}
`}}e.resolve()}if(i.afterHandle?.length||p){let e=w(`handle`,{name:d?o.name:void 0});i.afterHandle?.length?m+=ae?`let r=c.response=c.responseValue=await ${f}
`:`let r=c.response=c.responseValue=${f}
`:m+=ae?`let r=await ${f}
`:`let r=${f}
`,e.resolve();let t=w(`afterHandle`,{total:i.afterHandle?.length});if(i.afterHandle?.length)for(let e=0;e<i.afterHandle.length;e++){let n=i.afterHandle[e],r=K_(n),o=t.resolveChild(n.fn.name);r?(m+=G_(n.fn)?`af=await e.afterHandle[${e}](c)
`:`af=e.afterHandle[${e}](c)
`,o(`af`),a.response?(m+=`if(af!==undefined){`,t.resolve(),m+=C.response(`af`),m+=`c.response=c.responseValue=af}`):(m+=`if(af!==undefined){`,t.resolve(),m+=`c.response=c.responseValue=af}`)):(m+=G_(n.fn)?`await e.afterHandle[${e}](c)
`:`e.afterHandle[${e}](c)
`,o())}t.resolve(),i.afterHandle?.length&&(m+=`r=c.response
`),a.response&&(m+=C.response()),m+=re();let n=w(`mapResponse`,{total:i.mapResponse?.length});if(i.mapResponse?.length)for(let e=0;e<i.mapResponse.length;e++){let t=i.mapResponse[e],r=n.resolveChild(t.fn.name);m+=`mr=${W_(t)?`await `:``}e.mapResponse[${e}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr
`,r()}n.resolve(),m+=O()}else{let e=w(`handle`,{name:d?o.name:void 0});if(a.response||i.mapResponse?.length||p){m+=ae?`let r=await ${f}
`:`let r=${f}
`,e.resolve(),a.response&&(m+=C.response());let t=w(`mapResponse`,{total:i.mapResponse?.length});if(i.mapResponse?.length){m+=`
c.response=c.responseValue=r
`;for(let e=0;e<i.mapResponse.length;e++){let n=i.mapResponse[e],r=t.resolveChild(n.fn.name);m+=`
if(mr===undefined){mr=${W_(n)?`await `:``}e.mapResponse[${e}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr}
`,r()}}t.resolve(),m+=re(),o instanceof Response?(m+=D(),m+=c.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${oe}${f}.clone(),c.set${fe})
else return ${f}.clone()`:`return ${f}.clone()`,m+=`
`):m+=O()}else if(b||p){m+=ae?`let r=await ${f}
`:`let r=${f}
`,e.resolve();let t=w(`mapResponse`,{total:i.mapResponse?.length});if(i.mapResponse?.length){m+=`c.response=c.responseValue= r
`;for(let e=0;e<i.mapResponse.length;e++){let n=i.mapResponse[e],r=t.resolveChild(n.fn.name);m+=`if(mr===undefined){mr=${W_(n)?`await `:``}e.mapResponse[${e}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr}`,r()}}t.resolve(),m+=re()+O()}else{e.resolve();let t=ae?`await ${f}`:f;o instanceof Response?(m+=D(),m+=c.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${oe}${f}.clone(),c.set${fe})
else return ${f}.clone()
`:`return ${f}.clone()
`):m+=O(t)}}if(m+=`
}catch(error){`,!le&&i.error?.length&&(m+=`return(async()=>{`),m+=`const set=c.set
if(!set.status||set.status<300)set.status=error?.status||500
`,b&&(m+=re()),p&&i.trace)for(let e=0;e<i.trace.length;e++)m+=`report${e}?.resolve(error);reportChild${e}?.(error)
`;let me=w(`error`,{total:i.error?.length});if(i.error?.length){m+=`c.error=error
`,h?m+=`if(error instanceof TypeBoxError){c.code="VALIDATION"
c.set.status=422}else{c.code=error.code??error[ERROR_CODE]??"UNKNOWN"}`:m+=`c.code=error.code??error[ERROR_CODE]??"UNKNOWN"
`,m+=`let er
`,i.mapResponse?.length&&(m+=`let mep
`);for(let e=0;e<i.error.length;e++){let t=me.resolveChild(i.error[e].fn.name);if(G_(i.error[e])?m+=`er=await e.error[${e}](c)
`:m+=`er=e.error[${e}](c)
if(er instanceof Promise)er=await er
`,t(),i.mapResponse?.length){let e=w(`mapResponse`,{total:i.mapResponse?.length});for(let t=0;t<i.mapResponse.length;t++){let n=i.mapResponse[t],r=e.resolveChild(n.fn.name);m+=`c.response=c.responseValue=er
mep=e.mapResponse[${t}](c)
if(mep instanceof Promise)er=await er
if(mep!==undefined)er=mep
`,r()}e.resolve()}if(m+=`er=mapEarlyResponse(er,set${fe})
`,m+=`if(er){`,p&&i.trace){for(let e=0;e<i.trace.length;e++)m+=`report${e}.resolve()
`;me.resolve()}m+=`return er}`}}me.resolve(),m+=`return handleError(c,error,true)`,!le&&i.error?.length&&(m+=`})()`),m+=`}`;let he=l.inject?Object.keys(l.inject).join(`,`)+`,`:``,ge=`const {handler,handleError,hooks:e, `+V_(`validator,`,h)+`mapResponse,mapCompactResponse,mapEarlyResponse,isNotEmpty,utils:{`+V_(`parseQuery,`,v)+V_(`parseQueryFromURL,`,g)+`},error:{`+V_(`ValidationError,`,h)+V_(`ParseError`,v)+`},fileType,schema,definitions,ERROR_CODE,`+V_(`parseCookie,`,b)+V_(`signCookie,`,b)+V_(`decodeURIComponent,`,g)+`ElysiaCustomStatusResponse,`+V_(`ELYSIA_TRACE,`,p)+V_(`ELYSIA_REQUEST_ID,`,p)+V_(`parser,`,i.parse?.length)+V_(`getServer,`,c.server)+V_(`fileUnions,`,pe.length)+he+V_(`TypeBoxError`,h)+`}=hooks
const trace=e.trace
return ${le?`async `:``}function handle(c){`;i.beforeHandle?.length&&(ge+=`let be
`),i.afterHandle?.length&&(ge+=`let af
`),i.mapResponse?.length&&(ge+=`let mr
`),s&&(ge+=`c.schema=schema
c.defs=definitions
`),m=ge+m+`}`,ge=``;try{return Function(`hooks`,`"use strict";
`+m)({handler:o,hooks:mh(i),validator:h?a:void 0,handleError:e.handleError,mapResponse:u.mapResponse,mapCompactResponse:u.mapCompactResponse,mapEarlyResponse:u.mapEarlyResponse,isNotEmpty:wh,utils:{parseQuery:v?d_:void 0,parseQueryFromURL:g?a.query?.provider===`standard`?yne:u_:void 0},error:{ValidationError:h?Bh:void 0,ParseError:v?Ih:void 0},fileType:Zh,schema:e.router.history,definitions:e.definitions.type,ERROR_CODE:Ah,parseCookie:b?Og:void 0,signCookie:b?oh:void 0,decodeURIComponent:g?kne.default:void 0,ElysiaCustomStatusResponse:Nh,ELYSIA_TRACE:p?f_:void 0,ELYSIA_REQUEST_ID:p?vh:void 0,getServer:c.server?()=>e.getServer():void 0,fileUnions:pe.length?pe:void 0,TypeBoxError:h?rn:void 0,parser:e[`~parser`],...l.inject})}catch(t){let r=mh(i);console.log(`[Composer] failed to generate optimized handler`),console.log(`---`),console.log({handler:typeof o==`function`?o.toString():o,instruction:m,hooks:{...r,transform:r?.transform?.map?.(e=>e.toString()),resolve:r?.resolve?.map?.(e=>e.toString()),beforeHandle:r?.beforeHandle?.map?.(e=>e.toString()),afterHandle:r?.afterHandle?.map?.(e=>e.toString()),mapResponse:r?.mapResponse?.map?.(e=>e.toString()),parse:r?.parse?.map?.(e=>e.toString()),error:r?.error?.map?.(e=>e.toString()),afterResponse:r?.afterResponse?.map?.(e=>e.toString()),stop:r?.stop?.map?.(e=>e.toString())},validator:a,definitions:e.definitions.type,error:t}),console.log(`---`),n.exit(1)}},Y_=(e,t)=>{let n=``,r=H_({trace:e.event.trace,addFn:t??(e=>{n+=e})})(`request`,{total:e.event.request?.length});if(e.event.request?.length){n+=`try{`;for(let t=0;t<e.event.request.length;t++){let i=e.event.request[t],a=K_(i),o=G_(i),s=r.resolveChild(e.event.request[t].fn.name);a?(n+=`re=mapEarlyResponse(${o?`await `:``}onRequest[${t}](c),c.set)
`,s(`re`),n+=`if(re!==undefined)return re
`):(n+=`${o?`await `:``}onRequest[${t}](c)
`,s())}n+=`}catch(error){return app.handleError(c,error,false)}`}return r.resolve(),n},X_=(e,t=`map`)=>{let n=e.extender.higherOrderFunctions;if(!n.length)return`return `+t;let r=e[`~adapter`].composeGeneralHandler,i=t;for(let e=0;e<n.length;e++)i=`hoc[${e}](${i},${r.parameters})`;return`return function hocMap(${r.parameters}){return ${i}(${r.parameters})}`},Z_=e=>{let t=e[`~adapter`].composeGeneralHandler;e.router.http.build();let n=e[`~adapter`].isWebStandard,r=e.event.trace?.length,i=``,a=e.router,o=a.http.root.WS?`const route=router.find(r.method==='GET'&&r.headers.get('upgrade')==='websocket'?'WS':r.method,p)`:`const route=router.find(r.method,p)`;o+=a.http.root.ALL?`??router.find('ALL',p)
`:`
`,n&&(o+=`if(r.method==='HEAD'){const route=router.find('GET',p)
if(route){c.params=route.params
const _res=route.store.handler?route.store.handler(c):route.store.compile()(c)
if(_res)return getResponseLength(_res).then((length)=>{_res.headers.set('content-length', length)
return new Response(null,{status:_res.status,statusText:_res.statusText,headers:_res.headers})
})}}`);let s=`c.error=notFound
`;if(e.event.afterResponse?.length&&!e.event.error){s=`
c.error=notFound
`;let t=e.event.afterResponse.some(G_)?`async`:``;s+=`
setImmediate(${t}()=>{`;for(let t=0;t<e.event.afterResponse.length;t++){let n=e.event.afterResponse[t].fn;s+=`
${W_(n)?`await `:``}afterResponse[${t}](c)
`}s+=`})
`}e.inference.query&&(s+=`
if(c.qi===-1){c.query={}}else{c.query=parseQueryFromURL(c.url,c.qi+1)}`);let c=t.error404(!!e.event.request?.length,!!e.event.error?.length,s);o+=c.code,o+=`
c.params=route.params
if(route.store.handler)return route.store.handler(c)
return route.store.compile()(c)
`;let l=``;for(let[t,r]of Object.entries(a.static)){l+=`case'${t}':`,e.config.strictPath!==!0&&(l+=`case'${Ch(t)}':`);let i=Th(t);t!==i&&(l+=`case'${i}':`),l+=`switch(r.method){`,(`GET`in r||`WS`in r)&&(l+=`case 'GET':`,`WS`in r&&(l+=`if(r.headers.get('upgrade')==='websocket')return ht[${r.WS}].composed(c)
`,`GET`in r||(`ALL`in r?l+=`return ht[${r.ALL}].composed(c)
`:l+=`break map
`)),`GET`in r&&(l+=`return ht[${r.GET}].composed(c)
`)),n&&(`GET`in r||`ALL`in r)&&!(`HEAD`in r)&&(l+=`case 'HEAD':const _res=ht[${r.GET??r.ALL}].composed(c)
return getResponseLength(_res).then((length)=>{_res.headers.set('content-length', length)
return new Response(null,{status:_res.status,statusText:_res.statusText,headers:_res.headers})
})
`);for(let[e,t]of Object.entries(r))e===`ALL`||e===`GET`||e===`WS`||(l+=`case '${e}':return ht[${t}].composed(c)
`);`ALL`in r?l+=`default:return ht[${r.ALL}].composed(c)
`:l+=`default:break map
`,l+=`}`}let u=!!e.event.request?.some(G_),d=t.inject?Object.keys(t.inject).join(`,`)+`,`:``;i+=`
const {app,mapEarlyResponse,NotFoundError,randomId,handleError,status,redirect,getResponseLength,`+V_(`parseQueryFromURL,`,e.inference.query)+V_(`ELYSIA_TRACE,`,r)+V_(`ELYSIA_REQUEST_ID,`,r)+d+`}=data
const store=app.singleton.store
const decorator=app.singleton.decorator
const staticRouter=app.router.static.http
const ht=app.router.history
const router=app.router.http
const trace=app.event.trace?.map(x=>typeof x==='function'?x:x.fn)??[]
const notFound=new NotFoundError()
const hoc=app.extender.higherOrderFunctions.map(x=>x.fn)
`,e.event.request?.length&&(i+=`const onRequest=app.event.request.map(x=>x.fn)
`),e.event.afterResponse?.length&&(i+=`const afterResponse=app.event.afterResponse.map(x=>x.fn)
`),i+=c.declare,e.event.trace?.length&&(i+=`const `+e.event.trace.map((e,t)=>`tr${t}=app.event.trace[${t}].fn`).join(`,`)+`
`),i+=`${u?`async `:``}function map(${t.parameters}){`,e.event.request?.length&&(i+=`let re
`),i+=t.createContext(e),e.event.trace?.length&&(i+=`c[ELYSIA_TRACE]=[`+e.event.trace.map((e,t)=>`tr${t}(c)`).join(`,`)+`]
`),i+=Y_(e),l&&(i+=`
map: switch(p){
`+l+`}`),i+=o+`}
`+X_(e);let f=Q_(e);e.handleError=f;let p=Function(`data`,`"use strict";
`+i)({app:e,mapEarlyResponse:e[`~adapter`].handler.mapEarlyResponse,NotFoundError:Fh,randomId:bh,handleError:f,status:Ph,redirect:gh,getResponseLength:Dh,parseQueryFromURL:e.inference.query?u_:void 0,ELYSIA_TRACE:r?f_:void 0,ELYSIA_REQUEST_ID:r?vh:void 0,...t.inject});return hm&&Bun.gc(!1),p},Q_=e=>{let t=e.event,n=``,r=e[`~adapter`].composeError,i=r.inject?Object.keys(r.inject).join(`,`)+`,`:``,a=!!e.event.trace?.length;n+=`const {mapResponse,ERROR_CODE,ElysiaCustomStatusResponse,`+V_(`onError,`,e.event.error)+V_(`afterResponse,`,e.event.afterResponse)+V_(`trace,`,e.event.trace)+V_(`onMapResponse,`,e.event.mapResponse)+V_(`ELYSIA_TRACE,`,a)+V_(`ELYSIA_REQUEST_ID,`,a)+i+`}=inject
`,n+=`return ${e.event.error?.find(G_)||e.event.mapResponse?.find(G_)?`async `:``}function(context,error,skipGlobal){`,n+=``,a&&(n+=`const id=context[ELYSIA_REQUEST_ID]
`);let o=H_({context:`context`,trace:t.trace,addFn:e=>{n+=e}}),s=()=>{if(!t.afterResponse?.length&&!a)return``;let e=``,n=t.afterResponse?.some(G_)?`async`:``;e+=`
setImmediate(${n}()=>{`;let r=H_({context:`context`,trace:t.trace,addFn:t=>{e+=t}})(`afterResponse`,{total:t.afterResponse?.length,name:`context`});if(t.afterResponse?.length&&t.afterResponse)for(let n=0;n<t.afterResponse.length;n++){let i=t.afterResponse[n].fn,a=r.resolveChild(i.name);e+=`
${W_(i)?`await `:``}afterResponse[${n}](context)
`,a()}return r.resolve(),e+=`})
`,e};n+=`const set=context.set
let _r
if(!context.code)context.code=error.code??error[ERROR_CODE]
if(!(context.error instanceof Error))context.error=error
if(error instanceof ElysiaCustomStatusResponse){set.status=error.status=error.code
error.message=error.response}`,r.declare&&(n+=r.declare);let c=a||t.afterResponse?.length?`context.response = `:``;if(e.event.error)for(let i=0;i<e.event.error.length;i++){let a=e.event.error[i],l=`${G_(a)?`await `:``}onError[${i}](context)
`;if(n+=`if(skipGlobal!==true){`,K_(a)){n+=`_r=${l}
if(_r!==undefined){if(_r instanceof Response){`+s()+`return mapResponse(_r,set${r.mapResponseContext})}if(_r instanceof ElysiaCustomStatusResponse){error.status=error.code
error.message = error.response}if(set.status===200||!set.status)set.status=error.status
`;let e=o(`mapResponse`,{total:t.mapResponse?.length,name:`context`});if(t.mapResponse?.length)for(let r=0;r<t.mapResponse.length;r++){let i=t.mapResponse[r],a=e.resolveChild(i.fn.name);n+=`context.response=context.responseValue=_r_r=${W_(i)?`await `:``}onMapResponse[${r}](context)
`,a()}e.resolve(),n+=s()+`return mapResponse(${c}_r,set${r.mapResponseContext})}`}else n+=l;n+=`}`}n+=`if(error.constructor.name==="ValidationError"||error.constructor.name==="TransformDecodeError"){
if(error.error)error=error.error
set.status=error.status??422
`+s()+r.validationError+`
}
`,n+=`if(error instanceof Error){`+s()+`
if(typeof error.toResponse==='function')return context.response=context.responseValue=error.toResponse()
`+r.unknownError+`
}`;let l=o(`mapResponse`,{total:t.mapResponse?.length,name:`context`});if(n+=`
if(!context.response)context.response=context.responseValue=error.message??error
`,t.mapResponse?.length){n+=`let mr
`;for(let e=0;e<t.mapResponse.length;e++){let r=t.mapResponse[e],i=l.resolveChild(r.fn.name);n+=`if(mr===undefined){mr=${W_(r)?`await `:``}onMapResponse[${e}](context)
if(mr!==undefined)error=context.response=context.responseValue=mr}`,i()}}l.resolve(),n+=s()+`
return mapResponse(${c}error,set${r.mapResponseContext})}`;let u=e=>typeof e==`function`?e:e.fn;return Function(`inject`,`"use strict";
`+n)({mapResponse:e[`~adapter`].handler.mapResponse,ERROR_CODE:Ah,ElysiaCustomStatusResponse:Nh,onError:e.event.error?.map(u),afterResponse:e.event.afterResponse?.map(u),trace:e.event.trace?.map(u),onMapResponse:e.event.mapResponse?.map(u),ELYSIA_TRACE:a?f_:void 0,ELYSIA_REQUEST_ID:a?vh:void 0,...r.inject})},$_=(e,t)=>t?e:``,ev=(e,t,n,r=!1)=>{let i=``,a=e.setHeaders,o=!!e.event.trace?.length;o&&(i+=`const id=randomId()
`);let s=/[:*]/.test(t.path),c=`const u=request.url,s=u.indexOf('/',${e.config.handler?.standardHostname??!0?11:7}),qi=u.indexOf('?', s + 1)
`,l=n.query||!!t.hooks.query||!!t.hooks.standaloneValidator?.find(e=>e.query)||e.event.request?.length;l&&(i+=c);let u=n.path?s?`get path(){`+(l?``:c)+`if(qi===-1)return u.substring(s)
return u.substring(s,qi)
},`:`path:'${t.path}',`:``;i+=$_(`const c=`,!r)+`{request,store,`+$_(`qi,`,l)+$_(`params:request.params,`,s)+u+$_(`url:request.url,`,o||n.url||l)+`redirect,status,set:{headers:`+(wh(a)?`Object.assign({},app.setHeaders)`:`Object.create(null)`)+`,status:200}`,n.server&&(i+=`,get server(){return app.getServer()}`),o&&(i+=`,[ELYSIA_REQUEST_ID]:id`);{let t=``;for(let n of Object.keys(e.singleton.decorator))t+=`,'${n}':decorator['${n}']`;i+=t}return i+=`}
`,i},tv=(e,t)=>{let n=!!e.event.trace?.length,r=!!e.extender.higherOrderFunctions.length,i=Qg(t.hooks,e.inference);i=Qg({handler:t.handler},i);let a=`const handler=data.handler,app=data.app,store=data.store,decorator=data.decorator,redirect=data.redirect,route=data.route,mapEarlyResponse=data.mapEarlyResponse,`+$_(`randomId=data.randomId,`,n)+$_(`ELYSIA_REQUEST_ID=data.ELYSIA_REQUEST_ID,`,n)+$_(`ELYSIA_TRACE=data.ELYSIA_TRACE,`,n)+$_(`trace=data.trace,`,n)+$_(`hoc=data.hoc,`,r)+`status=data.status
`;e.event.request?.length&&(a+=`const onRequest=app.event.request.map(x=>x.fn)
`),a+=`${e.event.request?.find(G_)?`async`:``} function map(request){`;let o=i.query||!!t.hooks.query||!!t.hooks.standaloneValidator?.find(e=>e.query);return n||o||e.event.request?.length?(a+=ev(e,t,i),a+=Y_(e),a+=`return handler(c)}`):a+=`return handler(${ev(e,t,i,!0)})}`,a+=X_(e),Function(`data`,a)({app:e,handler:t.compile?.()??t.composed,redirect:gh,status:Ph,hoc:e.extender.higherOrderFunctions.map(e=>e.fn),store:e.store,decorator:e.decorator,route:t.path,randomId:n?bh:void 0,ELYSIA_TRACE:n?f_:void 0,ELYSIA_REQUEST_ID:n?vh:void 0,trace:n?e.event.trace?.map(e=>e?.fn??e):void 0,mapEarlyResponse:e_})},Fne=(e,t,n)=>{if(typeof e==`function`||e instanceof Blob)return;if(av(e))return()=>e;let r=$g(e,n??{headers:{}});if(!t.parse?.length&&!t.transform?.length&&!t.beforeHandle?.length&&!t.afterHandle?.length)return r instanceof Promise?r.then(e=>{if(e)return e.headers.has(`content-type`)||e.headers.append(`content-type`,`text/plain`),e.clone()}):(r.headers.has(`content-type`)||r.headers.append(`content-type`,`text/plain`),()=>r.clone())},nv={open(e){e.data.open?.(e)},message(e,t){e.data.message?.(e,t)},drain(e){e.data.drain?.(e)},close(e,t,n){e.data.close?.(e,t,n)}},rv=class{constructor(e,t,n=void 0){this.raw=e,this.data=t,this.body=n,this.validator=e.data?.validator,this.sendText=e.sendText.bind(e),this.sendBinary=e.sendBinary.bind(e),this.close=e.close.bind(e),this.terminate=e.terminate.bind(e),this.publishText=e.publishText.bind(e),this.publishBinary=e.publishBinary.bind(e),this.subscribe=e.subscribe.bind(e),this.unsubscribe=e.unsubscribe.bind(e),this.isSubscribed=e.isSubscribed.bind(e),this.cork=e.cork.bind(e),this.remoteAddress=e.remoteAddress,this.binaryType=e.binaryType,this.data=e.data,this.send=this.send.bind(this),this.ping=this.ping.bind(this),this.pong=this.pong.bind(this),this.publish=this.publish.bind(this)}send(e,t){return Lm.isBuffer(e)?this.raw.send(e,t):this.validator?.Check(e)===!1?this.raw.send(new Bh(`message`,this.validator,e).message):(typeof e==`object`&&(e=JSON.stringify(e)),this.raw.send(e,t))}ping(e){return Lm.isBuffer(e)?this.raw.ping(e):this.validator?.Check(e)===!1?this.raw.send(new Bh(`message`,this.validator,e).message):(typeof e==`object`&&(e=JSON.stringify(e)),this.raw.ping(e))}pong(e){return Lm.isBuffer(e)?this.raw.pong(e):this.validator?.Check(e)===!1?this.raw.send(new Bh(`message`,this.validator,e).message):(typeof e==`object`&&(e=JSON.stringify(e)),this.raw.pong(e))}publish(e,t,n){return Lm.isBuffer(t)?this.raw.publish(e,t,n):this.validator?.Check(t)===!1?this.raw.send(new Bh(`message`,this.validator,t).message):(typeof t==`object`&&(t=JSON.stringify(t)),this.raw.publish(e,t,n))}get readyState(){return this.raw.readyState}get id(){return this.data.id}},Ine=e=>{let t=typeof e==`function`?[e]:e;return async function(e,n){if(typeof n==`string`){let e=n?.charCodeAt(0);if(e===34||e===47||e===91||e===123)try{n=JSON.parse(n)}catch{}else uh(n)?n=+n:n===`true`?n=!0:n===`false`?n=!1:n===`null`&&(n=null)}if(t)for(let r=0;r<t.length;r++){let i=t[r](e,n);if(i instanceof Promise&&(i=await i),i!==void 0)return i}return n}},Lne=e=>{let t=(n,r)=>{if(r instanceof Promise)return r.then(e=>t(n,e));if(Lm.isBuffer(r))return n.send(r.toString());if(r===void 0)return;let i=t=>{if(e?.Check(t)===!1)return n.send(new Bh(`message`,e,t).message);if(typeof t==`object`)return n.send(JSON.stringify(t));n.send(t)};if(typeof r?.next!=`function`)return void i(r);let a=r.next();if(a instanceof Promise)return(async()=>{let t=await a;if(e?.Check(t)===!1)return n.send(new Bh(`message`,e,t).message);if(i(t.value),!t.done)for await(let e of r)i(e)})();if(i(a.value),!a.done)for(let e of r)i(e)};return t};i();var Rne=/:.+?\?(?=\/|$)/,iv=e=>{let t=Rne.exec(e);if(!t)return[e];let n=[],r=e.slice(0,t.index),i=t[0].slice(0,-1),a=e.slice(t.index+t[0].length);n.push(r.slice(0,-1)),n.push(r+i);for(let e of iv(a))e&&(e.startsWith(`/:`)||n.push(r.slice(0,-1)+e),n.push(r+i+e));return n},av=e=>typeof e==`object`&&!!e&&(e.toString()===`[object HTMLBundle]`||typeof e.index==`string`),ov={GET:!0,HEAD:!0,OPTIONS:!0,DELETE:!0,PATCH:!0,POST:!0,PUT:!0},sv=e=>{if(!e.config.aot||!e.config.systemRouter)return;let t={},n=(e,n)=>{let r=encodeURI(e.path);t[r]?t[r][e.method]||(t[r][e.method]=n):t[r]={[e.method]:n}},r=e.routeTree;for(let i of e.router.history){if(typeof i.handler!=`function`)continue;let a=i.method;if(a===`GET`&&`WS_${i.path}`in r||a===`WS`||i.path.charCodeAt(i.path.length-1)===42||!(a in ov))continue;if(a===`ALL`){`WS_${i.path}`in r||(t[i.path]=i.hooks?.config?.mount?i.hooks.trace||e.event.trace||e.extender.higherOrderFunctions?tv(e,i):i.hooks.mount||i.handler:i.handler);continue}let o,s=e.config.precompile?tv(e,i):t=>o?o(t):(o=tv(e,i))(t);for(let e of iv(i.path))n({method:a,path:e},s)}return t},cv=(e,t)=>{if(!t)return e;for(let n of Object.keys(t))if(e[n]!==t[n]){if(!e[n]){e[n]=t[n];continue}if(e[n]&&t[n]){if(typeof e[n]==`function`||e[n]instanceof Response){e[n]=t[n];continue}e[n]={...e[n],...t[n]}}}return e},zne={...Wg,name:`bun`,handler:{mapResponse:$g,mapEarlyResponse:e_,mapCompactResponse:t_,createStaticHandler:vne,createNativeStaticHandler:Fne},composeHandler:{...Wg.composeHandler,headers:Rm?`c.headers=c.request.headers.toJSON()
`:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`},listen(e){return(t,r)=>{if(typeof Bun>`u`)throw Error(`.listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch`);if(e.compile(),typeof t==`string`){if(!uh(t))throw Error(`Port must be a numeric value`);t=parseInt(t)}let i=(e,{withAsync:t=!1}={})=>{let n={},r=[];for(let[i,a]of Object.entries(e))if(i=encodeURI(i),Eh){if(!a)continue;for(let[e,o]of Object.entries(a))if(!(!o||!(e in ov))){if(o instanceof Promise){t&&(n[i]||(n[i]={}),r.push(o.then(t=>{t instanceof Response&&(n[i][e]=t),av(t)&&(n[i][e]=t)})));continue}!(o instanceof Response)&&!av(o)||(n[i]||(n[i]={}),n[i][e]=o)}}else{if(!a)continue;if(a instanceof Promise){t&&(n[i]||(n[i]={}),r.push(a.then(e=>{e instanceof Response&&(n[i]=e)})));continue}if(!(a instanceof Response))continue;n[i]=a}return t?Promise.all(r).then(()=>n):n},a=typeof t==`object`?{development:!jh,reusePort:!0,idleTimeout:30,...e.config.serve||{},...t||{},routes:cv(cv(i(e.router.response),sv(e)),e.config.serve?.routes),websocket:{...e.config.websocket||{},...nv||{},...t.websocket||{}},fetch:e.fetch}:{development:!jh,reusePort:!0,idleTimeout:30,...e.config.serve||{},routes:cv(cv(i(e.router.response),sv(e)),e.config.serve?.routes),websocket:{...e.config.websocket||{},...nv||{}},port:t,fetch:e.fetch};if(e.server=Bun.serve(a),e.event.start)for(let t=0;t<e.event.start.length;t++)e.event.start[t].fn(e);r&&r(e.server),n.on(`beforeExit`,()=>{if(e.server&&(e.server.stop?.(),e.server=null,e.event.stop))for(let t=0;t<e.event.stop.length;t++)e.event.stop[t].fn(e)}),e.promisedModules.then(async()=>{e.server?.reload({...a,fetch:e.fetch,routes:cv(cv(await i(e.router.response,{withAsync:!0}),sv(e)),e.config.serve?.routes)}),Bun?.gc(!1)})}},async stop(e,t){if(e.server){if(e.server.stop(t),e.server=null,e.event.stop?.length)for(let t=0;t<e.event.stop.length;t++)e.event.stop[t].fn(e)}else console.log("Elysia isn't running. Call `app.listen` to start the server.",Error().stack)},ws(e,t,n){let{parse:r,body:i,response:a,...o}=n,s=M_(i,{modules:e.definitions.typebox,models:e.definitions.type,normalize:e.config.normalize}),c=M_(a,{modules:e.definitions.typebox,models:e.definitions.type,normalize:e.config.normalize});e.route(`WS`,t,async t=>{let i=t.server??e.server,{set:a,path:o,qi:l,headers:u,query:d,params:f}=t;if(t.validator=c,n.upgrade)if(typeof n.upgrade==`function`){let e=n.upgrade(t);e instanceof Promise&&await e}else n.upgrade&&Object.assign(a.headers,n.upgrade);if(a.cookie&&wh(a.cookie)){let e=kg(a.cookie);e&&(a.headers[`set-cookie`]=e)}a.headers[`set-cookie`]&&Array.isArray(a.headers[`set-cookie`])&&(a.headers=jg(new Headers(a.headers),a.headers[`set-cookie`]));let p=Lne(c),m=Ine(r),h;if(typeof n.beforeHandle==`function`){let e=n.beforeHandle(t);e instanceof Promise&&await e}let g=[...n.error?Array.isArray(n.error)?n.error:[n.error]:[],...(e.event.error??[]).map(e=>typeof e==`function`?e:e.fn)].filter(e=>e),_=g.length>0,v=_?async(e,n)=>{for(let r of g){let i=r(Object.assign(t,{error:n}));if(i instanceof Promise&&(i=await i),await p(e,i),i)break}}:()=>{};if(!i?.upgrade(t.request,{headers:wh(a.headers)?a.headers:void 0,data:{...t,get id(){return h||=bh()},validator:c,ping(e,t){n.ping?.(e,t)},pong(e,t){n.pong?.(e,t)},open:async e=>{try{await p(e,n.open?.(new rv(e,t)))}catch(t){v(e,t)}},message:async(e,r)=>{let i=await m(e,r);if(s?.Check(i)===!1){let t=new Bh(`message`,s,i);return _?v(e,t):void e.send(t.message)}try{await p(e,n.message?.(new rv(e,t,i),i))}catch(t){v(e,t)}},drain:async e=>{try{await p(e,n.drain?.(new rv(e,t)))}catch(t){v(e,t)}},close:async(e,r,i)=>{try{await p(e,n.close?.(new rv(e,t),r,i))}catch(t){v(e,t)}}}}))return a.status=400,`Expected a websocket connection`},{...o,websocket:n})}};i();var lv=hm?Bun.env:{},uv=(e,t)=>{let n=e.schema;if(n&&(n.$defs?.[n.$ref]&&(n=n.$defs[n.$ref]),n?.properties))for(let[e,r]of Object.entries(n.properties))t[e]??=r.default},dv=e=>{let{mapResponse:t,mapEarlyResponse:n}=e[`~adapter`].handler,r=e.setHeaders;return async i=>{let a=i.url,o=a.indexOf(`/`,11),s=a.indexOf(`?`,o+1),c=s===-1?a.substring(o):a.substring(o,s),l={cookie:{},status:200,headers:r?{...r}:{}},u=Object.assign({},e.singleton.decorator,{set:l,store:e.singleton.store,request:i,path:c,qi:s,error:Ph,status:Ph,redirect:gh});try{if(e.event.request)for(let t=0;t<e.event.request.length;t++){let r=e.event.request[t].fn,i=r(u);if(i instanceof Promise&&(i=await i),i=n(i,l),i)return u.response=i}let r=i.method===`GET`&&i.headers.get(`upgrade`)?.toLowerCase()===`websocket`?`WS`:i.method,o=e.router.dynamic.find(i.method,c)??e.router.dynamic.find(r,c)??e.router.dynamic.find(`ALL`,c);if(!o)throw u.query=s===-1?{}:d_(a.substring(s+1)),new Fh;let{handle:d,hooks:f,validator:p,content:m,route:h}=o.store,g;if(i.method!==`GET`&&i.method!==`HEAD`)if(m)switch(m){case`application/json`:g=await i.json();break;case`text/plain`:g=await i.text();break;case`application/x-www-form-urlencoded`:g=d_(await i.text());break;case`application/octet-stream`:g=await i.arrayBuffer();break;case`multipart/form-data`:g={};let e=await i.formData();for(let t of e.keys()){if(g[t])continue;let n=e.getAll(t);n.length===1?g[t]=n[0]:g[t]=n}break}else{let t;if(i.body&&(t=i.headers.get(`content-type`)),t){let n=t.indexOf(`;`);if(n!==-1&&(t=t.slice(0,n)),u.contentType=t,f.parse)for(let n=0;n<f.parse.length;n++){let r=f.parse[n].fn;if(typeof r==`string`)switch(r){case`json`:case`application/json`:g=await i.json();break;case`text`:case`text/plain`:g=await i.text();break;case`urlencoded`:case`application/x-www-form-urlencoded`:g=d_(await i.text());break;case`arrayBuffer`:case`application/octet-stream`:g=await i.arrayBuffer();break;case`formdata`:case`multipart/form-data`:g={};let n=await i.formData();for(let e of n.keys()){if(g[e])continue;let t=n.getAll(e);t.length===1?g[e]=t[0]:g[e]=t}break;default:let a=e[`~parser`][r];if(a){let e=a(u,t);if(e instanceof Promise&&(e=await e),e){g=e;break}}break}else{let e=r(u,t);if(e instanceof Promise&&(e=await e),e){g=e;break}}}if(delete u.contentType,g===void 0)switch(t){case`application/json`:g=await i.json();break;case`text/plain`:g=await i.text();break;case`application/x-www-form-urlencoded`:g=d_(await i.text());break;case`application/octet-stream`:g=await i.arrayBuffer();break;case`multipart/form-data`:g={};let e=await i.formData();for(let t of e.keys()){if(g[t])continue;let n=e.getAll(t);n.length===1?g[t]=n[0]:g[t]=n}break}}}u.route=h,u.body=g,u.params=o?.params||void 0,u.query=s===-1?{}:d_(a.substring(s+1)),u.headers={};for(let[e,t]of i.headers.entries())u.headers[e]=t;let _={domain:e.config.cookie?.domain??p?.cookie?.config.domain,expires:e.config.cookie?.expires??p?.cookie?.config.expires,httpOnly:e.config.cookie?.httpOnly??p?.cookie?.config.httpOnly,maxAge:e.config.cookie?.maxAge??p?.cookie?.config.maxAge,path:e.config.cookie?.path??p?.cookie?.config.path,priority:e.config.cookie?.priority??p?.cookie?.config.priority,partitioned:e.config.cookie?.partitioned??p?.cookie?.config.partitioned,sameSite:e.config.cookie?.sameSite??p?.cookie?.config.sameSite,secure:e.config.cookie?.secure??p?.cookie?.config.secure,secrets:e.config.cookie?.secrets??p?.cookie?.config.secrets,sign:e.config.cookie?.sign??p?.cookie?.config.sign},v=i.headers.get(`cookie`);u.cookie=await Og(u.set,v,_);let ee=p?.createHeaders?.();ee&&uv(ee,u.headers);let te=p?.createParams?.();te&&uv(te,u.params);let y=p?.createQuery?.();if(y&&uv(y,u.query),f.transform)for(let e=0;e<f.transform.length;e++){let t=f.transform[e],r=t.fn(u);if(r instanceof Promise&&(r=await r),r instanceof Nh){let e=n(r,u.set);if(e)return u.response=e}t.subType===`derive`&&Object.assign(u,r)}if(p){if(ee){let e=structuredClone(u.headers);for(let[t,n]of i.headers)e[t]=n;if(p.headers.Check(e)===!1)throw new Bh(`header`,p.headers,e)}else p.headers?.Decode&&(u.headers=p.headers.Decode(u.headers));if(te?.Check(u.params)===!1)throw new Bh(`params`,p.params,u.params);if(p.params?.Decode&&(u.params=p.params.Decode(u.params)),p.query?.schema){let e=p.query.schema;e.$defs?.[e.$ref]&&(e=e.$defs[e.$ref]);let t=e.properties;for(let e of Object.keys(t)){let n=t[e];(n.type===`array`||n.items?.type===`string`)&&typeof u.query[e]==`string`&&u.query[e]&&(u.query[e]=u.query[e].split(`,`))}}if(y?.Check(u.query)===!1)throw new Bh(`query`,p.query,u.query);if(p.query?.Decode&&(u.query=p.query.Decode(u.query)),p.createCookie?.()){let e={};for(let[t,n]of Object.entries(u.cookie))e[t]=n.value;if(p.cookie.Check(e)===!1)throw new Bh(`cookie`,p.cookie,e);p.cookie?.Decode&&(e=p.cookie.Decode(e))}if(p.createBody?.()?.Check(g)===!1)throw new Bh(`body`,p.body,g);p.body?.Decode&&(u.body=p.body.Decode(g))}if(f.beforeHandle)for(let e=0;e<f.beforeHandle.length;e++){let t=f.beforeHandle[e],r=t.fn(u);if(r instanceof Promise&&(r=await r),r instanceof Nh){let e=n(r,u.set);if(e)return u.response=e}if(t.subType===`resolve`){Object.assign(u,r);continue}if(r!==void 0){if(u.response=r,f.afterHandle)for(let e=0;e<f.afterHandle.length;e++){let t=f.afterHandle[e].fn(u);t instanceof Promise&&(t=await t),t&&(r=t)}let e=n(r,u.set);if(e)return u.response=e}}let b=typeof d==`function`?d(u):d;if(b instanceof Promise&&(b=await b),f.afterHandle?.length){u.response=b;for(let e=0;e<f.afterHandle.length;e++){let t=f.afterHandle[e].fn(u);t instanceof Promise&&(t=await t);let r=t instanceof Nh,i=r?t.code:l.status?typeof l.status==`string`?nh[l.status]:l.status:200;r&&(l.status=i,t=t.response);let a=p?.createResponse?.()?.[i];if(a?.Check(t)===!1)if(a?.Clean){let e=a.Clean(t);if(a?.Check(e)===!1)throw new Bh(`response`,a,t);t=e}else throw new Bh(`response`,a,t);a?.Encode&&(u.response=t=a.Encode(t)),a?.Clean&&(u.response=t=a.Clean(t));let o=n(t,u.set);if(o!==void 0)return u.response=o}}else{let e=b instanceof Nh,t=e?b.code:l.status?typeof l.status==`string`?nh[l.status]:l.status:200;e&&(l.status=t,b=b.response);let n=p?.createResponse?.()?.[t];if(n?.Check(b)===!1)if(n?.Clean){let e=n.Clean(b);if(n?.Check(e)===!1)throw new Bh(`response`,n,b);b=e}else throw new Bh(`response`,n,b);n?.Encode&&(b=n.Encode(b)),n?.Clean&&(b=n.Clean(b))}if(u.set.cookie&&_?.sign){let e=_.secrets?typeof _.secrets==`string`?_.secrets:_.secrets[0]:void 0;if(_.sign===!0){if(e)for(let[t,n]of Object.entries(u.set.cookie))u.set.cookie[t].value=await oh(n.value,e)}else{let t=p?.cookie?.schema?.properties;if(e)for(let n of _.sign)n in t&&u.set.cookie[n]?.value&&(u.set.cookie[n].value=await oh(u.set.cookie[n].value,e))}}return t(u.response=b,u.set)}catch(t){let n=t instanceof Zf&&t.error?t.error:t;return e.handleError(u,n)}finally{e.event.afterResponse&&setImmediate(async()=>{for(let t of e.event.afterResponse)await t.fn(u)})}}},Bne=e=>{let{mapResponse:t}=e[`~adapter`].handler;return async(n,r)=>{let i=Object.assign(n,{error:r,code:r.code});if(i.set=n.set,e.event.error)for(let r=0;r<e.event.error.length;r++){let a=e.event.error[r].fn(i);if(a instanceof Promise&&(a=await a),a!=null)return n.response=t(a,n.set)}return new Response(typeof r.cause==`string`?r.cause:r.message,{headers:n.set.headers,status:r.status??500})}},fv=e(Bl(),1),Vne=Symbol.dispose,pv=class e{constructor(e={}){this.server=null,this.dependencies={},this[`~Prefix`]=``,this[`~Singleton`]=null,this[`~Definitions`]=null,this[`~Metadata`]=null,this[`~Ephemeral`]=null,this[`~Volatile`]=null,this[`~Routes`]=null,this.singleton={decorator:{},store:{},derive:{},resolve:{}},this.definitions={typebox:I.Module({}),type:{},error:{}},this.extender={macro:{},higherOrderFunctions:[]},this.validator={global:null,scoped:null,local:null,getCandidate(){return!this.global&&!this.scoped&&!this.local?{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0}:qm(qm(this.global,this.scoped),this.local)}},this.standaloneValidator={global:null,scoped:null,local:null},this.event={},this.router={"~http":void 0,get http(){return this[`~http`]||=new at({lazy:!0,onParam:fv.default}),this[`~http`]},"~dynamic":void 0,get dynamic(){return this[`~dynamic`]||=new at({onParam:fv.default}),this[`~dynamic`]},static:{},response:{},history:[]},this.routeTree={},this.inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1,path:!1,route:!1,url:!1},this[`~parser`]={},this.handle=async e=>this.fetch(e),this.fetch=e=>(this.fetch=this.config.aot?Z_(this):dv(this))(e),this.handleError=async(e,t)=>(this.handleError=this.config.aot?Q_(this):Bne(this))(e,t),this.listen=(e,t)=>(this[`~adapter`].listen(this)(e,t),this),this.stop=async e=>(await this[`~adapter`].stop?.(this,e),this),this[Vne]=()=>{this.server&&this.stop()},e.tags&&(e.detail?e.detail.tags=e.tags:e.detail={tags:e.tags}),this.config={aot:lv.ELYSIA_AOT!==`false`,nativeStaticResponse:!0,systemRouter:!0,encodeSchema:!0,normalize:!0,...e,prefix:e.prefix?e.prefix.charCodeAt(0)===47?e.prefix:`/${e.prefix}`:void 0,cookie:{path:`/`,...e?.cookie},experimental:e?.experimental??{},seed:e?.seed===void 0?``:e?.seed},this[`~adapter`]=e.adapter??(typeof Bun<`u`?zne:Wg),e?.analytic&&(e?.name||e?.seed!==void 0)&&(this.telemetry={stack:Error().stack})}get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}getGlobalDefinitions(){return this.definitions}getServer(){return this.server}getParent(){return null}get promisedModules(){return this._promisedModules||=new dh(console.error,()=>{}),this._promisedModules}env(e,t=lv){if(M_(e,{modules:this.definitions.typebox,dynamic:!0,additionalProperties:!0,coerce:!0,sanitize:()=>this.config.sanitize}).Check(t)===!1){let n=new Bh(`env`,e,t);throw Error(n.all.map(e=>e.summary).join(`
`))}return this}wrap(e){return this.extender.higherOrderFunctions.push({checksum:Xm(JSON.stringify({name:this.config.name,seed:this.config.seed,content:e.toString()})),fn:e}),this}get models(){let e={};for(let t of Object.keys(this.definitions.type))e[t]=M_(this.definitions.typebox.Import(t));return e.modules=this.definitions.typebox,e}add(e,t,n,r,i){let a=i?.skipPrefix??!1,o=i?.allowMeta??!1;r??={},this.applyMacro(r);let s=[];if(r.standaloneValidator&&(s=s.concat(r.standaloneValidator)),this.standaloneValidator.local&&(s=s.concat(this.standaloneValidator.local)),this.standaloneValidator.scoped&&(s=s.concat(this.standaloneValidator.scoped)),this.standaloneValidator.global&&(s=s.concat(this.standaloneValidator.global)),t!==``&&t.charCodeAt(0)!==47&&(t=`/`+t),this.config.prefix&&!a&&(t=this.config.prefix+t),r?.type)switch(r.type){case`text`:r.type=`text/plain`;break;case`json`:r.type=`application/json`;break;case`formdata`:r.type=`multipart/form-data`;break;case`urlencoded`:r.type=`application/x-www-form-urlencoded`;break;case`arrayBuffer`:r.type=`application/octet-stream`;break;default:break}let c=this.validator.getCandidate(),l={body:r?.body??c?.body,headers:r?.headers??c?.headers,params:r?.params??c?.params,query:r?.query??c?.query,cookie:r?.cookie??c?.cookie,response:r?.response??c?.response},u=this.config.precompile===!0||typeof this.config.precompile==`object`&&this.config.precompile.compose===!0,d=()=>{let e=this.definitions.type,t=!this.config.aot,n=this.config.normalize,r=this.definitions.typebox,i=()=>this.config.sanitize,a=()=>{if(l.cookie||s.find(e=>e.cookie))return One({modules:r,validator:l.cookie,defaultConfig:this.config.cookie,normalize:n,config:l.cookie?.config??{},dynamic:t,models:e,validators:s.map(e=>e.cookie),sanitize:i})};return u?{body:M_(l.body,{modules:r,dynamic:t,models:e,normalize:n,additionalCoerce:z_(),validators:s.map(e=>e.body),sanitize:i}),headers:M_(l.headers,{modules:r,dynamic:t,models:e,additionalProperties:!0,coerce:!0,additionalCoerce:F_(),validators:s.map(e=>e.headers),sanitize:i}),params:M_(l.params,{modules:r,dynamic:t,models:e,coerce:!0,additionalCoerce:F_(),validators:s.map(e=>e.params),sanitize:i}),query:M_(l.query,{modules:r,dynamic:t,models:e,normalize:n,coerce:!0,additionalCoerce:L_(),validators:s.map(e=>e.query),sanitize:i}),cookie:a(),response:N_(l.response,{modules:r,dynamic:t,models:e,normalize:n,validators:s.map(e=>e.response),sanitize:i})}:{createBody(){return this.body?this.body:this.body=M_(l.body,{modules:r,dynamic:t,models:e,normalize:n,additionalCoerce:z_(),validators:s.map(e=>e.body),sanitize:i})},createHeaders(){return this.headers?this.headers:this.headers=M_(l.headers,{modules:r,dynamic:t,models:e,normalize:n,additionalProperties:!n,coerce:!0,additionalCoerce:F_(),validators:s.map(e=>e.headers),sanitize:i})},createParams(){return this.params?this.params:this.params=M_(l.params,{modules:r,dynamic:t,models:e,normalize:n,coerce:!0,additionalCoerce:F_(),validators:s.map(e=>e.params),sanitize:i})},createQuery(){return this.query?this.query:this.query=M_(l.query,{modules:r,dynamic:t,models:e,normalize:n,coerce:!0,additionalCoerce:L_(),validators:s.map(e=>e.query),sanitize:i})},createCookie(){return this.cookie?this.cookie:this.cookie=a()},createResponse(){return this.response?this.response:this.response=N_(l.response,{modules:r,dynamic:t,models:e,normalize:n,validators:s.map(e=>e.response),sanitize:i})}}};(c.body||c.cookie||c.headers||c.params||c.query||c.response)&&(r=Jm(r,c)),r.tags&&(r.detail?r.detail.tags=r.tags:r.detail={tags:r.tags}),wh(this.config.detail)&&(r.detail=Hm(Object.assign({},this.config.detail),r.detail));let f=wh(this.event)?Jm(this.event,ph(r)):{...Ym(ph(r))};if(s.length&&Object.assign(f,{standaloneValidator:s}),this.config.aot===!1){let i=d();this.router.dynamic.add(e,t,{validator:i,hooks:f,content:r?.type,handle:n,route:t});let a=Th(t,{dynamic:!0});if(t!==a&&this.router.dynamic.add(e,a,{validator:i,hooks:f,content:r?.type,handle:n,route:t}),this.config.strictPath===!1){let a=Ch(t);this.router.dynamic.add(e,a,{validator:i,hooks:f,content:r?.type,handle:n,route:t}),a!==Th(a)&&this.router.dynamic.add(e,a,{validator:i,hooks:f,content:r?.type,handle:n,route:t})}this.router.history.push({method:e,path:t,composed:null,handler:n,compile:void 0,hooks:f});return}let p=this[`~adapter`].handler,m=typeof n==`function`?void 0:()=>{let r={redirect:gh,request:this[`~adapter`].isWebStandard?new Request(`http://e.ly${t}`,{method:e}):void 0,server:null,set:{headers:Object.assign({},this.setHeaders)},status:Ph,store:this.store};try{this.event.request?.map(e=>{if(typeof e.fn==`function`)return e.fn(r);if(typeof e==`function`)return e(r)})}catch(e){let t;r.error=e,this.event.error?.some(e=>{if(typeof e.fn==`function`)return t=e.fn(r);if(typeof e==`function`)return t=e(r)}),t!==void 0&&(n=t)}let i=p.createNativeStaticHandler?.(n,f,r.set);return i instanceof Promise?i.then(e=>{if(e)return e}):i?.()},h=this.config.nativeStaticResponse===!0,g=t=>{!h||!m||(Eh?this.router.response[t]?this.router.response[t][e]=m():this.router.response[t]={[e]:m()}:this.router.response[t]=m())};g(t);let _,v=()=>_||=Pne({app:this,path:t,method:e,hooks:f,validator:d(),handler:typeof n!=`function`&&typeof p.createStaticHandler!=`function`?()=>n:n,allowMeta:o,inference:this.inference}),ee;if(`${e}_${t}`in this.routeTree)for(let n=0;n<this.router.history.length;n++){let r=this.router.history[n];if(r.path===t&&r.method===e){ee=n;break}}else this.routeTree[`${e}_${t}`]=this.router.history.length;let te=ee??this.router.history.length,y=u?v():e=>(this.router.history[te].composed=v())(e);ee===void 0?this.router.history.push(Object.assign({method:e,path:t,composed:y,compile:v,handler:n,hooks:f},r.webSocket?{websocket:r.websocket}:void 0)):this.router.history[ee]=Object.assign({method:e,path:t,composed:y,compile:v,handler:n,hooks:f},s.length?{standaloneValidators:s}:void 0,r.webSocket?{websocket:r.websocket}:void 0);let b={handler:u?y:void 0,compile(){return this.handler=v()}},x=this.router.static,ne=t.indexOf(`:`)===-1&&t.indexOf(`*`)===-1;if(e===`WS`){if(ne){t in x?x[t][e]=te:x[t]={[e]:te};return}this.router.http.add(`WS`,t,b),this.config.strictPath||this.router.http.add(`WS`,Ch(t),b);let n=Th(t,{dynamic:!0});t!==n&&this.router.http.add(`WS`,n,b);return}if(ne)t in x?x[t][e]=te:x[t]={[e]:te},this.config.strictPath||g(Ch(t));else{if(this.router.http.add(e,t,b),!this.config.strictPath){let n=Ch(t);g(n),this.router.http.add(e,n,b)}let n=Th(t,{dynamic:!0});t!==n&&(this.router.http.add(e,n,b),g(n))}}headers(e){return e?(this.setHeaders||={},this.setHeaders=Hm(this.setHeaders,e),this):this}onStart(e){return this.on(`start`,e),this}onRequest(e){return this.on(`request`,e),this}onParse(e,t){return t?this.on(e,`parse`,t):typeof e==`string`?this.on(`parse`,this[`~parser`][e]):this.on(`parse`,e)}parser(e,t){return this[`~parser`][e]=t,this}onTransform(e,t){return t?this.on(e,`transform`,t):this.on(`transform`,e)}resolve(e,t){t||(t=e,e={as:`local`});let n={subType:`resolve`,fn:t};return this.onBeforeHandle(e,n)}mapResolve(e,t){t||(t=e,e={as:`local`});let n={subType:`mapResolve`,fn:t};return this.onBeforeHandle(e,n)}onBeforeHandle(e,t){return t?this.on(e,`beforeHandle`,t):this.on(`beforeHandle`,e)}onAfterHandle(e,t){return t?this.on(e,`afterHandle`,t):this.on(`afterHandle`,e)}mapResponse(e,t){return t?this.on(e,`mapResponse`,t):this.on(`mapResponse`,e)}onAfterResponse(e,t){return t?this.on(e,`afterResponse`,t):this.on(`afterResponse`,e)}trace(e,t){t||(t=e,e={as:`local`}),Array.isArray(t)||(t=[t]);for(let n of t)this.on(e,`trace`,bne(n));return this}error(e,t){switch(typeof e){case`string`:return t.prototype[Ah]=e,this.definitions.error[e]=t,this;case`function`:return this.definitions.error=e(this.definitions.error),this}for(let[t,n]of Object.entries(e))n.prototype[Ah]=t,this.definitions.error[t]=n;return this}onError(e,t){return t?this.on(e,`error`,t):this.on(`error`,e)}onStop(e){return this.on(`stop`,e),this}on(e,t,n){let r;switch(typeof e){case`string`:r=e,n=t;break;case`object`:r=t,!Array.isArray(t)&&typeof t==`object`&&(n=t);break}n=Array.isArray(n)?fh(n):typeof n==`function`?[{fn:n}]:[n];let i=n;for(let t of i)t.scope=typeof e==`string`?`local`:e?.as??`local`,(r===`resolve`||r===`derive`)&&(t.subType=r);r!==`trace`&&(this.inference=Qg({[r]:i.map(e=>e.fn)},this.inference,this.config.sucrose));for(let e of i){let t=$m(e,`global`,{skipIfHasType:!0});switch(r){case`start`:this.event.start??=[],this.event.start.push(t);break;case`request`:this.event.request??=[],this.event.request.push(t);break;case`parse`:this.event.parse??=[],this.event.parse.push(t);break;case`transform`:this.event.transform??=[],this.event.transform.push(t);break;case`derive`:this.event.transform??=[],this.event.transform.push(fh(t,`derive`));break;case`beforeHandle`:this.event.beforeHandle??=[],this.event.beforeHandle.push(t);break;case`resolve`:this.event.beforeHandle??=[],this.event.beforeHandle.push(fh(t,`resolve`));break;case`afterHandle`:this.event.afterHandle??=[],this.event.afterHandle.push(t);break;case`mapResponse`:this.event.mapResponse??=[],this.event.mapResponse.push(t);break;case`afterResponse`:this.event.afterResponse??=[],this.event.afterResponse.push(t);break;case`trace`:this.event.trace??=[],this.event.trace.push(t);break;case`error`:this.event.error??=[],this.event.error.push(t);break;case`stop`:this.event.stop??=[],this.event.stop.push(t);break}}return this}as(e){return Sh(this.event.parse,e),Sh(this.event.transform,e),Sh(this.event.beforeHandle,e),Sh(this.event.afterHandle,e),Sh(this.event.mapResponse,e),Sh(this.event.afterResponse,e),Sh(this.event.trace,e),Sh(this.event.error,e),e===`scoped`?(this.validator.scoped=qm(this.validator.scoped,this.validator.local),this.validator.local=null,this.standaloneValidator.local!==null&&(this.standaloneValidator.scoped||=[],this.standaloneValidator.scoped.push(...this.standaloneValidator.local),this.standaloneValidator.local=null)):e===`global`&&(this.validator.global=qm(this.validator.global,qm(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null,this.standaloneValidator.local!==null&&(this.standaloneValidator.scoped||=[],this.standaloneValidator.scoped.push(...this.standaloneValidator.local),this.standaloneValidator.local=null),this.standaloneValidator.scoped!==null&&(this.standaloneValidator.global||=[],this.standaloneValidator.global.push(...this.standaloneValidator.scoped),this.standaloneValidator.scoped=null)),this}group(t,n,r){let i=new e({...this.config,prefix:``});i.singleton={...this.singleton},i.definitions={...this.definitions},i.getServer=()=>this.getServer(),i.inference=hh(this.inference),i.extender={...this.extender},i[`~parser`]=this[`~parser`],i.standaloneValidator={local:[...this.standaloneValidator.local??[]],scoped:[...this.standaloneValidator.scoped??[]],global:[...this.standaloneValidator.global??[]]};let a=typeof n==`object`,o=(a?r:n)(i);return this.singleton=Hm(this.singleton,i.singleton),this.definitions=Hm(this.definitions,i.definitions),o.event.request?.length&&(this.event.request=[...this.event.request||[],...o.event.request||[]]),o.event.mapResponse?.length&&(this.event.mapResponse=[...this.event.mapResponse||[],...o.event.mapResponse||[]]),this.model(o.definitions.type),Object.values(i.router.history).forEach(({method:e,path:r,handler:i,hooks:s})=>{if(r=(a?``:this.config.prefix??``)+t+r,a){let{body:t,headers:a,query:c,params:l,cookie:u,response:d,...f}=n,p=s,m=t||a||c||l||u||d;this.add(e,r,i,Jm(f,{...p||{},error:p.error?Array.isArray(p.error)?[...p.error??[],...o.event.error??[]]:[p.error,...o.event.error??[]]:o.event.error,standaloneValidator:m?[...p.standaloneValidator??[],{body:t,headers:a,query:c,params:l,cookie:u,response:d}]:p.standaloneValidator}),void 0)}else this.add(e,r,i,Jm(s,{error:o.event.error}),{skipPrefix:!0})}),this}guard(t,n){if(!n){if(typeof t==`object`){this.applyMacro(t),t.detail&&(this.config.detail?this.config.detail=Hm(Object.assign({},this.config.detail),t.detail):this.config.detail=t.detail),t.tags&&(this.config.detail?this.config.detail.tags=t.tags:this.config.detail={tags:t.tags});let e=t.as??`local`;if(t.schema===`standalone`){this.standaloneValidator[e]||(this.standaloneValidator[e]=[]);let n=t?.response?typeof t.response==`string`||M in t.response||`~standard`in t.response?{200:t.response}:t?.response:void 0;this.standaloneValidator[e].push({body:t.body,headers:t.headers,params:t.params,query:t.query,response:n,cookie:t.cookie})}else this.validator[e]={body:t.body??this.validator[e]?.body,headers:t.headers??this.validator[e]?.headers,params:t.params??this.validator[e]?.params,query:t.query??this.validator[e]?.query,response:t.response??this.validator[e]?.response,cookie:t.cookie??this.validator[e]?.cookie};return t.parse&&this.on({as:e},`parse`,t.parse),t.transform&&this.on({as:e},`transform`,t.transform),t.derive&&this.on({as:e},`derive`,t.derive),t.beforeHandle&&this.on({as:e},`beforeHandle`,t.beforeHandle),t.resolve&&this.on({as:e},`resolve`,t.resolve),t.afterHandle&&this.on({as:e},`afterHandle`,t.afterHandle),t.mapResponse&&this.on({as:e},`mapResponse`,t.mapResponse),t.afterResponse&&this.on({as:e},`afterResponse`,t.afterResponse),t.error&&this.on({as:e},`error`,t.error),this}return this.guard({},t)}let r=new e({...this.config,prefix:``});r.singleton={...this.singleton},r.definitions={...this.definitions},r.inference=hh(this.inference),r.extender={...this.extender},r.getServer=()=>this.getServer();let i=n(r);return this.singleton=Hm(this.singleton,r.singleton),this.definitions=Hm(this.definitions,r.definitions),i.getServer=()=>this.server,i.event.request?.length&&(this.event.request=[...this.event.request||[],...i.event.request||[]]),i.event.mapResponse?.length&&(this.event.mapResponse=[...this.event.mapResponse||[],...i.event.mapResponse||[]]),this.model(i.definitions.type),Object.values(r.router.history).forEach(({method:e,path:n,handler:r,hooks:a})=>{let{body:o,headers:s,query:c,params:l,cookie:u,response:d,...f}=t,p=o||s||c||l||u||d;this.add(e,n,r,Jm(f,{...a||{},error:a.error?Array.isArray(a.error)?[...a.error??[],...i.event.error??[]]:[a.error,...i.event.error??[]]:i.event.error,standaloneValidator:p?[...a.standaloneValidator??[],{body:o,headers:s,query:c,params:l,cookie:u,response:d}]:a.standaloneValidator}))}),this}use(t){if(!t)return this;if(Array.isArray(t)){let e=this;for(let n of t)e=e.use(n);return e}return t instanceof Promise?(this.promisedModules.add(t.then(t=>{if(typeof t==`function`)return t(this);if(t instanceof e||t.constructor?.name===`Elysia`)return this._use(t).compile();if(typeof t.default==`function`)return t.default(this);if(t.default instanceof e||t.constructor?.name===`Elysia`||t.constructor?.name===`_Elysia`)return this._use(t.default);try{return this._use(t.default)}catch(e){throw console.error(`Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.`),e}}).then(e=>(e&&typeof e.compile==`function`&&e.compile(),e))),this):this._use(t)}propagatePromiseModules(e){if(e.promisedModules.size<=0)return this;for(let t of e.promisedModules.promises)this.promisedModules.add(t.then(e=>{if(!e)return;let t=this._use(e);return t instanceof Promise?t.then(t=>{t?t.compile():e.compile()}):e.compile()}));return this}_use(t){if(typeof t==`function`){let n=t(this);return n instanceof Promise?(this.promisedModules.add(n.then(t=>{if(t instanceof e){t.getServer=()=>this.getServer(),t.getGlobalRoutes=()=>this.getGlobalRoutes(),t.getGlobalDefinitions=()=>this.getGlobalDefinitions(),t.model(this.definitions.type),t.error(this.definitions.error);for(let{method:e,path:n,handler:r,hooks:i}of Object.values(t.router.history))this.add(e,n,r,i,void 0);return t===this?void 0:(this.propagatePromiseModules(t),t)}return typeof t==`function`?t(this):typeof t.default==`function`?t.default(this):this._use(t)}).then(e=>(e&&typeof e.compile==`function`&&e.compile(),e))),this):n}this.propagatePromiseModules(t);let n=t.config.name,r=t.config.seed;if(t.getParent=()=>this,t.getServer=()=>this.getServer(),t.getGlobalRoutes=()=>this.getGlobalRoutes(),t.getGlobalDefinitions=()=>this.getGlobalDefinitions(),t.standaloneValidator?.scoped&&(this.standaloneValidator.local?this.standaloneValidator.local=this.standaloneValidator.local.concat(t.standaloneValidator.scoped):this.standaloneValidator.local=t.standaloneValidator.scoped),t.standaloneValidator?.global&&(this.standaloneValidator.global?this.standaloneValidator.global=this.standaloneValidator.global.concat(t.standaloneValidator.global):this.standaloneValidator.global=t.standaloneValidator.global),wh(t[`~parser`])&&(this[`~parser`]={...t[`~parser`],...this[`~parser`]}),t.setHeaders&&this.headers(t.setHeaders),n){n in this.dependencies||(this.dependencies[n]=[]);let e=r===void 0?0:Xm(n+JSON.stringify(r));this.dependencies[n].some(({checksum:t})=>e===t)||(this.extender.macro={...this.extender.macro,...t.extender.macro},this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(t.extender.higherOrderFunctions))}else wh(t.extender.macro)&&(this.extender.macro={...this.extender.macro,...t.extender.macro}),t.extender.higherOrderFunctions.length&&(this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(t.extender.higherOrderFunctions));if(t.extender.higherOrderFunctions.length){xh(this.extender.higherOrderFunctions);let e=[];for(let t=0;t<this.extender.higherOrderFunctions.length;t++){let n=this.extender.higherOrderFunctions[t];n.checksum&&(e.includes(n.checksum)&&(this.extender.higherOrderFunctions.splice(t,1),t--),e.push(n.checksum))}e.length=0}this.inference=Zg(this.inference,t.inference),wh(t.singleton.decorator)&&this.decorate(t.singleton.decorator),wh(t.singleton.store)&&this.state(t.singleton.store),wh(t.definitions.type)&&this.model(t.definitions.type),wh(t.definitions.error)&&this.error(t.definitions.error),wh(t.extender.macro)&&(this.extender.macro={...this.extender.macro,...t.extender.macro});for(let{method:e,path:n,handler:r,hooks:i}of Object.values(t.router.history))this.add(e,n,r,i);if(n){n in this.dependencies||(this.dependencies[n]=[]);let e=r===void 0?0:Xm(n+JSON.stringify(r));if(this.dependencies[n].some(({checksum:t})=>e===t))return this;this.dependencies[n].push(this.config?.analytic?{name:t.config.name,seed:t.config.seed,checksum:e,dependencies:t.dependencies,stack:t.telemetry?.stack,routes:t.router.history,decorators:t.singleton,store:t.singleton.store,error:t.definitions.error,derive:t.event.transform?.filter(e=>e?.subType===`derive`).map(e=>({fn:e.toString(),stack:Error().stack??``})),resolve:t.event.transform?.filter(e=>e?.subType===`resolve`).map(e=>({fn:e.toString(),stack:Error().stack??``}))}:{name:t.config.name,seed:t.config.seed,checksum:e,dependencies:t.dependencies}),wh(t.event)&&(this.event=Qm(this.event,th(t.event),e))}else wh(t.event)&&(this.event=Qm(this.event,th(t.event)));return t.validator.global&&(this.validator.global=Jm(this.validator.global,{...t.validator.global})),t.validator.scoped&&(this.validator.local=Jm(this.validator.local,{...t.validator.scoped})),this}macro(e,t){if(typeof e==`string`&&!t)throw Error(`Macro function is required`);return typeof e==`string`?this.extender.macro[e]=t:this.extender.macro={...this.extender.macro,...e},this}applyMacro(e,t=e,{iteration:n=0,applied:r={}}={}){if(n>=16)return;let i=this.extender.macro;for(let[a,o]of Object.entries(t)){if(!(a in i))continue;let t=typeof i[a]==`function`?i[a](o):i[a];if(!t||typeof i[a]==`object`&&o===!1)return;let s=Xm(a+JSON.stringify(t.seed??o));if(!(s in r)){r[s]=!0;for(let[o,s]of Object.entries(t))if(o!==`seed`){if(o in Oh){ch(e,o,s),delete e[a];continue}if(o===`detail`){e.detail||={},e.detail=Hm(e.detail,s,{mergeArray:!0}),delete e[a];continue}if(o in i){this.applyMacro(e,{[o]:s},{applied:r,iteration:n+1}),delete e[a];continue}switch((o===`derive`||o===`resolve`)&&typeof s==`function`&&(s={fn:s,subType:o}),typeof e[o]){case`function`:e[o]=[e[o],s];break;case`object`:Array.isArray(e[o])?e[o].push(s):e[o]=[e[o],s];break;case`undefined`:e[o]=s;break}delete e[a]}}}}mount(t,n,r){if(t instanceof e||typeof t==`function`||t.length===0||t===`/`){let i=typeof t==`function`?t:t instanceof e?t.compile().fetch:n instanceof e?n.compile().fetch:typeof n==`function`?n:(()=>{throw Error(`Invalid handler`)})();return this.route(`ALL`,`/*`,({request:e,path:t})=>i(new Request(zm(e.url,t),{method:e.method,headers:e.headers,signal:e.signal,credentials:e.credentials,referrerPolicy:e.referrerPolicy,duplex:e.duplex,redirect:e.redirect,mode:e.mode,keepalive:e.keepalive,integrity:e.integrity,body:e.body})),{parse:`none`,...r,detail:{...r?.detail,hide:!0},config:{mount:i}}),this}let i=n instanceof e?n.compile().fetch:typeof n==`function`?n:(()=>{throw Error(`Invalid handler`)})(),a=t.length-(t.endsWith(`*`)?1:0),o=({request:e,path:t})=>i(new Request(zm(e.url,t.slice(a)||`/`),{method:e.method,headers:e.headers,signal:e.signal,credentials:e.credentials,referrerPolicy:e.referrerPolicy,duplex:e.duplex,redirect:e.redirect,mode:e.mode,keepalive:e.keepalive,integrity:e.integrity,body:e.body}));return this.route(`ALL`,t,o,{parse:`none`,...r,detail:{...r?.detail,hide:!0},config:{mount:i}}),this.route(`ALL`,t+(t.endsWith(`/`)?`*`:`/*`),o,{parse:`none`,...r,detail:{...r?.detail,hide:!0},config:{mount:i}}),this}get(e,t,n){return this.add(`GET`,e,t,n),this}post(e,t,n){return this.add(`POST`,e,t,n),this}put(e,t,n){return this.add(`PUT`,e,t,n),this}patch(e,t,n){return this.add(`PATCH`,e,t,n),this}delete(e,t,n){return this.add(`DELETE`,e,t,n),this}options(e,t,n){return this.add(`OPTIONS`,e,t,n),this}all(e,t,n){return this.add(`ALL`,e,t,n),this}head(e,t,n){return this.add(`HEAD`,e,t,n),this}connect(e,t,n){return this.add(`CONNECT`,e,t,n),this}route(e,t,n,r){return this.add(e.toUpperCase(),t,n,r,r?.config),this}ws(e,t){return this[`~adapter`].ws?this[`~adapter`].ws(this,e,t):console.warn(`Current adapter doesn't support WebSocket`),this}state(e,t,n){t===void 0?(n=e,e={as:`append`},t=``):n===void 0&&(typeof e==`string`?(n=t,t=e,e={as:`append`}):typeof e==`object`&&(n=t,t=``));let{as:r}=e;if(typeof t!=`string`)return this;switch(typeof n){case`object`:return!n||!wh(n)?this:t?(t in this.singleton.store?this.singleton.store[t]=Hm(this.singleton.store[t],n,{override:r===`override`}):this.singleton.store[t]=n,this):(n===null||(this.singleton.store=Hm(this.singleton.store,n,{override:r===`override`})),this);case`function`:return t?(r===`override`||!(t in this.singleton.store))&&(this.singleton.store[t]=n):this.singleton.store=n(this.singleton.store),this;default:return(r===`override`||!(t in this.singleton.store))&&(this.singleton.store[t]=n),this}}decorate(e,t,n){t===void 0?(n=e,e={as:`append`},t=``):n===void 0&&(typeof e==`string`?(n=t,t=e,e={as:`append`}):typeof e==`object`&&(n=t,t=``));let{as:r}=e;if(typeof t!=`string`)return this;switch(typeof n){case`object`:return t?(t in this.singleton.decorator?this.singleton.decorator[t]=Hm(this.singleton.decorator[t],n,{override:r===`override`}):this.singleton.decorator[t]=n,this):(n===null||(this.singleton.decorator=Hm(this.singleton.decorator,n,{override:r===`override`})),this);case`function`:return t?(r===`override`||!(t in this.singleton.decorator))&&(this.singleton.decorator[t]=n):this.singleton.decorator=n(this.singleton.decorator),this;default:return(r===`override`||!(t in this.singleton.decorator))&&(this.singleton.decorator[t]=n),this}}derive(e,t){t||(t=e,e={as:`local`});let n={subType:`derive`,fn:t};return this.onTransform(e,n)}model(e,t){let n=e=>{let t={};for(let n in e)`~standard`in e[n]||(t[n]=e[n]);return t};switch(typeof e){case`object`:let r={},i=Object.entries(e);if(!i.length)return this;for(let[e,t]of i)e in this.definitions.type||(`~standard`in t?this.definitions.type[e]=t:(r[e]=this.definitions.type[e]=t,r[e].$id??=`#/components/schemas/${e}`));return this.definitions.typebox=I.Module({...this.definitions.typebox.$defs,...r}),this;case`function`:let a=e(this.definitions.type);return this.definitions.type=a,this.definitions.typebox=I.Module(n(a)),this;case`string`:if(!t)break;if(this.definitions.type[e]=t,`~standard`in t)return this;let o={...t,id:t.$id??`#/components/schemas/${e}`};return this.definitions.typebox=I.Module({...this.definitions.typebox.$defs,...o}),this}return t?(this.definitions.type[e]=t,`~standard`in t||(this.definitions.typebox=I.Module({...this.definitions.typebox.$defs,[e]:t})),this):this}Ref(e){return I.Ref(e)}mapDerive(e,t){t||(t=e,e={as:`local`});let n={subType:`mapDerive`,fn:t};return this.onTransform(e,n)}affix(e,t,n){if(n===``)return this;let r=[`_`,`-`,` `],i=e=>e[0].toUpperCase()+e.slice(1),a=e===`prefix`?(e,t)=>r.includes(e.at(-1)??``)?e+t:e+i(t):r.includes(n.at(-1)??``)?(e,t)=>t+e:(e,t)=>t+i(e),o=e=>{let t={};switch(e){case`decorator`:for(let e in this.singleton.decorator)t[a(n,e)]=this.singleton.decorator[e];this.singleton.decorator=t;break;case`state`:for(let e in this.singleton.store)t[a(n,e)]=this.singleton.store[e];this.singleton.store=t;break;case`model`:for(let e in this.definitions.type)t[a(n,e)]=this.definitions.type[e];this.definitions.type=t;break;case`error`:for(let e in this.definitions.error)t[a(n,e)]=this.definitions.error[e];this.definitions.error=t;break}},s=Array.isArray(t)?t:[t];for(let e of s.some(e=>e===`all`)?[`decorator`,`state`,`model`,`error`]:s)o(e);return this}prefix(e,t){return this.affix(`prefix`,e,t)}suffix(e,t){return this.affix(`suffix`,e,t)}compile(){return this[`~adapter`].beforeCompile?.(this),this[`~adapter`].isWebStandard?(this.fetch=this.config.aot?Z_(this):dv(this),typeof this.server?.reload==`function`&&this.server.reload({...this.server||{},fetch:this.fetch}),this):(typeof this.server?.reload==`function`&&this.server.reload(this.server||{}),this._handle=Z_(this),this)}get modules(){return this.promisedModules}},Hne=typeof new Headers()?.toJSON==`function`,Une=e=>{if(Hne)return Object.keys(e.toJSON()).join(`, `);let t=``,n=0;return e.forEach((e,r)=>{t=n?t+`, `+r:r,n++}),t},Wne=e=>{let{aot:t=!0,origin:n=!0,methods:r=!0,allowedHeaders:i=!0,exposeHeaders:a=!0,credentials:o=!0,maxAge:s=5,preflight:c=!0}=e??{};Array.isArray(i)&&(i=i.join(`, `)),Array.isArray(a)&&(a=a.join(`, `));let l=typeof n==`boolean`?void 0:Array.isArray(n)?n:[n],u=new pv({name:`@elysiajs/cors`,seed:e,aot:t}),d=l?.some(e=>e===`*`),f={};if(l)for(let e of l)typeof e==`string`&&(f[e]=!0);let p=(e,t,n)=>{if(Array.isArray(e))return e.some(e=>p(e,t,n));switch(typeof e){case`string`:if(n in f)return!0;let r=n.indexOf(`://`);return r!==-1&&(n=n.slice(r+3)),e===n;case`function`:return e(t)===!0;case`object`:if(e instanceof RegExp)return e.test(n)}return!1},m=(e,t)=>{if(n===!0){e.headers.vary=`*`,e.headers[`access-control-allow-origin`]=t.headers.get(`Origin`)||`*`;return}if(d){e.headers.vary=`*`,e.headers[`access-control-allow-origin`]=`*`;return}if(!l?.length)return;let r=[];if(l.length){let r=t.headers.get(`Origin`)??``;for(let i=0;i<l.length;i++)if(p(l[i],t,r)===!0){e.headers.vary=n?`Origin`:`*`,e.headers[`access-control-allow-origin`]=r||`*`;return}}e.headers.vary=`Origin`,r.length&&(e.headers[`access-control-allow-origin`]=r.join(`, `))},h=(e,t)=>{if(t){if(r===!0)return e.headers[`access-control-allow-methods`]=t??`*`;if(!(r===!1||!r?.length)){if(r===`*`)return e.headers[`access-control-allow-methods`]=`*`;if(!Array.isArray(r))return e.headers[`access-control-allow-methods`]=r;e.headers[`access-control-allow-methods`]=r.join(`, `)}}},g={};typeof a==`string`&&(g[`access-control-expose-headers`]=a),typeof i==`string`&&(g[`access-control-allow-headers`]=i),o===!0&&(g[`access-control-allow-credentials`]=`true`),u.headers(g);function _({set:e,request:t,headers:n}){return m(e,t),h(e,t.headers.get(`access-control-request-method`)),(i===!0||a===!0)&&(i===!0&&(e.headers[`access-control-allow-headers`]=n[`access-control-request-headers`]),a===!0&&(e.headers[`access-control-expose-headers`]=Object.keys(n).join(`,`))),s&&(e.headers[`access-control-max-age`]=s.toString()),new Response(null,{status:204})}return c&&u.options(`/`,_).options(`/*`,_),u.onRequest(function({set:e,request:t}){if(m(e,t),h(e,t.method),i===!0||a===!0){let n=Une(t.headers);i===!0&&(e.headers[`access-control-allow-headers`]=n),a===!0&&(e.headers[`access-control-expose-headers`]=n)}})},mv=class extends Error{constructor(e,t){super(t+``),this.status=e,this.value=t}},Gne=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,Kne=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,qne=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,Jne=e=>e.trim().length!==0&&!Number.isNaN(Number(e)),hv=e=>{if(typeof e!=`string`)return null;let t=e.replace(/"/g,``);if(Gne.test(t)||Kne.test(t)||qne.test(t)){let e=new Date(t);if(!Number.isNaN(e.getTime()))return e}return null},Yne=e=>{let t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t===123&&n===125||t===91&&n===93},Xne=e=>JSON.parse(e,(e,t)=>hv(t)||t),gv=e=>{if(!e)return e;if(Jne(e))return+e;if(e===`true`)return!0;if(e===`false`)return!1;let t=hv(e);if(t)return t;if(Yne(e))try{return Xne(e)}catch{}return e},Zne=e=>{let t=e.data.toString();return t===`null`?null:gv(t)},Qne=class{constructor(e){this.url=e,this.ws=new WebSocket(e)}ws;send(e){return Array.isArray(e)?(e.forEach(e=>this.send(e)),this):(this.ws.send(typeof e==`object`?JSON.stringify(e):e.toString()),this)}on(e,t,n){return this.addEventListener(e,t,n)}off(e,t,n){return this.ws.removeEventListener(e,t,n),this}subscribe(e,t){return this.addEventListener(`message`,e,t)}addEventListener(e,t,n){return this.ws.addEventListener(e,n=>{if(e===`message`){let e=Zne(n);t({...n,data:e})}else t(n)},n),this}removeEventListener(e,t,n){return this.off(e,t,n),this}close(){return this.ws.close(),this}},$ne=[`get`,`post`,`put`,`delete`,`patch`,`options`,`head`,`connect`,`subscribe`],_v=[`localhost`,`127.0.0.1`,`0.0.0.0`],vv=typeof FileList>`u`,yv=e=>vv?e instanceof Blob:e instanceof FileList||e instanceof File,ere=e=>{if(!e)return!1;for(let t in e)if(yv(e[t])||Array.isArray(e[t])&&e[t].find(yv))return!0;return!1},bv=e=>vv?e:new Promise(t=>{let n=new FileReader;n.onload=()=>{t(new File([n.result],e.name,{lastModified:e.lastModified,type:e.type}))},n.readAsArrayBuffer(e)}),xv=(e,t,n={},r={})=>{if(Array.isArray(e)){for(let i of e)if(!Array.isArray(i))r=xv(i,t,n,r);else{let e=i[0];if(typeof e==`string`)r[e.toLowerCase()]=i[1];else for(let[t,n]of e)r[t.toLowerCase()]=n}return r}if(!e)return r;switch(typeof e){case`function`:if(e instanceof Headers)return xv(e,t,n,r);let i=e(t,n);return i?xv(i,t,n,r):r;case`object`:if(e instanceof Headers)return e.forEach((e,t)=>{r[t.toLowerCase()]=e}),r;for(let[t,n]of Object.entries(e))r[t.toLowerCase()]=n;return r;default:return r}};async function*tre(e){let t=e.body;if(!t)return;let n=t.getReader(),r=new TextDecoder;try{for(;;){let{done:e,value:t}=await n.read();if(e)break;let i=typeof t==`string`?t:r.decode(t);i.includes(`

`)?yield*nre(i):yield gv(i)}}finally{n.releaseLock()}}function*nre(e){let t=e.split(`

`);for(let e of t){if(e.indexOf(`:`)<=0){e&&(yield gv(e));continue}let t=e.split(`
`),n={};for(let e of t){let t=e.indexOf(`:`);if(t>0){let r=e.slice(0,t).trim();n[r]=gv(e.slice(t+1).trim())}}yield n}}var Sv=(e,t,n=[],r)=>new Proxy(()=>{},{get(i,a){return Sv(e,t,a===`index`?n:[...n,a],r)},apply(i,a,[o,s]){if(!o||s||typeof o==`object`&&Object.keys(o).length!==1||$ne.includes(n.at(-1))){let i=[...n],a=i.pop(),c=`/`+i.join(`/`),{fetcher:l=fetch,headers:u,onRequest:d,onResponse:f,fetch:p}=t,m=a===`get`||a===`head`||a===`subscribe`;u=xv(u,c,s);let h=m?o?.query:s?.query,g=``;if(h){let e=(e,t)=>{g+=(g?`&`:`?`)+`${encodeURIComponent(e)}=${encodeURIComponent(t)}`};for(let[t,n]of Object.entries(h)){if(Array.isArray(n)){for(let r of n)e(t,r);continue}if(n!=null){if(typeof n==`object`){e(t,JSON.stringify(n));continue}e(t,`${n}`)}}}return a===`subscribe`?new Qne(e.replace(/^([^]+):\/\//,e.startsWith(`https://`)?`wss://`:e.startsWith(`http://`)||_v.find(t=>e.includes(t))?`ws://`:`wss://`)+c+g):(async()=>{let t={method:a?.toUpperCase(),body:o,...p,headers:u};t.headers={...u,...xv(m?o?.headers:s?.headers,c,t)};let n=m&&typeof o==`object`?o.fetch:s?.fetch;if(t={...t,...n},m&&delete t.body,d){Array.isArray(d)||(d=[d]);for(let e of d){let n=await e(c,t);typeof n==`object`&&(t={...t,...n,headers:{...t.headers,...xv(n.headers,c,t)}})}}if(m&&delete t.body,ere(o)){let e=new FormData;for(let[n,r]of Object.entries(t.body)){if(Array.isArray(r)){for(let t=0;t<r.length;t++){let i=r[t];e.append(n,i instanceof File?await bv(i):i)}continue}if(vv){if(Array.isArray(r))for(let t of r)e.append(n,t);else e.append(n,r);continue}if(r instanceof File){e.append(n,await bv(r));continue}if(r instanceof FileList){for(let t=0;t<r.length;t++)e.append(n,await bv(r[t]));continue}e.append(n,r)}t.body=e}else typeof o==`object`?(t.headers[`content-type`]=`application/json`,t.body=JSON.stringify(o)):o!=null&&(t.headers[`content-type`]=`text/plain`);if(m&&delete t.body,d){Array.isArray(d)||(d=[d]);for(let e of d){let n=await e(c,t);typeof n==`object`&&(t={...t,...n,headers:{...t.headers,...xv(n.headers,c,t)}})}}s?.headers?.[`content-type`]&&(t.headers[`content-type`]=s?.headers[`content-type`]);let i=e+c+g,h=await(r?.handle(new Request(i,t))??l(i,t)),_=null,v=null;if(f){Array.isArray(f)||(f=[f]);for(let e of f)try{let t=await e(h.clone());if(t!=null){_=t;break}}catch(e){v=e instanceof mv?e:new mv(422,e);break}}if(_!==null)return{data:_,error:v,response:h,status:h.status,headers:h.headers};switch(h.headers.get(`Content-Type`)?.split(`;`)[0]){case`text/event-stream`:_=tre(h);break;case`application/json`:_=JSON.parse(await h.text(),(e,t)=>typeof t==`string`&&hv(t)||t);break;case`application/octet-stream`:_=await h.arrayBuffer();break;case`multipart/form-data`:let e=await h.formData();_={},e.forEach((e,t)=>{_[t]=e});break;default:_=await h.text().then(gv)}return(h.status>=300||h.status<200)&&(v=new mv(h.status,_),_=null),{data:_,error:v,response:h,status:h.status,headers:h.headers}})()}return typeof o==`object`?Sv(e,t,[...n,Object.values(o)[0]],r):Sv(e,t,n)}}),rre=(e,t={})=>typeof e==`string`?(t.keepDomain||(e.includes(`://`)||(e=(_v.find(t=>e.includes(t))?`http://`:`https://`)+e),e.endsWith(`/`)&&(e=e.slice(0,-1))),Sv(e,t)):(typeof window<`u`&&console.warn(`Elysia instance server found on client side, this is not recommended for security reason. Use generic type instead.`),Sv(`http://e.ly`,t,[],e));i();var ire=Object.defineProperty,Cv=(e,t)=>{for(var n in t)ire(e,n,{get:t[n],enumerable:!0})};function wv(e){return`type`in e||`properties`in e||`items`in e}function are(e,t){return(e===`createdAt`||e===`updatedAt`)&&`anyOf`in t&&Array.isArray(t.anyOf)}function Tv(e){if(!wv(e)||typeof e!=`object`||!e)return e;let t={...e};return Object.entries(t).forEach(([e,n])=>{if(wv(n))if(are(e,n)){let r=n.anyOf?.find(e=>wv(e)&&e.format===`date-time`);r&&(t[e]={type:`string`,format:`date-time`,default:r.default})}else t[e]=Tv(n)}),t}var ore=(e,t)=>{let{version:n=`latest`,theme:r=`https://unpkg.com/swagger-ui-dist@${n??`latest`}/swagger-ui.css`,cdn:i=`https://unpkg.com/swagger-ui-dist@${n}/swagger-ui-bundle.js`,autoDarkMode:a=!0,...o}=t,s=JSON.stringify({dom_id:`#swagger-ui`,...o},(e,t)=>typeof t==`function`?void 0:t),c=JSON.parse(s);return c.components&&c.components.schemas&&(c.components.schemas=Object.fromEntries(Object.entries(c.components.schemas).map(([e,t])=>[e,Tv(t)]))),`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>${e.title}</title>
    <meta
        name="description"
        content="${e.description}"
    />
    <meta
        name="og:description"
        content="${e.description}"
    />
    ${a&&typeof r==`string`?`<style>
@media (prefers-color-scheme: dark) {
    body {
        background-color: #222;
        color: #faf9a;
    }
    .swagger-ui {
        filter: invert(92%) hue-rotate(180deg);
    }

    .swagger-ui .microlight {
        filter: invert(100%) hue-rotate(180deg);
    }
}
</style>`:``}
    ${typeof r==`string`?`<link rel="stylesheet" href="${r}" />`:`<link rel="stylesheet" media="(prefers-color-scheme: light)" href="${r.light}" />
<link rel="stylesheet" media="(prefers-color-scheme: dark)" href="${r.dark}" />`}
</head>
<body>
    <div id="swagger-ui"></div>
    <script src="${i}" crossorigin><\/script>
    <script>
        window.onload = () => {
            window.ui = SwaggerUIBundle(${s});
        };
    <\/script>
</body>
</html>`},sre=`.light-mode {
  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;
  --scalar-color-accent: #f06292;

  --scalar-background-1: #fff;
  --scalar-background-2: #f6f6f6;
  --scalar-background-3: #e7e7e7;

  --scalar-border-color: rgba(0, 0, 0, 0.1);
}
.dark-mode {
  --scalar-color-1: rgba(255, 255, 255, 0.9);
  --scalar-color-2: rgba(156, 163, 175, 1);
  --scalar-color-3: rgba(255, 255, 255, 0.44);
  --scalar-color-accent: #f06292;

  --scalar-background-1: #111728;
  --scalar-background-2: #1e293b;
  --scalar-background-3: #334155;
  --scalar-background-accent: #f062921f;

  --scalar-border-color: rgba(255, 255, 255, 0.1);
}

/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: #f062921f;
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: transparent;
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
}

/* advanced */
.light-mode {
  --scalar-button-1: rgb(49 53 56);
  --scalar-button-1-color: #fff;
  --scalar-button-1-hover: rgb(28 31 33);

  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-scrollbar-color: rgba(0, 0, 0, 0.18);
  --scalar-scrollbar-color-active: rgba(0, 0, 0, 0.36);
}
.dark-mode {
  --scalar-button-1: #f6f6f6;
  --scalar-button-1-color: #000;
  --scalar-button-1-hover: #e7e7e7;

  --scalar-color-green: #a3ffa9;
  --scalar-color-red: #ffa3a3;
  --scalar-color-yellow: #fffca3;
  --scalar-color-blue: #a5d6ff;
  --scalar-color-orange: #e2ae83;
  --scalar-color-purple: #d2a8ff;

  --scalar-scrollbar-color: rgba(255, 255, 255, 0.24);
  --scalar-scrollbar-color-active: rgba(255, 255, 255, 0.48);
}
.section-flare {
  width: 100%;
  height: 400px;
  position: absolute;
}
.section-flare-item:first-of-type:before {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  --stripes: repeating-linear-gradient(100deg, #fff 0%, #fff 0%, transparent 2%, transparent 12%, #fff 17%);
  --stripesDark: repeating-linear-gradient(100deg, #000 0%, #000 0%, transparent 10%, transparent 12%, #000 17%);
  --rainbow: repeating-linear-gradient(100deg, #60a5fa 10%, #e879f9 16%, #5eead4 22%, #60a5fa 30%);
  contain: strict;
  contain-intrinsic-size: 100vw 40vh;
  background-image: var(--stripesDark), var(--rainbow);
  background-size: 300%, 200%;
  background-position: 50% 50%, 50% 50%;
  filter: opacity(20%) saturate(200%);
  -webkit-mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  pointer-events: none;
}
.section-flare-item:first-of-type:after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background-image: var(--stripes), var(--rainbow);
  background-size: 200%, 100%;
  background-attachment: fixed;
  mix-blend-mode: difference;
  background-image: var(--stripesDark), var(--rainbow);
  pointer-events: none;
}
.light-mode .section-flare-item:first-of-type:after,
.light-mode .section-flare-item:first-of-type:before {
  background-image: var(--stripes), var(--rainbow);
  filter: opacity(4%) saturate(200%);
}`,cre=(e,t,n)=>`<!doctype html>
<html>
  <head>
    <title>${e.title}</title>
    <meta
        name="description"
        content="${e.description}"
    />
    <meta
        name="og:description"
        content="${e.description}"
    />
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
    <style>
      body {
        margin: 0;
      }
    </style>
    <style>
      ${t.customCss??sre}
    </style>
  </head>
  <body>
    <script
      id="api-reference"
      data-configuration='${JSON.stringify(Object.assign(t,{content:n}))}'
    >
    <\/script>
    <script src="${t.cdn}" crossorigin><\/script>
  </body>
</html>`,Ev={};Cv(Ev,{HasPropertyKey:()=>Dv,IsArray:()=>Ov,IsAsyncIterator:()=>lre,IsBigInt:()=>kv,IsBoolean:()=>Av,IsDate:()=>jv,IsFunction:()=>ure,IsIterator:()=>dre,IsNull:()=>fre,IsNumber:()=>Mv,IsObject:()=>Nv,IsRegExp:()=>Pv,IsString:()=>Fv,IsSymbol:()=>pre,IsUint8Array:()=>Iv,IsUndefined:()=>Lv});function Dv(e,t){return t in e}function lre(e){return Nv(e)&&!Ov(e)&&!Iv(e)&&Symbol.asyncIterator in e}function Ov(e){return Array.isArray(e)}function kv(e){return typeof e==`bigint`}function Av(e){return typeof e==`boolean`}function jv(e){return e instanceof globalThis.Date}function ure(e){return typeof e==`function`}function dre(e){return Nv(e)&&!Ov(e)&&!Iv(e)&&Symbol.iterator in e}function fre(e){return e===null}function Mv(e){return typeof e==`number`}function Nv(e){return typeof e==`object`&&!!e}function Pv(e){return e instanceof globalThis.RegExp}function Fv(e){return typeof e==`string`}function pre(e){return typeof e==`symbol`}function Iv(e){return e instanceof globalThis.Uint8Array}function Lv(e){return e===void 0}function mre(e){return e.map(e=>Rv(e))}function hre(e){return new Date(e.getTime())}function gre(e){return new Uint8Array(e)}function _re(e){return new RegExp(e.source,e.flags)}function vre(e){let t={};for(let n of Object.getOwnPropertyNames(e))t[n]=Rv(e[n]);for(let n of Object.getOwnPropertySymbols(e))t[n]=Rv(e[n]);return t}function Rv(e){return Ov(e)?mre(e):jv(e)?hre(e):Iv(e)?gre(e):Pv(e)?_re(e):Nv(e)?vre(e):e}function zv(e){return Rv(e)}function Bv(e,t){return zv(t===void 0?e:{...t,...e})}function yre(e){return typeof e==`object`&&!!e}function bre(e){return globalThis.Array.isArray(e)&&!globalThis.ArrayBuffer.isView(e)}function xre(e){return e===void 0}function Sre(e){return typeof e==`number`}var Vv;(function(e){e.InstanceMode=`default`,e.ExactOptionalPropertyTypes=!1,e.AllowArrayObject=!1,e.AllowNaN=!1,e.AllowNullVoid=!1;function t(t,n){return e.ExactOptionalPropertyTypes?n in t:t[n]!==void 0}e.IsExactOptionalProperty=t;function n(t){let n=yre(t);return e.AllowArrayObject?n:n&&!bre(t)}e.IsObjectLike=n;function r(e){return n(e)&&!(e instanceof Date)&&!(e instanceof Uint8Array)}e.IsRecordLike=r;function i(t){return e.AllowNaN?Sre(t):Number.isFinite(t)}e.IsNumberLike=i;function a(t){let n=xre(t);return e.AllowNullVoid?n||t===null:n}e.IsVoidLike=a})(Vv||={});function Cre(e){return globalThis.Object.freeze(e).map(e=>Hv(e))}function wre(e){return e}function Tre(e){return e}function Ere(e){return e}function Dre(e){let t={};for(let n of Object.getOwnPropertyNames(e))t[n]=Hv(e[n]);for(let n of Object.getOwnPropertySymbols(e))t[n]=Hv(e[n]);return globalThis.Object.freeze(t)}function Hv(e){return Ov(e)?Cre(e):jv(e)?wre(e):Iv(e)?Tre(e):Pv(e)?Ere(e):Nv(e)?Dre(e):e}function L(e,t){let n=t===void 0?e:{...t,...e};switch(Vv.InstanceMode){case`freeze`:return Hv(n);case`clone`:return zv(n);default:return n}}var Uv=class extends Error{constructor(e){super(e)}},Wv={};Cv(Wv,{IsAny:()=>Zv,IsArgument:()=>Qv,IsArray:()=>$v,IsAsyncIterator:()=>ey,IsBigInt:()=>ty,IsBoolean:()=>ny,IsComputed:()=>ry,IsConstructor:()=>iy,IsDate:()=>ay,IsFunction:()=>oy,IsImport:()=>Ore,IsInteger:()=>sy,IsIntersect:()=>cy,IsIterator:()=>ly,IsKind:()=>zy,IsKindOf:()=>uy,IsLiteral:()=>my,IsLiteralBoolean:()=>fy,IsLiteralNumber:()=>dy,IsLiteralString:()=>Are,IsLiteralValue:()=>py,IsMappedKey:()=>hy,IsMappedResult:()=>gy,IsNever:()=>_y,IsNot:()=>vy,IsNull:()=>yy,IsNumber:()=>by,IsObject:()=>xy,IsOptional:()=>Xv,IsPromise:()=>Sy,IsProperties:()=>kre,IsReadonly:()=>Yv,IsRecord:()=>Cy,IsRecursive:()=>wy,IsRef:()=>Ty,IsRegExp:()=>Ey,IsSchema:()=>By,IsString:()=>Dy,IsSymbol:()=>Oy,IsTemplateLiteral:()=>ky,IsThis:()=>Ay,IsTransform:()=>jy,IsTuple:()=>My,IsUint8Array:()=>Fy,IsUndefined:()=>Ny,IsUnion:()=>Py,IsUnknown:()=>Iy,IsUnsafe:()=>Ly,IsVoid:()=>Ry});var Gv=Symbol.for(`TypeBox.Transform`),Kv=Symbol.for(`TypeBox.Readonly`),qv=Symbol.for(`TypeBox.Optional`),Jv=Symbol.for(`TypeBox.Hint`),R=Symbol.for(`TypeBox.Kind`);function Yv(e){return Nv(e)&&e[Kv]===`Readonly`}function Xv(e){return Nv(e)&&e[qv]===`Optional`}function Zv(e){return uy(e,`Any`)}function Qv(e){return uy(e,`Argument`)}function $v(e){return uy(e,`Array`)}function ey(e){return uy(e,`AsyncIterator`)}function ty(e){return uy(e,`BigInt`)}function ny(e){return uy(e,`Boolean`)}function ry(e){return uy(e,`Computed`)}function iy(e){return uy(e,`Constructor`)}function ay(e){return uy(e,`Date`)}function oy(e){return uy(e,`Function`)}function Ore(e){return uy(e,`Import`)}function sy(e){return uy(e,`Integer`)}function kre(e){return Nv(e)}function cy(e){return uy(e,`Intersect`)}function ly(e){return uy(e,`Iterator`)}function uy(e,t){return Nv(e)&&R in e&&e[R]===t}function Are(e){return my(e)&&Fv(e.const)}function dy(e){return my(e)&&Mv(e.const)}function fy(e){return my(e)&&Av(e.const)}function py(e){return Av(e)||Mv(e)||Fv(e)}function my(e){return uy(e,`Literal`)}function hy(e){return uy(e,`MappedKey`)}function gy(e){return uy(e,`MappedResult`)}function _y(e){return uy(e,`Never`)}function vy(e){return uy(e,`Not`)}function yy(e){return uy(e,`Null`)}function by(e){return uy(e,`Number`)}function xy(e){return uy(e,`Object`)}function Sy(e){return uy(e,`Promise`)}function Cy(e){return uy(e,`Record`)}function wy(e){return Nv(e)&&Jv in e&&e[Jv]===`Recursive`}function Ty(e){return uy(e,`Ref`)}function Ey(e){return uy(e,`RegExp`)}function Dy(e){return uy(e,`String`)}function Oy(e){return uy(e,`Symbol`)}function ky(e){return uy(e,`TemplateLiteral`)}function Ay(e){return uy(e,`This`)}function jy(e){return Nv(e)&&Gv in e}function My(e){return uy(e,`Tuple`)}function Ny(e){return uy(e,`Undefined`)}function Py(e){return uy(e,`Union`)}function Fy(e){return uy(e,`Uint8Array`)}function Iy(e){return uy(e,`Unknown`)}function Ly(e){return uy(e,`Unsafe`)}function Ry(e){return uy(e,`Void`)}function zy(e){return Nv(e)&&R in e&&Fv(e[R])}function By(e){return Zv(e)||Qv(e)||$v(e)||ny(e)||ty(e)||ey(e)||ry(e)||iy(e)||ay(e)||oy(e)||sy(e)||cy(e)||ly(e)||my(e)||hy(e)||gy(e)||_y(e)||vy(e)||yy(e)||by(e)||xy(e)||Sy(e)||Cy(e)||Ty(e)||Ey(e)||Dy(e)||Oy(e)||ky(e)||Ay(e)||My(e)||Ny(e)||Py(e)||Fy(e)||Iy(e)||Ly(e)||Ry(e)||zy(e)}var z={};Cv(z,{IsAny:()=>tb,IsArgument:()=>nb,IsArray:()=>rb,IsAsyncIterator:()=>ib,IsBigInt:()=>ab,IsBoolean:()=>ob,IsComputed:()=>sb,IsConstructor:()=>cb,IsDate:()=>lb,IsFunction:()=>ub,IsImport:()=>db,IsInteger:()=>fb,IsIntersect:()=>mb,IsIterator:()=>hb,IsKind:()=>Kb,IsKindOf:()=>gb,IsLiteral:()=>yb,IsLiteralBoolean:()=>jre,IsLiteralNumber:()=>vb,IsLiteralString:()=>_b,IsLiteralValue:()=>bb,IsMappedKey:()=>xb,IsMappedResult:()=>Sb,IsNever:()=>Cb,IsNot:()=>wb,IsNull:()=>Tb,IsNumber:()=>Eb,IsObject:()=>Db,IsOptional:()=>eb,IsPromise:()=>Ob,IsProperties:()=>pb,IsReadonly:()=>$y,IsRecord:()=>kb,IsRecursive:()=>Ab,IsRef:()=>jb,IsRegExp:()=>Mb,IsSchema:()=>qb,IsString:()=>Nb,IsSymbol:()=>Pb,IsTemplateLiteral:()=>Fb,IsThis:()=>Ib,IsTransform:()=>Lb,IsTuple:()=>Rb,IsUint8Array:()=>Hb,IsUndefined:()=>zb,IsUnion:()=>Vb,IsUnionLiteral:()=>Bb,IsUnknown:()=>Ub,IsUnsafe:()=>Wb,IsVoid:()=>Gb,TypeGuardUnknownTypeError:()=>Vy});var Vy=class extends Uv{},Hy=`Argument.Any.Array.AsyncIterator.BigInt.Boolean.Computed.Constructor.Date.Enum.Function.Integer.Intersect.Iterator.Literal.MappedKey.MappedResult.Not.Null.Number.Object.Promise.Record.Ref.RegExp.String.Symbol.TemplateLiteral.This.Tuple.Undefined.Union.Uint8Array.Unknown.Void`.split(`.`);function Uy(e){try{return new RegExp(e),!0}catch{return!1}}function Wy(e){if(!Fv(e))return!1;for(let t=0;t<e.length;t++){let n=e.charCodeAt(t);if(n>=7&&n<=13||n===27||n===127)return!1}return!0}function Gy(e){return Jy(e)||qb(e)}function Ky(e){return Lv(e)||kv(e)}function qy(e){return Lv(e)||Mv(e)}function Jy(e){return Lv(e)||Av(e)}function Yy(e){return Lv(e)||Fv(e)}function Xy(e){return Lv(e)||Fv(e)&&Wy(e)&&Uy(e)}function Zy(e){return Lv(e)||Fv(e)&&Wy(e)}function Qy(e){return Lv(e)||qb(e)}function $y(e){return Nv(e)&&e[Kv]===`Readonly`}function eb(e){return Nv(e)&&e[qv]===`Optional`}function tb(e){return gb(e,`Any`)&&Yy(e.$id)}function nb(e){return gb(e,`Argument`)&&Mv(e.index)}function rb(e){return gb(e,`Array`)&&e.type===`array`&&Yy(e.$id)&&qb(e.items)&&qy(e.minItems)&&qy(e.maxItems)&&Jy(e.uniqueItems)&&Qy(e.contains)&&qy(e.minContains)&&qy(e.maxContains)}function ib(e){return gb(e,`AsyncIterator`)&&e.type===`AsyncIterator`&&Yy(e.$id)&&qb(e.items)}function ab(e){return gb(e,`BigInt`)&&e.type===`bigint`&&Yy(e.$id)&&Ky(e.exclusiveMaximum)&&Ky(e.exclusiveMinimum)&&Ky(e.maximum)&&Ky(e.minimum)&&Ky(e.multipleOf)}function ob(e){return gb(e,`Boolean`)&&e.type===`boolean`&&Yy(e.$id)}function sb(e){return gb(e,`Computed`)&&Fv(e.target)&&Ov(e.parameters)&&e.parameters.every(e=>qb(e))}function cb(e){return gb(e,`Constructor`)&&e.type===`Constructor`&&Yy(e.$id)&&Ov(e.parameters)&&e.parameters.every(e=>qb(e))&&qb(e.returns)}function lb(e){return gb(e,`Date`)&&e.type===`Date`&&Yy(e.$id)&&qy(e.exclusiveMaximumTimestamp)&&qy(e.exclusiveMinimumTimestamp)&&qy(e.maximumTimestamp)&&qy(e.minimumTimestamp)&&qy(e.multipleOfTimestamp)}function ub(e){return gb(e,`Function`)&&e.type===`Function`&&Yy(e.$id)&&Ov(e.parameters)&&e.parameters.every(e=>qb(e))&&qb(e.returns)}function db(e){return gb(e,`Import`)&&Dv(e,`$defs`)&&Nv(e.$defs)&&pb(e.$defs)&&Dv(e,`$ref`)&&Fv(e.$ref)&&e.$ref in e.$defs}function fb(e){return gb(e,`Integer`)&&e.type===`integer`&&Yy(e.$id)&&qy(e.exclusiveMaximum)&&qy(e.exclusiveMinimum)&&qy(e.maximum)&&qy(e.minimum)&&qy(e.multipleOf)}function pb(e){return Nv(e)&&Object.entries(e).every(([e,t])=>Wy(e)&&qb(t))}function mb(e){return gb(e,`Intersect`)&&!(Fv(e.type)&&e.type!==`object`)&&Ov(e.allOf)&&e.allOf.every(e=>qb(e)&&!Lb(e))&&Yy(e.type)&&(Jy(e.unevaluatedProperties)||Qy(e.unevaluatedProperties))&&Yy(e.$id)}function hb(e){return gb(e,`Iterator`)&&e.type===`Iterator`&&Yy(e.$id)&&qb(e.items)}function gb(e,t){return Nv(e)&&R in e&&e[R]===t}function _b(e){return yb(e)&&Fv(e.const)}function vb(e){return yb(e)&&Mv(e.const)}function jre(e){return yb(e)&&Av(e.const)}function yb(e){return gb(e,`Literal`)&&Yy(e.$id)&&bb(e.const)}function bb(e){return Av(e)||Mv(e)||Fv(e)}function xb(e){return gb(e,`MappedKey`)&&Ov(e.keys)&&e.keys.every(e=>Mv(e)||Fv(e))}function Sb(e){return gb(e,`MappedResult`)&&pb(e.properties)}function Cb(e){return gb(e,`Never`)&&Nv(e.not)&&Object.getOwnPropertyNames(e.not).length===0}function wb(e){return gb(e,`Not`)&&qb(e.not)}function Tb(e){return gb(e,`Null`)&&e.type===`null`&&Yy(e.$id)}function Eb(e){return gb(e,`Number`)&&e.type===`number`&&Yy(e.$id)&&qy(e.exclusiveMaximum)&&qy(e.exclusiveMinimum)&&qy(e.maximum)&&qy(e.minimum)&&qy(e.multipleOf)}function Db(e){return gb(e,`Object`)&&e.type===`object`&&Yy(e.$id)&&pb(e.properties)&&Gy(e.additionalProperties)&&qy(e.minProperties)&&qy(e.maxProperties)}function Ob(e){return gb(e,`Promise`)&&e.type===`Promise`&&Yy(e.$id)&&qb(e.item)}function kb(e){return gb(e,`Record`)&&e.type===`object`&&Yy(e.$id)&&Gy(e.additionalProperties)&&Nv(e.patternProperties)&&(e=>{let t=Object.getOwnPropertyNames(e.patternProperties);return t.length===1&&Uy(t[0])&&Nv(e.patternProperties)&&qb(e.patternProperties[t[0]])})(e)}function Ab(e){return Nv(e)&&Jv in e&&e[Jv]===`Recursive`}function jb(e){return gb(e,`Ref`)&&Yy(e.$id)&&Fv(e.$ref)}function Mb(e){return gb(e,`RegExp`)&&Yy(e.$id)&&Fv(e.source)&&Fv(e.flags)&&qy(e.maxLength)&&qy(e.minLength)}function Nb(e){return gb(e,`String`)&&e.type===`string`&&Yy(e.$id)&&qy(e.minLength)&&qy(e.maxLength)&&Xy(e.pattern)&&Zy(e.format)}function Pb(e){return gb(e,`Symbol`)&&e.type===`symbol`&&Yy(e.$id)}function Fb(e){return gb(e,`TemplateLiteral`)&&e.type===`string`&&Fv(e.pattern)&&e.pattern[0]===`^`&&e.pattern[e.pattern.length-1]===`$`}function Ib(e){return gb(e,`This`)&&Yy(e.$id)&&Fv(e.$ref)}function Lb(e){return Nv(e)&&Gv in e}function Rb(e){return gb(e,`Tuple`)&&e.type===`array`&&Yy(e.$id)&&Mv(e.minItems)&&Mv(e.maxItems)&&e.minItems===e.maxItems&&(Lv(e.items)&&Lv(e.additionalItems)&&e.minItems===0||Ov(e.items)&&e.items.every(e=>qb(e)))}function zb(e){return gb(e,`Undefined`)&&e.type===`undefined`&&Yy(e.$id)}function Bb(e){return Vb(e)&&e.anyOf.every(e=>_b(e)||vb(e))}function Vb(e){return gb(e,`Union`)&&Yy(e.$id)&&Nv(e)&&Ov(e.anyOf)&&e.anyOf.every(e=>qb(e))}function Hb(e){return gb(e,`Uint8Array`)&&e.type===`Uint8Array`&&Yy(e.$id)&&qy(e.minByteLength)&&qy(e.maxByteLength)}function Ub(e){return gb(e,`Unknown`)&&Yy(e.$id)}function Wb(e){return gb(e,`Unsafe`)}function Gb(e){return gb(e,`Void`)&&e.type===`void`&&Yy(e.$id)}function Kb(e){return Nv(e)&&R in e&&Fv(e[R])&&!Hy.includes(e[R])}function qb(e){return Nv(e)&&(tb(e)||nb(e)||rb(e)||ob(e)||ab(e)||ib(e)||sb(e)||cb(e)||lb(e)||ub(e)||fb(e)||mb(e)||hb(e)||yb(e)||xb(e)||Sb(e)||Cb(e)||wb(e)||Tb(e)||Eb(e)||Db(e)||Ob(e)||kb(e)||jb(e)||Mb(e)||Nb(e)||Pb(e)||Fb(e)||Ib(e)||Rb(e)||zb(e)||Vb(e)||Hb(e)||Ub(e)||Wb(e)||Gb(e)||Kb(e))}var Jb=`(true|false)`,Yb=`(0|[1-9][0-9]*)`,Xb=`(.*)`,Zb=`(?!.*)`;`${Jb}`;var Qb=`^${Yb}$`,$b=`^${Xb}$`,ex=`^${Zb}$`,tx={};Cv(tx,{Clear:()=>ix,Delete:()=>ax,Entries:()=>rx,Get:()=>cx,Has:()=>ox,Set:()=>sx});var nx=new Map;function rx(){return new Map(nx)}function ix(){return nx.clear()}function ax(e){return nx.delete(e)}function ox(e){return nx.has(e)}function sx(e,t){nx.set(e,t)}function cx(e){return nx.get(e)}var lx={};Cv(lx,{Clear:()=>Nre,Delete:()=>Pre,Entries:()=>Mre,Get:()=>Lre,Has:()=>Fre,Set:()=>Ire});var ux=new Map;function Mre(){return new Map(ux)}function Nre(){return ux.clear()}function Pre(e){return ux.delete(e)}function Fre(e){return ux.has(e)}function Ire(e,t){ux.set(e,t)}function Lre(e){return ux.get(e)}function Rre(e,t){return e.filter(e=>t.includes(e))}function zre(e,t){return e.reduce((e,t)=>Rre(e,t),t)}function Bre(e){return e.length===1?e[0]:e.length>1?zre(e.slice(1),e[0]):[]}function Vre(e){let t=[];for(let n of e)t.push(...n);return t}function dx(e){return L({[R]:`Any`},e)}function fx(e,t){return L({[R]:`Array`,type:`array`,items:e},t)}function px(e){return L({[R]:`Argument`,index:e})}function Hre(e,t){return L({[R]:`AsyncIterator`,type:`AsyncIterator`,items:e},t)}function mx(e,t,n){return L({[R]:`Computed`,target:e,parameters:t},n)}function Ure(e,t){let{[t]:n,...r}=e;return r}function hx(e,t){return t.reduce((e,t)=>Ure(e,t),e)}function gx(e){return L({[R]:`Never`,not:{}},e)}function _x(e){return L({[R]:`MappedResult`,properties:e})}function Wre(e,t,n){return L({[R]:`Constructor`,type:`Constructor`,parameters:e,returns:t},n)}function vx(e,t,n){return L({[R]:`Function`,type:`Function`,parameters:e,returns:t},n)}function yx(e,t){return L({[R]:`Union`,anyOf:e},t)}function Gre(e){return e.some(e=>Xv(e))}function bx(e){return e.map(e=>Xv(e)?Kre(e):e)}function Kre(e){return hx(e,[qv])}function qre(e,t){return Gre(e)?LS(yx(bx(e),t)):yx(bx(e),t)}function xx(e,t){return e.length===1?L(e[0],t):e.length===0?gx(t):qre(e,t)}function Sx(e,t){return e.length===0?gx(t):e.length===1?L(e[0],t):yx(e,t)}var Cx=class extends Uv{};function Jre(e){return e.replace(/\\\$/g,`$`).replace(/\\\*/g,`*`).replace(/\\\^/g,`^`).replace(/\\\|/g,`|`).replace(/\\\(/g,`(`).replace(/\\\)/g,`)`)}function wx(e,t,n){return e[t]===n&&e.charCodeAt(t-1)!==92}function Tx(e,t){return wx(e,t,`(`)}function Ex(e,t){return wx(e,t,`)`)}function Dx(e,t){return wx(e,t,`|`)}function Yre(e){if(!(Tx(e,0)&&Ex(e,e.length-1)))return!1;let t=0;for(let n=0;n<e.length;n++)if(Tx(e,n)&&(t+=1),Ex(e,n)&&--t,t===0&&n!==e.length-1)return!1;return!0}function Xre(e){return e.slice(1,e.length-1)}function Zre(e){let t=0;for(let n=0;n<e.length;n++)if(Tx(e,n)&&(t+=1),Ex(e,n)&&--t,Dx(e,n)&&t===0)return!0;return!1}function Qre(e){for(let t=0;t<e.length;t++)if(Tx(e,t))return!0;return!1}function $re(e){let[t,n]=[0,0],r=[];for(let i=0;i<e.length;i++)if(Tx(e,i)&&(t+=1),Ex(e,i)&&--t,Dx(e,i)&&t===0){let t=e.slice(n,i);t.length>0&&r.push(Ox(t)),n=i+1}let i=e.slice(n);return i.length>0&&r.push(Ox(i)),r.length===0?{type:`const`,const:``}:r.length===1?r[0]:{type:`or`,expr:r}}function eie(e){function t(e,t){if(!Tx(e,t))throw new Cx(`TemplateLiteralParser: Index must point to open parens`);let n=0;for(let r=t;r<e.length;r++)if(Tx(e,r)&&(n+=1),Ex(e,r)&&--n,n===0)return[t,r];throw new Cx(`TemplateLiteralParser: Unclosed group parens in expression`)}function n(e,t){for(let n=t;n<e.length;n++)if(Tx(e,n))return[t,n];return[t,e.length]}let r=[];for(let i=0;i<e.length;i++)if(Tx(e,i)){let[n,a]=t(e,i),o=e.slice(n,a+1);r.push(Ox(o)),i=a}else{let[t,a]=n(e,i),o=e.slice(t,a);o.length>0&&r.push(Ox(o)),i=a-1}return r.length===0?{type:`const`,const:``}:r.length===1?r[0]:{type:`and`,expr:r}}function Ox(e){return Yre(e)?Ox(Xre(e)):Zre(e)?$re(e):Qre(e)?eie(e):{type:`const`,const:Jre(e)}}function kx(e){return Ox(e.slice(1,e.length-1))}var tie=class extends Uv{};function nie(e){return e.type===`or`&&e.expr.length===2&&e.expr[0].type===`const`&&e.expr[0].const===`0`&&e.expr[1].type===`const`&&e.expr[1].const===`[1-9][0-9]*`}function rie(e){return e.type===`or`&&e.expr.length===2&&e.expr[0].type===`const`&&e.expr[0].const===`true`&&e.expr[1].type===`const`&&e.expr[1].const===`false`}function iie(e){return e.type===`const`&&e.const===`.*`}function Ax(e){return nie(e)||iie(e)?!1:rie(e)?!0:e.type===`and`||e.type===`or`?e.expr.every(e=>Ax(e)):e.type===`const`?!0:(()=>{throw new tie(`Unknown expression type`)})()}function aie(e){return Ax(kx(e.pattern))}var oie=class extends Uv{};function*jx(e){if(e.length===1)return yield*e[0];for(let t of e[0])for(let n of jx(e.slice(1)))yield`${t}${n}`}function*Mx(e){return yield*jx(e.expr.map(e=>[...Fx(e)]))}function*Nx(e){for(let t of e.expr)yield*Fx(t)}function*Px(e){return yield e.const}function*Fx(e){return e.type===`and`?yield*Mx(e):e.type===`or`?yield*Nx(e):e.type===`const`?yield*Px(e):(()=>{throw new oie(`Unknown expression`)})()}function Ix(e){let t=kx(e.pattern);return Ax(t)?[...Fx(t)]:[]}function Lx(e,t){return L({[R]:`Literal`,const:e,type:typeof e},t)}function Rx(e){return L({[R]:`Boolean`,type:`boolean`},e)}function zx(e){return L({[R]:`BigInt`,type:`bigint`},e)}function Bx(e){return L({[R]:`Number`,type:`number`},e)}function Vx(e){return L({[R]:`String`,type:`string`},e)}function*Hx(e){let t=e.trim().replace(/"|'/g,``);return t===`boolean`?yield Rx():t===`number`?yield Bx():t===`bigint`?yield zx():t===`string`?yield Vx():yield(()=>{let e=t.split(`|`).map(e=>Lx(e.trim()));return e.length===0?gx():e.length===1?e[0]:xx(e)})()}function*Ux(e){if(e[1]!==`{`)return yield*[Lx(`$`),...Wx(e.slice(1))];for(let t=2;t<e.length;t++)if(e[t]===`}`){let n=Hx(e.slice(2,t)),r=Wx(e.slice(t+1));return yield*[...n,...r]}yield Lx(e)}function*Wx(e){for(let t=0;t<e.length;t++)if(e[t]===`$`)return yield*[Lx(e.slice(0,t)),...Ux(e.slice(t))];yield Lx(e)}function Gx(e){return[...Wx(e)]}var Kx=class extends Uv{};function qx(e){return e.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`)}function Jx(e,t){return ky(e)?e.pattern.slice(1,e.pattern.length-1):Py(e)?`(${e.anyOf.map(e=>Jx(e,t)).join(`|`)})`:by(e)||sy(e)||ty(e)?`${t}${Yb}`:Dy(e)?`${t}${Xb}`:my(e)?`${t}${qx(e.const.toString())}`:ny(e)?`${t}${Jb}`:(()=>{throw new Kx(`Unexpected Kind '${e[R]}'`)})()}function Yx(e){return`^${e.map(e=>Jx(e,``)).join(``)}$`}function Xx(e){return xx(Ix(e).map(e=>Lx(e)))}function Zx(e,t){let n=Fv(e)?Yx(Gx(e)):Yx(e);return L({[R]:`TemplateLiteral`,type:`string`,pattern:n},t)}function Qx(e){return Ix(e).map(e=>e.toString())}function $x(e){let t=[];for(let n of e)t.push(...tS(n));return t}function eS(e){return[e.toString()]}function tS(e){return[...new Set(ky(e)?Qx(e):Py(e)?$x(e.anyOf):my(e)?eS(e.const):by(e)||sy(e)?[`[number]`]:[])]}function nS(e,t,n){let r={};for(let i of Object.getOwnPropertyNames(t))r[i]=gS(e,tS(t[i]),n);return r}function rS(e,t,n){return nS(e,t.properties,n)}function iS(e,t,n){return _x(rS(e,t,n))}function aS(e,t){return e.map(e=>pS(e,t))}function oS(e){return e.filter(e=>!_y(e))}function sS(e,t){return KS(oS(aS(e,t)))}function cS(e){return e.some(e=>_y(e))?[]:e}function lS(e,t){return xx(cS(aS(e,t)))}function uS(e,t){return t in e?e[t]:t===`[number]`?xx(e):gx()}function dS(e,t){return t===`[number]`?e:gx()}function fS(e,t){return t in e?e[t]:gx()}function pS(e,t){return cy(e)?sS(e.allOf,t):Py(e)?lS(e.anyOf,t):My(e)?uS(e.items??[],t):$v(e)?dS(e.items,t):xy(e)?fS(e.properties,t):gx()}function mS(e,t){return t.map(t=>pS(e,t))}function hS(e,t){return xx(mS(e,t))}function gS(e,t,n){if(Ty(e)||Ty(t)){if(!By(e)||!By(t))throw new Uv(`Index types using Ref parameters require both Type and Key to be of TSchema`);return mx(`Index`,[e,t])}return gy(t)?iS(e,t,n):hy(t)?bS(e,t,n):L(By(t)?hS(e,tS(t)):hS(e,t),n)}function _S(e,t,n){return{[t]:gS(e,[t],zv(n))}}function vS(e,t,n){return t.reduce((t,r)=>({...t,..._S(e,r,n)}),{})}function yS(e,t,n){return vS(e,t.keys,n)}function bS(e,t,n){return _x(yS(e,t,n))}function xS(e,t){return L({[R]:`Iterator`,type:`Iterator`,items:e},t)}function SS(e){let t=[];for(let n in e)Xv(e[n])||t.push(n);return t}function CS(e,t){let n=SS(e);return L(n.length>0?{[R]:`Object`,type:`object`,properties:e,required:n}:{[R]:`Object`,type:`object`,properties:e},t)}var wS=CS;function TS(e,t){return L({[R]:`Promise`,type:`Promise`,item:e},t)}function ES(e){return L(hx(e,[Kv]))}function DS(e){return L({...e,[Kv]:`Readonly`})}function OS(e,t){return t===!1?ES(e):DS(e)}function kS(e,t){let n=t??!0;return gy(e)?MS(e,n):OS(e,n)}function AS(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=kS(e[r],t);return n}function jS(e,t){return AS(e.properties,t)}function MS(e,t){return _x(jS(e,t))}function NS(e,t){return L(e.length>0?{[R]:`Tuple`,type:`array`,items:e,additionalItems:!1,minItems:e.length,maxItems:e.length}:{[R]:`Tuple`,type:`array`,minItems:e.length,maxItems:e.length},t)}function PS(e){return L(hx(e,[qv]))}function FS(e){return L({...e,[qv]:`Optional`})}function IS(e,t){return t===!1?PS(e):FS(e)}function LS(e,t){let n=t??!0;return gy(e)?BS(e,n):IS(e,n)}function RS(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=LS(e[r],t);return n}function zS(e,t){return RS(e.properties,t)}function BS(e,t){return _x(zS(e,t))}function VS(e,t={}){let n=e.every(e=>xy(e)),r=By(t.unevaluatedProperties)?{unevaluatedProperties:t.unevaluatedProperties}:{};return L(t.unevaluatedProperties===!1||By(t.unevaluatedProperties)||n?{...r,[R]:`Intersect`,type:`object`,allOf:e}:{...r,[R]:`Intersect`,allOf:e},t)}function HS(e){return e.every(e=>Xv(e))}function US(e){return hx(e,[qv])}function WS(e){return e.map(e=>Xv(e)?US(e):e)}function GS(e,t){return HS(e)?LS(VS(WS(e),t)):VS(WS(e),t)}function KS(e,t={}){if(e.length===1)return L(e[0],t);if(e.length===0)return gx(t);if(e.some(e=>jy(e)))throw Error(`Cannot intersect transform types`);return GS(e,t)}function qS(e,t){if(e.length===1)return L(e[0],t);if(e.length===0)return gx(t);if(e.some(e=>jy(e)))throw Error(`Cannot intersect transform types`);return VS(e,t)}function JS(...e){let[t,n]=typeof e[0]==`string`?[e[0],e[1]]:[e[0].$id,e[1]];if(typeof t!=`string`)throw new Uv(`Ref: $ref must be a string`);return L({[R]:`Ref`,$ref:t},n)}function YS(e,t){return mx(`Awaited`,[mx(e,t)])}function XS(e){return mx(`Awaited`,[JS(e)])}function ZS(e){return qS(eC(e))}function QS(e){return Sx(eC(e))}function $S(e){return tC(e)}function eC(e){return e.map(e=>tC(e))}function tC(e,t){return L(ry(e)?YS(e.target,e.parameters):cy(e)?ZS(e.allOf):Py(e)?QS(e.anyOf):Sy(e)?$S(e.item):Ty(e)?XS(e.$ref):e,t)}function nC(e){let t=[];for(let n of e)t.push(lC(n));return t}function rC(e){return Vre(nC(e))}function iC(e){return Bre(nC(e))}function aC(e){return e.map((e,t)=>t.toString())}function oC(e){return[`[number]`]}function sC(e){return globalThis.Object.getOwnPropertyNames(e)}function cC(e){return uC?globalThis.Object.getOwnPropertyNames(e).map(e=>e[0]===`^`&&e[e.length-1]===`$`?e.slice(1,e.length-1):e):[]}function lC(e){return cy(e)?rC(e.allOf):Py(e)?iC(e.anyOf):My(e)?aC(e.items??[]):$v(e)?oC(e.items):xy(e)?sC(e.properties):Cy(e)?cC(e.patternProperties):[]}var uC=!1;function dC(e,t){return mx(`KeyOf`,[mx(e,t)])}function fC(e){return mx(`KeyOf`,[JS(e)])}function pC(e,t){return L(xx(mC(lC(e))),t)}function mC(e){return e.map(e=>e===`[number]`?Bx():Lx(e))}function hC(e,t){return ry(e)?dC(e.target,e.parameters):Ty(e)?fC(e.$ref):gy(e)?vC(e,t):pC(e,t)}function gC(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=hC(e[r],zv(t));return n}function _C(e,t){return gC(e.properties,t)}function vC(e,t){return _x(_C(e,t))}function yC(e){return L({[R]:`Date`,type:`Date`},e)}function bC(e){return L({[R]:`Null`,type:`null`},e)}function xC(e){return L({[R]:`Symbol`,type:`symbol`},e)}function SC(e){return L({[R]:`Undefined`,type:`undefined`},e)}function CC(e){return L({[R]:`Uint8Array`,type:`Uint8Array`},e)}function wC(e){return L({[R]:`Unknown`},e)}function TC(e,t){return iy(e)?NS(e.parameters,t):gx(t)}var EC=class extends Uv{},B;(function(e){e[e.Union=0]=`Union`,e[e.True=1]=`True`,e[e.False=2]=`False`})(B||={});function DC(e){return e===B.False?e:B.True}function OC(e){throw new EC(e)}function kC(e){return z.IsNever(e)||z.IsIntersect(e)||z.IsUnion(e)||z.IsUnknown(e)||z.IsAny(e)}function AC(e,t){return z.IsNever(t)?JC(e,t):z.IsIntersect(t)?WC(e,t):z.IsUnion(t)?jw(e,t):z.IsUnknown(t)?Nw(e,t):z.IsAny(t)?jC(e,t):OC(`StructuralRight`)}function jC(e,t){return B.True}function MC(e,t){return z.IsIntersect(t)?WC(e,t):z.IsUnion(t)&&t.anyOf.some(e=>z.IsAny(e)||z.IsUnknown(e))?B.True:z.IsUnion(t)?B.Union:z.IsUnknown(t)||z.IsAny(t)?B.True:B.Union}function NC(e,t){return z.IsUnknown(e)?B.False:z.IsAny(e)?B.Union:z.IsNever(e)?B.True:B.False}function PC(e,t){return z.IsObject(t)&&dw(t)?B.True:kC(t)?AC(e,t):z.IsArray(t)?DC(Lw(e.items,t.items)):B.False}function FC(e,t){return kC(t)?AC(e,t):z.IsAsyncIterator(t)?DC(Lw(e.items,t.items)):B.False}function IC(e,t){return kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsRecord(t)?yw(e,t):z.IsBigInt(t)?B.True:B.False}function LC(e,t){return z.IsLiteralBoolean(e)||z.IsBoolean(e)?B.True:B.False}function RC(e,t){return kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsRecord(t)?yw(e,t):z.IsBoolean(t)?B.True:B.False}function zC(e,t){return kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsConstructor(t)?e.parameters.length>t.parameters.length?B.False:e.parameters.every((e,n)=>DC(Lw(t.parameters[n],e))===B.True)?DC(Lw(e.returns,t.returns)):B.False:B.False}function BC(e,t){return kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsRecord(t)?yw(e,t):z.IsDate(t)?B.True:B.False}function VC(e,t){return kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsFunction(t)?e.parameters.length>t.parameters.length?B.False:e.parameters.every((e,n)=>DC(Lw(t.parameters[n],e))===B.True)?DC(Lw(e.returns,t.returns)):B.False:B.False}function HC(e,t){return z.IsLiteral(e)&&Ev.IsNumber(e.const)||z.IsNumber(e)||z.IsInteger(e)?B.True:B.False}function UC(e,t){return z.IsInteger(t)||z.IsNumber(t)?B.True:kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsRecord(t)?yw(e,t):B.False}function WC(e,t){return t.allOf.every(t=>Lw(e,t)===B.True)?B.True:B.False}function GC(e,t){return e.allOf.some(e=>Lw(e,t)===B.True)?B.True:B.False}function KC(e,t){return kC(t)?AC(e,t):z.IsIterator(t)?DC(Lw(e.items,t.items)):B.False}function qC(e,t){return z.IsLiteral(t)&&t.const===e.const?B.True:kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsRecord(t)?yw(e,t):z.IsString(t)?Sw(e,t):z.IsNumber(t)?$C(e,t):z.IsInteger(t)?HC(e,t):z.IsBoolean(t)?LC(e,t):B.False}function JC(e,t){return B.False}function YC(e,t){return B.True}function XC(e){let[t,n]=[e,0];for(;z.IsNot(t);)t=t.not,n+=1;return n%2==0?t:wC()}function ZC(e,t){return z.IsNot(e)?Lw(XC(e),t):z.IsNot(t)?Lw(e,XC(t)):OC(`Invalid fallthrough for Not`)}function QC(e,t){return kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsRecord(t)?yw(e,t):z.IsNull(t)?B.True:B.False}function $C(e,t){return z.IsLiteralNumber(e)||z.IsNumber(e)||z.IsInteger(e)?B.True:B.False}function ew(e,t){return kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsRecord(t)?yw(e,t):z.IsInteger(t)||z.IsNumber(t)?B.True:B.False}function tw(e,t){return Object.getOwnPropertyNames(e.properties).length===t}function nw(e){return dw(e)}function rw(e){return tw(e,0)||tw(e,1)&&`description`in e.properties&&z.IsUnion(e.properties.description)&&e.properties.description.anyOf.length===2&&(z.IsString(e.properties.description.anyOf[0])&&z.IsUndefined(e.properties.description.anyOf[1])||z.IsString(e.properties.description.anyOf[1])&&z.IsUndefined(e.properties.description.anyOf[0]))}function iw(e){return tw(e,0)}function aw(e){return tw(e,0)}function ow(e){return tw(e,0)}function sw(e){return tw(e,0)}function cw(e){return dw(e)}function lw(e){let t=Bx();return tw(e,0)||tw(e,1)&&`length`in e.properties&&DC(Lw(e.properties.length,t))===B.True}function uw(e){return tw(e,0)}function dw(e){let t=Bx();return tw(e,0)||tw(e,1)&&`length`in e.properties&&DC(Lw(e.properties.length,t))===B.True}function fw(e){let t=vx([dx()],dx());return tw(e,0)||tw(e,1)&&`then`in e.properties&&DC(Lw(e.properties.then,t))===B.True}function pw(e,t){return Lw(e,t)===B.False||z.IsOptional(e)&&!z.IsOptional(t)?B.False:B.True}function mw(e,t){return z.IsUnknown(e)?B.False:z.IsAny(e)?B.Union:z.IsNever(e)||z.IsLiteralString(e)&&nw(t)||z.IsLiteralNumber(e)&&iw(t)||z.IsLiteralBoolean(e)&&aw(t)||z.IsSymbol(e)&&rw(t)||z.IsBigInt(e)&&ow(t)||z.IsString(e)&&nw(t)||z.IsSymbol(e)&&rw(t)||z.IsNumber(e)&&iw(t)||z.IsInteger(e)&&iw(t)||z.IsBoolean(e)&&aw(t)||z.IsUint8Array(e)&&cw(t)||z.IsDate(e)&&sw(t)||z.IsConstructor(e)&&uw(t)||z.IsFunction(e)&&lw(t)?B.True:z.IsRecord(e)&&z.IsString(_w(e))?(()=>t[Jv]===`Record`?B.True:B.False)():z.IsRecord(e)&&z.IsNumber(_w(e))?(()=>tw(t,0)?B.True:B.False)():B.False}function hw(e,t){return kC(t)?AC(e,t):z.IsRecord(t)?yw(e,t):z.IsObject(t)?(()=>{for(let n of Object.getOwnPropertyNames(t.properties)){if(!(n in e.properties)&&!z.IsOptional(t.properties[n]))return B.False;if(z.IsOptional(t.properties[n]))return B.True;if(pw(e.properties[n],t.properties[n])===B.False)return B.False}return B.True})():B.False}function gw(e,t){return kC(t)?AC(e,t):z.IsObject(t)&&fw(t)?B.True:z.IsPromise(t)?DC(Lw(e.item,t.item)):B.False}function _w(e){return Qb in e.patternProperties?Bx():$b in e.patternProperties?Vx():OC(`Unknown record key pattern`)}function vw(e){return Qb in e.patternProperties?e.patternProperties[Qb]:$b in e.patternProperties?e.patternProperties[$b]:OC(`Unable to get record value schema`)}function yw(e,t){let[n,r]=[_w(t),vw(t)];return z.IsLiteralString(e)&&z.IsNumber(n)&&DC(Lw(e,r))===B.True?B.True:z.IsUint8Array(e)&&z.IsNumber(n)||z.IsString(e)&&z.IsNumber(n)||z.IsArray(e)&&z.IsNumber(n)?Lw(e,r):z.IsObject(e)?(()=>{for(let t of Object.getOwnPropertyNames(e.properties))if(pw(r,e.properties[t])===B.False)return B.False;return B.True})():B.False}function bw(e,t){return kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsRecord(t)?Lw(vw(e),vw(t)):B.False}function xw(e,t){return Lw(z.IsRegExp(e)?Vx():e,z.IsRegExp(t)?Vx():t)}function Sw(e,t){return z.IsLiteral(e)&&Ev.IsString(e.const)||z.IsString(e)?B.True:B.False}function Cw(e,t){return kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsRecord(t)?yw(e,t):z.IsString(t)?B.True:B.False}function ww(e,t){return kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsRecord(t)?yw(e,t):z.IsSymbol(t)?B.True:B.False}function Tw(e,t){return z.IsTemplateLiteral(e)?Lw(Xx(e),t):z.IsTemplateLiteral(t)?Lw(e,Xx(t)):OC(`Invalid fallthrough for TemplateLiteral`)}function Ew(e,t){return z.IsArray(t)&&e.items!==void 0&&e.items.every(e=>Lw(e,t.items)===B.True)}function Dw(e,t){return z.IsNever(e)?B.True:z.IsUnknown(e)?B.False:z.IsAny(e)?B.Union:B.False}function Ow(e,t){return kC(t)?AC(e,t):z.IsObject(t)&&dw(t)||z.IsArray(t)&&Ew(e,t)?B.True:z.IsTuple(t)?Ev.IsUndefined(e.items)&&!Ev.IsUndefined(t.items)||!Ev.IsUndefined(e.items)&&Ev.IsUndefined(t.items)?B.False:Ev.IsUndefined(e.items)&&!Ev.IsUndefined(t.items)||e.items.every((e,n)=>Lw(e,t.items[n])===B.True)?B.True:B.False:B.False}function kw(e,t){return kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsRecord(t)?yw(e,t):z.IsUint8Array(t)?B.True:B.False}function Aw(e,t){return kC(t)?AC(e,t):z.IsObject(t)?mw(e,t):z.IsRecord(t)?yw(e,t):z.IsVoid(t)?Fw(e,t):z.IsUndefined(t)?B.True:B.False}function jw(e,t){return t.anyOf.some(t=>Lw(e,t)===B.True)?B.True:B.False}function Mw(e,t){return e.anyOf.every(e=>Lw(e,t)===B.True)?B.True:B.False}function Nw(e,t){return B.True}function Pw(e,t){return z.IsNever(t)?JC(e,t):z.IsIntersect(t)?WC(e,t):z.IsUnion(t)?jw(e,t):z.IsAny(t)?jC(e,t):z.IsString(t)?Sw(e,t):z.IsNumber(t)?$C(e,t):z.IsInteger(t)?HC(e,t):z.IsBoolean(t)?LC(e,t):z.IsArray(t)?NC(e,t):z.IsTuple(t)?Dw(e,t):z.IsObject(t)?mw(e,t):z.IsUnknown(t)?B.True:B.False}function Fw(e,t){return z.IsUndefined(e)||z.IsUndefined(e)?B.True:B.False}function Iw(e,t){return z.IsIntersect(t)?WC(e,t):z.IsUnion(t)?jw(e,t):z.IsUnknown(t)?Nw(e,t):z.IsAny(t)?jC(e,t):z.IsObject(t)?mw(e,t):z.IsVoid(t)?B.True:B.False}function Lw(e,t){return z.IsTemplateLiteral(e)||z.IsTemplateLiteral(t)?Tw(e,t):z.IsRegExp(e)||z.IsRegExp(t)?xw(e,t):z.IsNot(e)||z.IsNot(t)?ZC(e,t):z.IsAny(e)?MC(e,t):z.IsArray(e)?PC(e,t):z.IsBigInt(e)?IC(e,t):z.IsBoolean(e)?RC(e,t):z.IsAsyncIterator(e)?FC(e,t):z.IsConstructor(e)?zC(e,t):z.IsDate(e)?BC(e,t):z.IsFunction(e)?VC(e,t):z.IsInteger(e)?UC(e,t):z.IsIntersect(e)?GC(e,t):z.IsIterator(e)?KC(e,t):z.IsLiteral(e)?qC(e,t):z.IsNever(e)?YC(e,t):z.IsNull(e)?QC(e,t):z.IsNumber(e)?ew(e,t):z.IsObject(e)?hw(e,t):z.IsRecord(e)?bw(e,t):z.IsString(e)?Cw(e,t):z.IsSymbol(e)?ww(e,t):z.IsTuple(e)?Ow(e,t):z.IsPromise(e)?gw(e,t):z.IsUint8Array(e)?kw(e,t):z.IsUndefined(e)?Aw(e,t):z.IsUnion(e)?Mw(e,t):z.IsUnknown(e)?Pw(e,t):z.IsVoid(e)?Iw(e,t):OC(`Unknown left type operand '${e[R]}'`)}function Rw(e,t){return Lw(e,t)}function zw(e,t,n,r,i){let a={};for(let o of globalThis.Object.getOwnPropertyNames(e))a[o]=Uw(e[o],t,n,r,zv(i));return a}function Bw(e,t,n,r,i){return zw(e.properties,t,n,r,i)}function Vw(e,t,n,r,i){return _x(Bw(e,t,n,r,i))}function Hw(e,t,n,r){let i=Rw(e,t);return i===B.Union?Sx([n,r]):i===B.True?n:r}function Uw(e,t,n,r,i){return gy(e)?Vw(e,t,n,r,i):hy(e)?L(qw(e,t,n,r,i)):L(Hw(e,t,n,r),i)}function Ww(e,t,n,r,i){return{[e]:Uw(Lx(e),t,n,r,zv(i))}}function Gw(e,t,n,r,i){return e.reduce((e,a)=>({...e,...Ww(a,t,n,r,i)}),{})}function Kw(e,t,n,r,i){return Gw(e.keys,t,n,r,i)}function qw(e,t,n,r,i){return _x(Kw(e,t,n,r,i))}function Jw(e,t){return Xw(Xx(e),t)}function Yw(e,t){let n=e.filter(e=>Rw(e,t)===B.False);return n.length===1?n[0]:Sx(n)}function Xw(e,t,n={}){return ky(e)?L(Jw(e,t),n):gy(e)?L($w(e,t),n):L(Py(e)?Yw(e.anyOf,t):Rw(e,t)===B.False?e:gx(),n)}function Zw(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=Xw(e[r],t);return n}function Qw(e,t){return Zw(e.properties,t)}function $w(e,t){return _x(Qw(e,t))}function eT(e,t){return nT(Xx(e),t)}function tT(e,t){let n=e.filter(e=>Rw(e,t)!==B.False);return n.length===1?n[0]:Sx(n)}function nT(e,t,n){return ky(e)?L(eT(e,t),n):gy(e)?L(aT(e,t),n):L(Py(e)?tT(e.anyOf,t):Rw(e,t)===B.False?gx():e,n)}function rT(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=nT(e[r],t);return n}function iT(e,t){return rT(e.properties,t)}function aT(e,t){return _x(iT(e,t))}function oT(e,t){return iy(e)?L(e.returns,t):gx(t)}function sT(e){return kS(LS(e))}function cT(e,t,n){return L({[R]:`Record`,type:`object`,patternProperties:{[e]:t}},n)}function lT(e,t,n){let r={};for(let n of e)r[n]=t;return wS(r,{...n,[Jv]:`Record`})}function uT(e,t,n){return aie(e)?lT(tS(e),t,n):cT(e.pattern,t,n)}function dT(e,t,n){return lT(tS(Sx(e)),t,n)}function fT(e,t,n){return lT([e.toString()],t,n)}function pT(e,t,n){return cT(e.source,t,n)}function mT(e,t,n){return cT(Lv(e.pattern)?$b:e.pattern,t,n)}function hT(e,t,n){return cT($b,t,n)}function gT(e,t,n){return cT(ex,t,n)}function _T(e,t,n){return wS({true:t,false:t},n)}function vT(e,t,n){return cT(Qb,t,n)}function yT(e,t,n){return cT(Qb,t,n)}function bT(e,t,n={}){return Py(e)?dT(e.anyOf,t,n):ky(e)?uT(e,t,n):my(e)?fT(e.const,t,n):ny(e)?_T(e,t,n):sy(e)?vT(e,t,n):by(e)?yT(e,t,n):Ey(e)?pT(e,t,n):Dy(e)?mT(e,t,n):Zv(e)?hT(e,t,n):_y(e)?gT(e,t,n):gx(n)}function xT(e){return globalThis.Object.getOwnPropertyNames(e.patternProperties)[0]}function ST(e){let t=xT(e);return t===$b?Vx():t===Qb?Bx():Vx({pattern:t})}function CT(e){return e.patternProperties[xT(e)]}function wT(e,t){return t.parameters=RT(e,t.parameters),t.returns=zT(e,t.returns),t}function TT(e,t){return t.parameters=RT(e,t.parameters),t.returns=zT(e,t.returns),t}function ET(e,t){return t.allOf=RT(e,t.allOf),t}function DT(e,t){return t.anyOf=RT(e,t.anyOf),t}function OT(e,t){return Lv(t.items)||(t.items=RT(e,t.items)),t}function kT(e,t){return t.items=zT(e,t.items),t}function AT(e,t){return t.items=zT(e,t.items),t}function jT(e,t){return t.items=zT(e,t.items),t}function MT(e,t){return t.item=zT(e,t.item),t}function NT(e,t){let n=LT(e,t.properties);return{...t,...wS(n)}}function PT(e,t){let n=bT(zT(e,ST(t)),zT(e,CT(t)));return{...t,...n}}function FT(e,t){return t.index in e?e[t.index]:wC()}function IT(e,t){let n=Yv(t),r=Xv(t),i=zT(e,t);return n&&r?sT(i):n&&!r?kS(i):!n&&r?LS(i):i}function LT(e,t){return globalThis.Object.getOwnPropertyNames(t).reduce((n,r)=>({...n,[r]:IT(e,t[r])}),{})}function RT(e,t){return t.map(t=>zT(e,t))}function zT(e,t){return iy(t)?wT(e,t):oy(t)?TT(e,t):cy(t)?ET(e,t):Py(t)?DT(e,t):My(t)?OT(e,t):$v(t)?kT(e,t):ey(t)?AT(e,t):ly(t)?jT(e,t):Sy(t)?MT(e,t):xy(t)?NT(e,t):Cy(t)?PT(e,t):Qv(t)?FT(e,t):t}function BT(e,t){return zT(t,Bv(e))}function VT(e){return L({[R]:`Integer`,type:`integer`},e)}function HT(e,t,n){return{[e]:$T(Lx(e),t,zv(n))}}function UT(e,t,n){return e.reduce((e,r)=>({...e,...HT(r,t,n)}),{})}function WT(e,t,n){return UT(e.keys,t,n)}function GT(e,t,n){return _x(WT(e,t,n))}function KT(e){let[t,n]=[e.slice(0,1),e.slice(1)];return[t.toLowerCase(),n].join(``)}function qT(e){let[t,n]=[e.slice(0,1),e.slice(1)];return[t.toUpperCase(),n].join(``)}function JT(e){return e.toUpperCase()}function YT(e){return e.toLowerCase()}function XT(e,t,n){let r=kx(e.pattern);return Ax(r)?Zx([Sx(QT([...Fx(r)].map(e=>Lx(e)),t))],n):{...e,pattern:ZT(e.pattern,t)}}function ZT(e,t){return typeof e==`string`?t===`Uncapitalize`?KT(e):t===`Capitalize`?qT(e):t===`Uppercase`?JT(e):t===`Lowercase`?YT(e):e:e.toString()}function QT(e,t){return e.map(e=>$T(e,t))}function $T(e,t,n={}){return hy(e)?GT(e,t,n):ky(e)?XT(e,t,n):Py(e)?Sx(QT(e.anyOf,t),n):my(e)?Lx(ZT(e.const,t),n):L(e,n)}function eE(e,t={}){return $T(e,`Capitalize`,t)}function tE(e,t={}){return $T(e,`Lowercase`,t)}function nE(e,t={}){return $T(e,`Uncapitalize`,t)}function rE(e,t={}){return $T(e,`Uppercase`,t)}function iE(e,t,n){let r={};for(let i of globalThis.Object.getOwnPropertyNames(e))r[i]=mE(e[i],t,zv(n));return r}function aE(e,t,n){return iE(e.properties,t,n)}function oE(e,t,n){return _x(aE(e,t,n))}function sE(e,t){return e.map(e=>pE(e,t))}function cE(e,t){return e.map(e=>pE(e,t))}function lE(e,t){let{[t]:n,...r}=e;return r}function uE(e,t){return t.reduce((e,t)=>lE(e,t),e)}function dE(e,t){let n=hx(e,[Gv,`$id`,`required`,`properties`]);return wS(uE(e.properties,t),n)}function fE(e){return Sx(e.reduce((e,t)=>py(t)?[...e,Lx(t)]:e,[]))}function pE(e,t){return cy(e)?qS(sE(e.allOf,t)):Py(e)?Sx(cE(e.anyOf,t)):xy(e)?dE(e,t):wS({})}function mE(e,t,n){let r=Ov(t)?fE(t):t,i=By(t)?tS(t):t,a=Ty(e),o=Ty(t);return gy(e)?oE(e,i,n):hy(t)?vE(e,t,n):a&&o||!a&&o||a&&!o?mx(`Omit`,[e,r],n):L({...pE(e,i),...n})}function hE(e,t,n){return{[t]:mE(e,[t],zv(n))}}function gE(e,t,n){return t.reduce((t,r)=>({...t,...hE(e,r,n)}),{})}function _E(e,t,n){return gE(e,t.keys,n)}function vE(e,t,n){return _x(_E(e,t,n))}function yE(e,t,n){let r={};for(let i of globalThis.Object.getOwnPropertyNames(e))r[i]=OE(e[i],t,zv(n));return r}function bE(e,t,n){return yE(e.properties,t,n)}function xE(e,t,n){return _x(bE(e,t,n))}function SE(e,t){return e.map(e=>DE(e,t))}function CE(e,t){return e.map(e=>DE(e,t))}function wE(e,t){let n={};for(let r of t)r in e&&(n[r]=e[r]);return n}function TE(e,t){let n=hx(e,[Gv,`$id`,`required`,`properties`]);return wS(wE(e.properties,t),n)}function EE(e){return Sx(e.reduce((e,t)=>py(t)?[...e,Lx(t)]:e,[]))}function DE(e,t){return cy(e)?qS(SE(e.allOf,t)):Py(e)?Sx(CE(e.anyOf,t)):xy(e)?TE(e,t):wS({})}function OE(e,t,n){let r=Ov(t)?EE(t):t,i=By(t)?tS(t):t,a=Ty(e),o=Ty(t);return gy(e)?xE(e,i,n):hy(t)?ME(e,t,n):a&&o||!a&&o||a&&!o?mx(`Pick`,[e,r],n):L({...DE(e,i),...n})}function kE(e,t,n){return{[t]:OE(e,[t],zv(n))}}function AE(e,t,n){return t.reduce((t,r)=>({...t,...kE(e,r,n)}),{})}function jE(e,t,n){return AE(e,t.keys,n)}function ME(e,t,n){return _x(jE(e,t,n))}function NE(e,t){return mx(`Partial`,[mx(e,t)])}function PE(e){return mx(`Partial`,[JS(e)])}function FE(e){let t={};for(let n of globalThis.Object.getOwnPropertyNames(e))t[n]=LS(e[n]);return t}function IE(e){let t=hx(e,[Gv,`$id`,`required`,`properties`]);return wS(FE(e.properties),t)}function LE(e){return e.map(e=>RE(e))}function RE(e){return ry(e)?NE(e.target,e.parameters):Ty(e)?PE(e.$ref):cy(e)?qS(LE(e.allOf)):Py(e)?Sx(LE(e.anyOf)):xy(e)?IE(e):ty(e)||ny(e)||sy(e)||my(e)||yy(e)||by(e)||Dy(e)||Oy(e)||Ny(e)?e:wS({})}function zE(e,t){return gy(e)?HE(e,t):L({...RE(e),...t})}function BE(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=zE(e[r],zv(t));return n}function VE(e,t){return BE(e.properties,t)}function HE(e,t){return _x(VE(e,t))}function UE(e,t){return mx(`Required`,[mx(e,t)])}function WE(e){return mx(`Required`,[JS(e)])}function GE(e){let t={};for(let n of globalThis.Object.getOwnPropertyNames(e))t[n]=hx(e[n],[qv]);return t}function KE(e){let t=hx(e,[Gv,`$id`,`required`,`properties`]);return wS(GE(e.properties),t)}function qE(e){return e.map(e=>JE(e))}function JE(e){return ry(e)?UE(e.target,e.parameters):Ty(e)?WE(e.$ref):cy(e)?qS(qE(e.allOf)):Py(e)?Sx(qE(e.anyOf)):xy(e)?KE(e):ty(e)||ny(e)||sy(e)||my(e)||yy(e)||by(e)||Dy(e)||Oy(e)||Ny(e)?e:wS({})}function YE(e,t){return gy(e)?QE(e,t):L({...JE(e),...t})}function XE(e,t){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=YE(e[r],t);return n}function ZE(e,t){return XE(e.properties,t)}function QE(e,t){return _x(ZE(e,t))}function $E(e,t){return oy(e)?NS(e.parameters,t):gx()}function eD(e,t){return oy(e)?L(e.returns,t):gx(t)}var tD=class{constructor(e){this.schema=e}Decode(e){return new nD(this.schema,e)}},nD=class{constructor(e,t){this.schema=e,this.decode=t}EncodeTransform(e,t){let n={Encode:n=>t[Gv].Encode(e(n)),Decode:e=>this.decode(t[Gv].Decode(e))};return{...t,[Gv]:n}}EncodeSchema(e,t){let n={Decode:this.decode,Encode:e};return{...t,[Gv]:n}}Encode(e){return jy(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function rD(e){return new tD(e)}function iD(e){return L({[R]:`Void`,type:`void`},e)}var aD=e=>e.charAt(0).toUpperCase()+e.slice(1),oD=e=>I.Ref(`#/components/schemas/${e}`),sD=(e,t)=>{let n=e.toLowerCase();if(!t||t===`/`)return n+`Index`;for(let e of t.split(`/`))n+=e.includes(`:`)?`By`+aD(e.replace(`:`,``)):aD(e);return n=n.replace(/\?/g,`Optional`),n},cD=/(\/:\w+\?)/g,lD=e=>{let t=e.match(cD);if(!t)return[e];let n=[e.replace(/\?/g,``)];for(let r=0;r<t.length;r++){let i=e.replace(t[r],``);n.push(...lD(i))}return n},uD=e=>e&&typeof e==`object`&&(R in e&&e[R]!==`Unknown`||e.type||e.properties||e.items),dD=e=>e.charCodeAt(e.length-1)===47?e.slice(0,e.length-1):e+`/`,fD={zod4:`import openapi from '@elysiajs/openapi'
import * as z from 'zod'

openapi({
  mapJsonSchema: {
    zod: z.toJSONSchema
  }
})`,zod3:`import openapi from '@elysiajs/openapi'
import { zodToJsonSchema } from 'zod-to-json-schema'

openapi({
  mapJsonSchema: {
    zod: zodToJsonSchema
  }
})`,valibot:`import openapi from '@elysiajs/openapi'
import { toJsonSchema } from '@valibot/to-json-schema'

openapi({
  mapJsonSchema: {
    valibot: toJsonSchema
  }
})`,effect:`import { JSONSchema } from 'effect'

openapi({
  mapJsonSchema: {
    effect: JSONSchema.make
  }
})`},pD={},mD=(e,t)=>{let n=e?.$ref;if(!n)return e;let r=n.slice(n.lastIndexOf(`/`)+1);return n&&t[r]&&(e=t[r]),gD(e)},hD=(e,t)=>{if(!e)return;if(typeof e==`string`&&(e=oD(e)),R in e)return gD(e);if(R in e||!e?.[`~standard`])return;let n=e[`~standard`].vendor;try{if(t?.[n]&&typeof t[n]==`function`)return gD(t[n](e));switch(n){case`zod`:if(pD.zod4||pD.zod3)break;console.warn(`[@elysiajs/openapi] Zod doesn't provide JSON Schema method on the schema`),`_zod`in e?(pD.zod4=!0,console.warn(`For Zod v4, please provide z.toJSONSchema as follows:
`),console.warn(fD.zod4)):(pD.zod3=!0,console.warn(`For Zod v3, please install zod-to-json-schema package and use it like this:
`),console.warn(fD.zod3));break;case`valibot`:if(pD.valibot)break;pD.valibot=!0,console.warn(`[@elysiajs/openapi] Valibot require a separate package for JSON Schema conversion`),console.warn(`Please install @valibot/to-json-schema package and use it like this:
`),console.warn(fD.valibot);break;case`effect`:if(pD.effect)break;pD.effect=!0,console.warn(`[@elysiajs/openapi] Effect Schema doesn't provide JSON Schema method on the schema`),console.warn(`please provide JSONSchema from 'effect' package as follows:
`),console.warn(fD.effect);break}return gD(n===`arktype`?e?.toJsonSchema?.():e.toJSONSchema?.()??e?.toJsonSchema?.())}catch(e){console.warn(e)}},gD=e=>{if(!e||typeof e!=`object`)return e;if(R in e){let t=e;if(t[R]===`Union`&&t.anyOf&&Array.isArray(t.anyOf)&&t.anyOf.length>0&&t.anyOf.every(e=>e&&typeof e==`object`&&e.const!==void 0))return{type:`string`,enum:t.anyOf.map(e=>e.const)}}let t=e;if(t.type===`object`&&t.properties){let e={};for(let[n,r]of Object.entries(t.properties))e[n]=gD(r);return{...t,properties:e}}return t.type===`array`&&t.items?{...t,items:gD(t.items)}:t};function _D(e,t,n,r){let{methods:i=[`options`],staticFile:a=!0,tags:o}=t??{};i=i.map(e=>e.toLowerCase());let s=Array.isArray(t?.paths)?t.paths:t?.paths===void 0?[]:[t.paths],c=Object.create(null),l=e.getGlobalDefinitions?.().type,u=e.getGlobalRoutes();if(n){Array.isArray(n)||(n=[n]);for(let e=0;e<n.length;e++){let t=n[e];typeof t==`function`&&(n[e]=t())}}for(let e of u){if(e.hooks?.detail?.hide)continue;let t=e.method.toLowerCase();if(a&&e.path.includes(`.`)||s.includes(e.path)||i.includes(t))continue;let u=e.hooks??{};if(n?.length)for(let r of n){if(!r)continue;let n=r[e.path]?.[t]??r[dD(e.path)]?.[t];if(n&&(!u.body&&uD(n.body)&&(u.body=n.body),!u.query&&uD(n.query)&&(u.query=n.query),!u.params&&uD(n.params)&&(u.params=n.params),!u.headers&&uD(n.headers)&&(u.headers=n.headers),n.response)){for(let[e,t]of Object.entries(n.response))if(uD(t)&&(u.response?(typeof u.response!=`object`||u.response.type||u.response.$ref||u.response[`~standard`])&&(u.response={200:u.response}):u.response={},!u.response[e]))try{u.response[e]=t}catch(e){console.log(`[@elysiajs/openapi/gen] Failed to assigned response schema`),console.log(e)}}}if(o&&u.detail.tags?.some(e=>o?.includes(e)))continue;let d={...u.detail},f=[];if(u.params){let e=mD(hD(u.params,r),l);if(e&&e.type===`object`&&e.properties)for(let[t,n]of Object.entries(e.properties))f.push({name:t,in:`path`,required:!0,schema:n})}else for(let t of e.path.matchAll(/:([^/]+)/g)){let e=t[1].replace(`?`,``);f.push({name:e,in:`path`,required:!0,schema:{type:`string`}})}if(u.query){let e=mD(hD(u.query,r),l);if(e&&e.type===`object`&&e.properties){let t=e.required||[];for(let[n,r]of Object.entries(e.properties))f.push({name:n,in:`query`,required:t.includes(n),schema:r})}}if(u.headers){let e=mD(hD(u.headers,r),l);if(e&&e.type===`object`&&e.properties){let t=e.required||[];for(let[n,r]of Object.entries(e.properties))f.push({name:n,in:`header`,required:t.includes(n),schema:r})}}if(u.cookie){let e=mD(hD(u.cookie,r),l);if(e&&e.type===`object`&&e.properties){let t=e.required||[];for(let[n,r]of Object.entries(e.properties))f.push({name:n,in:`cookie`,required:t.includes(n),schema:r})}}if(f.length>0&&(d.parameters=f),u.body&&t!==`get`&&t!==`head`){let e=hD(u.body,r);if(e){let{type:t,description:n,$ref:r,...i}=mD(e,l);if(u.parse){let t={},r=u.parse;for(let n of r)if(typeof n.fn!=`function`)switch(n.fn){case`text`:case`text/plain`:t[`text/plain`]={schema:e};continue;case`urlencoded`:case`application/x-www-form-urlencoded`:t[`application/x-www-form-urlencoded`]={schema:e};continue;case`json`:case`application/json`:t[`application/json`]={schema:e};continue;case`formdata`:case`multipart/form-data`:t[`multipart/form-data`]={schema:e};continue}d.requestBody={description:n,content:t,required:!0}}else d.requestBody={description:n,required:!0,content:t===`string`||t===`number`||t===`integer`||t===`boolean`?{"text/plain":{schema:e}}:{"application/json":{schema:e},"application/x-www-form-urlencoded":{schema:e},"multipart/form-data":{schema:e}}}}}if(u.response)if(d.responses={},typeof u.response==`object`&&!u.response.type&&!u.response.$ref&&!u.response[`~standard`])for(let[e,t]of Object.entries(u.response)){let n=hD(t,r);if(!n)continue;let{type:i,description:a,$ref:o,...s}=mD(n,l);d.responses[e]={description:a??`Response for status ${e}`,content:i===`void`||i===`null`||i===`undefined`?{type:i,description:a}:i===`string`||i===`number`||i===`integer`||i===`boolean`?{"text/plain":{schema:n}}:{"application/json":{schema:n}}}}else{let e=hD(u.response,r);if(e){let{type:t,description:n,...r}=mD(e,l),i=t;d.responses[200]={description:n??`Response for status 200`,content:i===`void`||i===`null`||i===`undefined`?{type:i,description:n}:i===`string`||i===`number`||i===`integer`||i===`boolean`?{"text/plain":{schema:e}}:{"application/json":{schema:e}}}}}for(let n of lD(e.path)){let r=u.detail?.operationId??sD(e.method,n);n=n.replace(/:([^/]+)/g,`{$1}`),c[n]||(c[n]={});let i=c[n];if(t!==`all`){i[t]={...d,operationId:r};continue}for(let e of[`get`,`post`,`put`,`delete`,`patch`,`head`,`options`,`trace`])i[e]={...d,operationId:r}}}let d=Object.create(null);if(l)for(let[e,t]of Object.entries(l)){let n=hD(t,r);n&&(d[e]=n)}return{components:{schemas:d},paths:c}}var V={};Cv(V,{Array:()=>hie,As:()=>pie,Const:()=>gie,Context:()=>mie,Guard:()=>vD,Ident:()=>yie,Identity:()=>HD,Module:()=>Pie,Number:()=>bie,Optional:()=>xie,Parse:()=>WD,Ref:()=>_ie,String:()=>vie,Token:()=>ND,Tuple:()=>Sie,Union:()=>Cie});var vD={};Cv(vD,{IsArray:()=>SD,IsConst:()=>CD,IsContext:()=>wD,IsIdent:()=>TD,IsNumber:()=>ED,IsOptional:()=>DD,IsParser:()=>MD,IsRef:()=>OD,IsString:()=>kD,IsTuple:()=>AD,IsUnion:()=>jD});function yD(e,t){return t in e}function bD(e){return typeof e==`object`&&!!e}function xD(e){return globalThis.Array.isArray(e)}function SD(e){return bD(e)&&yD(e,`type`)&&e.type===`Array`&&yD(e,`parser`)&&bD(e.parser)}function CD(e){return bD(e)&&yD(e,`type`)&&e.type===`Const`&&yD(e,`value`)&&typeof e.value==`string`}function wD(e){return bD(e)&&yD(e,`type`)&&e.type===`Context`&&yD(e,`left`)&&MD(e.left)&&yD(e,`right`)&&MD(e.right)}function TD(e){return bD(e)&&yD(e,`type`)&&e.type===`Ident`}function ED(e){return bD(e)&&yD(e,`type`)&&e.type===`Number`}function DD(e){return bD(e)&&yD(e,`type`)&&e.type===`Optional`&&yD(e,`parser`)&&bD(e.parser)}function OD(e){return bD(e)&&yD(e,`type`)&&e.type===`Ref`&&yD(e,`ref`)&&typeof e.ref==`string`}function kD(e){return bD(e)&&yD(e,`type`)&&e.type===`String`&&yD(e,`options`)&&xD(e.options)}function AD(e){return bD(e)&&yD(e,`type`)&&e.type===`Tuple`&&yD(e,`parsers`)&&xD(e.parsers)}function jD(e){return bD(e)&&yD(e,`type`)&&e.type===`Union`&&yD(e,`parsers`)&&xD(e.parsers)}function MD(e){return SD(e)||CD(e)||wD(e)||TD(e)||ED(e)||DD(e)||OD(e)||kD(e)||AD(e)||jD(e)}var ND={};Cv(ND,{Const:()=>RD,Ident:()=>zD,Number:()=>BD,String:()=>VD});var PD;(function(e){function t(e){return e===32}e.IsWhitespace=t;function n(e){return e===10}e.IsNewline=n;function r(e){return e>=65&&e<=90||e>=97&&e<=122}e.IsAlpha=r;function i(e){return e===48}e.IsZero=i;function a(e){return e>=49&&e<=57}e.IsNonZero=a;function o(e){return a(e)||i(e)}e.IsDigit=o;function s(e){return e===46}e.IsDot=s;function c(e){return e===95}e.IsUnderscore=c;function l(e){return e===36}e.IsDollarSign=l})(PD||={});var FD;(function(e){function t(e){for(let t=0;t<e.length;t++)if(!PD.IsWhitespace(e.charCodeAt(t)))return e.slice(t);return e}e.TrimWhitespaceOnly=t;function n(e){return e.trimStart()}e.TrimAll=n})(FD||={});function ID(e,t){if(e.length>t.length)return!1;for(let n=0;n<e.length;n++)if(e.charCodeAt(n)!==t.charCodeAt(n))return!1;return!0}function LD(e,t){return ID(e,t)?[t.slice(0,e.length),t.slice(e.length)]:[]}function RD(e,t){if(e.length===0)return[``,t];let n=e.charCodeAt(0);return PD.IsNewline(n)?LD(e,FD.TrimWhitespaceOnly(t)):PD.IsWhitespace(n)?LD(e,t):LD(e,FD.TrimAll(t))}function sie(e){return PD.IsAlpha(e)||PD.IsDollarSign(e)||PD.IsUnderscore(e)}function cie(e){return PD.IsAlpha(e)||PD.IsDigit(e)||PD.IsDollarSign(e)||PD.IsUnderscore(e)}function lie(e){if(!sie(e.charCodeAt(0)))return[];for(let t=1;t<e.length;t++)if(!cie(e.charCodeAt(t)))return[e.slice(0,t),e.slice(t)];return[e,``]}function zD(e){return lie(FD.TrimAll(e))}function uie(e,t){let n=e.charCodeAt(t+0),r=e.charCodeAt(t+1);return PD.IsNonZero(n)||PD.IsZero(n)&&!PD.IsDigit(r)||PD.IsZero(n)&&PD.IsDot(r)||PD.IsDot(n)&&PD.IsDigit(r)}function die(e){let t=e.charAt(0)===`-`,n=t?1:0;if(!uie(e,n))return[];let r=t?`-`:``,i=!1;for(let t=n;t<e.length;t++){let a=e.charCodeAt(t);if(PD.IsDigit(a))continue;if(PD.IsDot(a)){if(i){let i=e.slice(n,t),a=e.slice(t);return[`${r}${i}`,a]}i=!0;continue}let o=e.slice(n,t),s=e.slice(t);return[`${r}${o}`,s]}return[e,``]}function BD(e){return die(FD.TrimAll(e))}function fie(e,t){let n=t.charAt(0);if(!e.includes(n))return[];let r=n;for(let e=1;e<t.length;e++)if(t.charAt(e)===r)return[t.slice(1,e),t.slice(e+1)];return[]}function VD(e,t){return fie(e,FD.TrimAll(t))}var HD=e=>e,pie=e=>t=>e;function mie(...e){let[t,n,r]=e.length===3?[e[0],e[1],e[2]]:[e[0],e[1],HD];return{type:`Context`,left:t,right:n,mapping:r}}function hie(...e){let[t,n]=e.length===2?[e[0],e[1]]:[e[0],HD];return{type:`Array`,parser:t,mapping:n}}function gie(...e){let[t,n]=e.length===2?[e[0],e[1]]:[e[0],HD];return{type:`Const`,value:t,mapping:n}}function _ie(...e){let[t,n]=e.length===2?[e[0],e[1]]:[e[0],HD];return{type:`Ref`,ref:t,mapping:n}}function vie(...e){let[t,n]=e.length===2?[e[0],e[1]]:[e[0],HD];return{type:`String`,options:t,mapping:n}}function yie(...e){return{type:`Ident`,mapping:e.length===1?e[0]:HD}}function bie(...e){return{type:`Number`,mapping:e.length===1?e[0]:HD}}function xie(...e){let[t,n]=e.length===2?[e[0],e[1]]:[e[0],HD];return{type:`Optional`,parser:t,mapping:n}}function Sie(...e){let[t,n]=e.length===2?[e[0],e[1]]:[e[0],HD];return{type:`Tuple`,parsers:t,mapping:n}}function Cie(...e){let[t,n]=e.length===2?[e[0],e[1]]:[e[0],HD];return{type:`Union`,parsers:t,mapping:n}}function wie(e,t,n,r,i){let a=UD(e,t,r,i);return a.length===2?UD(e,n,a[1],a[0]):[]}function Tie(e,t,n,r){let i=[],a=n;for(;a.length>0;){let n=UD(e,t,a,r);if(n.length===0)return[i,a];i.push(n[0]),a=n[1]}return[i,a]}function Eie(e,t,n){return RD(e,t)}function Die(e,t){return zD(e)}function Oie(e,t){return BD(e)}function kie(e,t,n,r){let i=UD(e,t,n,r);return i.length===2?[[i[0]],i[1]]:[[],n]}function Aie(e,t,n,r){let i=e[t];if(!MD(i))throw Error(`Cannot dereference Parser '${t}'`);return UD(e,i,n,r)}function jie(e,t,n){return VD(e,t)}function Mie(e,t,n,r){let i=[],a=n;for(let n of t){let t=UD(e,n,a,r);if(t.length===0)return[];i.push(t[0]),a=t[1]}return[i,a]}function Nie(e,t,n,r){for(let i of t){let t=UD(e,i,n,r);if(t.length!==0)return t}return[]}function UD(e,t,n,r){let i=wD(t)?wie(e,t.left,t.right,n,r):SD(t)?Tie(e,t.parser,n,r):CD(t)?Eie(t.value,n,r):TD(t)?Die(n,r):ED(t)?Oie(n,r):DD(t)?kie(e,t.parser,n,r):OD(t)?Aie(e,t.ref,n,r):kD(t)?jie(t.options,n,r):AD(t)?Mie(e,t.parsers,n,r):jD(t)?Nie(e,t.parsers,n,r):[];return i.length===2?[t.mapping(i[0],r),i[1]]:i}function WD(...e){let[t,n,r,i]=typeof e[1]==`string`?[{},e[0],e[1],e[2]]:[e[0],e[1],e[2],e[3]];return UD(t,n,r,i)}var Pie=class{constructor(e){this.properties=e}Parse(...e){let[t,n,r]=e.length===3?[e[0],e[1],e[2]]:e.length===2?[e[0],e[1],void 0]:(()=>{throw Error(`Invalid parse arguments`)})();return WD(this.properties,this.properties[t],n,r)}},GD=(e,t)=>t in e?e[t]:JS(t),Fie=(e,t=[])=>e.reduce((e,t)=>Ev.IsArray(t)&&t.length===2?[...e,t[0]]:[...e,t],[]),KD=e=>{let[t,n]=e;return Fie([...t,...n])};function Iie(e,t){return KD(e)}function Lie(e,t){let n=GD(t,e[0]),r=e[2];return BT(n,r)}function Rie(e,t){return KD(e)}var zie=(e,t)=>e.reduce((e,t,n)=>({...e,[t]:px(n)}),t);function Bie(e,t){return e.length===3?zie(e[1],t):{}}function Vie(e,t){return Vx()}function Hie(e,t){return Bx()}function Uie(e,t){return Rx()}function Wie(e,t){return SC()}function Gie(e,t){return bC()}function Kie(e,t){return VT()}function qie(e,t){return zx()}function Jie(e,t){return wC()}function Yie(e,t){return dx()}function Xie(e,t){return gx()}function Zie(e,t){return xC()}function Qie(e,t){return iD()}function $ie(e,t){return e}function eae(e,t){return Lx(e)}function tae(e,t){return Lx(parseFloat(e))}function nae(e,t){return Lx(e===`true`)}function rae(e,t){return e}function iae(e,t){return e.length>0}function aae(e,t){return e.reduce((e,t)=>t.length===3?[...e,[t[1]]]:[...e,[]],[])}function oae(e,t){return e.length===6?[e[1],e[3],e[5]]:[]}function sae(e,t){return Ev.IsArray(e)&&e.length===3?e[1]:e}var qD=(e,t)=>t.reduceRight((e,t)=>{let n=t;return n.length===1?gS(e,n[0]):n.length===0?fx(e,n[0]):gx()},e),cae=(e,t)=>t.length===3?Uw(e,t[0],t[1],t[2]):e;function lae(e,t){let[n,r,i,a]=e;return cae(n?hC(qD(r,i)):qD(r,i),a)}function JD(e,t){return t.length===3?(()=>{let[n,r,i]=t,a=JD(r,i);if(n===`&`)return z.IsIntersect(a)?qS([e,...a.allOf]):qS([e,a]);if(n===`|`)return z.IsUnion(a)?Sx([e,...a.anyOf]):Sx([e,a]);throw 1})():e}function uae(e,t){return e}function dae(e,t){let[n,r]=e;return JD(n,r)}function fae(e,t){return e}function pae(e,t){let[n,r]=e;return JD(n,r)}function mae(e,t){return e}function hae(e,t){return e}function gae(e,t){return e.length>0}function _ae(e,t){return e.length>0}function vae(e,t){let[n,r,i,a,o]=e;return{[r]:n&&i?sT(o):n&&!i?kS(o):!n&&i?LS(o):o}}function yae(e,t){return e}function bae(e,t){return KD(e)}function xae(e,t){let n=e[1];return wS(n.reduce((e,t)=>({...e,...t}),{}))}function Sae(e,t){return KD(e)}function Cae(e,t){return NS(e[1])}function wae(e,t){let[n,r,i]=e;return i}function Tae(e,t){return KD(e)}function Eae(e,t){let[n,r,i,a,o]=e;return vx(r,o)}function Dae(e,t){let[n,r,i,a,o,s]=e;return Wre(i,s)}function Oae(e,t){let[n,r,i,a,o,s,c,l]=e;return Lx(`Mapped types not supported`)}function kae(e,t){let[n,r,i,a]=e;return Hre(i)}function Aae(e,t){let[n,r,i,a]=e;return xS(i)}function jae(e,t){return Wv.IsLiteralNumber(e[2])?px(Math.trunc(e[2].const)):gx()}function Mae(e,t){let[n,r,i,a]=e;return tC(i)}function Nae(e,t){let[n,r,i,a]=e;return fx(i)}function Pae(e,t){let[n,r,i,a,o,s]=e;return bT(i,o)}function Fae(e,t){let[n,r,i,a]=e;return TS(i)}function Iae(e,t){let[n,r,i,a]=e;return TC(i)}function Lae(e,t){let[n,r,i,a]=e;return $E(i)}function Rae(e,t){let[n,r,i,a]=e;return oT(i)}function zae(e,t){let[n,r,i,a]=e;return eD(i)}function Bae(e,t){let[n,r,i,a]=e;return zE(i)}function Vae(e,t){let[n,r,i,a]=e;return YE(i)}function Hae(e,t){let[n,r,i,a,o,s]=e;return OE(i,o)}function Uae(e,t){let[n,r,i,a,o,s]=e;return mE(i,o)}function Wae(e,t){let[n,r,i,a,o,s]=e;return Xw(i,o)}function Gae(e,t){let[n,r,i,a,o,s]=e;return nT(i,o)}function Kae(e,t){let[n,r,i,a]=e;return rE(i)}function qae(e,t){let[n,r,i,a]=e;return tE(i)}function Jae(e,t){let[n,r,i,a]=e;return eE(i)}function Yae(e,t){let[n,r,i,a]=e;return nE(i)}function Xae(e,t){return yC()}function Zae(e,t){return CC()}function Qae(e,t){return GD(t,e)}var H=(e,t,n=()=>[])=>e.length===2?t(e):n(),YD=(e,t,n=[])=>H(H(rO(e,t),([e,t])=>H(V.Token.Const(`,`,t),([t,n])=>[[e,t],n])),([e,r])=>YD(r,t,[...n,e]),()=>[n,e]),$ae=(e,t={})=>H(H(YD(e,t),([e,n])=>H(H(H(rO(n,t),([e,t])=>[[e],t]),([e,t])=>[e,t],()=>H([[],n],([e,t])=>[e,t],()=>[])),([t,n])=>[[e,t],n])),([e,n])=>[Iie(e,t),n]),eoe=(e,t={})=>H(H(V.Token.Ident(e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H($ae(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[Lie(e,t),n]),XD=(e,t,n=[])=>H(H(V.Token.Ident(e),([e,t])=>H(V.Token.Const(`,`,t),([t,n])=>[[e,t],n])),([e,r])=>XD(r,t,[...n,e]),()=>[n,e]),toe=(e,t={})=>H(H(XD(e,t),([e,t])=>H(H(H(V.Token.Ident(t),([e,t])=>[[e],t]),([e,t])=>[e,t],()=>H([[],t],([e,t])=>[e,t],()=>[])),([t,n])=>[[e,t],n])),([e,n])=>[Rie(e,t),n]),noe=(e,t={})=>H(H(V.Token.Const(`<`,e),([e,n])=>H(toe(n,t),([t,n])=>H(V.Token.Const(`>`,n),([n,r])=>[[e,t,n],r]))),([e,n])=>[Bie(e,t),n]),roe=(e,t={})=>H(V.Token.Const(`string`,e),([e,n])=>[Vie(e,t),n]),ioe=(e,t={})=>H(V.Token.Const(`number`,e),([e,n])=>[Hie(e,t),n]),aoe=(e,t={})=>H(V.Token.Const(`boolean`,e),([e,n])=>[Uie(e,t),n]),ooe=(e,t={})=>H(V.Token.Const(`undefined`,e),([e,n])=>[Wie(e,t),n]),soe=(e,t={})=>H(V.Token.Const(`null`,e),([e,n])=>[Gie(e,t),n]),coe=(e,t={})=>H(V.Token.Const(`integer`,e),([e,n])=>[Kie(e,t),n]),loe=(e,t={})=>H(V.Token.Const(`bigint`,e),([e,n])=>[qie(e,t),n]),uoe=(e,t={})=>H(V.Token.Const(`unknown`,e),([e,n])=>[Jie(e,t),n]),doe=(e,t={})=>H(V.Token.Const(`any`,e),([e,n])=>[Yie(e,t),n]),foe=(e,t={})=>H(V.Token.Const(`never`,e),([e,n])=>[Xie(e,t),n]),poe=(e,t={})=>H(V.Token.Const(`symbol`,e),([e,n])=>[Zie(e,t),n]),moe=(e,t={})=>H(V.Token.Const(`void`,e),([e,n])=>[Qie(e,t),n]),hoe=(e,t={})=>H(H(roe(e,t),([e,t])=>[e,t],()=>H(ioe(e,t),([e,t])=>[e,t],()=>H(aoe(e,t),([e,t])=>[e,t],()=>H(ooe(e,t),([e,t])=>[e,t],()=>H(soe(e,t),([e,t])=>[e,t],()=>H(coe(e,t),([e,t])=>[e,t],()=>H(loe(e,t),([e,t])=>[e,t],()=>H(uoe(e,t),([e,t])=>[e,t],()=>H(doe(e,t),([e,t])=>[e,t],()=>H(foe(e,t),([e,t])=>[e,t],()=>H(poe(e,t),([e,t])=>[e,t],()=>H(moe(e,t),([e,t])=>[e,t],()=>[])))))))))))),([e,n])=>[$ie(e,t),n]),goe=(e,t={})=>H(V.Token.String([`'`,`"`,"`"],e),([e,n])=>[eae(e,t),n]),_oe=(e,t={})=>H(V.Token.Number(e),([e,n])=>[tae(e,t),n]),voe=(e,t={})=>H(H(V.Token.Const(`true`,e),([e,t])=>[e,t],()=>H(V.Token.Const(`false`,e),([e,t])=>[e,t],()=>[])),([e,n])=>[nae(e,t),n]),yoe=(e,t={})=>H(H(voe(e,t),([e,t])=>[e,t],()=>H(_oe(e,t),([e,t])=>[e,t],()=>H(goe(e,t),([e,t])=>[e,t],()=>[]))),([e,n])=>[rae(e,t),n]),boe=(e,t={})=>H(H(H(V.Token.Const(`keyof`,e),([e,t])=>[[e],t]),([e,t])=>[e,t],()=>H([[],e],([e,t])=>[e,t],()=>[])),([e,n])=>[iae(e,t),n]),ZD=(e,t,n=[])=>H(H(H(V.Token.Const(`[`,e),([e,n])=>H(rO(n,t),([t,n])=>H(V.Token.Const(`]`,n),([n,r])=>[[e,t,n],r]))),([e,t])=>[e,t],()=>H(H(V.Token.Const(`[`,e),([e,t])=>H(V.Token.Const(`]`,t),([t,n])=>[[e,t],n])),([e,t])=>[e,t],()=>[])),([e,r])=>ZD(r,t,[...n,e]),()=>[n,e]),xoe=(e,t={})=>H(ZD(e,t),([e,n])=>[aae(e,t),n]),Soe=(e,t={})=>H(H(H(V.Token.Const(`extends`,e),([e,n])=>H(rO(n,t),([n,r])=>H(V.Token.Const(`?`,r),([r,i])=>H(rO(i,t),([i,a])=>H(V.Token.Const(`:`,a),([a,o])=>H(rO(o,t),([t,o])=>[[e,n,r,i,a,t],o])))))),([e,t])=>[e,t],()=>H([[],e],([e,t])=>[e,t],()=>[])),([e,n])=>[oae(e,t),n]),Coe=(e,t={})=>H(H(H(V.Token.Const(`(`,e),([e,n])=>H(rO(n,t),([t,n])=>H(V.Token.Const(`)`,n),([n,r])=>[[e,t,n],r]))),([e,t])=>[e,t],()=>H(hoe(e,t),([e,t])=>[e,t],()=>H(koe(e,t),([e,t])=>[e,t],()=>H(joe(e,t),([e,t])=>[e,t],()=>H(yoe(e,t),([e,t])=>[e,t],()=>H(Noe(e,t),([e,t])=>[e,t],()=>H(Moe(e,t),([e,t])=>[e,t],()=>H(Poe(e,t),([e,t])=>[e,t],()=>H(Foe(e,t),([e,t])=>[e,t],()=>H(Ioe(e,t),([e,t])=>[e,t],()=>H(Hoe(e,t),([e,t])=>[e,t],()=>H(Uoe(e,t),([e,t])=>[e,t],()=>H(Woe(e,t),([e,t])=>[e,t],()=>H(Goe(e,t),([e,t])=>[e,t],()=>H(Loe(e,t),([e,t])=>[e,t],()=>H(Roe(e,t),([e,t])=>[e,t],()=>H(zoe(e,t),([e,t])=>[e,t],()=>H(Boe(e,t),([e,t])=>[e,t],()=>H(Voe(e,t),([e,t])=>[e,t],()=>H(Koe(e,t),([e,t])=>[e,t],()=>H(qoe(e,t),([e,t])=>[e,t],()=>H(Joe(e,t),([e,t])=>[e,t],()=>H(Yoe(e,t),([e,t])=>[e,t],()=>H(Xoe(e,t),([e,t])=>[e,t],()=>H(Zoe(e,t),([e,t])=>[e,t],()=>H(Qoe(e,t),([e,t])=>[e,t],()=>H($oe(e,t),([e,t])=>[e,t],()=>H(ese(e,t),([e,t])=>[e,t],()=>H(tse(e,t),([e,t])=>[e,t],()=>H(nse(e,t),([e,t])=>[e,t],()=>H(rse(e,t),([e,t])=>[e,t],()=>H(eoe(e,t),([e,t])=>[e,t],()=>H(ise(e,t),([e,t])=>[e,t],()=>[]))))))))))))))))))))))))))))))))),([e,n])=>[sae(e,t),n]),QD=(e,t={})=>H(H(boe(e,t),([e,n])=>H(Coe(n,t),([n,r])=>H(xoe(r,t),([r,i])=>H(Soe(i,t),([t,i])=>[[e,n,r,t],i])))),([e,n])=>[lae(e,t),n]),$D=(e,t={})=>H(H(H(V.Token.Const(`&`,e),([e,n])=>H(QD(n,t),([n,r])=>H($D(r,t),([t,r])=>[[e,n,t],r]))),([e,t])=>[e,t],()=>H([[],e],([e,t])=>[e,t],()=>[])),([e,n])=>[uae(e,t),n]),eO=(e,t={})=>H(H(QD(e,t),([e,n])=>H($D(n,t),([t,n])=>[[e,t],n])),([e,n])=>[dae(e,t),n]),tO=(e,t={})=>H(H(H(V.Token.Const(`|`,e),([e,n])=>H(eO(n,t),([n,r])=>H(tO(r,t),([t,r])=>[[e,n,t],r]))),([e,t])=>[e,t],()=>H([[],e],([e,t])=>[e,t],()=>[])),([e,n])=>[fae(e,t),n]),nO=(e,t={})=>H(H(eO(e,t),([e,n])=>H(tO(n,t),([t,n])=>[[e,t],n])),([e,n])=>[pae(e,t),n]),rO=(e,t={})=>H(H(H(noe(e,t),([e,t])=>nO(t,e),()=>[]),([e,t])=>[e,t],()=>H(nO(e,t),([e,t])=>[e,t],()=>[])),([e,n])=>[mae(e,t),n]),woe=(e,t={})=>H(H(V.Token.Ident(e),([e,t])=>[e,t],()=>H(V.Token.String([`'`,`"`],e),([e,t])=>[e,t],()=>[])),([e,n])=>[hae(e,t),n]),Toe=(e,t={})=>H(H(H(V.Token.Const(`readonly`,e),([e,t])=>[[e],t]),([e,t])=>[e,t],()=>H([[],e],([e,t])=>[e,t],()=>[])),([e,n])=>[gae(e,t),n]),Eoe=(e,t={})=>H(H(H(V.Token.Const(`?`,e),([e,t])=>[[e],t]),([e,t])=>[e,t],()=>H([[],e],([e,t])=>[e,t],()=>[])),([e,n])=>[_ae(e,t),n]),iO=(e,t={})=>H(H(Toe(e,t),([e,n])=>H(woe(n,t),([n,r])=>H(Eoe(r,t),([r,i])=>H(V.Token.Const(`:`,i),([i,a])=>H(rO(a,t),([t,a])=>[[e,n,r,i,t],a]))))),([e,n])=>[vae(e,t),n]),Doe=(e,t={})=>H(H(H(V.Token.Const(`,`,e),([e,t])=>H(V.Token.Const(`
`,t),([t,n])=>[[e,t],n])),([e,t])=>[e,t],()=>H(H(V.Token.Const(`;`,e),([e,t])=>H(V.Token.Const(`
`,t),([t,n])=>[[e,t],n])),([e,t])=>[e,t],()=>H(H(V.Token.Const(`,`,e),([e,t])=>[[e],t]),([e,t])=>[e,t],()=>H(H(V.Token.Const(`;`,e),([e,t])=>[[e],t]),([e,t])=>[e,t],()=>H(H(V.Token.Const(`
`,e),([e,t])=>[[e],t]),([e,t])=>[e,t],()=>[]))))),([e,n])=>[yae(e,t),n]),aO=(e,t,n=[])=>H(H(iO(e,t),([e,n])=>H(Doe(n,t),([t,n])=>[[e,t],n])),([e,r])=>aO(r,t,[...n,e]),()=>[n,e]),Ooe=(e,t={})=>H(H(aO(e,t),([e,n])=>H(H(H(iO(n,t),([e,t])=>[[e],t]),([e,t])=>[e,t],()=>H([[],n],([e,t])=>[e,t],()=>[])),([t,n])=>[[e,t],n])),([e,n])=>[bae(e,t),n]),koe=(e,t={})=>H(H(V.Token.Const(`{`,e),([e,n])=>H(Ooe(n,t),([t,n])=>H(V.Token.Const(`}`,n),([n,r])=>[[e,t,n],r]))),([e,n])=>[xae(e,t),n]),oO=(e,t,n=[])=>H(H(rO(e,t),([e,t])=>H(V.Token.Const(`,`,t),([t,n])=>[[e,t],n])),([e,r])=>oO(r,t,[...n,e]),()=>[n,e]),Aoe=(e,t={})=>H(H(oO(e,t),([e,n])=>H(H(H(rO(n,t),([e,t])=>[[e],t]),([e,t])=>[e,t],()=>H([[],n],([e,t])=>[e,t],()=>[])),([t,n])=>[[e,t],n])),([e,n])=>[Sae(e,t),n]),joe=(e,t={})=>H(H(V.Token.Const(`[`,e),([e,n])=>H(Aoe(n,t),([t,n])=>H(V.Token.Const(`]`,n),([n,r])=>[[e,t,n],r]))),([e,n])=>[Cae(e,t),n]),sO=(e,t={})=>H(H(V.Token.Ident(e),([e,n])=>H(V.Token.Const(`:`,n),([n,r])=>H(rO(r,t),([t,r])=>[[e,n,t],r]))),([e,n])=>[wae(e,t),n]),cO=(e,t,n=[])=>H(H(sO(e,t),([e,t])=>H(V.Token.Const(`,`,t),([t,n])=>[[e,t],n])),([e,r])=>cO(r,t,[...n,e]),()=>[n,e]),lO=(e,t={})=>H(H(cO(e,t),([e,n])=>H(H(H(sO(n,t),([e,t])=>[[e],t]),([e,t])=>[e,t],()=>H([[],n],([e,t])=>[e,t],()=>[])),([t,n])=>[[e,t],n])),([e,n])=>[Tae(e,t),n]),Moe=(e,t={})=>H(H(V.Token.Const(`(`,e),([e,n])=>H(lO(n,t),([n,r])=>H(V.Token.Const(`)`,r),([r,i])=>H(V.Token.Const(`=>`,i),([i,a])=>H(rO(a,t),([t,a])=>[[e,n,r,i,t],a]))))),([e,n])=>[Eae(e,t),n]),Noe=(e,t={})=>H(H(V.Token.Const(`new`,e),([e,n])=>H(V.Token.Const(`(`,n),([n,r])=>H(lO(r,t),([r,i])=>H(V.Token.Const(`)`,i),([i,a])=>H(V.Token.Const(`=>`,a),([a,o])=>H(rO(o,t),([t,o])=>[[e,n,r,i,a,t],o])))))),([e,n])=>[Dae(e,t),n]),Poe=(e,t={})=>H(H(V.Token.Const(`{`,e),([e,n])=>H(V.Token.Const(`[`,n),([n,r])=>H(V.Token.Ident(r),([r,i])=>H(V.Token.Const(`in`,i),([i,a])=>H(rO(a,t),([a,o])=>H(V.Token.Const(`]`,o),([o,s])=>H(V.Token.Const(`:`,s),([s,c])=>H(rO(c,t),([t,c])=>H(V.Token.Const(`}`,c),([c,l])=>[[e,n,r,i,a,o,s,t,c],l]))))))))),([e,n])=>[Oae(e,t),n]),Foe=(e,t={})=>H(H(V.Token.Const(`AsyncIterator`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[kae(e,t),n]),Ioe=(e,t={})=>H(H(V.Token.Const(`Iterator`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[Aae(e,t),n]),Loe=(e,t={})=>H(H(V.Token.Const(`Argument`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[jae(e,t),n]),Roe=(e,t={})=>H(H(V.Token.Const(`Awaited`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[Mae(e,t),n]),zoe=(e,t={})=>H(H(V.Token.Const(`Array`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[Nae(e,t),n]),Boe=(e,t={})=>H(H(V.Token.Const(`Record`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([r,i])=>H(V.Token.Const(`,`,i),([i,a])=>H(rO(a,t),([t,a])=>H(V.Token.Const(`>`,a),([a,o])=>[[e,n,r,i,t,a],o])))))),([e,n])=>[Pae(e,t),n]),Voe=(e,t={})=>H(H(V.Token.Const(`Promise`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[Fae(e,t),n]),Hoe=(e,t={})=>H(H(V.Token.Const(`ConstructorParameters`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[Iae(e,t),n]),Uoe=(e,t={})=>H(H(V.Token.Const(`Parameters`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[Lae(e,t),n]),Woe=(e,t={})=>H(H(V.Token.Const(`InstanceType`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[Rae(e,t),n]),Goe=(e,t={})=>H(H(V.Token.Const(`ReturnType`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[zae(e,t),n]),Koe=(e,t={})=>H(H(V.Token.Const(`Partial`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[Bae(e,t),n]),qoe=(e,t={})=>H(H(V.Token.Const(`Required`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[Vae(e,t),n]),Joe=(e,t={})=>H(H(V.Token.Const(`Pick`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([r,i])=>H(V.Token.Const(`,`,i),([i,a])=>H(rO(a,t),([t,a])=>H(V.Token.Const(`>`,a),([a,o])=>[[e,n,r,i,t,a],o])))))),([e,n])=>[Hae(e,t),n]),Yoe=(e,t={})=>H(H(V.Token.Const(`Omit`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([r,i])=>H(V.Token.Const(`,`,i),([i,a])=>H(rO(a,t),([t,a])=>H(V.Token.Const(`>`,a),([a,o])=>[[e,n,r,i,t,a],o])))))),([e,n])=>[Uae(e,t),n]),Xoe=(e,t={})=>H(H(V.Token.Const(`Exclude`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([r,i])=>H(V.Token.Const(`,`,i),([i,a])=>H(rO(a,t),([t,a])=>H(V.Token.Const(`>`,a),([a,o])=>[[e,n,r,i,t,a],o])))))),([e,n])=>[Wae(e,t),n]),Zoe=(e,t={})=>H(H(V.Token.Const(`Extract`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([r,i])=>H(V.Token.Const(`,`,i),([i,a])=>H(rO(a,t),([t,a])=>H(V.Token.Const(`>`,a),([a,o])=>[[e,n,r,i,t,a],o])))))),([e,n])=>[Gae(e,t),n]),Qoe=(e,t={})=>H(H(V.Token.Const(`Uppercase`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[Kae(e,t),n]),$oe=(e,t={})=>H(H(V.Token.Const(`Lowercase`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[qae(e,t),n]),ese=(e,t={})=>H(H(V.Token.Const(`Capitalize`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[Jae(e,t),n]),tse=(e,t={})=>H(H(V.Token.Const(`Uncapitalize`,e),([e,n])=>H(V.Token.Const(`<`,n),([n,r])=>H(rO(r,t),([t,r])=>H(V.Token.Const(`>`,r),([r,i])=>[[e,n,t,r],i])))),([e,n])=>[Yae(e,t),n]),nse=(e,t={})=>H(V.Token.Const(`Date`,e),([e,n])=>[Xae(e,t),n]),rse=(e,t={})=>H(V.Token.Const(`Uint8Array`,e),([e,n])=>[Zae(e,t),n]),ise=(e,t={})=>H(V.Token.Ident(e),([e,n])=>[Qae(e,t),n]);function ase(...e){let[t,n,r]=typeof e[0]==`string`?[{},e[0],e[1]||{}]:[e[0],e[1],e[2]||{}],i=rO(n,t)[0];return Wv.IsSchema(i)?Bv(i,r):gx(r)}function ose(...e){return ase.apply(null,e)}function sse(e,t,n){return ose(e,t,n)}function cse(e){return Bv(e)}var uO;function dO(e){return{lang:e?.lang??uO?.lang,message:e?.message,abortEarly:e?.abortEarly??uO?.abortEarly,abortPipeEarly:e?.abortPipeEarly??uO?.abortPipeEarly}}var lse;function use(e){return lse?.get(e)}var dse;function fse(e){return dse?.get(e)}var pse;function mse(e,t){return pse?.get(e)?.get(t)}function hse(e){let t=typeof e;return t===`string`?`"${e}"`:t===`number`||t===`bigint`||t===`boolean`?`${e}`:t===`object`||t===`function`?(e&&Object.getPrototypeOf(e)?.constructor?.name)??`null`:t}function fO(e,t,n,r,i){let a=i&&`input`in i?i.input:n.value,o=i?.expected??e.expects??null,s=i?.received??hse(a),c={kind:e.kind,type:e.type,input:a,expected:o,received:s,message:`Invalid ${t}: ${o?`Expected ${o} but r`:`R`}eceived ${s}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=e.kind===`schema`,u=i?.message??e.message??mse(e.reference,c.lang)??(l?fse(c.lang):null)??r.message??use(c.lang);u!==void 0&&(c.message=typeof u==`function`?u(c):u),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function pO(e){return{version:1,vendor:`valibot`,validate(t){return e[`~run`]({value:t},dO())}}}var gse=/\D/gu;function _se(e){let t=e.replace(gse,``),n=t.length,r=1,i=0;for(;n;){let e=+t[--n];r^=1,i+=r?[0,2,4,6,8,1,3,5,7,9][e]:e}return i%10==0}var vse=/^(?:[\da-z+/]{4})*(?:[\da-z+/]{2}==|[\da-z+/]{3}=)?$/iu,yse=/^[A-Z]{6}(?!00)[\dA-Z]{2}(?:[\dA-Z]{3})?$/u,bse=/^[a-z][\da-z]*$/u,xse=/^[+-]?(?:\d*\.)?\d+$/u,Sse=/^\d+$/u,Cse=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu,wse=RegExp(`^(?:[\\u{1F1E6}-\\u{1F1FF}]{2}|\\u{1F3F4}[\\u{E0061}-\\u{E007A}]{2}[\\u{E0030}-\\u{E0039}\\u{E0061}-\\u{E007A}]{1,3}\\u{E007F}|(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation})(?:\\u200D(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation}))*)+$`,`u`),Tse=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$/u,Ese=/^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,Dse=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$|^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,Ose=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])$/u,kse=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])[T ](?:0\d|1\d|2[0-3]):[0-5]\d$/u,Ase=/^(?:0\d|1\d|2[0-3]):[0-5]\d$/u,jse=/^(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}$/u,Mse=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])[T ](?:0\d|1\d|2[0-3])(?::[0-5]\d){2}(?:\.\d{1,9})?(?:Z|[+-](?:0\d|1\d|2[0-3])(?::?[0-5]\d)?)$/u,Nse=/^\d{4}-W(?:0[1-9]|[1-4]\d|5[0-3])$/u,Pse=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$/iu,Fse=/^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,Ise=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$|^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,Lse=/^[\w-]+$/u,Rse=/^(?:0o)?[0-7]+$/u,zse=/^[\da-hjkmnp-tv-zA-HJKMNP-TV-Z]{26}$/u,Bse=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function mO(e){return{kind:`validation`,type:`base64`,reference:mO,async:!1,expects:null,requirement:vse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`Base64`,e,t),e}}}function hO(e){return{kind:`validation`,type:`bic`,reference:hO,async:!1,expects:null,requirement:yse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`BIC`,e,t),e}}}var Vse=/^(?:\d{14,19}|\d{4}(?: \d{3,6}){2,4}|\d{4}(?:-\d{3,6}){2,4})$/u,Hse=/[- ]/gu,Use=[/^3[47]\d{13}$/u,/^3(?:0[0-5]|[68]\d)\d{11,13}$/u,/^6(?:011|5\d{2})\d{12,15}$/u,/^(?:2131|1800|35\d{3})\d{11}$/u,/^5[1-5]\d{2}|(?:222\d|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}$/u,/^(?:6[27]\d{14,17}|81\d{14,17})$/u,/^4\d{12}(?:\d{3,6})?$/u];function gO(e){return{kind:`validation`,type:`credit_card`,reference:gO,async:!1,expects:null,requirement(e){let t;return Vse.test(e)&&(t=e.replace(Hse,``))&&Use.some(e=>e.test(t))&&_se(t)},message:e,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&fO(this,`credit card`,e,t),e}}}function _O(e){return{kind:`validation`,type:`cuid2`,reference:_O,async:!1,expects:null,requirement:bse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`Cuid2`,e,t),e}}}function vO(e){return{kind:`validation`,type:`decimal`,reference:vO,async:!1,expects:null,requirement:xse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`decimal`,e,t),e}}}function yO(e){return{kind:`validation`,type:`digits`,reference:yO,async:!1,expects:null,requirement:Sse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`digits`,e,t),e}}}function bO(e){return{kind:`validation`,type:`email`,reference:bO,expects:null,async:!1,requirement:Cse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`email`,e,t),e}}}function xO(e){return{kind:`validation`,type:`emoji`,reference:xO,async:!1,expects:null,requirement:wse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`emoji`,e,t),e}}}function SO(e){return{kind:`validation`,type:`ip`,reference:SO,async:!1,expects:null,requirement:Dse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`IP`,e,t),e}}}function CO(e){return{kind:`validation`,type:`ipv4`,reference:CO,async:!1,expects:null,requirement:Tse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`IPv4`,e,t),e}}}function wO(e){return{kind:`validation`,type:`ipv6`,reference:wO,async:!1,expects:null,requirement:Ese,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`IPv6`,e,t),e}}}function TO(e){return{kind:`validation`,type:`iso_date`,reference:TO,async:!1,expects:null,requirement:Ose,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`date`,e,t),e}}}function EO(e){return{kind:`validation`,type:`iso_date_time`,reference:EO,async:!1,expects:null,requirement:kse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`date-time`,e,t),e}}}function DO(e){return{kind:`validation`,type:`iso_time`,reference:DO,async:!1,expects:null,requirement:Ase,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`time`,e,t),e}}}function OO(e){return{kind:`validation`,type:`iso_time_second`,reference:OO,async:!1,expects:null,requirement:jse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`time-second`,e,t),e}}}function kO(e){return{kind:`validation`,type:`iso_timestamp`,reference:kO,async:!1,expects:null,requirement:Mse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`timestamp`,e,t),e}}}function AO(e){return{kind:`validation`,type:`iso_week`,reference:AO,async:!1,expects:null,requirement:Nse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`week`,e,t),e}}}function jO(e){return{kind:`validation`,type:`mac`,reference:jO,async:!1,expects:null,requirement:Ise,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`MAC`,e,t),e}}}function MO(e){return{kind:`validation`,type:`mac48`,reference:MO,async:!1,expects:null,requirement:Pse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`48-bit MAC`,e,t),e}}}function NO(e){return{kind:`validation`,type:`mac64`,reference:NO,async:!1,expects:null,requirement:Fse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`64-bit MAC`,e,t),e}}}function PO(e){return{kind:`validation`,type:`nanoid`,reference:PO,async:!1,expects:null,requirement:Lse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`Nano ID`,e,t),e}}}function FO(e){return{kind:`validation`,type:`octal`,reference:FO,async:!1,expects:null,requirement:Rse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`octal`,e,t),e}}}function IO(e){return{kind:`validation`,type:`ulid`,reference:IO,async:!1,expects:null,requirement:zse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`ULID`,e,t),e}}}function LO(e){return{kind:`validation`,type:`url`,reference:LO,async:!1,expects:null,requirement(e){try{return new URL(e),!0}catch{return!1}},message:e,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&fO(this,`URL`,e,t),e}}}function RO(e){return{kind:`validation`,type:`uuid`,reference:RO,async:!1,expects:null,requirement:Bse,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&fO(this,`UUID`,e,t),e}}}function zO(e){return{kind:`schema`,type:`string`,reference:zO,expects:`string`,async:!1,message:e,get"~standard"(){return pO(this)},"~run"(e,t){return typeof e.value==`string`?e.typed=!0:fO(this,`type`,e,t),e}}}function BO(...e){return{...e[0],pipe:e,get"~standard"(){return pO(this)},"~run"(t,n){for(let r of e)if(r.kind!==`metadata`){if(t.issues&&(r.kind===`schema`||r.kind===`transformation`)){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r[`~run`](t,n))}return t}}}function VO(e,t,n){let r=e[`~run`]({value:t},dO(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}function Wse(e){return Ev.IsObject(e)&&Ev.HasPropertyKey(e,`pipe`)&&Ev.IsArray(e.pipe)}function HO(e){return Wse(e)?e.pipe.slice(1).reduce((t,n)=>({...t,...n.type===`args`?{}:n.type===`base64`?{format:`base64`}:n.type===`bic`?{format:`bic`}:n.type===`brand`||n.type===`bytes`||n.type===`check`||n.type===`check_items`?{}:n.type===`credit_card`?{format:`credit_card`}:n.type===`cuid2`?{format:`cuid2`}:n.type===`decimal`?{format:`decimal`}:n.type===`description`?{description:n.description}:n.type===`digits`?{format:`digits`}:n.type===`email`?{format:`email`}:n.type===`emoji`?{format:`emoji`}:n.type===`empty`?e.type===`array`?{maxItems:0}:e.type===`string`?{maxLength:0}:{}:n.type===`ends_with`?{pattern:`${n.requirement}$`}:n.type===`every_item`||n.type===`excludes`||n.type===`filter_items`||n.type===`find_items`||n.type===`finite`||n.type===`graphemes`||n.type===`hash`||n.type===`hexadecimal`||n.type===`hex_color`||n.type===`imei`?{}:n.type===`includes`?e.type===`array`?{contains:Lx(n.requirement)}:e.type===`string`?{pattern:n.requirement}:{}:n.type===`integer`?{multipleOf:1}:n.type===`ip`?{format:`ip`}:n.type===`ipv4`?{format:`ipv4`}:n.type===`ipv6`?{format:`ipv6`}:n.type===`iso_date`?{format:`iso_date`}:n.type===`iso_date_time`?{format:`iso_date_time`}:n.type===`iso_time`?{format:`iso_time`}:n.type===`iso_time_second`?{format:`iso_time_second`}:n.type===`iso_timestamp`?{format:`iso_timestamp`}:n.type===`iso_week`?{format:`iso_week`}:n.type===`length`?e.type===`string`?{minLength:n.requirement,maxLength:n.requirement}:e.type===`array`?{minItems:n.requirement,maxItems:n.requirement}:{}:n.type===`mac`?{format:`mac`}:n.type===`mac48`?{format:`mac48`}:n.type===`mac64`?{format:`mac64`}:n.type===`map_items`||n.type===`max_bytes`||n.type===`max_graphemes`?{}:n.type===`max_length`?e.type===`string`?{maxLength:n.requirement}:e.type===`array`?{maxItems:n.requirement}:{}:n.type===`max_size`?{}:n.type===`max_value`?{maximum:n.requirement}:n.type===`max_words`?{}:n.type===`metadata`?{metadata:n.metadata}:n.type===`mime_type`||n.type===`min_bytes`||n.type===`min_graphemes`?{}:n.type===`min_length`?e.type===`string`?{minLength:n.requirement}:e.type===`array`?{minItems:n.requirement}:{}:n.type===`min_size`?{}:n.type===`min_value`?{minimum:n.requirement}:n.type===`min_words`?{}:n.type===`multiple_of`?{multipleOf:n.requirement}:n.type===`nanoid`?{format:`nanoid`}:n.type===`non_empty`||n.type===`normalize`||n.type===`not_bytes`||n.type===`not_graphemes`||n.type===`not_length`||n.type===`not_size`||n.type===`not_value`||n.type===`not_words`?{}:n.type===`octal`?{format:`octal`}:n.type===`partial_check`||n.type===`raw_check`||n.type===`raw_transform`||n.type===`readonly`||n.type===`reduce_items`?{}:n.type===`regex`?{pattern:n.requirement.source}:n.type===`returns`?{}:n.type===`safe_integer`?{multipleOf:1}:n.type===`size`||n.type===`some_item`||n.type===`sort_items`?{}:n.type===`starts_with`?{pattern:`^${n.requirement}`}:n.type===`title`?{title:n.title}:n.type===`to_lower_case`||n.type===`to_max_value`||n.type===`to_min_value`||n.type===`to_upper_case`||n.type===`transform`||n.type===`trim`||n.type===`trim_end`||n.type===`trim_start`?{}:n.type===`ulid`?{format:`ulid`}:n.type===`url`?{format:`url`}:n.type===`uuid`?{format:`uuid`}:(n.type===`value`||n.type,{})}),{}):{}}tx.Set(`base64`,e=>VO(BO(zO(),mO()),e).success),tx.Set(`bic`,e=>VO(BO(zO(),hO()),e).success),tx.Set(`credit_card`,e=>VO(BO(zO(),gO()),e).success),tx.Set(`cuid2`,e=>VO(BO(zO(),_O()),e).success),tx.Set(`decimal`,e=>VO(BO(zO(),vO()),e).success),tx.Set(`digits`,e=>VO(BO(zO(),yO()),e).success),tx.Set(`email`,e=>VO(BO(zO(),bO()),e).success),tx.Set(`emoji`,e=>VO(BO(zO(),xO()),e).success),tx.Set(`ip`,e=>VO(BO(zO(),SO()),e).success),tx.Set(`ipv4`,e=>VO(BO(zO(),CO()),e).success),tx.Set(`ipv6`,e=>VO(BO(zO(),wO()),e).success),tx.Set(`iso_date`,e=>VO(BO(zO(),TO()),e).success),tx.Set(`iso_date_time`,e=>VO(BO(zO(),EO()),e).success),tx.Set(`iso_time`,e=>VO(BO(zO(),DO()),e).success),tx.Set(`iso_time_second`,e=>VO(BO(zO(),OO()),e).success),tx.Set(`iso_timestamp`,e=>VO(BO(zO(),kO()),e).success),tx.Set(`iso_week`,e=>VO(BO(zO(),AO()),e).success),tx.Set(`mac`,e=>VO(BO(zO(),jO()),e).success),tx.Set(`mac48`,e=>VO(BO(zO(),MO()),e).success),tx.Set(`mac64`,e=>VO(BO(zO(),NO()),e).success),tx.Set(`nanoid`,e=>VO(BO(zO(),PO()),e).success),tx.Set(`octal`,e=>VO(BO(zO(),FO()),e).success),tx.Set(`ulid`,e=>VO(BO(zO(),IO()),e).success),tx.Set(`url`,e=>VO(BO(zO(),LO()),e).success),tx.Set(`uuid`,e=>VO(BO(zO(),RO()),e).success);function Gse(e){return dx(HO(e))}function Kse(e){return fx(Dk(e.item),HO(e))}function qse(e){return zx(HO(e))}lx.Set(`ValibotBlob`,(e,t)=>VO(e.schema,t).success);function Jse(e,t){return L({[R]:`ValibotBlob`,type:e},t)}function Yse(e){return Jse(e,HO(e))}function Xse(e){return Rx(HO(e))}lx.Set(`ValibotCustom`,(e,t)=>VO(e.schema,t).success);function Zse(e,t){return L({[R]:`ValibotCustom`,type:e},t)}function Qse(e){return Zse(e,HO(e))}function $se(e){return yC(HO(e))}lx.Set(`ValibotEnum`,(e,t)=>VO(e.type,t).success);function ece(e,t){return L({[R]:`ValibotEnum`,type:e},t)}function tce(e){return ece(e,HO(e))}lx.Set(`ValibotFile`,(e,t)=>VO(e.schema,t).success);function nce(e,t){return L({[R]:`ValibotFile`,type:e},t)}function rce(e){return nce(e,HO(e))}lx.Set(`ValibotFunction`,(e,t)=>VO(e.schema,t).success);function ice(e,t){return L({[R]:`ValibotFunction`,type:e},t)}function ace(e){return ice(e,HO(e))}lx.Set(`ValibotInstance`,(e,t)=>VO(e.schema,t).success);function oce(e,t){return L({[R]:`ValibotInstance`,type:e},t)}function sce(e){return oce(e,HO(e))}function cce(e){return qS(e.options.map(e=>Dk(e)),HO(e))}function lce(e){return Lx(e.literal,HO(e))}function UO(e){let t=e;return wS(globalThis.Object.getOwnPropertyNames(t.entries).reduce((e,n)=>({...e,[n]:Dk(t.entries[n])}),{}),HO(e))}lx.Set(`ValibotLooseTuple`,(e,t)=>VO(e.schema,t).success);function WO(e,t){return L({[R]:`ValibotLooseTuple`,type:e})}function GO(e){return WO(e,HO(e))}lx.Set(`ValibotMap`,(e,t)=>VO(e.schema,t).success);function KO(e,t){return L({[R]:`ValibotMap`,type:e})}function qO(e){return KO(e,HO(e))}lx.Set(`ValibotNaN`,(e,t)=>VO(e.schema,t).success);function JO(e,t){return L({[R]:`ValibotNaN`,type:e},t)}function YO(e){return JO(e,HO(e))}function XO(e){return gx(HO(e))}function ZO(e){return Xw(Dk(e.wrapped),bC(),HO(e))}function QO(e){return Xw(Dk(e.wrapped),Sx([bC(),SC()]),HO(e))}function $O(e){return LS(Dk(e.wrapped),!1)}function ek(e){return bC(HO(e))}function tk(e){let t=e;return Sx([bC(),Dk(t.wrapped)],HO(e))}function nk(e){return Sx([Dk(e.wrapped),bC(),SC()],HO(e))}function rk(e){return Bx(HO(e))}function ik(e){let t=e;return wS(globalThis.Object.getOwnPropertyNames(t.entries).reduce((e,n)=>({...e,[n]:Dk(t.entries[n])}),{}),HO(e))}function ak(e){let t=e;return wS(globalThis.Object.getOwnPropertyNames(t.entries).reduce((e,n)=>({...e,[n]:Dk(t.entries[n])}),{}),{...HO(e),additionalProperties:Dk(t.rest)})}function ok(e){return LS(Dk(e.wrapped))}function sk(e){return Sx(e.options.map(e=>Lx(e)),HO(e))}lx.Set(`ValibotPromise`,(e,t)=>VO(e.schema,t).success);function ck(e,t){return L({[R]:`ValibotPromise`,type:e},t)}function lk(e){return ck(e,HO(e))}function uk(e){let t=e;return bT(Dk(t.key),Dk(t.value),HO(e))}lx.Set(`ValibotSet`,(e,t)=>VO(e.schema,t).success);function dk(e,t){return L({[R]:`ValibotSet`,type:e},t)}function fk(e){return dk(e)}function pk(e){let t=e;return wS(globalThis.Object.getOwnPropertyNames(t.entries).reduce((e,n)=>({...e,[n]:Dk(t.entries[n])}),{}),{...HO(e),additionalProperties:!1})}function mk(e){let t=e;return NS(globalThis.Array.isArray(t.items)?t.items.map(e=>Dk(e)):[],HO(e))}function hk(e){return Vx(HO(e))}function gk(e){return xC(HO(e))}function _k(e){let t=e;return NS(globalThis.Array.isArray(t.items)?t.items.map(e=>Dk(e)):[],HO(e))}lx.Set(`ValibotTupleWithRest`,(e,t)=>VO(e.schema,t).success);function vk(e,t){return L({[R]:`ValibotTupleWithRest`,type:e},HO(e))}function yk(e){return vk(e,HO(e))}function bk(e){return SC(HO(e))}function xk(e){return Sx([Dk(e.wrapped),SC()],HO(e))}function Sk(e){return Sx(e.options.map(e=>Dk(e)),HO(e))}function Ck(e){return wC(HO(e))}lx.Set(`ValibotVariant`,(e,t)=>VO(e.schema,t).success);function wk(e){return L({[R]:`ValibotVariant`,type:e},HO(e))}function Tk(e){return wk(e)}function Ek(e){return iD(HO(e))}function Dk(e){return e.type===`any`?Gse(e):e.type===`array`?Kse(e):e.type===`bigint`?qse(e):e.type===`blob`?Yse(e):e.type===`boolean`?Xse(e):e.type===`custom`?Qse(e):e.type===`date`?$se(e):e.type===`enum`?tce(e):e.type===`file`?rce(e):e.type===`function`?ace(e):e.type===`intersect`?cce(e):e.type===`instance`?sce(e):e.type===`literal`?lce(e):e.type===`loose_object`?UO(e):e.type===`loose_tuple`?GO(e):e.type===`map`?qO(e):e.type===`nan`?YO(e):e.type===`never`?XO(e):e.type===`non_nullable`?ZO(e):e.type===`non_nullish`?QO(e):e.type===`non_optional`?$O(e):e.type===`null`?ek(e):e.type===`nullable`?tk(e):e.type===`nullish`?nk(e):e.type===`number`?rk(e):e.type===`object`?ik(e):e.type===`object_with_rest`?ak(e):e.type===`optional`?ok(e):e.type===`picklist`?sk(e):e.type===`promise`?lk(e):e.type===`record`?uk(e):e.type===`string`?hk(e):e.type===`set`?fk(e):e.type===`strict_object`?pk(e):e.type===`strict_tuple`?mk(e):e.type===`symbol`?gk(e):e.type===`tuple_with_rest`?yk(e):e.type===`tuple`?_k(e):e.type===`undefined`?bk(e):e.type===`undefinedable`?xk(e):e.type===`unknown`?Ck(e):e.type===`union`?Sk(e):e.type===`variant`?Tk(e):e.type===`void`?Ek(e):gx()}function Ok(e){return Dk(e)}Object.freeze({status:`aborted`});function U(e,t,n){function r(n,r){var i;for(let a in Object.defineProperty(n,`_zod`,{value:n._zod??{},enumerable:!1}),(i=n._zod).traits??(i.traits=new Set),n._zod.traits.add(e),t(n,r),o.prototype)a in n||Object.defineProperty(n,a,{value:o.prototype[a].bind(n)});n._zod.constr=o,n._zod.def=r}let i=n?.Parent??Object;class a extends i{}Object.defineProperty(a,`name`,{value:e});function o(e){var t;let i=n?.Parent?new a:this;r(i,e),(t=i._zod).deferred??(t.deferred=[]);for(let e of i._zod.deferred)e();return i}return Object.defineProperty(o,`init`,{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>n?.Parent&&t instanceof n.Parent?!0:t?._zod?.traits?.has(e)}),Object.defineProperty(o,`name`,{value:e}),o}var kk=class extends Error{constructor(){super(`Encountered Promise during synchronous parse. Use .parseAsync() instead.`)}},Ak=class extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name=`ZodEncodeError`}},jk={};function Mk(e){return e&&Object.assign(jk,e),jk}var Nk={};Cv(Nk,{BIGINT_FORMAT_RANGES:()=>vA,Class:()=>BA,NUMBER_FORMAT_RANGES:()=>_A,aborted:()=>EA,allowsEval:()=>iA,assert:()=>Rk,assertEqual:()=>Pk,assertIs:()=>Ik,assertNever:()=>Lk,assertNotEqual:()=>Fk,assignProp:()=>Yk,base64ToUint8Array:()=>PA,base64urlToUint8Array:()=>IA,cached:()=>Hk,captureStackTrace:()=>nA,cleanEnum:()=>NA,cleanRegex:()=>Wk,clone:()=>fA,cloneDef:()=>Zk,createTransparentProxy:()=>mA,defineLazy:()=>qk,esc:()=>tA,escapeRegex:()=>dA,extend:()=>xA,finalizeIssue:()=>kA,floatSafeRemainder:()=>Gk,getElementAtPath:()=>Qk,getEnumValues:()=>zk,getLengthableOrigin:()=>jA,getParsedType:()=>cA,getSizableOrigin:()=>AA,hexToUint8Array:()=>RA,isObject:()=>rA,isPlainObject:()=>aA,issue:()=>MA,joinValues:()=>Bk,jsonStringifyReplacer:()=>Vk,merge:()=>CA,mergeDefs:()=>Xk,normalizeParams:()=>pA,nullish:()=>Uk,numKeys:()=>sA,objectClone:()=>Jk,omit:()=>bA,optionalKeys:()=>gA,partial:()=>wA,pick:()=>yA,prefixIssues:()=>DA,primitiveTypes:()=>uA,promiseAllObject:()=>$k,propertyKeyTypes:()=>lA,randomString:()=>eA,required:()=>TA,safeExtend:()=>SA,shallowClone:()=>oA,stringifyPrimitive:()=>hA,uint8ArrayToBase64:()=>FA,uint8ArrayToBase64url:()=>LA,uint8ArrayToHex:()=>zA,unwrapMessage:()=>OA});function Pk(e){return e}function Fk(e){return e}function Ik(e){}function Lk(e){throw Error()}function Rk(e){}function zk(e){let t=Object.values(e).filter(e=>typeof e==`number`);return Object.entries(e).filter(([e,n])=>t.indexOf(+e)===-1).map(([e,t])=>t)}function Bk(e,t=`|`){return e.map(e=>hA(e)).join(t)}function Vk(e,t){return typeof t==`bigint`?t.toString():t}function Hk(e){return{get value(){{let t=e();return Object.defineProperty(this,`value`,{value:t}),t}throw Error(`cached value already set`)}}}function Uk(e){return e==null}function Wk(e){let t=e.startsWith(`^`)?1:0,n=e.endsWith(`$`)?e.length-1:e.length;return e.slice(t,n)}function Gk(e,t){let n=(e.toString().split(`.`)[1]||``).length,r=t.toString(),i=(r.split(`.`)[1]||``).length;if(i===0&&/\d?e-\d?/.test(r)){let e=r.match(/\d?e-(\d?)/);e?.[1]&&(i=Number.parseInt(e[1]))}let a=n>i?n:i;return Number.parseInt(e.toFixed(a).replace(`.`,``))%Number.parseInt(t.toFixed(a).replace(`.`,``))/10**a}var Kk=Symbol(`evaluating`);function qk(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==Kk)return r===void 0&&(r=Kk,r=n()),r},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function Jk(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function Yk(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Xk(...e){let t={};for(let n of e){let e=Object.getOwnPropertyDescriptors(n);Object.assign(t,e)}return Object.defineProperties({},t)}function Zk(e){return Xk(e._zod.def)}function Qk(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function $k(e){let t=Object.keys(e),n=t.map(t=>e[t]);return Promise.all(n).then(e=>{let n={};for(let r=0;r<t.length;r++)n[t[r]]=e[r];return n})}function eA(e=10){let t=``;for(let n=0;n<e;n++)t+=`abcdefghijklmnopqrstuvwxyz`[Math.floor(Math.random()*26)];return t}function tA(e){return JSON.stringify(e)}var nA=`captureStackTrace`in Error?Error.captureStackTrace:(...e)=>{};function rA(e){return typeof e==`object`&&!!e&&!Array.isArray(e)}var iA=Hk(()=>{if(typeof navigator<`u`&&navigator?.userAgent?.includes(`Cloudflare`))return!1;try{return Function(``),!0}catch{return!1}});function aA(e){if(rA(e)===!1)return!1;let t=e.constructor;if(t===void 0)return!0;let n=t.prototype;return!(rA(n)===!1||Object.prototype.hasOwnProperty.call(n,`isPrototypeOf`)===!1)}function oA(e){return aA(e)?{...e}:Array.isArray(e)?[...e]:e}function sA(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}var cA=e=>{let t=typeof e;switch(t){case`undefined`:return`undefined`;case`string`:return`string`;case`number`:return Number.isNaN(e)?`nan`:`number`;case`boolean`:return`boolean`;case`function`:return`function`;case`bigint`:return`bigint`;case`symbol`:return`symbol`;case`object`:return Array.isArray(e)?`array`:e===null?`null`:e.then&&typeof e.then==`function`&&e.catch&&typeof e.catch==`function`?`promise`:typeof Map<`u`&&e instanceof Map?`map`:typeof Set<`u`&&e instanceof Set?`set`:typeof Date<`u`&&e instanceof Date?`date`:typeof File<`u`&&e instanceof File?`file`:`object`;default:throw Error(`Unknown data type: ${t}`)}},lA=new Set([`string`,`number`,`symbol`]),uA=new Set([`string`,`number`,`bigint`,`boolean`,`symbol`,`undefined`]);function dA(e){return e.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`)}function fA(e,t,n){let r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function pA(e){let t=e;if(!t)return{};if(typeof t==`string`)return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error==`string`?{...t,error:()=>t.error}:t}function mA(e){let t;return new Proxy({},{get(n,r,i){return t??=e(),Reflect.get(t,r,i)},set(n,r,i,a){return t??=e(),Reflect.set(t,r,i,a)},has(n,r){return t??=e(),Reflect.has(t,r)},deleteProperty(n,r){return t??=e(),Reflect.deleteProperty(t,r)},ownKeys(n){return t??=e(),Reflect.ownKeys(t)},getOwnPropertyDescriptor(n,r){return t??=e(),Reflect.getOwnPropertyDescriptor(t,r)},defineProperty(n,r,i){return t??=e(),Reflect.defineProperty(t,r,i)}})}function hA(e){return typeof e==`bigint`?e.toString()+`n`:typeof e==`string`?`"${e}"`:`${e}`}function gA(e){return Object.keys(e).filter(t=>e[t]._zod.optin===`optional`&&e[t]._zod.optout===`optional`)}var _A={safeint:[-(2**53-1),2**53-1],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},vA={int64:[BigInt(`-9223372036854775808`),BigInt(`9223372036854775807`)],uint64:[BigInt(0),BigInt(`18446744073709551615`)]};function yA(e,t){let n=e._zod.def;return fA(e,Xk(e._zod.def,{get shape(){let e={};for(let r in t){if(!(r in n.shape))throw Error(`Unrecognized key: "${r}"`);t[r]&&(e[r]=n.shape[r])}return Yk(this,`shape`,e),e},checks:[]}))}function bA(e,t){let n=e._zod.def;return fA(e,Xk(e._zod.def,{get shape(){let r={...e._zod.def.shape};for(let e in t){if(!(e in n.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return Yk(this,`shape`,r),r},checks:[]}))}function xA(e,t){if(!aA(t))throw Error(`Invalid input to extend: expected a plain object`);let n=e._zod.def.checks;if(n&&n.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");return fA(e,Xk(e._zod.def,{get shape(){let n={...e._zod.def.shape,...t};return Yk(this,`shape`,n),n},checks:[]}))}function SA(e,t){if(!aA(t))throw Error(`Invalid input to safeExtend: expected a plain object`);return fA(e,{...e._zod.def,get shape(){let n={...e._zod.def.shape,...t};return Yk(this,`shape`,n),n},checks:e._zod.def.checks})}function CA(e,t){return fA(e,Xk(e._zod.def,{get shape(){let n={...e._zod.def.shape,...t._zod.def.shape};return Yk(this,`shape`,n),n},get catchall(){return t._zod.def.catchall},checks:[]}))}function wA(e,t,n){return fA(t,Xk(t._zod.def,{get shape(){let r=t._zod.def.shape,i={...r};if(n)for(let t in n){if(!(t in r))throw Error(`Unrecognized key: "${t}"`);n[t]&&(i[t]=e?new e({type:`optional`,innerType:r[t]}):r[t])}else for(let t in r)i[t]=e?new e({type:`optional`,innerType:r[t]}):r[t];return Yk(this,`shape`,i),i},checks:[]}))}function TA(e,t,n){return fA(t,Xk(t._zod.def,{get shape(){let r=t._zod.def.shape,i={...r};if(n)for(let t in n){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);n[t]&&(i[t]=new e({type:`nonoptional`,innerType:r[t]}))}else for(let t in r)i[t]=new e({type:`nonoptional`,innerType:r[t]});return Yk(this,`shape`,i),i},checks:[]}))}function EA(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function DA(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function OA(e){return typeof e==`string`?e:e?.message}function kA(e,t,n){let r={...e,path:e.path??[]};return e.message||(r.message=OA(e.inst?._zod.def?.error?.(e))??OA(t?.error?.(e))??OA(n.customError?.(e))??OA(n.localeError?.(e))??`Invalid input`),delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function AA(e){return e instanceof Set?`set`:e instanceof Map?`map`:e instanceof File?`file`:`unknown`}function jA(e){return Array.isArray(e)?`array`:typeof e==`string`?`string`:`unknown`}function MA(...e){let[t,n,r]=e;return typeof t==`string`?{message:t,code:`custom`,input:n,inst:r}:{...t}}function NA(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function PA(e){let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}function FA(e){let t=``;for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function IA(e){let t=e.replace(/-/g,`+`).replace(/_/g,`/`);return PA(t+`=`.repeat((4-t.length%4)%4))}function LA(e){return FA(e).replace(/\+/g,`-`).replace(/\//g,`_`).replace(/=/g,``)}function RA(e){let t=e.replace(/^0x/,``);if(t.length%2!=0)throw Error(`Invalid hex string length`);let n=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)n[e/2]=Number.parseInt(t.slice(e,e+2),16);return n}function zA(e){return Array.from(e).map(e=>e.toString(16).padStart(2,`0`)).join(``)}var BA=class{constructor(...e){}},VA=(e,t)=>{e.name=`$ZodError`,Object.defineProperty(e,`_zod`,{value:e._zod,enumerable:!1}),Object.defineProperty(e,`issues`,{value:t,enumerable:!1}),e.message=JSON.stringify(t,Vk,2),Object.defineProperty(e,`toString`,{value:()=>e.message,enumerable:!1})},HA=U(`$ZodError`,VA),UA=U(`$ZodError`,VA,{Parent:Error});function WA(e,t=e=>e.message){let n={},r=[];for(let i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}function GA(e,t){let n=t||function(e){return e.message},r={_errors:[]},i=e=>{for(let t of e.issues)if(t.code===`invalid_union`&&t.errors.length)t.errors.map(e=>i({issues:e}));else if(t.code===`invalid_key`)i({issues:t.issues});else if(t.code===`invalid_element`)i({issues:t.issues});else if(t.path.length===0)r._errors.push(n(t));else{let e=r,i=0;for(;i<t.path.length;){let r=t.path[i];i===t.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(n(t))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(e),r}var KA=e=>(t,n,r,i)=>{let a=r?Object.assign(r,{async:!1}):{async:!1},o=t._zod.run({value:n,issues:[]},a);if(o instanceof Promise)throw new kk;if(o.issues.length){let t=new(i?.Err??e)(o.issues.map(e=>kA(e,a,Mk())));throw nA(t,i?.callee),t}return o.value},qA=e=>async(t,n,r,i)=>{let a=r?Object.assign(r,{async:!0}):{async:!0},o=t._zod.run({value:n,issues:[]},a);if(o instanceof Promise&&(o=await o),o.issues.length){let t=new(i?.Err??e)(o.issues.map(e=>kA(e,a,Mk())));throw nA(t,i?.callee),t}return o.value},JA=e=>(t,n,r)=>{let i=r?{...r,async:!1}:{async:!1},a=t._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new kk;return a.issues.length?{success:!1,error:new(e??HA)(a.issues.map(e=>kA(e,i,Mk())))}:{success:!0,data:a.value}},YA=JA(UA),XA=e=>async(t,n,r)=>{let i=r?Object.assign(r,{async:!0}):{async:!0},a=t._zod.run({value:n,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(e=>kA(e,i,Mk())))}:{success:!0,data:a.value}},ZA=XA(UA),QA=e=>(t,n,r)=>{let i=r?Object.assign(r,{direction:`backward`}):{direction:`backward`};return KA(e)(t,n,i)},$A=e=>(t,n,r)=>KA(e)(t,n,r),ej=e=>async(t,n,r)=>{let i=r?Object.assign(r,{direction:`backward`}):{direction:`backward`};return qA(e)(t,n,i)},tj=e=>async(t,n,r)=>qA(e)(t,n,r),nj=e=>(t,n,r)=>{let i=r?Object.assign(r,{direction:`backward`}):{direction:`backward`};return JA(e)(t,n,i)},rj=e=>(t,n,r)=>JA(e)(t,n,r),ij=e=>async(t,n,r)=>{let i=r?Object.assign(r,{direction:`backward`}):{direction:`backward`};return XA(e)(t,n,i)},aj=e=>async(t,n,r)=>XA(e)(t,n,r),oj=/^[cC][^\s-]{8,}$/,sj=/^[0-9a-z]+$/,cj=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,lj=/^[0-9a-vA-V]{20}$/,uj=/^[A-Za-z0-9]{27}$/,dj=/^[a-zA-Z0-9_-]{21}$/,fj=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,pj=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,mj=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,hj=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,gj=`^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$`;function _j(){return new RegExp(gj,`u`)}var vj=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,yj=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,bj=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,xj=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Sj=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Cj=/^[A-Za-z0-9_-]*$/,wj=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Tj=/^\+(?:[0-9]){6,14}[0-9]$/,Ej=`(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))`,Dj=RegExp(`^${Ej}$`);function Oj(e){let t=`(?:[01]\\d|2[0-3]):[0-5]\\d`;return typeof e.precision==`number`?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function kj(e){return RegExp(`^${Oj(e)}$`)}function Aj(e){let t=Oj({precision:e.precision}),n=[`Z`];e.local&&n.push(``),e.offset&&n.push(`([+-](?:[01]\\d|2[0-3]):[0-5]\\d)`);let r=`${t}(?:${n.join(`|`)})`;return RegExp(`^${Ej}T(?:${r})$`)}var jj=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??``}}`:`[\\s\\S]*`;return RegExp(`^${t}$`)},Mj=/^-?\d+n?$/,Nj=/^-?\d+$/,Pj=/^-?\d+(?:\.\d+)?/,Fj=/^(?:true|false)$/i,Ij=/^null$/i,Lj=/^undefined$/i,Rj=/^[^A-Z]*$/,zj=/^[^a-z]*$/,Bj=U(`$ZodCheck`,(e,t)=>{var n;e._zod??={},e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Vj={number:`number`,bigint:`bigint`,object:`date`},Hj=U(`$ZodCheckLessThan`,(e,t)=>{Bj.init(e,t);let n=Vj[typeof t.value];e._zod.onattach.push(e=>{let n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??1/0;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:`too_big`,maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Uj=U(`$ZodCheckGreaterThan`,(e,t)=>{Bj.init(e,t);let n=Vj[typeof t.value];e._zod.onattach.push(e=>{let n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??-1/0;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:`too_small`,minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Wj=U(`$ZodCheckMultipleOf`,(e,t)=>{Bj.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw Error(`Cannot mix number and bigint in multiple_of check.`);(typeof n.value==`bigint`?n.value%t.value===BigInt(0):Gk(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:`not_multiple_of`,divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Gj=U(`$ZodCheckNumberFormat`,(e,t)=>{Bj.init(e,t),t.format=t.format||`float64`;let n=t.format?.includes(`int`),r=n?`int`:`number`,[i,a]=_A[t.format];e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,r.minimum=i,r.maximum=a,n&&(r.pattern=Nj)}),e._zod.check=o=>{let s=o.value;if(n){if(!Number.isInteger(s)){o.issues.push({expected:r,format:t.format,code:`invalid_type`,continue:!1,input:s,inst:e});return}if(!Number.isSafeInteger(s)){s>0?o.issues.push({input:s,code:`too_big`,maximum:2**53-1,note:`Integers must be within the safe integer range.`,inst:e,origin:r,continue:!t.abort}):o.issues.push({input:s,code:`too_small`,minimum:-(2**53-1),note:`Integers must be within the safe integer range.`,inst:e,origin:r,continue:!t.abort});return}}s<i&&o.issues.push({origin:`number`,input:s,code:`too_small`,minimum:i,inclusive:!0,inst:e,continue:!t.abort}),s>a&&o.issues.push({origin:`number`,input:s,code:`too_big`,maximum:a,inst:e})}}),Kj=U(`$ZodCheckMaxLength`,(e,t)=>{var n;Bj.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!Uk(t)&&t.length!==void 0}),e._zod.onattach.push(e=>{let n=e._zod.bag.maximum??1/0;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{let r=n.value;if(r.length<=t.maximum)return;let i=jA(r);n.issues.push({origin:i,code:`too_big`,maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),qj=U(`$ZodCheckMinLength`,(e,t)=>{var n;Bj.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!Uk(t)&&t.length!==void 0}),e._zod.onattach.push(e=>{let n=e._zod.bag.minimum??-1/0;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{let r=n.value;if(r.length>=t.minimum)return;let i=jA(r);n.issues.push({origin:i,code:`too_small`,minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Jj=U(`$ZodCheckLengthEquals`,(e,t)=>{var n;Bj.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!Uk(t)&&t.length!==void 0}),e._zod.onattach.push(e=>{let n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{let r=n.value,i=r.length;if(i===t.length)return;let a=jA(r),o=i>t.length;n.issues.push({origin:a,...o?{code:`too_big`,maximum:t.length}:{code:`too_small`,minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Yj=U(`$ZodCheckStringFormat`,(e,t)=>{var n,r;Bj.init(e,t),e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??=new Set,n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:`string`,code:`invalid_format`,format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),Xj=U(`$ZodCheckRegex`,(e,t)=>{Yj.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:`string`,code:`invalid_format`,format:`regex`,input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Zj=U(`$ZodCheckLowerCase`,(e,t)=>{t.pattern??=Rj,Yj.init(e,t)}),Qj=U(`$ZodCheckUpperCase`,(e,t)=>{t.pattern??=zj,Yj.init(e,t)}),$j=U(`$ZodCheckIncludes`,(e,t)=>{Bj.init(e,t);let n=dA(t.includes),r=new RegExp(typeof t.position==`number`?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??=new Set,t.patterns.add(r)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:`string`,code:`invalid_format`,format:`includes`,includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),eM=U(`$ZodCheckStartsWith`,(e,t)=>{Bj.init(e,t);let n=RegExp(`^${dA(t.prefix)}.*`);t.pattern??=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??=new Set,t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:`string`,code:`invalid_format`,format:`starts_with`,prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),tM=U(`$ZodCheckEndsWith`,(e,t)=>{Bj.init(e,t);let n=RegExp(`.*${dA(t.suffix)}$`);t.pattern??=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??=new Set,t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:`string`,code:`invalid_format`,format:`ends_with`,suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),nM=U(`$ZodCheckOverwrite`,(e,t)=>{Bj.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}}),rM=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),--this.indent}write(e){if(typeof e==`function`){e(this,{execution:`sync`}),e(this,{execution:`async`});return}let t=e.split(`
`).filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),r=t.map(e=>e.slice(n)).map(e=>` `.repeat(this.indent*2)+e);for(let e of r)this.content.push(e)}compile(){let e=Function,t=this?.args,n=[...(this?.content??[``]).map(e=>`  ${e}`)];return new e(...t,n.join(`
`))}},iM={major:4,minor:1,patch:8},aM=U(`$ZodType`,(e,t)=>{var n;e??={},e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=iM;let r=[...e._zod.def.checks??[]];e._zod.traits.has(`$ZodCheck`)&&r.unshift(e);for(let t of r)for(let n of t._zod.onattach)n(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,n)=>{let r=EA(e),i;for(let a of t){if(a._zod.def.when){if(!a._zod.def.when(e))continue}else if(r)continue;let t=e.issues.length,o=a._zod.check(e);if(o instanceof Promise&&n?.async===!1)throw new kk;if(i||o instanceof Promise)i=(i??Promise.resolve()).then(async()=>{await o,e.issues.length!==t&&(r||=EA(e,t))});else{if(e.issues.length===t)continue;r||=EA(e,t)}}return i?i.then(()=>e):e},n=(n,i,a)=>{if(EA(n))return n.aborted=!0,n;let o=t(i,r,a);if(o instanceof Promise){if(a.async===!1)throw new kk;return o.then(t=>e._zod.parse(t,a))}return e._zod.parse(o,a)};e._zod.run=(i,a)=>{if(a.skipChecks)return e._zod.parse(i,a);if(a.direction===`backward`){let t=e._zod.parse({value:i.value,issues:[]},{...a,skipChecks:!0});return t instanceof Promise?t.then(e=>n(e,i,a)):n(t,i,a)}let o=e._zod.parse(i,a);if(o instanceof Promise){if(a.async===!1)throw new kk;return o.then(e=>t(e,r,a))}return t(o,r,a)}}e[`~standard`]={validate:t=>{try{let n=YA(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch{return ZA(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:`zod`,version:1}}),oM=U(`$ZodString`,(e,t)=>{aM.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??jj(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value==`string`||n.issues.push({expected:`string`,code:`invalid_type`,input:n.value,inst:e}),n}}),sM=U(`$ZodStringFormat`,(e,t)=>{Yj.init(e,t),oM.init(e,t)}),cM=U(`$ZodGUID`,(e,t)=>{t.pattern??=pj,sM.init(e,t)}),lM=U(`$ZodUUID`,(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(e===void 0)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??=mj(e)}else t.pattern??=mj();sM.init(e,t)}),uM=U(`$ZodEmail`,(e,t)=>{t.pattern??=hj,sM.init(e,t)}),dM=U(`$ZodURL`,(e,t)=>{sM.init(e,t),e._zod.check=n=>{try{let r=n.value.trim(),i=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:`invalid_format`,format:`url`,note:`Invalid hostname`,pattern:wj.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(`:`)?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:`invalid_format`,format:`url`,note:`Invalid protocol`,pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:`invalid_format`,format:`url`,input:n.value,inst:e,continue:!t.abort})}}}),fM=U(`$ZodEmoji`,(e,t)=>{t.pattern??=_j(),sM.init(e,t)}),pM=U(`$ZodNanoID`,(e,t)=>{t.pattern??=dj,sM.init(e,t)}),mM=U(`$ZodCUID`,(e,t)=>{t.pattern??=oj,sM.init(e,t)}),hM=U(`$ZodCUID2`,(e,t)=>{t.pattern??=sj,sM.init(e,t)}),gM=U(`$ZodULID`,(e,t)=>{t.pattern??=cj,sM.init(e,t)}),_M=U(`$ZodXID`,(e,t)=>{t.pattern??=lj,sM.init(e,t)}),vM=U(`$ZodKSUID`,(e,t)=>{t.pattern??=uj,sM.init(e,t)}),yM=U(`$ZodISODateTime`,(e,t)=>{t.pattern??=Aj(t),sM.init(e,t)}),bM=U(`$ZodISODate`,(e,t)=>{t.pattern??=Dj,sM.init(e,t)}),xM=U(`$ZodISOTime`,(e,t)=>{t.pattern??=kj(t),sM.init(e,t)}),SM=U(`$ZodISODuration`,(e,t)=>{t.pattern??=fj,sM.init(e,t)}),CM=U(`$ZodIPv4`,(e,t)=>{t.pattern??=vj,sM.init(e,t),e._zod.onattach.push(e=>{let t=e._zod.bag;t.format=`ipv4`})}),wM=U(`$ZodIPv6`,(e,t)=>{t.pattern??=yj,sM.init(e,t),e._zod.onattach.push(e=>{let t=e._zod.bag;t.format=`ipv6`}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:`invalid_format`,format:`ipv6`,input:n.value,inst:e,continue:!t.abort})}}}),TM=U(`$ZodCIDRv4`,(e,t)=>{t.pattern??=bj,sM.init(e,t)}),EM=U(`$ZodCIDRv6`,(e,t)=>{t.pattern??=xj,sM.init(e,t),e._zod.check=n=>{let r=n.value.split(`/`);try{if(r.length!==2)throw Error();let[e,t]=r;if(!t)throw Error();let n=Number(t);if(`${n}`!==t||n<0||n>128)throw Error();new URL(`http://[${e}]`)}catch{n.issues.push({code:`invalid_format`,format:`cidrv6`,input:n.value,inst:e,continue:!t.abort})}}});function DM(e){if(e===``)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}var OM=U(`$ZodBase64`,(e,t)=>{t.pattern??=Sj,sM.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding=`base64`}),e._zod.check=n=>{DM(n.value)||n.issues.push({code:`invalid_format`,format:`base64`,input:n.value,inst:e,continue:!t.abort})}});function kM(e){if(!Cj.test(e))return!1;let t=e.replace(/[-_]/g,e=>e===`-`?`+`:`/`);return DM(t.padEnd(Math.ceil(t.length/4)*4,`=`))}var AM=U(`$ZodBase64URL`,(e,t)=>{t.pattern??=Cj,sM.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding=`base64url`}),e._zod.check=n=>{kM(n.value)||n.issues.push({code:`invalid_format`,format:`base64url`,input:n.value,inst:e,continue:!t.abort})}}),jM=U(`$ZodE164`,(e,t)=>{t.pattern??=Tj,sM.init(e,t)});function MM(e,t=null){try{let n=e.split(`.`);if(n.length!==3)return!1;let[r]=n;if(!r)return!1;let i=JSON.parse(atob(r));return!(`typ`in i&&i?.typ!==`JWT`||!i.alg||t&&(!(`alg`in i)||i.alg!==t))}catch{return!1}}var NM=U(`$ZodJWT`,(e,t)=>{sM.init(e,t),e._zod.check=n=>{MM(n.value,t.alg)||n.issues.push({code:`invalid_format`,format:`jwt`,input:n.value,inst:e,continue:!t.abort})}}),PM=U(`$ZodNumber`,(e,t)=>{aM.init(e,t),e._zod.pattern=e._zod.bag.pattern??Pj,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}let i=n.value;if(typeof i==`number`&&!Number.isNaN(i)&&Number.isFinite(i))return n;let a=typeof i==`number`?Number.isNaN(i)?`NaN`:Number.isFinite(i)?void 0:`Infinity`:void 0;return n.issues.push({expected:`number`,code:`invalid_type`,input:i,inst:e,...a?{received:a}:{}}),n}}),FM=U(`$ZodNumber`,(e,t)=>{Gj.init(e,t),PM.init(e,t)}),IM=U(`$ZodBoolean`,(e,t)=>{aM.init(e,t),e._zod.pattern=Fj,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}let i=n.value;return typeof i==`boolean`||n.issues.push({expected:`boolean`,code:`invalid_type`,input:i,inst:e}),n}}),LM=U(`$ZodBigInt`,(e,t)=>{aM.init(e,t),e._zod.pattern=Mj,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=BigInt(n.value)}catch{}return typeof n.value==`bigint`||n.issues.push({expected:`bigint`,code:`invalid_type`,input:n.value,inst:e}),n}}),RM=U(`$ZodSymbol`,(e,t)=>{aM.init(e,t),e._zod.parse=(t,n)=>{let r=t.value;return typeof r==`symbol`||t.issues.push({expected:`symbol`,code:`invalid_type`,input:r,inst:e}),t}}),zM=U(`$ZodUndefined`,(e,t)=>{aM.init(e,t),e._zod.pattern=Lj,e._zod.values=new Set([void 0]),e._zod.optin=`optional`,e._zod.optout=`optional`,e._zod.parse=(t,n)=>{let r=t.value;return r===void 0||t.issues.push({expected:`undefined`,code:`invalid_type`,input:r,inst:e}),t}}),BM=U(`$ZodNull`,(e,t)=>{aM.init(e,t),e._zod.pattern=Ij,e._zod.values=new Set([null]),e._zod.parse=(t,n)=>{let r=t.value;return r===null||t.issues.push({expected:`null`,code:`invalid_type`,input:r,inst:e}),t}}),VM=U(`$ZodAny`,(e,t)=>{aM.init(e,t),e._zod.parse=e=>e}),HM=U(`$ZodUnknown`,(e,t)=>{aM.init(e,t),e._zod.parse=e=>e}),UM=U(`$ZodNever`,(e,t)=>{aM.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:`never`,code:`invalid_type`,input:t.value,inst:e}),t)}),WM=U(`$ZodVoid`,(e,t)=>{aM.init(e,t),e._zod.parse=(t,n)=>{let r=t.value;return r===void 0||t.issues.push({expected:`void`,code:`invalid_type`,input:r,inst:e}),t}}),GM=U(`$ZodDate`,(e,t)=>{aM.init(e,t),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=new Date(n.value)}catch{}let i=n.value,a=i instanceof Date;return a&&!Number.isNaN(i.getTime())||n.issues.push({expected:`date`,code:`invalid_type`,input:i,...a?{received:`Invalid Date`}:{},inst:e}),n}});function KM(e,t,n){e.issues.length&&t.issues.push(...DA(n,e.issues)),t.value[n]=e.value}var qM=U(`$ZodArray`,(e,t)=>{aM.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;if(!Array.isArray(i))return n.issues.push({expected:`array`,code:`invalid_type`,input:i,inst:e}),n;n.value=Array(i.length);let a=[];for(let e=0;e<i.length;e++){let o=i[e],s=t.element._zod.run({value:o,issues:[]},r);s instanceof Promise?a.push(s.then(t=>KM(t,n,e))):KM(s,n,e)}return a.length?Promise.all(a).then(()=>n):n}});function JM(e,t,n,r){e.issues.length&&t.issues.push(...DA(n,e.issues)),e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function YM(e){let t=Object.keys(e.shape);for(let n of t)if(!e.shape?.[n]?._zod?.traits?.has(`$ZodType`))throw Error(`Invalid element at key "${n}": expected a Zod schema`);let n=gA(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function XM(e,t,n,r,i,a){let o=[],s=i.keySet,c=i.catchall._zod,l=c.def.type;for(let i of Object.keys(t)){if(s.has(i))continue;if(l===`never`){o.push(i);continue}let a=c.run({value:t[i],issues:[]},r);a instanceof Promise?e.push(a.then(e=>JM(e,n,i,t))):JM(a,n,i,t)}return o.length&&n.issues.push({code:`unrecognized_keys`,keys:o,input:t,inst:a}),e.length?Promise.all(e).then(()=>n):n}var ZM=U(`$ZodObject`,(e,t)=>{aM.init(e,t);let n=Hk(()=>YM(t));qk(e._zod,`propValues`,()=>{let e=t.shape,n={};for(let t in e){let r=e[t]._zod;if(r.values){n[t]??(n[t]=new Set);for(let e of r.values)n[t].add(e)}}return n});let r=rA,i=t.catchall,a;e._zod.parse=(t,o)=>{a??=n.value;let s=t.value;if(!r(s))return t.issues.push({expected:`object`,code:`invalid_type`,input:s,inst:e}),t;t.value={};let c=[],l=a.shape;for(let e of a.keys){let n=l[e]._zod.run({value:s[e],issues:[]},o);n instanceof Promise?c.push(n.then(n=>JM(n,t,e,s))):JM(n,t,e,s)}return i?XM(c,s,t,o,n.value,e):c.length?Promise.all(c).then(()=>t):t}}),QM=U(`$ZodObjectJIT`,(e,t)=>{ZM.init(e,t);let n=e._zod.parse,r=Hk(()=>YM(t)),i=e=>{let t=new rM([`shape`,`payload`,`ctx`]),n=r.value,i=e=>{let t=tA(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write(`const input = payload.value;`);let a=Object.create(null),o=0;for(let e of n.keys)a[e]=`key_${o++}`;t.write(`const newResult = {};`);for(let e of n.keys){let n=a[e],r=tA(e);t.write(`const ${n} = ${i(e)};`),t.write(`
        if (${n}.issues.length) {
          payload.issues = payload.issues.concat(${n}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${r}, ...iss.path] : [${r}]
          })));
        }
        
        
        if (${n}.value === undefined) {
          if (${r} in input) {
            newResult[${r}] = undefined;
          }
        } else {
          newResult[${r}] = ${n}.value;
        }
        
      `)}t.write(`payload.value = newResult;`),t.write(`return payload;`);let s=t.compile();return(t,n)=>s(e,t,n)},a,o=rA,s=!jk.jitless,c=s&&iA.value,l=t.catchall,u;e._zod.parse=(d,f)=>{u??=r.value;let p=d.value;return o(p)?s&&c&&f?.async===!1&&f.jitless!==!0?(a||=i(t.shape),d=a(d,f),l?XM([],p,d,f,u,e):d):n(d,f):(d.issues.push({expected:`object`,code:`invalid_type`,input:p,inst:e}),d)}});function $M(e,t,n,r){for(let n of e)if(n.issues.length===0)return t.value=n.value,t;let i=e.filter(e=>!EA(e));return i.length===1?(t.value=i[0].value,i[0]):(t.issues.push({code:`invalid_union`,input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>kA(e,r,Mk())))}),t)}var eN=U(`$ZodUnion`,(e,t)=>{aM.init(e,t),qk(e._zod,`optin`,()=>t.options.some(e=>e._zod.optin===`optional`)?`optional`:void 0),qk(e._zod,`optout`,()=>t.options.some(e=>e._zod.optout===`optional`)?`optional`:void 0),qk(e._zod,`values`,()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),qk(e._zod,`pattern`,()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>Wk(e.source)).join(`|`)})$`)}});let n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(i,a)=>{if(n)return r(i,a);let o=!1,s=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},a);if(t instanceof Promise)s.push(t),o=!0;else{if(t.issues.length===0)return t;s.push(t)}}return o?Promise.all(s).then(t=>$M(t,i,e,a)):$M(s,i,e,a)}}),tN=U(`$ZodDiscriminatedUnion`,(e,t)=>{eN.init(e,t);let n=e._zod.parse;qk(e._zod,`propValues`,()=>{let e={};for(let n of t.options){let r=n._zod.propValues;if(!r||Object.keys(r).length===0)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(let[t,n]of Object.entries(r)){e[t]||(e[t]=new Set);for(let r of n)e[t].add(r)}}return e});let r=Hk(()=>{let e=t.options,n=new Map;for(let r of e){let e=r._zod.propValues?.[t.discriminator];if(!e||e.size===0)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let t of e){if(n.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);n.set(t,r)}}return n});e._zod.parse=(i,a)=>{let o=i.value;if(!rA(o))return i.issues.push({code:`invalid_type`,expected:`object`,input:o,inst:e}),i;let s=r.value.get(o?.[t.discriminator]);return s?s._zod.run(i,a):t.unionFallback?n(i,a):(i.issues.push({code:`invalid_union`,errors:[],note:`No matching discriminator`,discriminator:t.discriminator,input:o,path:[t.discriminator],inst:e}),i)}}),nN=U(`$ZodIntersection`,(e,t)=>{aM.init(e,t),e._zod.parse=(e,n)=>{let r=e.value,i=t.left._zod.run({value:r,issues:[]},n),a=t.right._zod.run({value:r,issues:[]},n);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([t,n])=>iN(e,t,n)):iN(e,i,a)}});function rN(e,t){if(e===t||e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(aA(e)&&aA(t)){let n=Object.keys(t),r=Object.keys(e).filter(e=>n.indexOf(e)!==-1),i={...e,...t};for(let n of r){let r=rN(e[n],t[n]);if(!r.valid)return{valid:!1,mergeErrorPath:[n,...r.mergeErrorPath]};i[n]=r.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let r=0;r<e.length;r++){let i=e[r],a=t[r],o=rN(i,a);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function iN(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),EA(e))return e;let r=rN(t.value,n.value);if(!r.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}var aN=U(`$ZodTuple`,(e,t)=>{aM.init(e,t);let n=t.items,r=n.length-[...n].reverse().findIndex(e=>e._zod.optin!==`optional`);e._zod.parse=(i,a)=>{let o=i.value;if(!Array.isArray(o))return i.issues.push({input:o,inst:e,expected:`tuple`,code:`invalid_type`}),i;i.value=[];let s=[];if(!t.rest){let t=o.length>n.length,a=o.length<r-1;if(t||a)return i.issues.push({...t?{code:`too_big`,maximum:n.length}:{code:`too_small`,minimum:n.length},input:o,inst:e,origin:`array`}),i}let c=-1;for(let e of n){if(c++,c>=o.length&&c>=r)continue;let t=e._zod.run({value:o[c],issues:[]},a);t instanceof Promise?s.push(t.then(e=>oN(e,i,c))):oN(t,i,c)}if(t.rest){let e=o.slice(n.length);for(let n of e){c++;let e=t.rest._zod.run({value:n,issues:[]},a);e instanceof Promise?s.push(e.then(e=>oN(e,i,c))):oN(e,i,c)}}return s.length?Promise.all(s).then(()=>i):i}});function oN(e,t,n){e.issues.length&&t.issues.push(...DA(n,e.issues)),t.value[n]=e.value}var sN=U(`$ZodRecord`,(e,t)=>{aM.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;if(!aA(i))return n.issues.push({expected:`record`,code:`invalid_type`,input:i,inst:e}),n;let a=[];if(t.keyType._zod.values){let o=t.keyType._zod.values;n.value={};for(let e of o)if(typeof e==`string`||typeof e==`number`||typeof e==`symbol`){let o=t.valueType._zod.run({value:i[e],issues:[]},r);o instanceof Promise?a.push(o.then(t=>{t.issues.length&&n.issues.push(...DA(e,t.issues)),n.value[e]=t.value})):(o.issues.length&&n.issues.push(...DA(e,o.issues)),n.value[e]=o.value)}let s;for(let e in i)o.has(e)||(s??=[],s.push(e));s&&s.length>0&&n.issues.push({code:`unrecognized_keys`,input:i,inst:e,keys:s})}else{n.value={};for(let o of Reflect.ownKeys(i)){if(o===`__proto__`)continue;let s=t.keyType._zod.run({value:o,issues:[]},r);if(s instanceof Promise)throw Error(`Async schemas not supported in object keys currently`);if(s.issues.length){n.issues.push({code:`invalid_key`,origin:`record`,issues:s.issues.map(e=>kA(e,r,Mk())),input:o,path:[o],inst:e}),n.value[s.value]=s.value;continue}let c=t.valueType._zod.run({value:i[o],issues:[]},r);c instanceof Promise?a.push(c.then(e=>{e.issues.length&&n.issues.push(...DA(o,e.issues)),n.value[s.value]=e.value})):(c.issues.length&&n.issues.push(...DA(o,c.issues)),n.value[s.value]=c.value)}}return a.length?Promise.all(a).then(()=>n):n}}),cN=U(`$ZodEnum`,(e,t)=>{aM.init(e,t);let n=zk(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=RegExp(`^(${n.filter(e=>lA.has(typeof e)).map(e=>typeof e==`string`?dA(e):e.toString()).join(`|`)})$`),e._zod.parse=(t,i)=>{let a=t.value;return r.has(a)||t.issues.push({code:`invalid_value`,values:n,input:a,inst:e}),t}}),lN=U(`$ZodLiteral`,(e,t)=>{if(aM.init(e,t),t.values.length===0)throw Error(`Cannot create literal schema with no valid values`);e._zod.values=new Set(t.values),e._zod.pattern=RegExp(`^(${t.values.map(e=>typeof e==`string`?dA(e):e?dA(e.toString()):String(e)).join(`|`)})$`),e._zod.parse=(n,r)=>{let i=n.value;return e._zod.values.has(i)||n.issues.push({code:`invalid_value`,values:t.values,input:i,inst:e}),n}}),uN=U(`$ZodTransform`,(e,t)=>{aM.init(e,t),e._zod.parse=(n,r)=>{if(r.direction===`backward`)throw new Ak(e.constructor.name);let i=t.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(e=>(n.value=e,n));if(i instanceof Promise)throw new kk;return n.value=i,n}});function dN(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}var fN=U(`$ZodOptional`,(e,t)=>{aM.init(e,t),e._zod.optin=`optional`,e._zod.optout=`optional`,qk(e._zod,`values`,()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),qk(e._zod,`pattern`,()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${Wk(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>{if(t.innerType._zod.optin===`optional`){let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(t=>dN(t,e.value)):dN(r,e.value)}return e.value===void 0?e:t.innerType._zod.run(e,n)}}),pN=U(`$ZodNullable`,(e,t)=>{aM.init(e,t),qk(e._zod,`optin`,()=>t.innerType._zod.optin),qk(e._zod,`optout`,()=>t.innerType._zod.optout),qk(e._zod,`pattern`,()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${Wk(e.source)}|null)$`):void 0}),qk(e._zod,`values`,()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>e.value===null?e:t.innerType._zod.run(e,n)}),mN=U(`$ZodDefault`,(e,t)=>{aM.init(e,t),e._zod.optin=`optional`,qk(e._zod,`values`,()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if(n.direction===`backward`)return t.innerType._zod.run(e,n);if(e.value===void 0)return e.value=t.defaultValue,e;let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(e=>hN(e,t)):hN(r,t)}});function hN(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}var gN=U(`$ZodPrefault`,(e,t)=>{aM.init(e,t),e._zod.optin=`optional`,qk(e._zod,`values`,()=>t.innerType._zod.values),e._zod.parse=(e,n)=>(n.direction===`backward`||e.value===void 0&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),_N=U(`$ZodNonOptional`,(e,t)=>{aM.init(e,t),qk(e._zod,`values`,()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>e!==void 0)):void 0}),e._zod.parse=(n,r)=>{let i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(t=>vN(t,e)):vN(i,e)}});function vN(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:`invalid_type`,expected:`nonoptional`,input:e.value,inst:t}),e}var yN=U(`$ZodCatch`,(e,t)=>{aM.init(e,t),qk(e._zod,`optin`,()=>t.innerType._zod.optin),qk(e._zod,`optout`,()=>t.innerType._zod.optout),qk(e._zod,`values`,()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if(n.direction===`backward`)return t.innerType._zod.run(e,n);let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>kA(e,n,Mk()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>kA(e,n,Mk()))},input:e.value}),e.issues=[]),e)}}),bN=U(`$ZodPipe`,(e,t)=>{aM.init(e,t),qk(e._zod,`values`,()=>t.in._zod.values),qk(e._zod,`optin`,()=>t.in._zod.optin),qk(e._zod,`optout`,()=>t.out._zod.optout),qk(e._zod,`propValues`,()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{if(n.direction===`backward`){let r=t.out._zod.run(e,n);return r instanceof Promise?r.then(e=>xN(e,t.in,n)):xN(r,t.in,n)}let r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>xN(e,t.out,n)):xN(r,t.out,n)}});function xN(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}var SN=U(`$ZodReadonly`,(e,t)=>{aM.init(e,t),qk(e._zod,`propValues`,()=>t.innerType._zod.propValues),qk(e._zod,`values`,()=>t.innerType._zod.values),qk(e._zod,`optin`,()=>t.innerType._zod.optin),qk(e._zod,`optout`,()=>t.innerType._zod.optout),e._zod.parse=(e,n)=>{if(n.direction===`backward`)return t.innerType._zod.run(e,n);let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(CN):CN(r)}});function CN(e){return e.value=Object.freeze(e.value),e}var wN=U(`$ZodPromise`,(e,t)=>{aM.init(e,t),e._zod.parse=(e,n)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},n))}),TN=U(`$ZodCustom`,(e,t)=>{Bj.init(e,t),aM.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{let r=n.value,i=t.fn(r);if(i instanceof Promise)return i.then(t=>EN(t,n,r,e));EN(i,n,r,e)}});function EN(e,t,n,r){if(!e){let e={code:`custom`,input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(MA(e))}}var DN=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let n=t[0];if(this._map.set(e,n),n&&typeof n==`object`&&`id`in n){if(this._idmap.has(n.id))throw Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&typeof t==`object`&&`id`in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let n={...this.get(t)??{}};delete n.id;let r={...n,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};function ON(){return new DN}var kN=ON();function AN(e,t){return new e({type:`string`,...pA(t)})}function jN(e,t){return new e({type:`string`,format:`email`,check:`string_format`,abort:!1,...pA(t)})}function MN(e,t){return new e({type:`string`,format:`guid`,check:`string_format`,abort:!1,...pA(t)})}function NN(e,t){return new e({type:`string`,format:`uuid`,check:`string_format`,abort:!1,...pA(t)})}function PN(e,t){return new e({type:`string`,format:`uuid`,check:`string_format`,abort:!1,version:`v4`,...pA(t)})}function FN(e,t){return new e({type:`string`,format:`uuid`,check:`string_format`,abort:!1,version:`v6`,...pA(t)})}function IN(e,t){return new e({type:`string`,format:`uuid`,check:`string_format`,abort:!1,version:`v7`,...pA(t)})}function LN(e,t){return new e({type:`string`,format:`url`,check:`string_format`,abort:!1,...pA(t)})}function RN(e,t){return new e({type:`string`,format:`emoji`,check:`string_format`,abort:!1,...pA(t)})}function zN(e,t){return new e({type:`string`,format:`nanoid`,check:`string_format`,abort:!1,...pA(t)})}function BN(e,t){return new e({type:`string`,format:`cuid`,check:`string_format`,abort:!1,...pA(t)})}function VN(e,t){return new e({type:`string`,format:`cuid2`,check:`string_format`,abort:!1,...pA(t)})}function HN(e,t){return new e({type:`string`,format:`ulid`,check:`string_format`,abort:!1,...pA(t)})}function UN(e,t){return new e({type:`string`,format:`xid`,check:`string_format`,abort:!1,...pA(t)})}function WN(e,t){return new e({type:`string`,format:`ksuid`,check:`string_format`,abort:!1,...pA(t)})}function GN(e,t){return new e({type:`string`,format:`ipv4`,check:`string_format`,abort:!1,...pA(t)})}function KN(e,t){return new e({type:`string`,format:`ipv6`,check:`string_format`,abort:!1,...pA(t)})}function qN(e,t){return new e({type:`string`,format:`cidrv4`,check:`string_format`,abort:!1,...pA(t)})}function JN(e,t){return new e({type:`string`,format:`cidrv6`,check:`string_format`,abort:!1,...pA(t)})}function YN(e,t){return new e({type:`string`,format:`base64`,check:`string_format`,abort:!1,...pA(t)})}function XN(e,t){return new e({type:`string`,format:`base64url`,check:`string_format`,abort:!1,...pA(t)})}function ZN(e,t){return new e({type:`string`,format:`e164`,check:`string_format`,abort:!1,...pA(t)})}function QN(e,t){return new e({type:`string`,format:`jwt`,check:`string_format`,abort:!1,...pA(t)})}function $N(e,t){return new e({type:`string`,format:`datetime`,check:`string_format`,offset:!1,local:!1,precision:null,...pA(t)})}function eP(e,t){return new e({type:`string`,format:`date`,check:`string_format`,...pA(t)})}function tP(e,t){return new e({type:`string`,format:`time`,check:`string_format`,precision:null,...pA(t)})}function nP(e,t){return new e({type:`string`,format:`duration`,check:`string_format`,...pA(t)})}function rP(e,t){return new e({type:`number`,check:`number_format`,abort:!1,format:`safeint`,...pA(t)})}function iP(e){return new e({type:`unknown`})}function aP(e,t){return new e({type:`never`,...pA(t)})}function oP(e,t){return new Hj({check:`less_than`,...pA(t),value:e,inclusive:!1})}function sP(e,t){return new Hj({check:`less_than`,...pA(t),value:e,inclusive:!0})}function cP(e,t){return new Uj({check:`greater_than`,...pA(t),value:e,inclusive:!1})}function lP(e,t){return new Uj({check:`greater_than`,...pA(t),value:e,inclusive:!0})}function uP(e,t){return new Wj({check:`multiple_of`,...pA(t),value:e})}function dP(e,t){return new Kj({check:`max_length`,...pA(t),maximum:e})}function fP(e,t){return new qj({check:`min_length`,...pA(t),minimum:e})}function pP(e,t){return new Jj({check:`length_equals`,...pA(t),length:e})}function mP(e,t){return new Xj({check:`string_format`,format:`regex`,...pA(t),pattern:e})}function hP(e){return new Zj({check:`string_format`,format:`lowercase`,...pA(e)})}function gP(e){return new Qj({check:`string_format`,format:`uppercase`,...pA(e)})}function _P(e,t){return new $j({check:`string_format`,format:`includes`,...pA(t),includes:e})}function vP(e,t){return new eM({check:`string_format`,format:`starts_with`,...pA(t),prefix:e})}function yP(e,t){return new tM({check:`string_format`,format:`ends_with`,...pA(t),suffix:e})}function bP(e){return new nM({check:`overwrite`,tx:e})}function xP(e){return bP(t=>t.normalize(e))}function SP(){return bP(e=>e.trim())}function CP(){return bP(e=>e.toLowerCase())}function wP(){return bP(e=>e.toUpperCase())}function TP(e,t,n){return new e({type:`array`,element:t,...pA(n)})}function EP(e,t,n){return new e({type:`custom`,check:`custom`,fn:t,...pA(n)})}function DP(e){let t=OP(n=>(n.addIssue=e=>{if(typeof e==`string`)n.issues.push(MA(e,n.value,t._zod.def));else{let r=e;r.fatal&&(r.continue=!1),r.code??=`custom`,r.input??=n.value,r.inst??=t,r.continue??=!t._zod.def.abort,n.issues.push(MA(r))}},e(n.value,n)));return t}function OP(e,t){let n=new Bj({check:`custom`,...pA(t)});return n._zod.check=e,n}var kP=U(`ZodISODateTime`,(e,t)=>{yM.init(e,t),eF.init(e,t)});function AP(e){return $N(kP,e)}var jP=U(`ZodISODate`,(e,t)=>{bM.init(e,t),eF.init(e,t)});function MP(e){return eP(jP,e)}var NP=U(`ZodISOTime`,(e,t)=>{xM.init(e,t),eF.init(e,t)});function PP(e){return tP(NP,e)}var FP=U(`ZodISODuration`,(e,t)=>{SM.init(e,t),eF.init(e,t)});function IP(e){return nP(FP,e)}var LP=U(`ZodError`,(e,t)=>{HA.init(e,t),e.name=`ZodError`,Object.defineProperties(e,{format:{value:t=>GA(e,t)},flatten:{value:t=>WA(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,Vk,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,Vk,2)}},isEmpty:{get(){return e.issues.length===0}}})},{Parent:Error}),RP=KA(LP),zP=qA(LP),BP=JA(LP),VP=XA(LP),HP=QA(LP),UP=$A(LP),WP=ej(LP),GP=tj(LP),KP=nj(LP),qP=rj(LP),JP=ij(LP),YP=aj(LP),XP=U(`ZodType`,(e,t)=>(aM.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,`_def`,{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(e=>typeof e==`function`?{_zod:{check:e,def:{check:`custom`},onattach:[]}}:e)]}),e.clone=(t,n)=>fA(e,t,n),e.brand=()=>e,e.register=((t,n)=>(t.add(e,n),e)),e.parse=(t,n)=>RP(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>BP(e,t,n),e.parseAsync=async(t,n)=>zP(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>VP(e,t,n),e.spa=e.safeParseAsync,e.encode=(t,n)=>HP(e,t,n),e.decode=(t,n)=>UP(e,t,n),e.encodeAsync=async(t,n)=>WP(e,t,n),e.decodeAsync=async(t,n)=>GP(e,t,n),e.safeEncode=(t,n)=>KP(e,t,n),e.safeDecode=(t,n)=>qP(e,t,n),e.safeEncodeAsync=async(t,n)=>JP(e,t,n),e.safeDecodeAsync=async(t,n)=>YP(e,t,n),e.refine=(t,n)=>e.check(mI(t,n)),e.superRefine=t=>e.check(hI(t)),e.overwrite=t=>e.check(bP(t)),e.optional=()=>ZF(e),e.nullable=()=>$F(e),e.nullish=()=>ZF($F(e)),e.nonoptional=t=>aI(e,t),e.array=()=>IF(e),e.or=t=>zF([e,t]),e.and=t=>HF(e,t),e.transform=t=>lI(e,YF(t)),e.default=t=>tI(e,t),e.prefault=t=>rI(e,t),e.catch=t=>sI(e,t),e.pipe=t=>lI(e,t),e.readonly=()=>dI(e),e.describe=t=>{let n=e.clone();return kN.add(n,{description:t}),n},Object.defineProperty(e,`description`,{get(){return kN.get(e)?.description},configurable:!0}),e.meta=(...t)=>{if(t.length===0)return kN.get(e);let n=e.clone();return kN.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),ZP=U(`_ZodString`,(e,t)=>{oM.init(e,t),XP.init(e,t);let n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(mP(...t)),e.includes=(...t)=>e.check(_P(...t)),e.startsWith=(...t)=>e.check(vP(...t)),e.endsWith=(...t)=>e.check(yP(...t)),e.min=(...t)=>e.check(fP(...t)),e.max=(...t)=>e.check(dP(...t)),e.length=(...t)=>e.check(pP(...t)),e.nonempty=(...t)=>e.check(fP(1,...t)),e.lowercase=t=>e.check(hP(t)),e.uppercase=t=>e.check(gP(t)),e.trim=()=>e.check(SP()),e.normalize=(...t)=>e.check(xP(...t)),e.toLowerCase=()=>e.check(CP()),e.toUpperCase=()=>e.check(wP())}),QP=U(`ZodString`,(e,t)=>{oM.init(e,t),ZP.init(e,t),e.email=t=>e.check(jN(tF,t)),e.url=t=>e.check(LN(iF,t)),e.jwt=t=>e.check(QN(yF,t)),e.emoji=t=>e.check(RN(aF,t)),e.guid=t=>e.check(MN(nF,t)),e.uuid=t=>e.check(NN(rF,t)),e.uuidv4=t=>e.check(PN(rF,t)),e.uuidv6=t=>e.check(FN(rF,t)),e.uuidv7=t=>e.check(IN(rF,t)),e.nanoid=t=>e.check(zN(oF,t)),e.guid=t=>e.check(MN(nF,t)),e.cuid=t=>e.check(BN(sF,t)),e.cuid2=t=>e.check(VN(cF,t)),e.ulid=t=>e.check(HN(lF,t)),e.base64=t=>e.check(YN(gF,t)),e.base64url=t=>e.check(XN(_F,t)),e.xid=t=>e.check(UN(uF,t)),e.ksuid=t=>e.check(WN(dF,t)),e.ipv4=t=>e.check(GN(fF,t)),e.ipv6=t=>e.check(KN(pF,t)),e.cidrv4=t=>e.check(qN(mF,t)),e.cidrv6=t=>e.check(JN(hF,t)),e.e164=t=>e.check(ZN(vF,t)),e.datetime=t=>e.check(AP(t)),e.date=t=>e.check(MP(t)),e.time=t=>e.check(PP(t)),e.duration=t=>e.check(IP(t))});function $P(e){return AN(QP,e)}var eF=U(`ZodStringFormat`,(e,t)=>{sM.init(e,t),ZP.init(e,t)}),tF=U(`ZodEmail`,(e,t)=>{uM.init(e,t),eF.init(e,t)}),nF=U(`ZodGUID`,(e,t)=>{cM.init(e,t),eF.init(e,t)}),rF=U(`ZodUUID`,(e,t)=>{lM.init(e,t),eF.init(e,t)}),iF=U(`ZodURL`,(e,t)=>{dM.init(e,t),eF.init(e,t)}),aF=U(`ZodEmoji`,(e,t)=>{fM.init(e,t),eF.init(e,t)}),oF=U(`ZodNanoID`,(e,t)=>{pM.init(e,t),eF.init(e,t)}),sF=U(`ZodCUID`,(e,t)=>{mM.init(e,t),eF.init(e,t)}),cF=U(`ZodCUID2`,(e,t)=>{hM.init(e,t),eF.init(e,t)}),lF=U(`ZodULID`,(e,t)=>{gM.init(e,t),eF.init(e,t)}),uF=U(`ZodXID`,(e,t)=>{_M.init(e,t),eF.init(e,t)}),dF=U(`ZodKSUID`,(e,t)=>{vM.init(e,t),eF.init(e,t)}),fF=U(`ZodIPv4`,(e,t)=>{CM.init(e,t),eF.init(e,t)}),pF=U(`ZodIPv6`,(e,t)=>{wM.init(e,t),eF.init(e,t)}),mF=U(`ZodCIDRv4`,(e,t)=>{TM.init(e,t),eF.init(e,t)}),hF=U(`ZodCIDRv6`,(e,t)=>{EM.init(e,t),eF.init(e,t)}),gF=U(`ZodBase64`,(e,t)=>{OM.init(e,t),eF.init(e,t)}),_F=U(`ZodBase64URL`,(e,t)=>{AM.init(e,t),eF.init(e,t)}),vF=U(`ZodE164`,(e,t)=>{jM.init(e,t),eF.init(e,t)}),yF=U(`ZodJWT`,(e,t)=>{NM.init(e,t),eF.init(e,t)}),bF=U(`ZodNumber`,(e,t)=>{PM.init(e,t),XP.init(e,t),e.gt=(t,n)=>e.check(cP(t,n)),e.gte=(t,n)=>e.check(lP(t,n)),e.min=(t,n)=>e.check(lP(t,n)),e.lt=(t,n)=>e.check(oP(t,n)),e.lte=(t,n)=>e.check(sP(t,n)),e.max=(t,n)=>e.check(sP(t,n)),e.int=t=>e.check(SF(t)),e.safe=t=>e.check(SF(t)),e.positive=t=>e.check(cP(0,t)),e.nonnegative=t=>e.check(lP(0,t)),e.negative=t=>e.check(oP(0,t)),e.nonpositive=t=>e.check(sP(0,t)),e.multipleOf=(t,n)=>e.check(uP(t,n)),e.step=(t,n)=>e.check(uP(t,n)),e.finite=()=>e;let n=e._zod.bag;e.minValue=Math.max(n.minimum??-1/0,n.exclusiveMinimum??-1/0)??null,e.maxValue=Math.min(n.maximum??1/0,n.exclusiveMaximum??1/0)??null,e.isInt=(n.format??``).includes(`int`)||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null}),xF=U(`ZodNumberFormat`,(e,t)=>{FM.init(e,t),bF.init(e,t)});function SF(e){return rP(xF,e)}var CF=U(`ZodBoolean`,(e,t)=>{IM.init(e,t),XP.init(e,t)}),wF=U(`ZodBigInt`,(e,t)=>{LM.init(e,t),XP.init(e,t),e.gte=(t,n)=>e.check(lP(t,n)),e.min=(t,n)=>e.check(lP(t,n)),e.gt=(t,n)=>e.check(cP(t,n)),e.gte=(t,n)=>e.check(lP(t,n)),e.min=(t,n)=>e.check(lP(t,n)),e.lt=(t,n)=>e.check(oP(t,n)),e.lte=(t,n)=>e.check(sP(t,n)),e.max=(t,n)=>e.check(sP(t,n)),e.positive=t=>e.check(cP(BigInt(0),t)),e.negative=t=>e.check(oP(BigInt(0),t)),e.nonpositive=t=>e.check(sP(BigInt(0),t)),e.nonnegative=t=>e.check(lP(BigInt(0),t)),e.multipleOf=(t,n)=>e.check(uP(t,n));let n=e._zod.bag;e.minValue=n.minimum??null,e.maxValue=n.maximum??null,e.format=n.format??null}),TF=U(`ZodSymbol`,(e,t)=>{RM.init(e,t),XP.init(e,t)}),EF=U(`ZodUndefined`,(e,t)=>{zM.init(e,t),XP.init(e,t)}),DF=U(`ZodNull`,(e,t)=>{BM.init(e,t),XP.init(e,t)}),OF=U(`ZodAny`,(e,t)=>{VM.init(e,t),XP.init(e,t)}),kF=U(`ZodUnknown`,(e,t)=>{HM.init(e,t),XP.init(e,t)});function AF(){return iP(kF)}var jF=U(`ZodNever`,(e,t)=>{UM.init(e,t),XP.init(e,t)});function MF(e){return aP(jF,e)}var NF=U(`ZodVoid`,(e,t)=>{WM.init(e,t),XP.init(e,t)}),PF=U(`ZodDate`,(e,t)=>{GM.init(e,t),XP.init(e,t),e.min=(t,n)=>e.check(lP(t,n)),e.max=(t,n)=>e.check(sP(t,n));let n=e._zod.bag;e.minDate=n.minimum?new Date(n.minimum):null,e.maxDate=n.maximum?new Date(n.maximum):null}),FF=U(`ZodArray`,(e,t)=>{qM.init(e,t),XP.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(fP(t,n)),e.nonempty=t=>e.check(fP(1,t)),e.max=(t,n)=>e.check(dP(t,n)),e.length=(t,n)=>e.check(pP(t,n)),e.unwrap=()=>e.element});function IF(e,t){return TP(FF,e,t)}var LF=U(`ZodObject`,(e,t)=>{QM.init(e,t),XP.init(e,t),Nk.defineLazy(e,`shape`,()=>t.shape),e.keyof=()=>KF(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:AF()}),e.loose=()=>e.clone({...e._zod.def,catchall:AF()}),e.strict=()=>e.clone({...e._zod.def,catchall:MF()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>Nk.extend(e,t),e.safeExtend=t=>Nk.safeExtend(e,t),e.merge=t=>Nk.merge(e,t),e.pick=t=>Nk.pick(e,t),e.omit=t=>Nk.omit(e,t),e.partial=(...t)=>Nk.partial(XF,e,t[0]),e.required=(...t)=>Nk.required(iI,e,t[0])}),RF=U(`ZodUnion`,(e,t)=>{eN.init(e,t),XP.init(e,t),e.options=t.options});function zF(e,t){return new RF({type:`union`,options:e,...Nk.normalizeParams(t)})}var BF=U(`ZodDiscriminatedUnion`,(e,t)=>{RF.init(e,t),tN.init(e,t)}),VF=U(`ZodIntersection`,(e,t)=>{nN.init(e,t),XP.init(e,t)});function HF(e,t){return new VF({type:`intersection`,left:e,right:t})}var UF=U(`ZodTuple`,(e,t)=>{aN.init(e,t),XP.init(e,t),e.rest=t=>e.clone({...e._zod.def,rest:t})}),WF=U(`ZodRecord`,(e,t)=>{sN.init(e,t),XP.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType}),GF=U(`ZodEnum`,(e,t)=>{cN.init(e,t),XP.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{let i={};for(let r of e)if(n.has(r))i[r]=t.entries[r];else throw Error(`Key ${r} not found in enum`);return new GF({...t,checks:[],...Nk.normalizeParams(r),entries:i})},e.exclude=(e,r)=>{let i={...t.entries};for(let t of e)if(n.has(t))delete i[t];else throw Error(`Key ${t} not found in enum`);return new GF({...t,checks:[],...Nk.normalizeParams(r),entries:i})}});function KF(e,t){return new GF({type:`enum`,entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...Nk.normalizeParams(t)})}var qF=U(`ZodLiteral`,(e,t)=>{lN.init(e,t),XP.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,`value`,{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})}),JF=U(`ZodTransform`,(e,t)=>{uN.init(e,t),XP.init(e,t),e._zod.parse=(n,r)=>{if(r.direction===`backward`)throw new Ak(e.constructor.name);n.addIssue=r=>{if(typeof r==`string`)n.issues.push(Nk.issue(r,n.value,t));else{let t=r;t.fatal&&(t.continue=!1),t.code??=`custom`,t.input??=n.value,t.inst??=e,n.issues.push(Nk.issue(t))}};let i=t.transform(n.value,n);return i instanceof Promise?i.then(e=>(n.value=e,n)):(n.value=i,n)}});function YF(e){return new JF({type:`transform`,transform:e})}var XF=U(`ZodOptional`,(e,t)=>{fN.init(e,t),XP.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ZF(e){return new XF({type:`optional`,innerType:e})}var QF=U(`ZodNullable`,(e,t)=>{pN.init(e,t),XP.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $F(e){return new QF({type:`nullable`,innerType:e})}var eI=U(`ZodDefault`,(e,t)=>{mN.init(e,t),XP.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function tI(e,t){return new eI({type:`default`,innerType:e,get defaultValue(){return typeof t==`function`?t():Nk.shallowClone(t)}})}var nI=U(`ZodPrefault`,(e,t)=>{gN.init(e,t),XP.init(e,t),e.unwrap=()=>e._zod.def.innerType});function rI(e,t){return new nI({type:`prefault`,innerType:e,get defaultValue(){return typeof t==`function`?t():Nk.shallowClone(t)}})}var iI=U(`ZodNonOptional`,(e,t)=>{_N.init(e,t),XP.init(e,t),e.unwrap=()=>e._zod.def.innerType});function aI(e,t){return new iI({type:`nonoptional`,innerType:e,...Nk.normalizeParams(t)})}var oI=U(`ZodCatch`,(e,t)=>{yN.init(e,t),XP.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function sI(e,t){return new oI({type:`catch`,innerType:e,catchValue:typeof t==`function`?t:()=>t})}var cI=U(`ZodPipe`,(e,t)=>{bN.init(e,t),XP.init(e,t),e.in=t.in,e.out=t.out});function lI(e,t){return new cI({type:`pipe`,in:e,out:t})}var uI=U(`ZodReadonly`,(e,t)=>{SN.init(e,t),XP.init(e,t),e.unwrap=()=>e._zod.def.innerType});function dI(e){return new uI({type:`readonly`,innerType:e})}var fI=U(`ZodPromise`,(e,t)=>{wN.init(e,t),XP.init(e,t),e.unwrap=()=>e._zod.def.innerType}),pI=U(`ZodCustom`,(e,t)=>{TN.init(e,t),XP.init(e,t)});function mI(e,t={}){return EP(pI,e,t)}function hI(e){return DP(e)}function gI(e){return{...Ev.IsUndefined(e.description)?{}:{description:e.description}}}var _I=(e,t)=>e.safeParse(t).success;tx.Set(`base64`,e=>_I($P().base64(),e)),tx.Set(`base64url`,e=>_I($P().base64url(),e)),tx.Set(`cidrv4`,e=>_I($P().cidr({version:`v4`}),e)),tx.Set(`cidrv6`,e=>_I($P().cidr({version:`v6`}),e)),tx.Set(`cidr`,e=>_I($P().cidr(),e)),tx.Set(`cuid`,e=>_I($P().cuid(),e)),tx.Set(`cuid2`,e=>_I($P().cuid2(),e)),tx.Set(`date`,e=>_I($P().date(),e)),tx.Set(`datetime`,e=>_I($P().datetime({offset:!0}),e)),tx.Set(`duration`,e=>_I($P().duration(),e)),tx.Set(`email`,e=>_I($P().email(),e)),tx.Set(`emoji`,e=>_I($P().emoji(),e)),tx.Set(`ipv4`,e=>_I($P().ip({version:`v4`}),e)),tx.Set(`ipv6`,e=>_I($P().ip({version:`v6`}),e)),tx.Set(`ip`,e=>_I($P().ip(),e)),tx.Set(`jwt`,e=>_I($P().jwt(),e)),tx.Set(`nanoid`,e=>_I($P().nanoid(),e)),tx.Set(`time`,e=>_I($P().time(),e)),tx.Set(`ulid`,e=>_I($P().ulid(),e)),tx.Set(`url`,e=>_I($P().url(),e)),tx.Set(`uuid`,e=>_I($P().uuid(),e));function vI(e){return dx()}function yI(e){let t=e.minLength===null?{}:{minItems:e.minLength.value},n=e.maxLength===null?{}:{minItems:e.maxLength.value},r={...t,...n};return fx(GI(e.type),r)}function bI(e){return zx()}function xI(e){return Rx()}function SI(e){return yC()}function CI(e){return Bv(GI(e.innerType),{default:e.defaultValue()})}function wI(e){return Sx(e.options.map(e=>GI(e)),{discriminator:e.discriminator})}function TI(e){return rD(GI(e._def.schema)).Decode(t=>e.parse(t)).Encode(e=>{throw Error(`Encode not implemented for Zod types`)})}function EI(e){return Sx(e.values.map(e=>Lx(e)))}function DI(e){return Lx(e.value)}function OI(e){return qS([GI(e.left),GI(e.right)])}function kI(e,t){let n={...e.unknownKeys===`strict`?{additionalProperties:!1}:{}};return wS(globalThis.Object.keys(t).reduce((e,n)=>({...e,[n]:GI(t[n])}),{}),n)}function AI(e){return LS(GI(e.innerType))}function jI(e){return TS(GI(e.type))}function MI(e){return Sx([bC(),GI(e.innerType)])}function NI(e){return Bx(e.checks.reduce((e,t)=>({...e,...t.kind===`int`?{multipleOf:1}:t.kind===`max`?t.inclusive?{maximum:t.value}:{exclusiveMaximum:t.value}:t.kind===`min`?t.inclusive?{minimum:t.value}:{exclusiveMinimum:t.value}:t.kind===`multipleOf`?{multipleOf:t.value}:{}}),{}))}function PI(e){return gx()}function FI(e){return bC()}function II(e){return kS(GI(e.innerType))}function LI(e){return bT(GI(e.keyType),GI(e.valueType))}function RI(e){return Vx(e.checks.reduce((e,t)=>({...e,...t.kind===`base64`?{format:`base64`}:t.kind===`base64url`?{format:`base64url`}:t.kind===`cidr`?{format:t.version===`v4`?`cidrv4`:t.version===`v6`?`cidrv6`:`cidr`}:t.kind===`cuid`?{format:`cuid`}:t.kind===`cuid2`?{format:`cuid2`}:t.kind===`date`?{format:`date`}:t.kind===`datetime`?{format:`datetime`}:t.kind===`duration`?{format:`duration`}:t.kind===`email`?{format:`email`}:t.kind===`emoji`?{format:`emoji`}:t.kind===`endsWith`?{pattern:`${t.value}$`}:t.kind===`includes`?{pattern:t.value}:t.kind===`ip`?{format:t.version===`v4`?`ipv4`:t.version===`v6`?`ipv6`:`ip`}:t.kind===`jwt`?{format:`jwt`}:t.kind===`length`?{minLength:t.value,maxLength:t.value}:t.kind===`min`?{minLength:t.value}:t.kind===`max`?{maxLength:t.value}:t.kind===`nanoid`?{format:`nanoid`}:t.kind===`regex`?{pattern:t.regex.source}:t.kind===`startsWith`?{pattern:`^${t.value}`}:t.kind===`time`?{format:`time`}:t.kind===`ulid`?{format:`ulid`}:t.kind===`url`?{format:`url`}:t.kind===`uuid`?{format:`uuid`}:{}}),{}))}function zI(e){return xC()}function BI(e){return NS(e.items.map(e=>GI(e)))}function VI(e){return SC()}function HI(e){return Sx(e.options.map(e=>GI(e)))}function UI(e){return wC()}function WI(e){return iD()}function GI(e){return L(e instanceof OF?vI(e._def):e instanceof FF?yI(e._def):e instanceof wF?bI(e._def):e instanceof CF?xI(e._def):e instanceof PF?SI(e._def):e instanceof eI?CI(e._def):e instanceof BF?wI(e._def):e instanceof void 0?TI(e):e instanceof GF?EI(e._def):e instanceof qF?DI(e._def):e instanceof QF?MI(e._def):e instanceof LF?kI(e._def,e.shape):e instanceof XF?AI(e._def):e instanceof fI?jI(e._def):e instanceof uI?II(e._def):e instanceof WF?LI(e._def):e instanceof jF?PI(e._def):e instanceof DF?FI(e._def):e instanceof bF?NI(e._def):e instanceof QP?RI(e._def):e instanceof TF?zI(e._def):e instanceof UF?BI(e._def):e instanceof EF?VI(e._def):e instanceof RF?HI(e._def):e instanceof kF?UI(e._def):e instanceof NF?WI(e._def):e instanceof VF?OI(e._def):gx(),gI(e))}function KI(e){return GI(e)}function qI(e){return Ev.IsString(e)}function JI(e){return Wv.IsSchema(e)}function YI(e){return Ev.IsObject(e)&&Ev.HasPropertyKey(e,`~standard`)&&Ev.IsObject(e[`~standard`])&&Ev.HasPropertyKey(e[`~standard`],`vendor`)&&e[`~standard`].vendor===`valibot`}function XI(e){return Ev.IsObject(e)&&Ev.HasPropertyKey(e,`~standard`)&&Ev.IsObject(e[`~standard`])&&Ev.HasPropertyKey(e[`~standard`],`vendor`)&&e[`~standard`].vendor===`zod`}function ZI(e){return e.length===3&&Ev.IsObject(e[0])&&Ev.IsString(e[1])&&Ev.IsObject(e[2])}function QI(e){return e.length===2&&Ev.IsString(e[0])&&Ev.IsObject(e[1])}function $I(e){return e.length===2&&Ev.IsObject(e[0])&&Ev.IsString(e[1])}function eL(e){return e.length===1&&(Ev.IsString(e[0])||Ev.IsObject(e[0]))}function tL(e){return ZI(e)?[e[0],e[1],e[2]]:QI(e)?[{},e[0],e[1]]:$I(e)?[e[0],e[1],{}]:eL(e)?[{},e[0],{}]:[{},`never`,{}]}function nL(e){return globalThis.Object.getOwnPropertyNames(e).reduce((t,n)=>({...t,[n]:rL(e[n])}),{})}function rL(...e){let[t,n,r]=tL(e);return qI(n)?sse(nL(t),n,r):JI(n)?cse(n):YI(n)?Ok(n):XI(n)?KI(n):gx()}var iL=/: Elysia<(.*)>/gs,aL=/(\d+):/g,oL=(...e)=>e.join(`/`).replace(/\/{1,}/g,`/`);function sL(e){let t=[],n=0;for(;n<e.length;){let r=e.indexOf(`:`,n);if(r===-1)break;let i=r-1;for(;i>=0&&/\s/.test(e[i]);)i--;let a=i;for(;a>=0&&!/[\s{};,\n]/.test(e[a]);)a--;let o=e.indexOf(`{`,r);if(o===-1)break;let s=0,c=o;for(;c<e.length;c++)if(e[c]===`{`)s++;else if(e[c]===`}`&&(s--,s===0)){c++;break}t.push(`{${e.slice(a+1,c)};}`),n=c}return t}function cL(e){let t={};for(let n of sL(e.replace(aL,`"$1":`))){let e=rL(n.replaceAll(/readonly/g,``));if(e.type!==`object`)continue;let r=[];for(;;){let t=Object.keys(e.properties);if(t.length!==1||(r.push(t[0]),e=e.properties[t[0]],!e?.properties))break}let i=r.pop();if(!i)continue;let a=`/`+r.join(`/`);if(e=e.properties,e?.response?.type===`object`){let t={};for(let n in e.response.properties)t[n]=e.response.properties[n];e.response=t}t[a]||(t[a]={}),t[a][i.toLowerCase()]=e}return t}var lL=(e=`src/index.ts`,{tsconfigPath:t=`tsconfig.json`,instanceName:r,projectRoot:i=n.cwd(),overrideOutputPath:a,debug:o=!1,compilerOptions:s,tmpRoot:c,silent:l=!1}={})=>()=>{if(e.trimStart().startsWith(`{`)&&e.trimEnd().endsWith(`}`))return cL(e);if(n===void 0||typeof n.getBuiltinModule!=`function`)throw Error("[@elysiajs/openapi/gen] `fromTypes` from file path is only available in Node.js/Bun environment or environments");let u=n.getBuiltinModule(`fs`);if(!u)throw Error("[@elysiajs/openapi/gen] `fromTypes` require `fs` module which is not available in this environment");try{if(!e.endsWith(`.ts`)&&!e.endsWith(`.tsx`))throw Error(`Only .ts files are supported`);e.startsWith(`./`)&&(e=e.slice(2));let d=e.startsWith(`/`)?e:oL(i,e);if(!u.existsSync(d))throw Error(`Couldn't find "${e}" from ${i}`);let f;if(!c){let e=n.getBuiltinModule(`os`);c=oL(e&&typeof e.tmpdir==`function`?e.tmpdir():i,`.ElysiaAutoOpenAPI`)}if(e.endsWith(`.d.ts`))f=e;else{u.existsSync(c)&&u.rmSync(c,{recursive:!0,force:!0}),u.mkdirSync(c,{recursive:!0});let r=t.startsWith(`/`)?t:oL(i,t),o=u.existsSync(r)?`"extends": "${oL(i,`tsconfig.json`)}",`:``,p=oL(c,`dist`);n!==void 0&&n.platform===`win32`&&(o=o.replace(/\\/g,`/`),d=d.replace(/\\/g,`/`),p=p.replace(/\\/g,`/`)),u.writeFileSync(oL(c,`tsconfig.json`),`{
	${o}
	"compilerOptions": ${s?JSON.stringify(s):`{
	"lib": ["ESNext"],
	"module": "ESNext",
	"noEmit": false,
	"declaration": true,
	"emitDeclarationOnly": true,
	"moduleResolution": "bundler",
	"skipLibCheck": true,
	"skipDefaultLibCheck": true,
	"outDir": "${p}"
}`},
	"include": ["${d}"]
}`);let m=n.getBuiltinModule(`child_process`);if(!m)throw Error("[@elysiajs/openapi/gen] `fromTypes` declaration generation require `child_process` module which is not available in this environment");let{spawnSync:h}=m;if(typeof h!=`function`)throw Error("[@elysiajs/openapi/gen] `fromTypes` declaration generation require child_process.spawnSync which is not available in this environment");h(`tsc`,{shell:!0,cwd:c,stdio:l?void 0:`inherit`});let g=e.replace(/.tsx$/,`.ts`).replace(/.ts$/,`.d.ts`);f=(a?typeof a==`string`?a.startsWith(`/`)?a:oL(c,`dist`,a):a(c):void 0)??oL(c,`dist`,g.slice(g.indexOf(`/`)+1));let _=u.existsSync(f);if(!_&&!a&&(f=oL(c,`dist`,g),_=u.existsSync(f)),!_){if(u.rmSync(oL(c,`tsconfig.json`)),console.warn(`[@elysiajs/openapi/gen] Failed to generate OpenAPI schema`),console.warn(`Couldn't find generated declaration file`),u.existsSync(oL(c,`dist`))){let e=u.readdirSync(oL(c,`dist`),{recursive:!0}).filter(e=>e.toString().endsWith(`.d.ts`)).map(e=>`- ${e}`).join(`
`);e&&(console.warn("You can override with `overrideOutputPath` with one of the following:"),console.warn(e))}else console.warn(`reason: root folder doesn't exists`,oL(c,`dist`));return}}let p=u.readFileSync(f,`utf8`);!o&&u.existsSync(c)&&u.rmSync(c,{recursive:!0,force:!0});let m=p.match(r?RegExp(`${r}: Elysia<(.*)`,`gs`):iL)?.[0];if(!m)return;for(let e=0;e<3;e++)m=m.slice(m.indexOf(`}, {`,3));return cL(m.slice(2))}catch(e){console.warn(`[@elysiajs/openapi/gen] Failed to generate OpenAPI schema`),console.warn(e);return}finally{!o&&c&&u.existsSync(c)&&u.rmSync(c,{recursive:!0,force:!0})}};function uL(){try{if(typeof caches<`u`&&caches.default!==void 0||typeof WebSocketPair<`u`)return!0}catch{return!1}return!1}var dL=({enabled:e=!0,path:t=`/openapi`,provider:n=`scalar`,specPath:r=`${t}/json`,documentation:i={},exclude:a,swagger:o,scalar:s,references:c,mapJsonSchema:l,embedSpec:u}={})=>{if(!e)return new pv({name:`@elysiajs/openapi`});let d={title:`Elysia Documentation`,description:`Development documentation`,version:`0.0.0`,...i.info},f=r.startsWith(`/`)?r.slice(1):r,p=0,m,h=({paths:e,components:{schemas:t}})=>m={openapi:`3.0.3`,...i,tags:a?.tags?i.tags?.filter(e=>!a.tags?.includes(e.name)):i.tags,info:{title:`Elysia Documentation`,description:`Development documentation`,version:`0.0.0`,...i.info},paths:{...e,...i.paths},components:{...i.components,schemas:{...t,...i.components?.schemas}}},g=new pv({name:`@elysiajs/openapi`}).use(e=>{if(n===null)return e;let r=()=>new Response(n===`swagger-ui`?ore(d,{url:f,dom_id:`#swagger-ui`,version:`latest`,autoDarkMode:!0,...o}):cre(d,{url:f,version:`latest`,cdn:`https://cdn.jsdelivr.net/npm/@scalar/api-reference@${s?.version??`latest`}/dist/browser/standalone.min.js`,...s,_integration:`elysiajs`},u?JSON.stringify(p===e.routes.length?m:h(_D(e,a,c,l))):void 0),{headers:{"content-type":`text/html; charset=utf8`}});return e.get(t,u||uL()?r:r(),{detail:{hide:!0}})}).get(r,function(){return p===g.routes.length&&m?m:(p=g.routes.length,h(_D(g,a,c,l)))},{error({error:e}){console.log(`[@elysiajs/openapi] error at specPath`),console.warn(e)},detail:{hide:!0}});return g},fL=(e,t,n)=>{t(async({onStop:t,onEvent:r,total:i})=>{let a=``;i!==0&&(r(({name:t,index:n,onStop:r})=>{r(({elapsed:r})=>{a+=`${e}.${n}.${t||`anon`};dur=${r},`})}),t(({elapsed:t})=>{a+=`${e};dur=${t},`,n(a)}))})},pL=({allow:e,enabled:t=!1,trace:{request:n=!0,parse:r=!0,transform:i=!0,beforeHandle:a=!0,handle:o=!0,afterHandle:s=!0,error:c=!0,mapResponse:l=!0,total:u=!0}={}}={})=>{let d=new pv;return t&&d.trace({as:`global`},async({onRequest:t,onParse:d,onTransform:f,onBeforeHandle:p,onHandle:m,onAfterHandle:h,onMapResponse:g,onError:_,set:v,context:ee,context:{request:{method:te}}})=>{let y=``,b=e=>{y+=e},x;t(({begin:e})=>{x=e}),n&&fL(`request`,t,b),r&&fL(`parse`,d,b),i&&fL(`transform`,f,b),a&&fL(`beforeHandle`,p,b),s&&fL(`afterHandle`,h,b),c&&fL(`error`,_,b),l&&fL(`mapResponse`,g,b),o&&m(({name:e,onStop:t})=>{t(({elapsed:t})=>{y+=`handle.${e};dur=${t},`})}),g(({onStop:t})=>{t(async({end:t})=>{let n=e;switch(n instanceof Promise&&(n=await n),u?y+=`total;dur=${t-x}`:y=y.slice(0,-1),typeof n){case`boolean`:n===!1&&delete v.headers[`Server-Timing`],v.headers[`Server-Timing`]=y;break;case`function`:await n(ee)===!1&&delete v.headers[`Server-Timing`],v.headers[`Server-Timing`]=y;break;default:v.headers[`Server-Timing`]=y}})})}),d},mL;function hL(e){return{lang:e?.lang??mL?.lang,message:e?.message,abortEarly:e?.abortEarly??mL?.abortEarly,abortPipeEarly:e?.abortPipeEarly??mL?.abortPipeEarly}}var gL;function _L(e){return gL?.get(e)}var vL;function yL(e){return vL?.get(e)}var bL;function xL(e,t){return bL?.get(e)?.get(t)}function SL(e){let t=typeof e;return t===`string`?`"${e}"`:t===`number`||t===`bigint`||t===`boolean`?`${e}`:t===`object`||t===`function`?(e&&Object.getPrototypeOf(e)?.constructor?.name)??`null`:t}function CL(e,t,n,r,i){let a=i&&`input`in i?i.input:n.value,o=i?.expected??e.expects??null,s=i?.received??SL(a),c={kind:e.kind,type:e.type,input:a,expected:o,received:s,message:`Invalid ${t}: ${o?`Expected ${o} but r`:`R`}eceived ${s}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=e.kind===`schema`,u=i?.message??e.message??xL(e.reference,c.lang)??(l?yL(c.lang):null)??r.message??_L(c.lang);u!==void 0&&(c.message=typeof u==`function`?u(c):u),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function wL(e){return{version:1,vendor:`valibot`,validate(t){return e[`~run`]({value:t},hL())}}}function TL(e,t){return Object.hasOwn(e,t)&&t!==`__proto__`&&t!==`prototype`&&t!==`constructor`}function EL(e,t){let n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??`never`}var DL=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu;function OL(e){return{kind:`validation`,type:`email`,reference:OL,expects:null,async:!1,requirement:DL,message:e,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&CL(this,`email`,e,t),e}}}function kL(e,t){return{kind:`validation`,type:`max_length`,reference:kL,async:!1,expects:`<=${e}`,requirement:e,message:t,"~run"(e,t){return e.typed&&e.value.length>this.requirement&&CL(this,`length`,e,t,{received:`${e.value.length}`}),e}}}function AL(e,t){return{kind:`validation`,type:`max_value`,reference:AL,async:!1,expects:`<=${e instanceof Date?e.toJSON():SL(e)}`,requirement:e,message:t,"~run"(e,t){return e.typed&&!(e.value<=this.requirement)&&CL(this,`value`,e,t,{received:e.value instanceof Date?e.value.toJSON():SL(e.value)}),e}}}function jL(e,t){return{kind:`validation`,type:`min_value`,reference:jL,async:!1,expects:`>=${e instanceof Date?e.toJSON():SL(e)}`,requirement:e,message:t,"~run"(e,t){return e.typed&&!(e.value>=this.requirement)&&CL(this,`value`,e,t,{received:e.value instanceof Date?e.value.toJSON():SL(e.value)}),e}}}function ML(e){return{kind:`validation`,type:`non_empty`,reference:ML,async:!1,expects:`!0`,message:e,"~run"(e,t){return e.typed&&e.value.length===0&&CL(this,`length`,e,t,{received:`0`}),e}}}function NL(e,t,n){return typeof e.fallback==`function`?e.fallback(t,n):e.fallback}function PL(e,t,n){return typeof e.default==`function`?e.default(t,n):e.default}function FL(e,t){let n=[];for(let t in e)(`${+t}`!==t||typeof e[t]!=`string`||!Object.is(e[e[t]],+t))&&n.push(e[t]);return{kind:`schema`,type:`enum`,reference:FL,expects:EL(n.map(SL),`|`),async:!1,enum:e,options:n,message:t,get"~standard"(){return wL(this)},"~run"(e,t){return this.options.includes(e.value)?e.typed=!0:CL(this,`type`,e,t),e}}}function IL(e){return{kind:`schema`,type:`number`,reference:IL,expects:`number`,async:!1,message:e,get"~standard"(){return wL(this)},"~run"(e,t){return typeof e.value==`number`&&!isNaN(e.value)?e.typed=!0:CL(this,`type`,e,t),e}}}function LL(e,t){return{kind:`schema`,type:`object`,reference:LL,expects:`Object`,async:!1,entries:e,message:t,get"~standard"(){return wL(this)},"~run"(e,t){let n=e.value;if(n&&typeof n==`object`)for(let r in e.typed=!0,e.value={},this.entries){let i=this.entries[r];if(r in n||(i.type===`exact_optional`||i.type===`optional`||i.type===`nullish`)&&i.default!==void 0){let a=r in n?n[r]:PL(i),o=i[`~run`]({value:a},t);if(o.issues){let i={type:`object`,origin:`value`,input:n,key:r,value:a};for(let t of o.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||=o.issues,t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[r]=o.value}else if(i.fallback!==void 0)e.value[r]=NL(i);else if(i.type!==`exact_optional`&&i.type!==`optional`&&i.type!==`nullish`&&(CL(this,`key`,e,t,{input:void 0,expected:`"${r}"`,path:[{type:`object`,origin:`key`,input:n,key:r,value:n[r]}]}),t.abortEarly))break}else CL(this,`type`,e,t);return e}}}function RL(e,t){return{kind:`schema`,type:`optional`,reference:RL,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return wL(this)},"~run"(e,t){return e.value===void 0&&(this.default!==void 0&&(e.value=PL(this,e,t)),e.value===void 0)?(e.typed=!0,e):this.wrapped[`~run`](e,t)}}}function zL(e,t,n){return{kind:`schema`,type:`record`,reference:zL,expects:`Object`,async:!1,key:e,value:t,message:n,get"~standard"(){return wL(this)},"~run"(e,t){let n=e.value;if(n&&typeof n==`object`){for(let r in e.typed=!0,e.value={},n)if(TL(n,r)){let i=n[r],a=this.key[`~run`]({value:r},t);if(a.issues){let o={type:`object`,origin:`key`,input:n,key:r,value:i};for(let t of a.issues)t.path=[o],e.issues?.push(t);if(e.issues||=a.issues,t.abortEarly){e.typed=!1;break}}let o=this.value[`~run`]({value:i},t);if(o.issues){let a={type:`object`,origin:`value`,input:n,key:r,value:i};for(let t of o.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||=o.issues,t.abortEarly){e.typed=!1;break}}(!a.typed||!o.typed)&&(e.typed=!1),a.typed&&(e.value[a.value]=o.value)}}else CL(this,`type`,e,t);return e}}}function BL(e){return{kind:`schema`,type:`string`,reference:BL,expects:`string`,async:!1,message:e,get"~standard"(){return wL(this)},"~run"(e,t){return typeof e.value==`string`?e.typed=!0:CL(this,`type`,e,t),e}}}function VL(){return{kind:`schema`,type:`unknown`,reference:VL,expects:`unknown`,async:!1,get"~standard"(){return wL(this)},"~run"(e){return e.typed=!0,e}}}function HL(...e){return{...e[0],pipe:e,get"~standard"(){return wL(this)},"~run"(t,n){for(let r of e)if(r.kind!==`metadata`){if(t.issues&&(r.kind===`schema`||r.kind===`transformation`)){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r[`~run`](t,n))}return t}}}function UL(e,t){return e?(e.push(t),e):[t]}function WL(e,t){switch(t?.errorMode){case`ignore`:break;case`warn`:console.warn(e);break;default:throw Error(e)}}function GL(e,t,n){if(n?.ignoreActions?.includes(t.type))return e;let r;switch(t.type){case`base64`:e.contentEncoding=`base64`;break;case`bic`:case`cuid2`:case`decimal`:case`digits`:case`emoji`:case`hexadecimal`:case`hex_color`:case`nanoid`:case`octal`:case`ulid`:e.pattern=t.requirement.source;break;case`description`:e.description=t.description;break;case`email`:e.format=`email`;break;case`empty`:e.type===`array`?e.maxItems=0:(e.type!==`string`&&(r=UL(r,`The "${t.type}" action is not supported on type "${e.type}".`)),e.maxLength=0);break;case`entries`:e.minProperties=t.requirement,e.maxProperties=t.requirement;break;case`integer`:e.type=`integer`;break;case`ipv4`:e.format=`ipv4`;break;case`ipv6`:e.format=`ipv6`;break;case`iso_date`:e.format=`date`;break;case`iso_date_time`:case`iso_timestamp`:e.format=`date-time`;break;case`iso_time`:e.format=`time`;break;case`length`:e.type===`array`?(e.minItems=t.requirement,e.maxItems=t.requirement):(e.type!==`string`&&(r=UL(r,`The "${t.type}" action is not supported on type "${e.type}".`)),e.minLength=t.requirement,e.maxLength=t.requirement);break;case`max_entries`:e.maxProperties=t.requirement;break;case`max_length`:e.type===`array`?e.maxItems=t.requirement:(e.type!==`string`&&(r=UL(r,`The "${t.type}" action is not supported on type "${e.type}".`)),e.maxLength=t.requirement);break;case`max_value`:e.type!==`number`&&(r=UL(r,`The "max_value" action is not supported on type "${e.type}".`)),e.maximum=t.requirement;break;case`metadata`:typeof t.metadata.title==`string`&&(e.title=t.metadata.title),typeof t.metadata.description==`string`&&(e.description=t.metadata.description),Array.isArray(t.metadata.examples)&&(e.examples=t.metadata.examples);break;case`min_entries`:e.minProperties=t.requirement;break;case`min_length`:e.type===`array`?e.minItems=t.requirement:(e.type!==`string`&&(r=UL(r,`The "${t.type}" action is not supported on type "${e.type}".`)),e.minLength=t.requirement);break;case`min_value`:e.type!==`number`&&(r=UL(r,`The "min_value" action is not supported on type "${e.type}".`)),e.minimum=t.requirement;break;case`multiple_of`:e.multipleOf=t.requirement;break;case`non_empty`:e.type===`array`?e.minItems=1:(e.type!==`string`&&(r=UL(r,`The "${t.type}" action is not supported on type "${e.type}".`)),e.minLength=1);break;case`regex`:t.requirement.flags&&(r=UL(r,`RegExp flags are not supported by JSON Schema.`)),e.pattern=t.requirement.source;break;case`title`:e.title=t.title;break;case`url`:e.format=`uri`;break;case`uuid`:e.format=`uuid`;break;case`value`:e.const=t.requirement;break;default:r=UL(r,`The "${t.type}" action cannot be converted to JSON Schema.`)}if(n?.overrideAction){let i=n.overrideAction({valibotAction:t,jsonSchema:e,errors:r});if(i)return{...i}}if(r)for(let e of r)WL(e,n);return e}function KL(e){return e.flatMap(e=>`pipe`in e?KL(e.pipe):e)}var qL=0;function JL(e,t,n,r,i=!1){if(!i){let i=r.referenceMap.get(t);if(i){if(e.$ref=`#/$defs/${i}`,n?.overrideRef){let a=n.overrideRef({...r,referenceId:i,valibotSchema:t,jsonSchema:e});a&&(e.$ref=a)}return e}}if(`pipe`in t){let i=KL(t.pipe),a=0,o=i.length-1;if(n?.typeMode===`input`){let e=i.slice(1).findIndex(e=>e.kind===`schema`||e.kind===`transformation`&&(e.type===`find_item`||e.type===`parse_json`||e.type===`raw_transform`||e.type===`reduce_items`||e.type===`stringify_json`||e.type===`transform`));e!==-1&&(o=e)}else if(n?.typeMode===`output`){let e=i.findLastIndex(e=>e.kind===`schema`);e!==-1&&(a=e)}for(let t=a;t<=o;t++){let o=i[t];o.kind===`schema`?(t>a&&WL(`Set the "typeMode" config to "input" or "output" to convert pipelines with multiple schemas.`,n),e=JL(e,o,n,r,!0)):e=GL(e,o,n)}return e}let a;switch(t.type){case`boolean`:e.type=`boolean`;break;case`null`:e.type=`null`;break;case`number`:e.type=`number`;break;case`string`:e.type=`string`;break;case`array`:e.type=`array`,e.items=JL({},t.item,n,r);break;case`tuple`:case`tuple_with_rest`:case`loose_tuple`:case`strict_tuple`:e.type=`array`,e.items=[],e.minItems=t.items.length;for(let i of t.items)e.items.push(JL({},i,n,r));t.type===`tuple_with_rest`?e.additionalItems=JL({},t.rest,n,r):t.type===`strict_tuple`&&(e.additionalItems=!1);break;case`object`:case`object_with_rest`:case`loose_object`:case`strict_object`:for(let i in e.type=`object`,e.properties={},e.required=[],t.entries){let a=t.entries[i];e.properties[i]=JL({},a,n,r),a.type!==`nullish`&&a.type!==`optional`&&e.required.push(i)}t.type===`object_with_rest`?e.additionalProperties=JL({},t.rest,n,r):t.type===`strict_object`&&(e.additionalProperties=!1);break;case`record`:`pipe`in t.key&&(a=UL(a,`The "record" schema with a schema for the key that contains a "pipe" cannot be converted to JSON Schema.`)),t.key.type!==`string`&&(a=UL(a,`The "record" schema with the "${t.key.type}" schema for the key cannot be converted to JSON Schema.`)),e.type=`object`,e.additionalProperties=JL({},t.value,n,r);break;case`any`:case`unknown`:break;case`nullable`:case`nullish`:e.anyOf=[JL({},t.wrapped,n,r),{type:`null`}],t.default!==void 0&&(e.default=PL(t));break;case`exact_optional`:case`optional`:case`undefinedable`:e=JL(e,t.wrapped,n,r),t.default!==void 0&&(e.default=PL(t));break;case`literal`:typeof t.literal!=`boolean`&&typeof t.literal!=`number`&&typeof t.literal!=`string`&&(a=UL(a,`The value of the "literal" schema is not JSON compatible.`)),e.const=t.literal;break;case`enum`:e.enum=t.options;break;case`picklist`:t.options.some(e=>typeof e!=`number`&&typeof e!=`string`)&&(a=UL(a,`An option of the "picklist" schema is not JSON compatible.`)),e.enum=t.options;break;case`union`:case`variant`:e.anyOf=t.options.map(e=>JL({},e,n,r));break;case`intersect`:e.allOf=t.options.map(e=>JL({},e,n,r));break;case`lazy`:{let i=r.getterMap.get(t.getter);i||(i=t.getter(void 0),r.getterMap.set(t.getter,i));let a=r.referenceMap.get(i);if(a||(a=`${qL++}`,r.referenceMap.set(i,a),r.definitions[a]=JL({},i,n,r,!0)),e.$ref=`#/$defs/${a}`,n?.overrideRef){let t=n.overrideRef({...r,referenceId:a,valibotSchema:i,jsonSchema:e});t&&(e.$ref=t)}break}default:a=UL(a,`The "${t.type}" schema cannot be converted to JSON Schema.`)}if(n?.overrideSchema){let i=n.overrideSchema({...r,referenceId:r.referenceMap.get(t),valibotSchema:t,jsonSchema:e,errors:a});if(i)return{...i}}if(a)for(let e of a)WL(e,n);return e}var YL;function XL(){return YL}function ZL(e,t){let n={definitions:{},referenceMap:new Map,getterMap:new Map},r=t?.definitions??XL();if(r){for(let e in r)n.referenceMap.set(r[e],e);for(let e in r)n.definitions[e]=JL({},r[e],t,n,!0)}let i=JL({$schema:`http://json-schema.org/draft-07/schema#`},e,t,n);return n.referenceMap.size&&(i.$defs=n.definitions),i}var QL=function(e){return e.Success=`SUCCESS`,e.Error=`ERROR`,e.Failure=`FAILURE`,e}(QL||{}),$L=LL({status:FL(QL,`Status must be 'success' or 'error'`),message:BL(`Message must be a string`)}),eR=LL({...$L.entries,data:RL(zL(BL(),VL()))}),tR=function(e){return e.Frontend=`FRONTEND`,e.Backend=`BACKEND`,e.Design=`DESIGN`,e.Fullstack=`FULLSTACK`,e}(tR||{}),nR=LL({name:BL(`Name must be a string`),email:HL(BL(),ML(`Please enter your email.`),OL(`The email is badly formatted.`),kL(100,`Your email is too long.`)),year:HL(IL(`Year must be a number`),jL(1,`Year must be at least 1`),AL(5,`Year must be at most 5`)),batch:HL(IL(),jL(2025,`Batch must be at least 2025`)),department:HL(BL(`Department must be a string`),kL(100,`Department name is too long.`)),reasonToChooseTech:HL(BL(`Reason to choose tech must be a string`),kL(2e3,`Reason is too long.`)),otherInterests:HL(BL(`Other interests must be a string`),kL(2e3,`Other interests description is too long.`)),result:FL(tR,`Result must be one of the predefined options`)});({...nR.entries});const rR=e=>typeof e==`function`,W=function(e,t){if(typeof e==`function`)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw RangeError(`Invalid arity ${e}`);case 2:return function(e,n){return arguments.length>=2?t(e,n):function(n){return t(n,e)}};case 3:return function(e,n,r){return arguments.length>=3?t(e,n,r):function(r){return t(r,e,n)}};case 4:return function(e,n,r,i){return arguments.length>=4?t(e,n,r,i):function(i){return t(i,e,n,r)}};case 5:return function(e,n,r,i,a){return arguments.length>=5?t(e,n,r,i,a):function(a){return t(a,e,n,r,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let n=arguments;return function(e){return t(e,...n)}}}},iR=e=>e,aR=e=>()=>e,oR=aR(!0),sR=aR(!1),cR=aR(void 0),lR=cR;function G(e,t,n,r,i,a,o,s,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return a(i(r(n(t(e)))));case 7:return o(a(i(r(n(t(e))))));case 8:return s(o(a(i(r(n(t(e)))))));case 9:return c(s(o(a(i(r(n(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}const uR=e=>(t,n)=>t===n||e(t,n),dR=W(2,(e,t)=>uR((n,r)=>e(t(n),t(r)))),fR=e=>uR((t,n)=>{if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0});var pR=`effect/GlobalValue`,mR;const hR=(e,t)=>(mR||=(globalThis[pR]??=new Map,globalThis[pR]),mR.has(e)||mR.set(e,t()),mR.get(e)),gR=e=>typeof e==`string`,_R=e=>typeof e==`number`,vR=e=>typeof e==`bigint`,yR=rR,bR=e=>typeof e==`object`&&!!e,xR=e=>bR(e)||yR(e),SR=W(2,(e,t)=>xR(e)&&t in e),CR=W(2,(e,t)=>SR(e,`_tag`)&&e._tag===t),wR=e=>e==null,TR=e=>typeof e==`string`||SR(e,Symbol.iterator),ER=e=>SR(e,`then`)&&yR(e.then),DR=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;Symbol.iterator;var OR=class e{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new e(this.self)}},kR=335903614,AR=4150755663,jR=1481765933,MR=1284865837,NR=9007199254740992,PR=134217728,FR=class{_state;constructor(e,t,n,r){return wR(t)&&wR(e)?(t=Math.random()*4294967295>>>0,e=0):wR(t)&&(t=e,e=0),wR(r)&&wR(n)?(r=this._state?this._state[3]:AR,n=this._state?this._state[2]:kR):wR(r)&&(r=n,n=0),this._state=new Int32Array([0,0,n>>>0,((r||0)|1)>>>0]),this._next(),LR(this._state,this._state[0],this._state[1],e>>>0,t>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=e[3]|1}integer(e){return Math.round(this.number()*(2**53-1))%e}number(){let e=(this._next()&67108863)*1,t=(this._next()&134217727)*1;return(e*PR+t)/NR}_next(){let e=this._state[0]>>>0,t=this._state[1]>>>0;IR(this._state,e,t,jR,MR),LR(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let n=e>>>18,r=(t>>>18|e<<14)>>>0;n=(n^e)>>>0,r=(r^t)>>>0;let i=(r>>>27|n<<5)>>>0,a=e>>>27,o=(-a>>>0&31)>>>0;return(i>>>a|i<<o)>>>0}};function IR(e,t,n,r,i){let a=(n>>>16)*(i&65535)>>>0,o=(n&65535)*(i>>>16)>>>0,s=(n&65535)*(i&65535)>>>0,c=(n>>>16)*(i>>>16)+((o>>>16)+(a>>>16))>>>0;o=o<<16>>>0,s=s+o>>>0,s>>>0<o>>>0&&(c=c+1>>>0),a=a<<16>>>0,s=s+a>>>0,s>>>0<a>>>0&&(c=c+1>>>0),c=c+Math.imul(n,r)>>>0,c=c+Math.imul(t,i)>>>0,e[0]=c,e[1]=s}function LR(e,t,n,r,i){let a=t+r>>>0,o=n+i>>>0;o>>>0<n>>>0&&(a=a+1|0),e[0]=a,e[1]=o}const RR=Symbol.for(`effect/Utils/YieldWrap`);var zR=class{#value;constructor(e){this.#value=e}[RR](){return this.#value}};function BR(e){if(typeof e==`object`&&e&&RR in e)return e[RR]();throw Error(DR(`yieldWrapGet`))}const VR=hR(`effect/Utils/isStructuralRegion`,()=>({enabled:!1,tester:void 0}));var HR={effect_internal_function:e=>e()};const UR=HR.effect_internal_function(()=>Error().stack)?.includes(`effect_internal_function`)===!0?HR.effect_internal_function:{effect_internal_function:e=>{try{return e()}finally{}}}.effect_internal_function;(function*(){}).constructor;var WR=hR(Symbol.for(`effect/Hash/randomHashCache`),()=>new WeakMap);const GR=Symbol.for(`effect/Hash`),K=e=>{if(VR.enabled===!0)return 0;switch(typeof e){case`number`:return XR(e);case`bigint`:return ZR(e.toString(10));case`boolean`:return ZR(String(e));case`symbol`:return ZR(String(e));case`string`:return ZR(e);case`undefined`:return ZR(`undefined`);case`function`:case`object`:return e===null?ZR(`null`):e instanceof Date?K(e.toISOString()):e instanceof URL?K(e.href):YR(e)?e[GR]():KR(e);default:throw Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},KR=e=>(WR.has(e)||WR.set(e,XR(Math.floor(Math.random()*(2**53-1)))),WR.get(e)),qR=e=>t=>t*53^e,JR=e=>e&3221225471|e>>>1&1073741824,YR=e=>SR(e,GR),XR=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return JR(t)},ZR=e=>{let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return JR(t)},QR=(e,t)=>{let n=12289;for(let r=0;r<t.length;r++)n^=G(ZR(t[r]),qR(K(e[t[r]])));return JR(n)},$R=e=>QR(e,Object.keys(e)),ez=e=>{let t=6151;for(let n=0;n<e.length;n++)t=G(t,qR(K(e[n])));return JR(t)},tz=function(){if(arguments.length===1){let e=arguments[0];return function(t){return Object.defineProperty(e,GR,{value(){return t},enumerable:!1}),t}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,GR,{value(){return t},enumerable:!1}),t},nz=Symbol.for(`effect/Equal`);function rz(){return arguments.length===1?e=>iz(e,arguments[0]):iz(arguments[0],arguments[1])}function iz(e,t){if(e===t)return!0;let n=typeof e;if(n!==typeof t)return!1;if(n===`object`||n===`function`){if(e!==null&&t!==null){if(az(e)&&az(t))return K(e)===K(t)&&e[nz](t)?!0:VR.enabled&&VR.tester?VR.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString();if(e instanceof URL&&t instanceof URL)return e.href===t.href}if(VR.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,n)=>iz(e,t[n]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let n=Object.keys(e),r=Object.keys(t);if(n.length===r.length){for(let r of n)if(!(r in t&&iz(e[r],t[r])))return VR.tester?VR.tester(e,t):!1;return!0}}return VR.tester?VR.tester(e,t):!1}}return VR.enabled&&VR.tester?VR.tester(e,t):!1}const az=e=>SR(e,nz),oz=()=>rz,sz=Symbol.for(`nodejs.util.inspect.custom`),cz=e=>{try{if(SR(e,`toJSON`)&&yR(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(cz)}catch{return{}}return gz(e)},lz=e=>JSON.stringify(e,null,2),uz=(e,t=2)=>{if(typeof e==`string`)return e;try{return typeof e==`object`?dz(e,t):String(e)}catch{return String(e)}},dz=(e,t)=>{let n=[],r=JSON.stringify(e,(e,t)=>typeof t==`object`&&t?n.includes(t)?void 0:n.push(t)&&(mz.fiberRefs!==void 0&&pz(t)?t[fz](mz.fiberRefs):t):t,t);return n=void 0,r},fz=Symbol.for(`effect/Inspectable/Redactable`),pz=e=>typeof e==`object`&&!!e&&fz in e;var mz=hR(`effect/Inspectable/redactableState`,()=>({fiberRefs:void 0}));const hz=(e,t)=>{let n=mz.fiberRefs;mz.fiberRefs=e;try{return t()}finally{mz.fiberRefs=n}},gz=e=>pz(e)&&mz.fiberRefs!==void 0?e[fz](mz.fiberRefs):e,_z=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let e=0,r=t.length;e<r;e++)n=t[e](n);return n}}},vz=`Async`,yz=`Commit`,bz=`Failure`,xz=`OnFailure`,Sz=`OnSuccess`,Cz=`OnSuccessAndFailure`,wz=`Success`,Tz=`Sync`,Ez=`UpdateRuntimeFlags`,Dz=`While`,Oz=`Iterator`,kz=`WithRuntime`,Az=`Yield`,jz=`RevertFlags`;var Mz=`3.18.4`;const Nz=()=>Mz,Pz=Symbol.for(`effect/Effect`),Fz=Symbol.for(`effect/Stream`),Iz=Symbol.for(`effect/Sink`),Lz=Symbol.for(`effect/Channel`),Rz={_R:e=>e,_E:e=>e,_A:e=>e,_V:Nz()};var zz={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},Bz={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e};const Vz={[Pz]:Rz,[Fz]:Rz,[Iz]:zz,[Lz]:Bz,[nz](e){return this===e},[GR](){return tz(this,KR(this))},[Symbol.iterator](){return new OR(new zR(this))},pipe(){return _z(this,arguments)}},Hz={[GR](){return tz(this,$R(this))},[nz](e){let t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(let n of t)if(!(n in e&&rz(this[n],e[n])))return!1;return!0}},Uz={...Vz,_op:yz},Wz={...Uz,...Hz},Gz=function(){function e(){}return e.prototype=Uz,e}();var Kz=Symbol.for(`effect/Option`),qz={...Vz,[Kz]:{_A:e=>e},[sz](){return this.toJSON()},toString(){return lz(this.toJSON())}},Jz=Object.assign(Object.create(qz),{_tag:`Some`,_op:`Some`,[nz](e){return Zz(e)&&$z(e)&&rz(this.value,e.value)},[GR](){return tz(this,qR(K(this._tag))(K(this.value)))},toJSON(){return{_id:`Option`,_tag:this._tag,value:cz(this.value)}}}),Yz=K(`None`),Xz=Object.assign(Object.create(qz),{_tag:`None`,_op:`None`,[nz](e){return Zz(e)&&Qz(e)},[GR](){return Yz},toJSON(){return{_id:`Option`,_tag:this._tag}}});const Zz=e=>SR(e,Kz),Qz=e=>e._tag===`None`,$z=e=>e._tag===`Some`,eB=Object.create(Xz),tB=e=>{let t=Object.create(Jz);return t.value=e,t},nB=Symbol.for(`effect/Either`);var rB={...Vz,[nB]:{_R:e=>e},[sz](){return this.toJSON()},toString(){return lz(this.toJSON())}},iB=Object.assign(Object.create(rB),{_tag:`Right`,_op:`Right`,[nz](e){return oB(e)&&cB(e)&&rz(this.right,e.right)},[GR](){return qR(K(this._tag))(K(this.right))},toJSON(){return{_id:`Either`,_tag:this._tag,right:cz(this.right)}}}),aB=Object.assign(Object.create(rB),{_tag:`Left`,_op:`Left`,[nz](e){return oB(e)&&sB(e)&&rz(this.left,e.left)},[GR](){return qR(K(this._tag))(K(this.left))},toJSON(){return{_id:`Either`,_tag:this._tag,left:cz(this.left)}}});const oB=e=>SR(e,nB),sB=e=>e._tag===`Left`,cB=e=>e._tag===`Right`,lB=e=>{let t=Object.create(aB);return t.left=e,t},uB=e=>{let t=Object.create(iB);return t.right=e,t},dB=lB,fB=sB,pB=cB,mB=W(2,(e,{onLeft:t,onRight:n})=>fB(e)?t(e.left):n(e.right))({onLeft:iR,onRight:iR}),hB=e=>e.length>0,gB=e=>(t,n)=>t===n?0:e(t,n),_B=gB((e,t)=>e<t?-1:1),vB=W(2,(e,t)=>gB((n,r)=>e(t(n),t(r)))),yB=e=>W(2,(t,n)=>e(t,n)===1),bB=()=>eB,xB=tB,SB=Qz,CB=$z,wB=W(2,(e,{onNone:t,onSome:n})=>SB(e)?t():n(e.value)),TB=W(2,(e,t)=>SB(e)?t():e.value),EB=W(2,(e,t)=>SB(e)?xB(t()):e),DB=e=>e==null?bB():xB(e),OB=TB(cR),kB=W(2,(e,t)=>{if(CB(e))return e.value;throw t()})(()=>Error(`getOrThrow called on a None`)),AB=W(2,(e,t)=>SB(e)?bB():xB(t(e.value))),jB=W(2,(e,t)=>SB(e)?bB():t(e.value)),MB=(e=>W(2,(t,n)=>SB(t)?!1:e(t.value,n)))(oz()),NB=e=>(t,n)=>SB(t)?n:SB(n)?t:xB(e(t.value,n.value)),PB=(...e)=>e,FB=e=>Array(e),IB=W(2,(e,t)=>{let n=Math.max(1,Math.floor(e)),r=Array(n);for(let e=0;e<n;e++)r[e]=t(e);return r}),LB=e=>Array.isArray(e)?e:Array.from(e),RB=e=>Array.isArray(e)?e:[e],zB=W(2,(e,t)=>[t,...e]),BB=W(2,(e,t)=>[...e,t]),VB=W(2,(e,t)=>LB(e).concat(LB(t)));Array.isArray;const HB=e=>e.length===0,UB=hB,WB=hB;var GB=(e,t)=>e<0||e>=t.length,KB=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length));const qB=W(2,(e,t)=>{let n=Math.floor(t);return GB(n,e)?bB():xB(e[n])}),JB=W(2,(e,t)=>{let n=Math.floor(t);if(GB(n,e))throw Error(`Index ${n} out of bounds`);return e[n]}),YB=qB(0),XB=JB(0),ZB=e=>WB(e)?xB(QB(e)):bB(),QB=e=>e[e.length-1],$B=e=>e.slice(1);var eV=(e,t)=>{let n=0;for(let r of e){if(!t(r,n))break;n++}return n};const tV=W(2,(e,t)=>cV(e,eV(e,t))),nV=W(2,(e,t)=>{let n=LB(e);return n.slice(KB(t,n),n.length)}),rV=e=>Array.from(e).reverse(),iV=W(2,(e,t)=>{let n=Array.from(e);return n.sort(t),n}),aV=W(2,(e,t)=>oV(e,t,PB)),oV=W(3,(e,t,n)=>{let r=LB(e),i=LB(t);if(WB(r)&&WB(i)){let e=[n(XB(r),XB(i))],t=Math.min(r.length,i.length);for(let a=1;a<t;a++)e[a]=n(r[a],i[a]);return e}return[]});var sV=oz();const cV=W(2,(e,t)=>{let n=Array.from(e),r=Math.floor(t);return WB(n)?r>=1?lV(n,r):[[],n]:[n,[]]}),lV=W(2,(e,t)=>{let n=Math.max(1,Math.floor(t));return n>=e.length?[uV(e),[]]:[zB(e.slice(1,n),XB(e)),e.slice(n)]}),uV=e=>e.slice(),dV=W(3,(e,t,n)=>{let r=LB(e),i=LB(t);return WB(r)?WB(i)?bV(n)(VB(r,i)):r:i}),fV=W(2,(e,t)=>dV(e,t,sV)),pV=()=>[],mV=e=>[e],hV=W(2,(e,t)=>e.map(t)),gV=W(2,(e,t)=>{if(HB(e))return[];let n=[];for(let r=0;r<e.length;r++){let i=t(e[r],r);for(let e=0;e<i.length;e++)n.push(i[e])}return n})(iR),_V=W(3,(e,t,n)=>LB(e).reduce((e,t,r)=>n(e,t,r),t)),vV=(e,t)=>{let n=[],r=e,i;for(;CB(i=t(r));){let[e,t]=i.value;n.push(e),r=t}return n},yV=fR,bV=W(2,(e,t)=>{let n=LB(e);if(WB(n)){let e=[XB(n)],r=$B(n);for(let n of r)e.every(e=>!t(n,e))&&e.push(n);return e}return[]}),xV=e=>bV(e,oz()),SV=W(2,(e,t)=>LB(e).join(t)),CV=_B,wV=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,`\\$&`),TV=Symbol.for(`effect/Context/Tag`),EV=Symbol.for(`effect/Context/Reference`),DV=Symbol.for(`effect/STM`),OV={...Vz,_op:`Tag`,[DV]:Rz,[TV]:{_Service:e=>e,_Identifier:e=>e},toString(){return lz(this.toJSON())},toJSON(){return{_id:`Tag`,key:this.key,stack:this.stack}},[sz](){return this.toJSON()},of(e){return e},context(e){return BV(this,e)}},kV={...OV,[EV]:EV},AV=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let n=Error();Error.stackTraceLimit=t;let r=Object.create(OV);return Object.defineProperty(r,`stack`,{get(){return n.stack}}),r.key=e,r},jV=()=>(e,t)=>{let n=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=Error();Error.stackTraceLimit=n;function i(){}return Object.setPrototypeOf(i,kV),i.key=e,i.defaultValue=t.defaultValue,Object.defineProperty(i,`stack`,{get(){return r.stack}}),i},MV=Symbol.for(`effect/Context`),NV={[MV]:{_Services:e=>e},[nz](e){if(IV(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!rz(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[GR](){return tz(this,XR(this.unsafeMap.size))},pipe(){return _z(this,arguments)},toString(){return lz(this.toJSON())},toJSON(){return{_id:`Context`,services:Array.from(this.unsafeMap).map(cz)}},[sz](){return this.toJSON()}},PV=e=>{let t=Object.create(NV);return t.unsafeMap=e,t};var FV=e=>{let t=Error(`Service not found${e.key?`: ${String(e.key)}`:``}`);if(e.stack){let n=e.stack.split(`
`);if(n.length>2){let e=n[2].match(/at (.*)/);e&&(t.message+=` (defined at ${e[1]})`)}}if(t.stack){let e=t.stack.split(`
`);e.splice(1,3),t.stack=e.join(`
`)}return t};const IV=e=>SR(e,MV),LV=e=>SR(e,EV);var RV=PV(new Map);const zV=()=>RV,BV=(e,t)=>PV(new Map([[e.key,t]])),VV=W(3,(e,t,n)=>{let r=new Map(e.unsafeMap);return r.set(t.key,n),PV(r)});var HV=hR(`effect/Context/defaultValueCache`,()=>new Map),UV=e=>{if(HV.has(e.key))return HV.get(e.key);let t=e.defaultValue();return HV.set(e.key,t),t};const WV=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):UV(t),GV=W(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(EV in t)return UV(t);throw FV(t)}return e.unsafeMap.get(t.key)}),KV=GV,qV=W(2,(e,t)=>e.unsafeMap.has(t.key)?tB(e.unsafeMap.get(t.key)):LV(t)?tB(UV(t)):eB),JV=W(2,(e,t)=>{let n=new Map(e.unsafeMap);for(let[e,r]of t.unsafeMap)n.set(e,r);return PV(n)}),YV=AV,XV=zV,ZV=BV,QV=VV,$V=KV,eH=GV,tH=qV,nH=JV,rH=jV;var iH=Symbol.for(`effect/Chunk`);function aH(e,t,n,r,i){for(let a=t;a<Math.min(e.length,t+i);a++)n[r+a-t]=e[a];return n}var oH=[],sH=(e=>uR((t,n)=>t.length===n.length&&_H(t).every((t,r)=>e(t,SH(n,r)))))(rz),cH={[iH]:{_A:e=>e},toString(){return lz(this.toJSON())},toJSON(){return{_id:`Chunk`,values:_H(this).map(cz)}},[sz](){return this.toJSON()},[nz](e){return uH(e)&&sH(this,e)},[GR](){return tz(this,ez(_H(this)))},[Symbol.iterator](){switch(this.backing._tag){case`IArray`:return this.backing.array[Symbol.iterator]();case`IEmpty`:return oH[Symbol.iterator]();default:return _H(this)[Symbol.iterator]()}},pipe(){return _z(this,arguments)}},lH=e=>{let t=Object.create(cH);switch(t.backing=e,e._tag){case`IEmpty`:t.length=0,t.depth=0,t.left=t,t.right=t;break;case`IConcat`:t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break;case`IArray`:t.length=e.array.length,t.depth=0,t.left=dH,t.right=dH;break;case`ISingleton`:t.length=1,t.depth=0,t.left=dH,t.right=dH;break;case`ISlice`:t.length=e.length,t.depth=e.chunk.depth+1,t.left=dH,t.right=dH;break}return t};const uH=e=>SR(e,iH);var dH=lH({_tag:`IEmpty`});const fH=()=>dH,pH=(...e)=>xH(e),mH=e=>lH({_tag:`ISingleton`,a:e}),hH=e=>uH(e)?e:bH(LB(e));var gH=(e,t,n)=>{switch(e.backing._tag){case`IArray`:aH(e.backing.array,0,t,n,e.length);break;case`IConcat`:gH(e.left,t,n),gH(e.right,t,n+e.left.length);break;case`ISingleton`:t[n]=e.backing.a;break;case`ISlice`:{let r=0,i=n;for(;r<e.length;)t[i]=SH(e,r),r+=1,i+=1;break}}};const _H=e=>{switch(e.backing._tag){case`IEmpty`:return oH;case`IArray`:return e.backing.array;default:{let t=Array(e.length);return gH(e,t,0),e.backing={_tag:`IArray`,array:t},e.left=dH,e.right=dH,e.depth=0,t}}},vH=e=>{switch(e.backing._tag){case`IEmpty`:case`ISingleton`:return e;case`IArray`:return lH({_tag:`IArray`,array:rV(e.backing.array)});case`IConcat`:return lH({_tag:`IConcat`,left:vH(e.backing.right),right:vH(e.backing.left)});case`ISlice`:return bH(rV(_H(e)))}},yH=W(2,(e,t)=>t<0||t>=e.length?bB():xB(SH(e,t))),bH=e=>e.length===0?fH():e.length===1?mH(e[0]):lH({_tag:`IArray`,array:e}),xH=e=>bH(e),SH=W(2,(e,t)=>{switch(e.backing._tag){case`IEmpty`:throw Error(`Index out of bounds`);case`ISingleton`:if(t!==0)throw Error(`Index out of bounds`);return e.backing.a;case`IArray`:if(t>=e.length||t<0)throw Error(`Index out of bounds`);return e.backing.array[t];case`IConcat`:return t<e.left.length?SH(e.left,t):SH(e.right,t-e.left.length);case`ISlice`:return SH(e.backing.chunk,t+e.backing.offset)}}),CH=W(2,(e,t)=>EH(e,mH(t))),wH=W(2,(e,t)=>EH(mH(t),e)),TH=W(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return dH;switch(e.backing._tag){case`ISlice`:return lH({_tag:`ISlice`,chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case`IConcat`:return t>e.left.length?TH(e.right,t-e.left.length):lH({_tag:`IConcat`,left:TH(e.left,t),right:e.right});default:return lH({_tag:`ISlice`,chunk:e,offset:t,length:e.length-t})}}),EH=W(2,(e,t)=>{if(e.backing._tag===`IEmpty`)return t;if(t.backing._tag===`IEmpty`)return e;let n=t.depth-e.depth;if(Math.abs(n)<=1)return lH({_tag:`IConcat`,left:e,right:t});if(n<-1)if(e.left.depth>=e.right.depth){let n=EH(e.right,t);return lH({_tag:`IConcat`,left:e.left,right:n})}else{let n=EH(e.right.right,t);if(n.depth===e.depth-3){let t=lH({_tag:`IConcat`,left:e.right.left,right:n});return lH({_tag:`IConcat`,left:e.left,right:t})}else return lH({_tag:`IConcat`,left:lH({_tag:`IConcat`,left:e.left,right:e.right.left}),right:n})}else if(t.right.depth>=t.left.depth)return lH({_tag:`IConcat`,left:EH(e,t.left),right:t.right});else{let n=EH(e,t.left.left);return n.depth===t.depth-3?lH({_tag:`IConcat`,left:lH({_tag:`IConcat`,left:n,right:t.left.right}),right:t.right}):lH({_tag:`IConcat`,left:n,right:lH({_tag:`IConcat`,left:t.left.right,right:t.right})})}}),DH=e=>e.length===0,OH=e=>e.length>0,kH=yH(0),AH=e=>SH(e,0),jH=AH,MH=e=>TH(e,1);var NH=Symbol.for(`effect/Duration`),PH=BigInt(0),FH=BigInt(24),IH=BigInt(60),LH=BigInt(1e3),RH=BigInt(1e6),zH=BigInt(1e9),BH=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/;const VH=e=>{if(KH(e))return e;if(_R(e))return QH(e);if(vR(e))return XH(e);if(Array.isArray(e)&&e.length===2&&e.every(_R))return e[0]===-1/0||e[1]===-1/0||Number.isNaN(e[0])||Number.isNaN(e[1])?JH:e[0]===1/0||e[1]===1/0?YH:XH(BigInt(Math.round(e[0]*1e9))+BigInt(Math.round(e[1])));if(gR(e)){let t=BH.exec(e);if(t){let[e,n,r]=t,i=Number(n);switch(r){case`nano`:case`nanos`:return XH(BigInt(n));case`micro`:case`micros`:return ZH(BigInt(n));case`milli`:case`millis`:return QH(i);case`second`:case`seconds`:return $H(i);case`minute`:case`minutes`:return eU(i);case`hour`:case`hours`:return tU(i);case`day`:case`days`:return nU(i);case`week`:case`weeks`:return rU(i)}}}throw Error(`Invalid DurationInput`)};var HH={_tag:`Millis`,millis:0},UH={_tag:`Infinity`},WH={[NH]:NH,[GR](){return tz(this,$R(this.value))},[nz](e){return KH(e)&&fU(this,e)},toString(){return`Duration(${mU(this)})`},toJSON(){switch(this.value._tag){case`Millis`:return{_id:`Duration`,_tag:`Millis`,millis:this.value.millis};case`Nanos`:return{_id:`Duration`,_tag:`Nanos`,hrtime:oU(this)};case`Infinity`:return{_id:`Duration`,_tag:`Infinity`}}},[sz](){return this.toJSON()},pipe(){return _z(this,arguments)}},GH=e=>{let t=Object.create(WH);return _R(e)?isNaN(e)||e<=0?t.value=HH:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:`Millis`,millis:e}:t.value={_tag:`Nanos`,nanos:BigInt(Math.round(e*1e6))}:t.value=UH:e<=PH?t.value=HH:t.value={_tag:`Nanos`,nanos:e},t};const KH=e=>SR(e,NH),qH=e=>{switch(e.value._tag){case`Millis`:return e.value.millis===0;case`Nanos`:return e.value.nanos===PH;case`Infinity`:return!1}},JH=GH(0),YH=GH(1/0),XH=e=>GH(e),ZH=e=>GH(e*LH),QH=e=>GH(e),$H=e=>GH(e*1e3),eU=e=>GH(e*6e4),tU=e=>GH(e*36e5),nU=e=>GH(e*864e5),rU=e=>GH(e*6048e5),iU=e=>sU(e,{onMillis:e=>e,onNanos:e=>Number(e)/1e6}),aU=e=>{let t=VH(e);switch(t.value._tag){case`Infinity`:throw Error(`Cannot convert infinite duration to nanos`);case`Nanos`:return t.value.nanos;case`Millis`:return BigInt(Math.round(t.value.millis*1e6))}},oU=e=>{let t=VH(e);switch(t.value._tag){case`Infinity`:return[1/0,0];case`Nanos`:return[Number(t.value.nanos/zH),Number(t.value.nanos%zH)];case`Millis`:return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},sU=W(2,(e,t)=>{let n=VH(e);switch(n.value._tag){case`Nanos`:return t.onNanos(n.value.nanos);case`Infinity`:return t.onMillis(1/0);case`Millis`:return t.onMillis(n.value.millis)}}),cU=W(3,(e,t,n)=>{let r=VH(e),i=VH(t);if(r.value._tag===`Infinity`||i.value._tag===`Infinity`)return n.onMillis(iU(r),iU(i));if(r.value._tag===`Nanos`||i.value._tag===`Nanos`){let e=r.value._tag===`Nanos`?r.value.nanos:BigInt(Math.round(r.value.millis*1e6)),t=i.value._tag===`Nanos`?i.value.nanos:BigInt(Math.round(i.value.millis*1e6));return n.onNanos(e,t)}return n.onMillis(r.value.millis,i.value.millis)}),lU=(e,t)=>cU(e,t,{onMillis:(e,t)=>e===t,onNanos:(e,t)=>e===t}),uU=W(2,(e,t)=>cU(e,t,{onMillis:(e,t)=>e<=t,onNanos:(e,t)=>e<=t})),dU=W(2,(e,t)=>cU(e,t,{onMillis:(e,t)=>e>=t,onNanos:(e,t)=>e>=t})),fU=W(2,(e,t)=>lU(VH(e),VH(t))),pU=e=>{let t=VH(e);if(t.value._tag===`Infinity`)return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};let n=aU(t),r=n/RH,i=r/LH,a=i/IH,o=a/IH,s=o/FH;return{days:Number(s),hours:Number(o%FH),minutes:Number(a%IH),seconds:Number(i%IH),millis:Number(r%LH),nanos:Number(n%RH)}},mU=e=>{let t=VH(e);if(t.value._tag===`Infinity`)return`Infinity`;if(qH(t))return`0`;let n=pU(t),r=[];return n.days!==0&&r.push(`${n.days}d`),n.hours!==0&&r.push(`${n.hours}h`),n.minutes!==0&&r.push(`${n.minutes}m`),n.seconds!==0&&r.push(`${n.seconds}s`),n.millis!==0&&r.push(`${n.millis}ms`),n.nanos!==0&&r.push(`${n.nanos}ns`),r.join(` `)};function hU(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function gU(e,t){return t>>>e&31}function _U(e){return 1<<e}function vU(e,t){return hU(e&t-1)}const yU=(e,t)=>({value:e,previous:t});function bU(e,t,n,r){let i=r;if(!e){let e=r.length;i=Array(e);for(let t=0;t<e;++t)i[t]=r[t]}return i[t]=n,i}function xU(e,t,n){let r=n.length-1,i=0,a=0,o=n;if(e)i=a=t;else for(o=Array(r);i<t;)o[a++]=n[i++];for(++i;i<=r;)o[a++]=n[i++];return e&&(o.length=r),o}function SU(e,t,n,r){let i=r.length;if(e){let e=i;for(;e>=t;)r[e--]=r[e];return r[t]=n,r}let a=0,o=0,s=Array(i+1);for(;a<t;)s[o++]=r[a++];for(s[t]=n;a<i;)s[++o]=r[a++];return s}var CU=class e{_tag=`EmptyNode`;modify(t,n,r,i,a,o){let s=r(bB());return SB(s)?new e:(++o.value,new DU(t,i,a,s))}};function wU(e){return CR(e,`EmptyNode`)}function TU(e){return wU(e)||e._tag===`LeafNode`||e._tag===`CollisionNode`}function EU(e,t){return wU(e)?!1:t===e.edit}var DU=class e{edit;hash;key;value;_tag=`LeafNode`;constructor(e,t,n,r){this.edit=e,this.hash=t,this.key=n,this.value=r}modify(t,n,r,i,a,o){if(rz(a,this.key)){let n=r(this.value);return n===this.value?this:SB(n)?(--o.value,new CU):EU(this,t)?(this.value=n,this):new e(t,i,a,n)}let s=r(bB());return SB(s)?this:(++o.value,PU(t,n,this.hash,this,i,new e(t,i,a,s)))}},OU=class e{edit;hash;children;_tag=`CollisionNode`;constructor(e,t,n){this.edit=e,this.hash=t,this.children=n}modify(t,n,r,i,a,o){if(i===this.hash){let n=EU(this,t),i=this.updateCollisionList(n,t,this.hash,this.children,r,a,o);return i===this.children?this:i.length>1?new e(t,this.hash,i):i[0]}let s=r(bB());return SB(s)?this:(++o.value,PU(t,n,this.hash,this,i,new DU(t,i,a,s)))}updateCollisionList(e,t,n,r,i,a,o){let s=r.length;for(let c=0;c<s;++c){let s=r[c];if(`key`in s&&rz(a,s.key)){let l=s.value,u=i(l);return u===l?r:SB(u)?(--o.value,xU(e,c,r)):bU(e,c,new DU(t,n,a,u),r)}}let c=i(bB());return SB(c)?r:(++o.value,bU(e,s,new DU(t,n,a,c),r))}},kU=class e{edit;mask;children;_tag=`IndexedNode`;constructor(e,t,n){this.edit=e,this.mask=t,this.children=n}modify(t,n,r,i,a,o){let s=this.mask,c=this.children,l=gU(n,i),u=_U(l),d=vU(s,u),f=s&u,p=EU(this,t);if(!f){let f=new CU().modify(t,n+5,r,i,a,o);return f?c.length>=16?MU(t,l,f,s,c):new e(t,s|u,SU(p,d,f,c)):this}let m=c[d],h=m.modify(t,n+5,r,i,a,o);if(m===h)return this;let g=s,_;if(wU(h)){if(g&=~u,!g)return new CU;if(c.length<=2&&TU(c[d^1]))return c[d^1];_=xU(p,d,c)}else _=bU(p,d,h,c);return p?(this.mask=g,this.children=_,this):new e(t,g,_)}},AU=class e{edit;size;children;_tag=`ArrayNode`;constructor(e,t,n){this.edit=e,this.size=t,this.children=n}modify(t,n,r,i,a,o){let s=this.size,c=this.children,l=gU(n,i),u=c[l],d=(u||new CU).modify(t,n+5,r,i,a,o);if(u===d)return this;let f=EU(this,t),p;if(wU(u)&&!wU(d))++s,p=bU(f,l,d,c);else if(!wU(u)&&wU(d)){if(--s,s<=8)return jU(t,s,l,c);p=bU(f,l,new CU,c)}else p=bU(f,l,d,c);return f?(this.size=s,this.children=p,this):new e(t,s,p)}};function jU(e,t,n,r){let i=Array(t-1),a=0,o=0;for(let e=0,t=r.length;e<t;++e)if(e!==n){let t=r[e];t&&!wU(t)&&(i[a++]=t,o|=1<<e)}return new kU(e,o,i)}function MU(e,t,n,r,i){let a=[],o=r,s=0;for(let e=0;o;++e)o&1&&(a[e]=i[s++]),o>>>=1;return a[t]=n,new AU(e,s+1,a)}function NU(e,t,n,r,i,a){if(n===i)return new OU(e,n,[a,r]);let o=gU(t,n),s=gU(t,i);if(o===s)return t=>new kU(e,_U(o)|_U(s),[t]);{let t=o<s?[r,a]:[a,r];return new kU(e,_U(o)|_U(s),t)}}function PU(e,t,n,r,i,a){let o,s=t;for(;;){let t=NU(e,s,n,r,i,a);if(typeof t==`function`)o=yU(t,o),s+=5;else{let e=t;for(;o!=null;)e=o.value(e),o=o.previous;return e}}}var FU=`effect/HashMap`;const IU=Symbol.for(FU);var LU={[IU]:IU,[Symbol.iterator](){return new zU(this,(e,t)=>[e,t])},[GR](){let e=K(FU);for(let t of this)e^=G(K(t[0]),qR(K(t[1])));return tz(this,e)},[nz](e){if(KU(e)){if(e._size!==this._size)return!1;for(let t of this){let n=G(e,YU(t[0],K(t[0])));if(SB(n)||!rz(t[1],n.value))return!1}return!0}return!1},toString(){return lz(this.toJSON())},toJSON(){return{_id:`HashMap`,values:Array.from(this).map(cz)}},[sz](){return this.toJSON()},pipe(){return _z(this,arguments)}},RU=(e,t,n,r)=>{let i=Object.create(LU);return i._editable=e,i._edit=t,i._root=n,i._size=r,i},zU=class e{map;f;v;constructor(e,t){this.map=e,this.f=t,this.v=VU(this.map._root,this.f,void 0)}next(){if(SB(this.v))return{done:!0,value:void 0};let e=this.v.value;return this.v=BU(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new e(this.map,this.f)}},BU=e=>e?HU(e[0],e[1],e[2],e[3],e[4]):bB(),VU=(e,t,n=void 0)=>{switch(e._tag){case`LeafNode`:return CB(e.value)?xB({value:t(e.key,e.value.value),cont:n}):BU(n);case`CollisionNode`:case`ArrayNode`:case`IndexedNode`:{let r=e.children;return HU(r.length,r,0,t,n)}default:return BU(n)}},HU=(e,t,n,r,i)=>{for(;n<e;){let a=t[n++];if(a&&!wU(a))return VU(a,r,[e,t,n,r,i])}return BU(i)},UU=RU(!1,0,new CU,0);const WU=()=>UU,GU=e=>{let t=tW(WU());for(let n of e)ZU(t,n[0],n[1]);return nW(t)},KU=e=>SR(e,IU),qU=e=>e&&wU(e._root),JU=W(2,(e,t)=>YU(e,t,K(t))),YU=W(3,(e,t,n)=>{let r=e._root,i=0;for(;;)switch(r._tag){case`LeafNode`:return rz(t,r.key)?r.value:bB();case`CollisionNode`:if(n===r.hash){let e=r.children;for(let n=0,r=e.length;n<r;++n){let r=e[n];if(`key`in r&&rz(t,r.key))return r.value}}return bB();case`IndexedNode`:{let e=_U(gU(i,n));if(r.mask&e){r=r.children[vU(r.mask,e)],i+=5;break}return bB()}case`ArrayNode`:if(r=r.children[gU(i,n)],r){i+=5;break}return bB();default:return bB()}}),XU=W(2,(e,t)=>CB(YU(e,t,K(t)))),ZU=W(3,(e,t,n)=>rW(e,t,()=>xB(n))),QU=W(3,(e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:RU(e._editable,e._edit,t,n)),$U=e=>new zU(e,e=>e),eW=e=>e._size,tW=e=>RU(!0,e._edit+1,e._root,e._size),nW=e=>(e._editable=!1,e),rW=W(3,(e,t,n)=>iW(e,t,K(t),n)),iW=W(4,(e,t,n,r)=>{let i={value:e._size};return G(e,QU(e._root.modify(e._editable?e._edit:NaN,0,r,n,t,i),i.value))}),aW=W(2,(e,t)=>rW(e,t,bB)),oW=W(2,(e,t)=>cW(e,WU(),(e,n,r)=>ZU(e,r,t(n,r)))),sW=W(2,(e,t)=>cW(e,void 0,(e,n,r)=>t(n,r))),cW=W(3,(e,t,n)=>{let r=e._root;if(r._tag===`LeafNode`)return CB(r.value)?n(t,r.value.value,r.key):t;if(r._tag===`EmptyNode`)return t;let i=[r.children],a;for(;a=i.pop();)for(let e=0,r=a.length;e<r;){let r=a[e++];r&&!wU(r)&&(r._tag===`LeafNode`?CB(r.value)&&(t=n(t,r.value.value,r.key)):i.push(r.children))}return t});var lW=`effect/HashSet`;const uW=Symbol.for(lW);var dW={[uW]:uW,[Symbol.iterator](){return $U(this._keyMap)},[GR](){return tz(this,qR(K(this._keyMap))(K(lW)))},[nz](e){return pW(e)?eW(this._keyMap)===eW(e._keyMap)&&rz(this._keyMap,e._keyMap):!1},toString(){return lz(this.toJSON())},toJSON(){return{_id:`HashSet`,values:Array.from(this).map(cz)}},[sz](){return this.toJSON()},pipe(){return _z(this,arguments)}};const fW=e=>{let t=Object.create(dW);return t._keyMap=e,t},pW=e=>SR(e,uW);var mW=fW(WU());const hW=()=>mW,gW=e=>{let t=SW(hW());for(let n of e)TW(t,n);return CW(t)},_W=(...e)=>{let t=SW(hW());for(let n of e)TW(t,n);return CW(t)},vW=W(2,(e,t)=>XU(e._keyMap,t)),yW=W(2,(e,t)=>{let n=!1;for(let r of e)if(n=t(r),n)break;return n}),bW=W(2,(e,t)=>!yW(e,e=>!t(e))),xW=e=>eW(e._keyMap),SW=e=>fW(tW(e._keyMap)),CW=e=>(e._keyMap._editable=!1,e),wW=W(2,(e,t)=>{let n=SW(e);return t(n),CW(n)}),TW=W(2,(e,t)=>e._keyMap._editable?(ZU(t,!0)(e._keyMap),e):fW(ZU(t,!0)(e._keyMap))),EW=W(2,(e,t)=>e._keyMap._editable?(aW(t)(e._keyMap),e):fW(aW(t)(e._keyMap))),DW=W(2,(e,t)=>wW(e,e=>{for(let n of t)EW(e,n)})),OW=W(2,(e,t)=>wW(hW(),n=>{kW(e,e=>TW(n,e));for(let e of t)TW(n,e)})),kW=W(2,(e,t)=>sW(e._keyMap,(e,n)=>t(n))),AW=W(3,(e,t,n)=>cW(e._keyMap,t,(e,t,r)=>n(e,r))),jW=hW,MW=gW,NW=_W,PW=vW,FW=bW,IW=xW,LW=TW,RW=EW,zW=DW,BW=OW,VW=AW;var HW=Symbol.for(`effect/MutableRef`),UW={[HW]:HW,toString(){return lz(this.toJSON())},toJSON(){return{_id:`MutableRef`,current:cz(this.current)}},[sz](){return this.toJSON()},pipe(){return _z(this,arguments)}};const WW=e=>{let t=Object.create(UW);return t.current=e,t},GW=e=>e.current,KW=W(2,(e,t)=>(e.current=t,e));var qW=`effect/FiberId`;const JW=Symbol.for(qW);var YW=`None`,XW=`Runtime`,ZW=`Composite`,QW=ZR(`${qW}-${YW}`),$W=class{[JW]=JW;_tag=YW;id=-1;startTimeMillis=-1;[GR](){return QW}[nz](e){return nG(e)&&e._tag===YW}toString(){return lz(this.toJSON())}toJSON(){return{_id:`FiberId`,_tag:this._tag}}[sz](){return this.toJSON()}},eG=class{id;startTimeMillis;[JW]=JW;_tag=XW;constructor(e,t){this.id=e,this.startTimeMillis=t}[GR](){return tz(this,ZR(`${qW}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[nz](e){return nG(e)&&e._tag===XW&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return lz(this.toJSON())}toJSON(){return{_id:`FiberId`,_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[sz](){return this.toJSON()}};const tG=new $W,nG=e=>SR(e,JW),rG=e=>e._tag===YW||G(sG(e),FW(e=>rG(e))),iG=e=>{switch(e._tag){case YW:return jW();case XW:return NW(e.id);case ZW:return G(iG(e.left),BW(iG(e.right)))}};var aG=hR(Symbol.for(`effect/Fiber/Id/_fiberCounter`),()=>WW(0));const oG=e=>Array.from(iG(e)).map(e=>`#${e}`).join(`,`),sG=e=>{switch(e._tag){case YW:return jW();case XW:return NW(e);case ZW:return G(sG(e.left),BW(sG(e.right)))}},cG=()=>{let e=GW(aG);return G(aG,KW(e+1)),new eG(e,Date.now())},lG=tG,uG=oG,dG=cG,fG=WU,pG=GU,mG=qU,hG=JU,gG=ZU,_G=$U,vG=rW,yG=oW,bG=cW,xG=Symbol.for(`effect/List`),SG=e=>LB(e);var CG=(e=>dR(yV(e),SG))(rz),wG={[xG]:xG,_tag:`Cons`,toString(){return lz(this.toJSON())},toJSON(){return{_id:`List`,_tag:`Cons`,values:SG(this).map(cz)}},[sz](){return this.toJSON()},[nz](e){return kG(e)&&this._tag===e._tag&&CG(this,e)},[GR](){return tz(this,ez(SG(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag===`Nil`)return e=!0,this.return();let n=t.head;return t=t.tail,{done:e,value:n}},return(t){return e||=!0,{done:!0,value:t}}}},pipe(){return _z(this,arguments)}},TG=(e,t)=>{let n=Object.create(wG);return n.head=e,n.tail=t,n},EG=ZR(`Nil`),DG={[xG]:xG,_tag:`Nil`,toString(){return lz(this.toJSON())},toJSON(){return{_id:`List`,_tag:`Nil`}},[sz](){return this.toJSON()},[GR](){return EG},[nz](e){return kG(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return _z(this,arguments)}},OG=Object.create(DG);const kG=e=>SR(e,xG),AG=e=>e._tag===`Nil`,jG=e=>e._tag===`Cons`,MG=()=>OG,NG=(e,t)=>TG(e,t),PG=MG,FG=e=>TG(e,OG),IG=W(2,(e,t)=>RG(t,e)),LG=W(2,(e,t)=>NG(t,e)),RG=W(2,(e,t)=>{if(AG(e))return t;if(AG(t))return e;{let n=TG(t.head,e),r=n,i=t.tail;for(;!AG(i);){let t=TG(i.head,e);r.tail=t,r=t,i=i.tail}return n}}),zG=W(3,(e,t,n)=>{let r=t,i=e;for(;!AG(i);)r=n(r,i.head),i=i.tail;return r}),BG=e=>{let t=PG(),n=e;for(;!AG(n);)t=LG(t,n.head),n=n.tail;return t};Array.prototype;const VG=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=Hz,e}();({...VG.prototype});const HG=Symbol.for(`effect/DifferContextPatch`);function UG(e){return e}var WG={...VG.prototype,[HG]:{_Value:UG,_Patch:UG}},GG=Object.assign(Object.create(WG),{_tag:`Empty`}),KG=Object.create(GG);const qG=()=>KG;var JG=Object.assign(Object.create(WG),{_tag:`AndThen`}),YG=(e,t)=>{let n=Object.create(JG);return n.first=e,n.second=t,n},XG=Object.assign(Object.create(WG),{_tag:`AddService`}),ZG=(e,t)=>{let n=Object.create(XG);return n.key=e,n.service=t,n},QG=Object.assign(Object.create(WG),{_tag:`RemoveService`}),$G=e=>{let t=Object.create(QG);return t.key=e,t},eK=Object.assign(Object.create(WG),{_tag:`UpdateService`}),tK=(e,t)=>{let n=Object.create(eK);return n.key=e,n.update=t,n};const nK=(e,t)=>{let n=new Map(e.unsafeMap),r=qG();for(let[e,i]of t.unsafeMap.entries())if(n.has(e)){let t=n.get(e);n.delete(e),rz(t,i)||(r=rK(tK(e,()=>i))(r))}else n.delete(e),r=rK(ZG(e,i))(r);for(let[e]of n.entries())r=rK($G(e))(r);return r},rK=W(2,(e,t)=>YG(e,t)),iK=W(2,(e,t)=>{if(e._tag===`Empty`)return t;let n=!1,r=mH(e),i=new Map(t.unsafeMap);for(;OH(r);){let e=jH(r),t=MH(r);switch(e._tag){case`Empty`:r=t;break;case`AddService`:i.set(e.key,e.service),r=t;break;case`AndThen`:r=wH(wH(t,e.second),e.first);break;case`RemoveService`:i.delete(e.key),r=t;break;case`UpdateService`:i.set(e.key,e.update(i.get(e.key))),n=!0,r=t;break}}if(!n)return PV(i);let a=new Map;for(let[e]of t.unsafeMap)i.has(e)&&(a.set(e,i.get(e)),i.delete(e));for(let[e,t]of i)a.set(e,t);return PV(a)});({...VG.prototype});const aK=Symbol.for(`effect/DifferHashSetPatch`);function oK(e){return e}var sK={...VG.prototype,[aK]:{_Value:oK,_Key:oK,_Patch:oK}},cK=Object.assign(Object.create(sK),{_tag:`Empty`}),lK=Object.create(cK);const uK=()=>lK;var dK=Object.assign(Object.create(sK),{_tag:`AndThen`});const fK=(e,t)=>{let n=Object.create(dK);return n.first=e,n.second=t,n};var pK=Object.assign(Object.create(sK),{_tag:`Add`});const mK=e=>{let t=Object.create(pK);return t.value=e,t};var hK=Object.assign(Object.create(sK),{_tag:`Remove`});const gK=e=>{let t=Object.create(hK);return t.value=e,t},_K=(e,t)=>{let[n,r]=VW([e,uK()],([e,t],n)=>PW(n)(e)?[RW(n)(e),t]:[e,vK(mK(n))(t)])(t);return VW(r,(e,t)=>vK(gK(t))(e))(n)},vK=W(2,(e,t)=>fK(e,t)),yK=W(2,(e,t)=>{if(e._tag===`Empty`)return t;let n=t,r=mH(e);for(;OH(r);){let e=jH(r),t=MH(r);switch(e._tag){case`Empty`:r=t;break;case`AndThen`:r=wH(e.first)(wH(e.second)(t));break;case`Add`:n=LW(e.value)(n),r=t;break;case`Remove`:n=RW(e.value)(n),r=t}}return n});({...VG.prototype});const bK=Symbol.for(`effect/DifferReadonlyArrayPatch`);function xK(e){return e}var SK={...VG.prototype,[bK]:{_Value:xK,_Patch:xK}},CK=Object.assign(Object.create(SK),{_tag:`Empty`}),wK=Object.create(CK);const TK=()=>wK;var EK=Object.assign(Object.create(SK),{_tag:`AndThen`}),DK=(e,t)=>{let n=Object.create(EK);return n.first=e,n.second=t,n},OK=Object.assign(Object.create(SK),{_tag:`Append`}),kK=e=>{let t=Object.create(OK);return t.values=e,t},AK=Object.assign(Object.create(SK),{_tag:`Slice`}),jK=(e,t)=>{let n=Object.create(AK);return n.from=e,n.until=t,n},MK=Object.assign(Object.create(SK),{_tag:`Update`}),NK=(e,t)=>{let n=Object.create(MK);return n.index=e,n.patch=t,n};const PK=e=>{let t=0,n=TK();for(;t<e.oldValue.length&&t<e.newValue.length;){let r=e.oldValue[t],i=e.newValue[t],a=e.differ.diff(r,i);rz(a,e.differ.empty)||(n=FK(n,NK(t,a))),t+=1}return t<e.oldValue.length&&(n=FK(n,jK(0,t))),t<e.newValue.length&&(n=FK(n,kK(nV(t)(e.newValue)))),n},FK=W(2,(e,t)=>DK(e,t)),IK=W(3,(e,t,n)=>{if(e._tag===`Empty`)return t;let r=t.slice(),i=mV(e);for(;UB(i);){let e=XB(i),t=$B(i);switch(e._tag){case`Empty`:i=t;break;case`AndThen`:t.unshift(e.first,e.second),i=t;break;case`Append`:for(let t of e.values)r.push(t);i=t;break;case`Slice`:r=r.slice(e.from,e.until),i=t;break;case`Update`:r[e.index]=n.patch(e.patch,r[e.index]),i=t;break}}return r}),LK={[Symbol.for(`effect/Differ`)]:{_P:iR,_V:iR},pipe(){return _z(this,arguments)}},RK=e=>{let t=Object.create(LK);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},zK=()=>RK({empty:qG(),combine:(e,t)=>rK(t)(e),diff:(e,t)=>nK(e,t),patch:(e,t)=>iK(t)(e)}),BK=()=>RK({empty:uK(),combine:(e,t)=>vK(t)(e),diff:(e,t)=>_K(e,t),patch:(e,t)=>yK(t)(e)}),VK=e=>RK({empty:TK(),combine:(e,t)=>FK(e,t),diff:(t,n)=>PK({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>IK(t,n,e)}),HK=()=>UK((e,t)=>t),UK=e=>RK({empty:iR,combine:(e,t)=>e===iR?t:t===iR?e:n=>t(e(n)),diff:(e,t)=>rz(e,t)?iR:aR(t),patch:(t,n)=>e(n,t(n))});var WK=255,GK=8;const KK=e=>e&WK,qK=e=>e>>GK&WK,JK=(e,t)=>(e&WK)+((t&e&WK)<<GK),YK=JK(0,0),XK=e=>JK(e,e),ZK=e=>JK(e,0),QK=W(2,(e,t)=>JK(KK(e)&~t,qK(e))),$K=W(2,(e,t)=>e|t),eq=e=>~e>>>0&WK,tq=e=>aq(e,32),nq=W(2,(e,t)=>e|t),rq=e=>iq(e)&&!lq(e),iq=e=>aq(e,1),aq=W(2,(e,t)=>(e&t)!==0),oq=(...e)=>e.reduce((e,t)=>e|t,0),sq=oq(0),cq=e=>aq(e,4),lq=e=>aq(e,16),uq=W(2,(e,t)=>JK(e^t,t)),dq=W(2,(e,t)=>e&(eq(KK(t))|qK(t))|KK(t)&qK(t)),fq=RK({empty:YK,diff:(e,t)=>uq(e,t),combine:(e,t)=>$K(t)(e),patch:(e,t)=>dq(t,e)}),pq=XK,mq=ZK,hq=QK,gq=(e,t)=>({_tag:`Par`,left:e,right:t}),_q=(e,t)=>({_tag:`Seq`,left:e,right:t}),vq=e=>{let t=FG(e),n=PG();for(;;){let[e,r]=zG(t,[wq(),PG()],([e,t],n)=>{let[r,i]=yq(n);return[Eq(e,r),IG(t,i)]});if(n=bq(n,e),AG(r))return BG(n);t=r}throw Error(`BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues`)};var yq=e=>{let t=e,n=wq(),r=PG(),i=PG();for(;;)switch(t._tag){case`Empty`:if(AG(r))return[n,i];t=r.head,r=r.tail;break;case`Par`:r=NG(t.right,r),t=t.left;break;case`Seq`:{let e=t.left,n=t.right;switch(e._tag){case`Empty`:t=n;break;case`Par`:{let r=e.left,i=e.right;t=gq(_q(r,n),_q(i,n));break}case`Seq`:{let r=e.left,i=e.right;t=_q(r,_q(i,n));break}case`Single`:t=e,i=NG(n,i);break}break}case`Single`:if(n=Tq(n,t),AG(r))return[n,i];t=r.head,r=r.tail;break}throw Error(`BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues`)},bq=(e,t)=>{if(AG(e))return FG(kq(t));if(Dq(t))return e;let n=Fq(e.head),r=Oq(t);return n.length===1&&r.length===1&&rz(n[0],r[0])?NG(Pq(e.head,kq(t)),e.tail):NG(kq(t),e)};const xq=Symbol.for(`effect/RequestBlock/RequestBlockParallel`);var Sq={_R:e=>e},Cq=class{map;[xq]=Sq;constructor(e){this.map=e}};const wq=()=>new Cq(fG()),Tq=(e,t)=>new Cq(vG(e.map,t.dataSource,e=>EB(AB(e,CH(t.blockedRequest)),()=>mH(t.blockedRequest)))),Eq=(e,t)=>new Cq(bG(e.map,t.map,(e,t,n)=>gG(e,n,wB(hG(e,n),{onNone:()=>t,onSome:e=>EH(t,e)})))),Dq=e=>mG(e.map),Oq=e=>Array.from(_G(e.map)),kq=e=>Nq(yG(e.map,e=>mH(e))),Aq=Symbol.for(`effect/RequestBlock/RequestBlockSequential`);var jq={_R:e=>e},Mq=class{map;[Aq]=jq;constructor(e){this.map=e}};const Nq=e=>new Mq(e),Pq=(e,t)=>new Mq(bG(t.map,e.map,(e,t,n)=>gG(e,n,wB(hG(e,n),{onNone:()=>fH(),onSome:e=>EH(e,t)})))),Fq=e=>Array.from(_G(e.map)),Iq=e=>Array.from(e.map),Lq=`Empty`,Rq=`Fail`,zq=`Interrupt`,Bq=`Parallel`,Vq=`Sequential`;var Hq=`effect/Cause`;const Uq=Symbol.for(Hq);var Wq={_E:e=>e},Gq={[Uq]:Wq,[GR](){return G(K(Hq),qR(K(pJ(this))),tz(this))},[nz](e){return Qq(e)&&fJ(this,e)},pipe(){return _z(this,arguments)},toJSON(){switch(this._tag){case`Empty`:return{_id:`Cause`,_tag:this._tag};case`Die`:return{_id:`Cause`,_tag:this._tag,defect:cz(this.defect)};case`Interrupt`:return{_id:`Cause`,_tag:this._tag,fiberId:this.fiberId.toJSON()};case`Fail`:return{_id:`Cause`,_tag:this._tag,failure:cz(this.error)};case`Sequential`:case`Parallel`:return{_id:`Cause`,_tag:this._tag,left:cz(this.left),right:cz(this.right)}}},toString(){return CJ(this)},[sz](){return this.toJSON()}};const Kq=(()=>{let e=Object.create(Gq);return e._tag=Lq,e})(),qq=e=>{let t=Object.create(Gq);return t._tag=Rq,t.error=e,t},Jq=e=>{let t=Object.create(Gq);return t._tag=`Die`,t.defect=e,t},Yq=e=>{let t=Object.create(Gq);return t._tag=zq,t.fiberId=e,t},Xq=(e,t)=>{let n=Object.create(Gq);return n._tag=Bq,n.left=e,n.right=t,n},Zq=(e,t)=>{let n=Object.create(Gq);return n._tag=Vq,n.left=e,n.right=t,n},Qq=e=>SR(e,Uq),$q=e=>e._tag===Lq,eJ=e=>e._tag===`Empty`?!0:xJ(e,!0,(e,t)=>{switch(t._tag){case Lq:return xB(e);case`Die`:case Rq:case zq:return xB(!1);default:return bB()}}),tJ=e=>CB(cJ(e)),nJ=e=>SJ(void 0,_J)(e),rJ=e=>vH(xJ(e,fH(),(e,t)=>t._tag===`Fail`?xB(G(e,wH(t.error))):bB())),iJ=e=>vH(xJ(e,fH(),(e,t)=>t._tag===`Die`?xB(G(e,wH(t.defect))):bB())),aJ=e=>xJ(e,jW(),(e,t)=>t._tag===`Interrupt`?xB(G(e,LW(t.fiberId))):bB()),oJ=e=>hJ(e,e=>e._tag===`Fail`?xB(e.error):bB()),sJ=e=>{let t=oJ(e);switch(t._tag){case`None`:return uB(e);case`Some`:return dB(t.value)}},cJ=e=>hJ(e,e=>e._tag===`Interrupt`?xB(e.fiberId):bB()),lJ=e=>bJ(e,{onEmpty:bB(),onFail:e=>xB(Jq(e)),onDie:e=>xB(Jq(e)),onInterrupt:()=>bB(),onSequential:NB(Zq),onParallel:NB(Xq)}),uJ=e=>bJ(e,{onEmpty:Kq,onFail:()=>Kq,onDie:Jq,onInterrupt:Yq,onSequential:Zq,onParallel:Xq}),dJ=e=>bJ(e,{onEmpty:Kq,onFail:Jq,onDie:Jq,onInterrupt:Yq,onSequential:Zq,onParallel:Xq});var fJ=(e,t)=>{let n=mH(e),r=mH(t);for(;OH(n)&&OH(r);){let[e,t]=G(jH(n),xJ([jW(),fH()],([e,t],n)=>{let[r,i]=gJ(n);return xB([G(e,BW(r)),G(t,EH(i))])})),[i,a]=G(jH(r),xJ([jW(),fH()],([e,t],n)=>{let[r,i]=gJ(n);return xB([G(e,BW(r)),G(t,EH(i))])}));if(!rz(e,i))return!1;n=t,r=a}return!0},pJ=e=>mJ(mH(e),fH()),mJ=(e,t)=>{for(;;){let[n,r]=G(e,_V([jW(),fH()],([e,t],n)=>{let[r,i]=gJ(n);return[G(e,BW(r)),G(t,EH(i))]})),i=IW(n)>0?G(t,wH(n)):t;if(DH(r))return vH(i);e=r,t=i}throw Error(DR(`Cause.flattenCauseLoop`))};const hJ=W(2,(e,t)=>{let n=[e];for(;n.length>0;){let e=n.pop(),r=t(e);switch(r._tag){case`None`:switch(e._tag){case Vq:case Bq:n.push(e.right),n.push(e.left);break}break;case`Some`:return r}}return bB()});var gJ=e=>{let t=e,n=[],r=jW(),i=fH();for(;t!==void 0;)switch(t._tag){case Lq:if(n.length===0)return[r,i];t=n.pop();break;case Rq:if(r=LW(r,pH(t._tag,t.error)),n.length===0)return[r,i];t=n.pop();break;case`Die`:if(r=LW(r,pH(t._tag,t.defect)),n.length===0)return[r,i];t=n.pop();break;case zq:if(r=LW(r,pH(t._tag,t.fiberId)),n.length===0)return[r,i];t=n.pop();break;case Vq:switch(t.left._tag){case Lq:t=t.right;break;case Vq:t=Zq(t.left.left,Zq(t.left.right,t.right));break;case Bq:t=Xq(Zq(t.left.left,t.right),Zq(t.left.right,t.right));break;default:i=wH(i,t.right),t=t.left;break}break;case Bq:n.push(t.right),t=t.left;break}throw Error(DR(`Cause.evaluateCauseLoop`))},_J={emptyCase:oR,failCase:sR,dieCase:sR,interruptCase:oR,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},vJ=`SequentialCase`,yJ=`ParallelCase`;const bJ=W(2,(e,{onDie:t,onEmpty:n,onFail:r,onInterrupt:i,onParallel:a,onSequential:o})=>SJ(e,void 0,{emptyCase:()=>n,failCase:(e,t)=>r(t),dieCase:(e,n)=>t(n),interruptCase:(e,t)=>i(t),sequentialCase:(e,t,n)=>o(t,n),parallelCase:(e,t,n)=>a(t,n)})),xJ=W(3,(e,t,n)=>{let r=t,i=e,a=[];for(;i!==void 0;){let e=n(r,i);switch(r=CB(e)?e.value:r,i._tag){case Vq:a.push(i.right),i=i.left;break;case Bq:a.push(i.right),i=i.left;break;default:i=void 0;break}i===void 0&&a.length>0&&(i=a.pop())}return r}),SJ=W(3,(e,t,n)=>{let r=[e],i=[];for(;r.length>0;){let e=r.pop();switch(e._tag){case Lq:i.push(uB(n.emptyCase(t)));break;case Rq:i.push(uB(n.failCase(t,e.error)));break;case`Die`:i.push(uB(n.dieCase(t,e.defect)));break;case zq:i.push(uB(n.interruptCase(t,e.fiberId)));break;case Vq:r.push(e.right),r.push(e.left),i.push(dB({_tag:vJ}));break;case Bq:r.push(e.right),r.push(e.left),i.push(dB({_tag:yJ}));break}}let a=[];for(;i.length>0;){let e=i.pop();switch(e._tag){case`Left`:switch(e.left._tag){case vJ:{let e=a.pop(),r=a.pop(),i=n.sequentialCase(t,e,r);a.push(i);break}case yJ:{let e=a.pop(),r=a.pop(),i=n.parallelCase(t,e,r);a.push(i);break}}break;case`Right`:a.push(e.right);break}}if(a.length===0)throw Error(`BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues`);return a.pop()}),CJ=(e,t)=>nJ(e)?`All fibers interrupted without errors.`:jJ(e).map(function(e){return t?.renderErrorCause!==!0||e.cause===void 0?e.stack:`${e.stack} {\n${wJ(e.cause,`  `)}\n}`}).join(`
`);var wJ=(e,t)=>{let n=e.stack.split(`
`),r=`${t}[cause]: ${n[0]}`;for(let e=1,i=n.length;e<i;e++)r+=`\n${t}${n[e]}`;return e.cause&&(r+=` {\n${wJ(e.cause,`${t}  `)}\n${t}}`),r},TJ=class e extends globalThis.Error{span=void 0;constructor(t){let n=typeof t==`object`&&!!t,r=Error.stackTraceLimit;Error.stackTraceLimit=1,super(EJ(t),n&&`cause`in t&&t.cause!==void 0?{cause:new e(t.cause)}:void 0),this.message===``&&(this.message=`An error has occurred`),Error.stackTraceLimit=r,this.name=t instanceof Error?t.name:`Error`,n&&(AJ in t&&(this.span=t[AJ]),Object.keys(t).forEach(e=>{e in this||(this[e]=t[e])})),this.stack=kJ(`${this.name}: ${this.message}`,t instanceof Error&&t.stack?t.stack:``,this.span)}};const EJ=e=>{if(typeof e==`string`)return e;if(typeof e==`object`&&e&&e instanceof Error)return e.message;try{if(SR(e,`toString`)&&yR(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return dz(e)};var DJ=/\((.*)\)/g;const OJ=hR(`effect/Tracer/spanToTrace`,()=>new WeakMap);var kJ=(e,t,n)=>{let r=[e],i=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let e=1;e<i.length;e++){if(i[e].includes(` at new BaseEffectError`)||i[e].includes(` at new YieldableError`)){e++;continue}if(i[e].includes(`Generator.next`)||i[e].includes(`effect_internal_function`))break;r.push(i[e].replace(/at .*effect_instruction_i.*\((.*)\)/,`at $1`).replace(/EffectPrimitive\.\w+/,`<anonymous>`))}if(n){let e=n,t=0;for(;e&&e._tag===`Span`&&t<10;){let n=OJ.get(e);if(typeof n==`function`){let t=n();if(typeof t==`string`){let n=t.matchAll(DJ),i=!1;for(let[,t]of n)i=!0,r.push(`    at ${e.name} (${t})`);i||r.push(`    at ${e.name} (${t.replace(/^at /,``)})`)}else r.push(`    at ${e.name}`)}else r.push(`    at ${e.name}`);e=OB(e.parent),t++}}return r.join(`
`)};const AJ=Symbol.for(`effect/SpanAnnotation`),jJ=e=>SJ(e,void 0,{emptyCase:()=>[],dieCase:(e,t)=>[new TJ(t)],failCase:(e,t)=>[new TJ(t)],interruptCase:()=>[],parallelCase:(e,t,n)=>[...t,...n],sequentialCase:(e,t,n)=>[...t,...n]}),MJ=`Pending`,NJ=`Done`,PJ=Symbol.for(`effect/Deferred`),FJ={_E:e=>e,_A:e=>e},IJ=e=>({_tag:MJ,joiners:e}),LJ=e=>({_tag:NJ,effect:e});var RJ=class e{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new e(this.self)}};const zJ=(e,t)=>{let n=new UJ(`Blocked`);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},BJ=e=>{let t=new UJ(`RunBlocked`);return t.effect_instruction_i0=e,t},VJ=Symbol.for(`effect/Effect`);var HJ=class{patch;op;_op=jz;constructor(e,t){this.patch=e,this.op=t}},UJ=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[VJ]=Rz;constructor(e){this._op=e}[nz](e){return this===e}[GR](){return tz(this,KR(this))}pipe(){return _z(this,arguments)}toJSON(){return{_id:`Effect`,_op:this._op,effect_instruction_i0:cz(this.effect_instruction_i0),effect_instruction_i1:cz(this.effect_instruction_i1),effect_instruction_i2:cz(this.effect_instruction_i2)}}toString(){return lz(this.toJSON())}[sz](){return this.toJSON()}[Symbol.iterator](){return new RJ(new zR(this))}},WJ=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[VJ]=Rz;constructor(e){this._op=e,this._tag=e}[nz](e){return GX(e)&&e._op===`Failure`&&rz(this.effect_instruction_i0,e.effect_instruction_i0)}[GR](){return G(ZR(this._tag),qR(K(this.effect_instruction_i0)),tz(this))}get cause(){return this.effect_instruction_i0}pipe(){return _z(this,arguments)}toJSON(){return{_id:`Exit`,_tag:this._op,cause:this.cause.toJSON()}}toString(){return lz(this.toJSON())}[sz](){return this.toJSON()}[Symbol.iterator](){return new RJ(new zR(this))}},GJ=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[VJ]=Rz;constructor(e){this._op=e,this._tag=e}[nz](e){return GX(e)&&e._op===`Success`&&rz(this.effect_instruction_i0,e.effect_instruction_i0)}[GR](){return G(ZR(this._tag),qR(K(this.effect_instruction_i0)),tz(this))}get value(){return this.effect_instruction_i0}pipe(){return _z(this,arguments)}toJSON(){return{_id:`Exit`,_tag:this._op,value:cz(this.value)}}toString(){return lz(this.toJSON())}[sz](){return this.toJSON()}[Symbol.iterator](){return new RJ(new zR(this))}};const KJ=e=>SR(e,VJ),qJ=e=>{let t=new UJ(kz);return t.effect_instruction_i0=e,t},JJ=W(3,(e,t,n)=>IY(r=>q(e,e=>q(sY(jY(()=>r(t(e)))),t=>jY(()=>n(e,t)).pipe(_Y({onFailure:e=>{switch(t._tag){case bz:return uY(Zq(t.effect_instruction_i0,e));case wz:return uY(e)}},onSuccess:()=>t})))))),YJ=W(2,(e,t)=>q(e,()=>AY(t))),XJ=e=>YJ(e,void 0),ZJ=function(){let e=new UJ(yz);switch(arguments.length){case 2:e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break;case 3:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break;case 4:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break;default:throw Error(DR(`you're not supposed to end up here`))}return e},QJ=(e,t=lG)=>{let n=new UJ(vz),r;return n.effect_instruction_i0=t=>{r=e(t)},n.effect_instruction_i1=t,EY(n,e=>KJ(r)?r:LY)},$J=(e,t=lG)=>jY(()=>QJ(e,t));var eY=(e,t=lG)=>ZJ(e,function(){let e,n;function r(t){e?e(t):n===void 0&&(n=t)}let i=new UJ(vz);i.effect_instruction_i0=t=>{e=t,n&&t(n)},i.effect_instruction_i1=t;let a,o;return this.effect_instruction_i0.length===1?a=UR(()=>this.effect_instruction_i0(r)):(o=new AbortController,a=UR(()=>this.effect_instruction_i0(r,o.signal))),a||o?EY(i,e=>(o&&o.abort(),a??LY)):i});const tY=W(2,(e,t)=>vY(e,{onFailure:t,onSuccess:AY}));var nY=Symbol.for(`effect/OriginalAnnotation`);const rY=(e,t)=>CB(t)?new Proxy(e,{has(e,t){return t===AJ||t===nY||t in e},get(n,r){return r===AJ?t.value:r===nY?e:n[r]}}):e,iY=e=>xR(e)&&!(AJ in e)?qJ(t=>uY(Jq(rY(e,xZ(t))))):uY(Jq(e)),aY=e=>dY(()=>Jq(new RX(e))),oY=e=>vY(e,{onFailure:e=>AY(dB(e)),onSuccess:e=>AY(uB(e))}),sY=e=>gY(e,{onFailure:XX,onSuccess:rZ}),cY=e=>xR(e)&&!(AJ in e)?qJ(t=>uY(qq(rY(e,xZ(t))))):uY(qq(e)),lY=e=>q(J(e),cY),uY=e=>{let t=new WJ(bz);return t.effect_instruction_i0=e,t},dY=e=>q(J(e),uY),fY=qJ(e=>AY(e.id())),pY=e=>qJ(t=>e(t.id())),q=W(2,(e,t)=>{let n=new UJ(Sz);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),mY=e=>{let t=new UJ(`OnStep`);return t.effect_instruction_i0=e,t},hY=e=>q(e,iR),gY=W(2,(e,t)=>_Y(e,{onFailure:e=>AY(t.onFailure(e)),onSuccess:e=>AY(t.onSuccess(e))})),_Y=W(2,(e,t)=>{let n=new UJ(Cz);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n}),vY=W(2,(e,t)=>_Y(e,{onFailure:e=>{if(iJ(e).length>0)return uY(dJ(e));let n=rJ(e);return n.length>0?t.onFailure(AH(n)):uY(e)},onSuccess:t.onSuccess})),yY=W(2,(e,t)=>jY(()=>{let n=LB(e),r=FB(n.length),i=0;return YJ(BY({while:()=>i<n.length,body:()=>t(n[i],i),step:e=>{r[i++]=e}}),r)})),bY=W(2,(e,t)=>jY(()=>{let n=LB(e),r=0;return BY({while:()=>r<n.length,body:()=>t(n[r],r),step:()=>{r++}})})),xY=e=>{let t=new UJ(Ez);return t.effect_instruction_i0=pq(1),t.effect_instruction_i1=()=>e,t},SY=W(2,(e,t)=>q(e,e=>J(()=>t(e)))),CY=W(2,(e,t)=>vY(e,{onFailure:e=>lY(()=>t.onFailure(e)),onSuccess:e=>J(()=>t.onSuccess(e))})),wY=W(2,(e,t)=>_Y(e,{onFailure:e=>{let n=sJ(e);switch(n._tag){case`Left`:return lY(()=>t(n.left));case`Right`:return uY(n.right)}},onSuccess:AY})),TY=W(2,(e,t)=>IY(n=>_Y(n(e),{onFailure:e=>{let n=XX(e);return _Y(t(n),{onFailure:t=>XX(Zq(e,t)),onSuccess:()=>n})},onSuccess:e=>{let n=rZ(e);return WY(t(n),n)}}))),EY=W(2,(e,t)=>TY(e,tZ({onFailure:e=>nJ(e)?XJ(t(aJ(e))):LY,onSuccess:()=>LY}))),DY=W(2,(e,t)=>PY(e,t,AY)),OY=e=>kY(e,iR),kY=W(2,(e,t)=>vY(e,{onFailure:e=>iY(t(e)),onSuccess:AY})),AY=e=>{let t=new GJ(wz);return t.effect_instruction_i0=e,t},jY=e=>{let t=new UJ(yz);return t.commit=e,t},J=e=>{let t=new UJ(Tz);return t.effect_instruction_i0=e,t},MY=W(e=>e.length===3||e.length===2&&!(xR(e[1])&&`onlyEffect`in e[1]),(e,t)=>q(e,e=>{let n=typeof t==`function`?t(e):t;return KJ(n)?YJ(n,e):ER(n)?QJ(t=>{n.then(n=>t(AY(e)),e=>t(cY(new WX(e,`An unknown error occurred in Effect.tap`))))}):AY(e)})),NY=e=>qJ(t=>e(cX(DX,xB(G(t.getFiberRef(DX),TB(()=>t.scope())))))),PY=W(3,(e,t,n)=>_Y(e,{onFailure:e=>iJ(e).length>0?uY(kB(lJ(e))):t(),onSuccess:n})),FY=e=>{let t=new UJ(Ez);return t.effect_instruction_i0=mq(1),t.effect_instruction_i1=()=>e,t},IY=e=>ZJ(e,function(){let e=new UJ(Ez);return e.effect_instruction_i0=mq(1),e.effect_instruction_i1=e=>iq(e)?UR(()=>this.effect_instruction_i0(xY)):UR(()=>this.effect_instruction_i0(FY)),e});var LY=AY(void 0);const RY=e=>{let t=new UJ(Ez);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},zY=W(2,(e,t)=>q(t,t=>t?G(e,SY(xB)):AY(bB()))),BY=e=>{let t=new UJ(Dz);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},VY=e=>{let t=new UJ(Az);return e?.priority===void 0?t:xX(t,e.priority)},HY=W(2,(e,t)=>q(e,e=>SY(t,t=>[e,t]))),UY=W(2,(e,t)=>q(e,e=>YJ(t,e))),WY=W(2,(e,t)=>q(e,()=>t)),GY=W(3,(e,t,n)=>q(e,e=>SY(t,t=>n(e,t)))),KY=e=>q(fY,t=>G(e,qY(t))),qY=W(2,(e,t)=>q(e.interruptAsFork(t),()=>e.await)),JY={_tag:`All`,syslog:0,label:`ALL`,ordinal:-(2**53-1),pipe(){return _z(this,arguments)}},YY={_tag:`Fatal`,syslog:2,label:`FATAL`,ordinal:5e4,pipe(){return _z(this,arguments)}},XY={_tag:`Error`,syslog:3,label:`ERROR`,ordinal:4e4,pipe(){return _z(this,arguments)}},ZY={_tag:`Warning`,syslog:4,label:`WARN`,ordinal:3e4,pipe(){return _z(this,arguments)}},QY={_tag:`Info`,syslog:6,label:`INFO`,ordinal:2e4,pipe(){return _z(this,arguments)}},$Y={_tag:`Debug`,syslog:7,label:`DEBUG`,ordinal:1e4,pipe(){return _z(this,arguments)}},eX={_tag:`Trace`,syslog:7,label:`TRACE`,ordinal:0,pipe(){return _z(this,arguments)}},tX={_tag:`None`,syslog:7,label:`OFF`,ordinal:2**53-1,pipe(){return _z(this,arguments)}},nX=Symbol.for(`effect/FiberRef`);var rX={_A:e=>e};const iX=e=>qJ(t=>rZ(t.getFiberRef(e))),aX=W(2,(e,t)=>q(iX(e),t)),oX=W(2,(e,t)=>sX(e,()=>[void 0,t])),sX=W(2,(e,t)=>qJ(n=>{let[r,i]=t(n.getFiberRef(e));return n.setFiberRef(e,i),AY(r)})),cX=W(3,(e,t,n)=>JJ(UY(iX(t),oX(t,n)),()=>e,e=>oX(t,e))),lX=(e,t)=>pX(e,{differ:HK(),fork:t?.fork??iR,join:t?.join}),uX=e=>{let t=BK();return pX(e,{differ:t,fork:t.empty})},dX=e=>{let t=VK(HK());return pX(e,{differ:t,fork:t.empty})},fX=e=>{let t=zK();return pX(e,{differ:t,fork:t.empty})},pX=(e,t)=>({...Uz,[nX]:rX,initial:e,commit(){return iX(this)},diff:(e,n)=>t.differ.diff(e,n),combine:(e,n)=>t.differ.combine(e,n),patch:e=>n=>t.differ.patch(e,n),fork:t.fork,join:t.join??((e,t)=>t)}),mX=e=>pX(e,{differ:fq,fork:fq.empty}),hX=hR(Symbol.for(`effect/FiberRef/currentContext`),()=>fX(XV())),gX=hR(Symbol.for(`effect/FiberRef/currentSchedulingPriority`),()=>lX(0)),_X=hR(Symbol.for(`effect/FiberRef/currentMaxOpsBeforeYield`),()=>lX(2048)),vX=hR(Symbol.for(`effect/FiberRef/currentLogAnnotation`),()=>lX(fG())),yX=hR(Symbol.for(`effect/FiberRef/currentLogLevel`),()=>lX(QY)),bX=hR(Symbol.for(`effect/FiberRef/currentLogSpan`),()=>lX(PG())),xX=W(2,(e,t)=>cX(e,gX,t)),SX=hR(Symbol.for(`effect/FiberRef/currentConcurrency`),()=>lX(`unbounded`)),CX=hR(Symbol.for(`effect/FiberRef/currentRequestBatching`),()=>lX(!0)),wX=hR(Symbol.for(`effect/FiberRef/currentUnhandledErrorLogLevel`),()=>lX(xB($Y))),TX=hR(Symbol.for(`effect/FiberRef/versionMismatchErrorLogLevel`),()=>lX(xB(ZY))),EX=hR(Symbol.for(`effect/FiberRef/currentMetricLabels`),()=>dX(pV())),DX=hR(Symbol.for(`effect/FiberRef/currentForkScopeOverride`),()=>lX(bB(),{fork:()=>bB(),join:(e,t)=>e})),OX=hR(Symbol.for(`effect/FiberRef/currentInterruptedCause`),()=>lX(Kq,{fork:()=>Kq,join:(e,t)=>e})),kX=Symbol.for(`effect/Scope`),AX=Symbol.for(`effect/CloseableScope`),jX=(e,t)=>e.addFinalizer(()=>XJ(t)),MX=(e,t)=>e.addFinalizer(t),NX=(e,t)=>e.close(t),PX=(e,t)=>e.fork(t),FX=function(){class e extends globalThis.Error{commit(){return cY(this)}toJSON(){let e={...this};return this.message&&(e.message=this.message),this.cause&&(e.cause=this.cause),e}[sz](){return this.toString===globalThis.Error.prototype.toString?`Bun`in globalThis?CJ(qq(this),{renderErrorCause:!0}):this:this.stack?`${this.toString()}\n${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString()}}return Object.assign(e.prototype,Wz),e}();var IX=(e,t)=>{class n extends FX{_tag=t}return Object.assign(n.prototype,e),n.prototype.name=t,n};const LX=Symbol.for(`effect/Cause/errors/RuntimeException`),RX=IX({[LX]:LX},`RuntimeException`),zX=Symbol.for(`effect/Cause/errors/InterruptedException`),BX=e=>SR(e,zX),VX=Symbol.for(`effect/Cause/errors/NoSuchElement`),HX=IX({[VX]:VX},`NoSuchElementException`),UX=Symbol.for(`effect/Cause/errors/UnknownException`),WX=function(){class e extends FX{_tag=`UnknownException`;error;constructor(e,t){super(t??`An unknown error occurred`,{cause:e}),this.error=e}}return Object.assign(e.prototype,{[UX]:UX,name:`UnknownException`}),e}(),GX=e=>KJ(e)&&`_tag`in e&&(e._tag===`Success`||e._tag===`Failure`),KX=W(2,(e,t)=>{switch(e._tag){case bz:return XX(e.effect_instruction_i0);case wz:return rZ(t)}}),qX=e=>KX(e,void 0),JX=(e,t)=>oZ(e,t?.parallel?Xq:Zq),YX=e=>XX(qq(e)),XX=e=>{let t=new WJ(bz);return t.effect_instruction_i0=e,t},ZX=W(2,(e,t)=>{switch(e._tag){case bz:return XX(e.effect_instruction_i0);case wz:return t(e.effect_instruction_i0)}}),QX=e=>G(e,ZX(iR)),$X=e=>XX(Yq(e)),eZ=W(2,(e,t)=>{switch(e._tag){case bz:return XX(e.effect_instruction_i0);case wz:return rZ(t(e.effect_instruction_i0))}}),tZ=W(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case bz:return t(e.effect_instruction_i0);case wz:return n(e.effect_instruction_i0)}}),nZ=W(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case bz:return t(e.effect_instruction_i0);case wz:return n(e.effect_instruction_i0)}}),rZ=e=>{let t=new GJ(wz);return t.effect_instruction_i0=e,t},iZ=rZ(void 0),aZ=W(3,(e,t,{onFailure:n,onSuccess:r})=>{switch(e._tag){case bz:switch(t._tag){case wz:return XX(e.effect_instruction_i0);case bz:return XX(n(e.effect_instruction_i0,t.effect_instruction_i0))}case wz:switch(t._tag){case wz:return rZ(r(e.effect_instruction_i0,t.effect_instruction_i0));case bz:return XX(t.effect_instruction_i0)}}});var oZ=(e,t)=>{let n=hH(e);return OH(n)?G(MH(n),_V(G(jH(n),eZ(mH)),(e,n)=>G(e,aZ(n,{onSuccess:(e,t)=>G(e,wH(t)),onFailure:t}))),eZ(vH),eZ(e=>_H(e)),xB):bB()};const sZ=e=>({...Uz,[PJ]:FJ,state:WW(IJ([])),commit(){return uZ(this)},blockingOn:e}),cZ=()=>q(fY,e=>lZ(e)),lZ=e=>J(()=>sZ(e)),uZ=e=>$J(t=>{let n=GW(e.state);switch(n._tag){case NJ:return t(n.effect);case MJ:return n.joiners.push(t),hZ(e,t)}},e.blockingOn),dZ=W(2,(e,t)=>J(()=>{let n=GW(e.state);switch(n._tag){case NJ:return!1;case MJ:KW(e.state,LJ(t));for(let e=0,r=n.joiners.length;e<r;e++)n.joiners[e](t);return!0}})),fZ=W(2,(e,t)=>dZ(e,uY(t))),pZ=W(2,(e,t)=>dZ(e,AY(t))),mZ=(e,t)=>{let n=GW(e.state);if(n._tag===`Pending`){KW(e.state,LJ(t));for(let e=0,r=n.joiners.length;e<r;e++)n.joiners[e](t)}};var hZ=(e,t)=>J(()=>{let n=GW(e.state);if(n._tag===`Pending`){let e=n.joiners.indexOf(t);e>=0&&n.joiners.splice(e,1)}}),gZ=qJ(e=>rZ(e.currentContext));const _Z=()=>gZ,vZ=e=>q(_Z(),e),yZ=W(2,(e,t)=>cX(hX,t)(e)),bZ=W(2,(e,t)=>vZ(n=>yZ(e,t(n)))),xZ=e=>{let t=e.currentSpan;return t!==void 0&&t._tag===`Span`?xB(t):bB()},SZ=QX;var CZ=Symbol.for(`effect/MutableHashMap`),wZ={[CZ]:CZ,[Symbol.iterator](){return new TZ(this)},toString(){return lz(this.toJSON())},toJSON(){return{_id:`MutableHashMap`,values:Array.from(this).map(cz)}},[sz](){return this.toJSON()},pipe(){return _z(this,arguments)}},TZ=class e{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();let e=this.referentialIterator.next();return e.done?(this.bucketIterator=new EZ(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new e(this.self)}},EZ=class{backing;constructor(e){this.backing=e}currentBucket;next(){if(this.currentBucket===void 0){let e=this.backing.next();if(e.done)return e;this.currentBucket=e.value[Symbol.iterator]()}let e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}};const DZ=()=>{let e=Object.create(wZ);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},OZ=W(2,(e,t)=>{if(az(t)===!1)return e.referential.has(t)?xB(e.referential.get(t)):bB();let n=t[GR](),r=e.buckets.get(n);return r===void 0?bB():kZ(e,r,t)});var kZ=(e,t,n,r=!1)=>{for(let i=0,a=t.length;i<a;i++)if(n[nz](t[i][0])){let n=t[i][1];return r&&(t.splice(i,1),e.bucketsSize--),xB(n)}return bB()};const AZ=W(2,(e,t)=>CB(OZ(e,t))),jZ=W(3,(e,t,n)=>{if(az(t)===!1)return e.referential.set(t,n),e;let r=t[GR](),i=e.buckets.get(r);return i===void 0?(e.buckets.set(r,[[t,n]]),e.bucketsSize++,e):(MZ(e,i,t),i.push([t,n]),e.bucketsSize++,e)});var MZ=(e,t,n)=>{for(let r=0,i=t.length;r<i;r++)if(n[nz](t[r][0])){t.splice(r,1),e.bucketsSize--;return}};Symbol.iterator,Symbol.iterator,i();const NZ=Symbol.for(`effect/Clock`),PZ=YV(`effect/Clock`),FZ=2**31-1,IZ={unsafeSchedule(e,t){let n=iU(t);if(n>FZ)return sR;let r=!1,i=setTimeout(()=>{r=!0,e()},n);return()=>(clearTimeout(i),!r)}};var LZ=function(){let e=BigInt(1e6);if(typeof performance>`u`)return()=>BigInt(Date.now())*e;let t;return()=>(t===void 0&&(t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6))),t+BigInt(Math.round(performance.now()*1e6)))}(),RZ=function(){let e=typeof n==`object`&&`hrtime`in n&&typeof n.hrtime.bigint==`function`?n.hrtime:void 0;if(!e)return LZ;let t=LZ()-e.bigint();return()=>t+e.bigint()}(),zZ=class{[NZ]=NZ;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return RZ()}currentTimeMillis=J(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=J(()=>this.unsafeCurrentTimeNanos());scheduler(){return AY(IZ)}sleep(e){return eY(t=>XJ(J(IZ.unsafeSchedule(()=>t(LY),e))))}};const BZ=()=>new zZ,VZ=`InvalidData`,HZ=`MissingData`,UZ=`SourceUnavailable`,WZ=`Unsupported`,GZ=Symbol.for(`effect/ConfigError`),KZ={_tag:`ConfigError`,[GZ]:GZ},qZ=(e,t)=>{let n=Object.create(KZ);return n._op=`And`,n.left=e,n.right=t,Object.defineProperty(n,`toString`,{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),Object.defineProperty(n,`message`,{enumerable:!1,get(){return this.toString()}}),n},JZ=(e,t)=>{let n=Object.create(KZ);return n._op=`Or`,n.left=e,n.right=t,Object.defineProperty(n,`toString`,{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),Object.defineProperty(n,`message`,{enumerable:!1,get(){return this.toString()}}),n},YZ=(e,t,n={pathDelim:`.`})=>{let r=Object.create(KZ);return r._op=VZ,r.path=e,r.message=t,Object.defineProperty(r,`toString`,{enumerable:!1,value(){return`(Invalid data at ${G(this.path,SV(n.pathDelim))}: "${this.message}")`}}),r},XZ=(e,t,n={pathDelim:`.`})=>{let r=Object.create(KZ);return r._op=HZ,r.path=e,r.message=t,Object.defineProperty(r,`toString`,{enumerable:!1,value(){return`(Missing data at ${G(this.path,SV(n.pathDelim))}: "${this.message}")`}}),r},ZZ=(e,t,n,r={pathDelim:`.`})=>{let i=Object.create(KZ);return i._op=UZ,i.path=e,i.message=t,i.cause=n,Object.defineProperty(i,`toString`,{enumerable:!1,value(){return`(Source unavailable at ${G(this.path,SV(r.pathDelim))}: "${this.message}")`}}),i},QZ=(e,t,n={pathDelim:`.`})=>{let r=Object.create(KZ);return r._op=WZ,r.path=e,r.message=t,Object.defineProperty(r,`toString`,{enumerable:!1,value(){return`(Unsupported operation at ${G(this.path,SV(n.pathDelim))}: "${this.message}")`}}),r},$Z=W(2,(e,t)=>{switch(e._op){case`And`:return qZ($Z(e.left,t),$Z(e.right,t));case`Or`:return JZ($Z(e.left,t),$Z(e.right,t));case VZ:return YZ([...t,...e.path],e.message);case HZ:return XZ([...t,...e.path],e.message);case UZ:return ZZ([...t,...e.path],e.message,e.cause);case WZ:return QZ([...t,...e.path],e.message)}}),eQ={_tag:`Empty`},tQ=W(2,(e,t)=>{let n=FG(t),r=e;for(;jG(n);){let e=n.head;switch(e._tag){case`Empty`:n=n.tail;break;case`AndThen`:n=NG(e.first,NG(e.second,n.tail));break;case`MapName`:r=hV(r,e.f),n=n.tail;break;case`Nested`:r=zB(r,e.name),n=n.tail;break;case`Unnested`:if(G(YB(r),MB(e.name)))r=$B(r),n=n.tail;else return dB(XZ(r,`Expected ${e.name} to be in path in ConfigProvider#unnested`));break}}return uB(r)});i();var nQ=(e,t)=>[...e,...t];const rQ=Symbol.for(`effect/ConfigProvider`),iQ=YV(`effect/ConfigProvider`),aQ=Symbol.for(`effect/ConfigProviderFlat`),oQ=e=>({[rQ]:rQ,pipe(){return _z(this,arguments)},...e}),sQ=e=>({[aQ]:aQ,patch:e.patch,load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:e.enumerateChildren}),cQ=e=>oQ({load:t=>q(fQ(e,pV(),t,!1),e=>wB(YB(e),{onNone:()=>cY(XZ(pV(),`Expected a single value having structure: ${t}`)),onSome:AY})),flattened:e}),lQ=e=>{let{pathDelim:t,seqDelim:r}=Object.assign({},{pathDelim:`_`,seqDelim:`,`},e),i=e=>G(e,SV(t)),a=e=>e.split(t),o=()=>(n!==void 0&&`env`in n,{});return cQ(sQ({load:(e,t,n=!0)=>{let a=i(e),s=o();return G(a in s?xB(s[a]):bB(),wY(()=>XZ(e,`Expected ${a} to exist in the process context`)),q(i=>hQ(i,e,t,r,n)))},enumerateChildren:e=>J(()=>{let t=o();return MW(Object.keys(t).map(e=>a(e.toUpperCase())).filter(t=>{for(let n=0;n<e.length;n++){let r=G(e,JB(n)),i=t[n];if(i===void 0||r!==i)return!1}return!0}).flatMap(t=>t.slice(e.length,e.length+1)))}),patch:eQ}))};var uQ=(e,t,n,r)=>{let i=vV(n.length,t=>t>=r.length?bB():xB([e(t),t+1])),a=vV(r.length,e=>e>=n.length?bB():xB([t(e),e+1]));return[nQ(n,i),nQ(r,a)]},dQ=(e,t)=>{let n=t;if(n._tag===`Nested`){let t=e.slice();for(;n._tag===`Nested`;)t.push(n.name),n=n.config;return t}return e},fQ=(e,t,n,r)=>{let i=n;switch(i._tag){case`Constant`:return AY(mV(i.value));case`Described`:return jY(()=>fQ(e,t,i.config,r));case`Fail`:return cY(XZ(t,i.message));case`Fallback`:return G(jY(()=>fQ(e,t,i.first,r)),tY(n=>i.condition(n)?G(fQ(e,t,i.second,r),tY(e=>cY(JZ(n,e)))):cY(n)));case`Lazy`:return jY(()=>fQ(e,t,i.config(),r));case`MapOrFail`:return jY(()=>G(fQ(e,t,i.original,r),q(yY(e=>G(i.mapOrFail(e),wY($Z(dQ(t,i.original))))))));case`Nested`:return jY(()=>fQ(e,nQ(t,mV(i.name)),i.config,r));case`Primitive`:return G(tQ(t,e.patch),q(t=>G(e.load(t,i,r),q(e=>{if(e.length===0){let e=G(ZB(t),TB(()=>`<n/a>`));return cY(XZ([],`Expected ${i.description} with name ${e}`))}return AY(e)}))));case`Sequence`:return G(tQ(t,e.patch),q(n=>G(e.enumerateChildren(n),q(_Q),q(n=>n.length===0?jY(()=>SY(fQ(e,t,i.config,!0),mV)):G(yY(n,n=>fQ(e,BB(t,`[${n}]`),i.config,!0)),SY(e=>{let t=gV(e);return t.length===0?mV(pV()):mV(t)}))))));case`HashMap`:return jY(()=>G(tQ(t,e.patch),q(t=>G(e.enumerateChildren(t),q(n=>G(n,yY(n=>fQ(e,nQ(t,mV(n)),i.valueConfig,r)),SY(e=>e.length===0?mV(fG()):G(gQ(e),hV(e=>pG(aV(LB(n),e)))))))))));case`ZipWith`:return jY(()=>G(fQ(e,t,i.left,r),oY,q(n=>G(fQ(e,t,i.right,r),oY,q(e=>{if(fB(n)&&fB(e))return cY(qZ(n.left,e.left));if(fB(n)&&pB(e))return cY(n.left);if(pB(n)&&fB(e))return cY(e.left);if(pB(n)&&pB(e)){let r=pQ(t,G(t,SV(`.`))),[a,o]=uQ(r,r,G(n.right,hV(uB)),G(e.right,hV(uB)));return G(a,aV(o),yY(([e,t])=>G(HY(e,t),SY(([e,t])=>i.zip(e,t)))))}throw Error(`BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues`)})))))}},pQ=(e,t)=>n=>dB(XZ(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),mQ=(e,t)=>e.split(RegExp(`\\s*${wV(t)}\\s*`)),hQ=(e,t,n,r,i)=>i?G(mQ(e,r),yY(e=>n.parse(e.trim())),wY($Z(t))):G(n.parse(e),CY({onFailure:$Z(t),onSuccess:mV})),gQ=e=>Object.keys(e[0]).map(t=>e.map(e=>e[t])),_Q=e=>G(yY(e,yQ),CY({onFailure:()=>pV(),onSuccess:iV(CV)}),oY,SY(mB)),vQ=/^(\[(\d+)\])$/,yQ=e=>{let t=e.match(vQ);if(t!==null){let e=t[2];return G(e!==void 0&&e.length>0?xB(e):bB(),jB(bQ))}return bB()},bQ=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?bB():xB(t)};const xQ=Symbol.for(`effect/Console`),SQ=YV(`effect/Console`),CQ={[xQ]:xQ,assert(e,...t){return J(()=>{console.assert(e,...t)})},clear:J(()=>{console.clear()}),count(e){return J(()=>{console.count(e)})},countReset(e){return J(()=>{console.countReset(e)})},debug(...e){return J(()=>{console.debug(...e)})},dir(e,t){return J(()=>{console.dir(e,t)})},dirxml(...e){return J(()=>{console.dirxml(...e)})},error(...e){return J(()=>{console.error(...e)})},group(e){return e?.collapsed?J(()=>console.groupCollapsed(e?.label)):J(()=>console.group(e?.label))},groupEnd:J(()=>{console.groupEnd()}),info(...e){return J(()=>{console.info(...e)})},log(...e){return J(()=>{console.log(...e)})},table(e,t){return J(()=>{console.table(e,t)})},time(e){return J(()=>console.time(e))},timeEnd(e){return J(()=>console.timeEnd(e))},timeLog(e,...t){return J(()=>{console.timeLog(e,...t)})},trace(...e){return J(()=>{console.trace(...e)})},warn(...e){return J(()=>{console.warn(...e)})},unsafe:console},wQ=Symbol.for(`effect/Random`),TQ=YV(`effect/Random`);var EQ=class{seed;[wQ]=wQ;PRNG;constructor(e){this.seed=e,this.PRNG=new FR(e)}get next(){return J(()=>this.PRNG.number())}get nextBoolean(){return SY(this.next,e=>e>.5)}get nextInt(){return J(()=>this.PRNG.integer(2**53-1))}nextRange(e,t){return SY(this.next,n=>(t-e)*n+e)}nextIntBetween(e,t){return J(()=>this.PRNG.integer(t-e)+e)}shuffle(e){return DQ(e,e=>this.nextIntBetween(0,e))}},DQ=(e,t)=>jY(()=>G(J(()=>Array.from(e)),q(e=>{let n=[];for(let t=e.length;t>=2;--t)n.push(t);return G(n,bY(n=>G(t(n),SY(t=>OQ(e,n-1,t)))),YJ(hH(e)))}))),OQ=(e,t,n)=>{let r=e[t];return e[t]=e[n],e[n]=r,e};const kQ=e=>new EQ(K(e)),AQ=Symbol.for(`effect/Tracer`),jQ=e=>({[AQ]:AQ,...e}),MQ=YV(`effect/Tracer`),NQ=YV(`effect/ParentSpan`);var PQ=function(){return function(e){let t=``;for(let n=0;n<e;n++)t+=`abcdef0123456789`.charAt(Math.floor(Math.random()*16));return t}}(),FQ=class{name;parent;context;startTime;kind;_tag=`Span`;spanId;traceId=`native`;sampled=!0;status;attributes;events=[];links;constructor(e,t,n,r,i,a){this.name=e,this.parent=t,this.context=n,this.startTime=i,this.kind=a,this.status={_tag:`Started`,startTime:i},this.attributes=new Map,this.traceId=t._tag===`Some`?t.value.traceId:PQ(32),this.spanId=PQ(16),this.links=Array.from(r)}end(e,t){this.status={_tag:`Ended`,endTime:e,exit:t,startTime:this.status.startTime}}attribute(e,t){this.attributes.set(e,t)}event(e,t,n){this.events.push([e,t,n??{}])}addLinks(e){this.links.push(...e)}};const IQ=jQ({span:(e,t,n,r,i,a)=>new FQ(e,t,n,r,i,a),context:e=>e()}),LQ=rH()(`effect/Tracer/DisablePropagation`,{defaultValue:sR}),RQ=G(XV(),QV(PZ,BZ()),QV(SQ,CQ),QV(TQ,kQ(Math.random())),QV(iQ,lQ()),QV(MQ,IQ)),zQ=hR(Symbol.for(`effect/DefaultServices/currentServices`),()=>fX(RQ));function BQ(e){return new UQ(e)}function VQ(){return BQ(new Map)}const HQ=Symbol.for(`effect/FiberRefs`);var UQ=class{locals;[HQ]=HQ;constructor(e){this.locals=e}pipe(){return _z(this,arguments)}},WQ=(e,t,n,r=!1)=>{let i=e,a=t,o=n,s=r,c;for(;c===void 0;)if(WB(a)&&WB(o)){let e=XB(a)[0],t=$B(a),n=XB(o)[0],r=XB(o)[1],i=$B(o);e.startTimeMillis<n.startTimeMillis?(o=i,s=!0):e.startTimeMillis>n.startTimeMillis?a=t:e.id<n.id?(o=i,s=!0):e.id>n.id?a=t:c=[r,s]}else c=[i.initial,!0];return c};const GQ=W(3,(e,t,n)=>{let r=new Map(e.locals);return n.locals.forEach((e,n)=>{let i=e[0][1];if(!e[0][0][nz](t)){if(!r.has(n)){if(rz(i,n.initial))return;r.set(n,[[t,n.join(n.initial,i)]]);return}let a=r.get(n),[o,s]=WQ(n,a,e);if(s){let e=n.diff(o,i),s=a[0][1],c=n.join(s,n.patch(e)(s));if(!rz(s,c)){let e,i=a[0][0];e=i[nz](t)?[[i,c],...a.slice(1)]:[[t,c],...a],r.set(n,e)}}}}),new UQ(r)}),KQ=W(2,(e,t)=>{let n=new Map;return qQ(e,n,t),new UQ(n)});var qQ=(e,t,n)=>{e.locals.forEach((e,r)=>{let i=e[0][1],a=r.patch(r.fork)(i);rz(i,a)?t.set(r,e):t.set(r,[[n,a],...e])})};const JQ=W(2,(e,t)=>{let n=new Map(e.locals);return n.delete(t),new UQ(n)}),YQ=W(2,(e,t)=>e.locals.has(t)?xB(XB(e.locals.get(t))[1]):bB()),XQ=W(2,(e,t)=>G(YQ(e,t),TB(()=>t.initial))),ZQ=W(2,(e,{fiberId:t,fiberRef:n,value:r})=>{if(e.locals.size===0)return new UQ(new Map([[n,[[t,r]]]]));let i=new Map(e.locals);return QQ(i,t,n,r),new UQ(i)});var QQ=(e,t,n,r)=>{let i=e.get(n)??[],a;if(WB(i)){let[e,n]=XB(i);if(e[nz](t)){if(rz(n,r))return;a=[[t,r],...i.slice(1)]}else a=[[t,r],...i]}else a=[[t,r]];e.set(n,a)};const $Q=W(2,(e,{entries:t,forkAs:n})=>{if(e.locals.size===0)return new UQ(new Map(t));let r=new Map(e.locals);return n!==void 0&&qQ(e,r,n),t.forEach(([e,t])=>{t.length===1?QQ(r,t[0][0],e,t[0][1]):t.forEach(([t,n])=>{QQ(r,t,e,n)})}),new UQ(r)}),e$=XQ,t$=$Q,n$=VQ,r$=JY,i$=YY,a$=XY,o$=ZY,s$=QY,c$=$Y,l$=eX,u$=tX,d$=yB(G(CV,vB(e=>e.ordinal))),f$=e=>{switch(e){case`All`:return r$;case`Debug`:return c$;case`Error`:return a$;case`Fatal`:return i$;case`Info`:return s$;case`Trace`:return l$;case`None`:return u$;case`Warning`:return o$}},p$=e=>e.replace(/[\s="]/g,`_`),m$=e=>t=>`${p$(t.label)}=${e-t.startTime}ms`,h$=Vz;var g$=Gz,_$=class extends g${};const v$=Symbol.for(`effect/Readable`),y$=Symbol.for(`effect/Ref`),b$={_A:e=>e};var x$=class extends _${ref;commit(){return this.get}[y$]=b$;[v$]=v$;constructor(e){super(),this.ref=e,this.get=J(()=>GW(this.ref))}get;modify(e){return J(()=>{let t=GW(this.ref),[n,r]=e(t);return t!==r&&KW(r)(this.ref),n})}};const S$=e=>new x$(WW(e)),C$=e=>J(()=>S$(e)),w$=e=>e.get,T$=W(2,(e,t)=>e.modify(()=>[void 0,t])),E$=W(2,(e,t)=>e.modify(t)),D$=W(2,(e,t)=>e.modify(e=>[void 0,t(e)])),O$=`Empty`,k$=`Remove`,A$=`Update`,j$=`AndThen`,M$={_tag:O$},N$=(e,t)=>{let n=new Map(e.locals),r=M$;for(let[e,i]of t.locals.entries()){let t=XB(i)[1],a=n.get(e);if(a!==void 0){let n=XB(a)[1];rz(n,t)||(r=P$({_tag:A$,fiberRef:e,patch:e.diff(n,t)})(r))}else r=P$({_tag:`Add`,fiberRef:e,value:t})(r);n.delete(e)}for(let[e]of n.entries())r=P$({_tag:k$,fiberRef:e})(r);return r},P$=W(2,(e,t)=>({_tag:j$,first:e,second:t})),F$=W(3,(e,t,n)=>{let r=n,i=mV(e);for(;WB(i);){let e=XB(i),n=$B(i);switch(e._tag){case O$:i=n;break;case`Add`:r=ZQ(r,{fiberId:t,fiberRef:e.fiberRef,value:e.value}),i=n;break;case k$:r=JQ(r,e.fiberRef),i=n;break;case A$:{let a=XQ(r,e.fiberRef);r=ZQ(r,{fiberId:t,fiberRef:e.fiberRef,value:e.fiberRef.patch(e.patch)(a)}),i=n;break}case j$:i=zB(e.first)(zB(e.second)(n));break}}return r});var I$=`effect/MetricLabel`;const L$=Symbol.for(I$);var R$=class{key;value;[L$]=L$;_hash;constructor(e,t){this.key=e,this.value=t,this._hash=ZR(I$+this.key+this.value)}[GR](){return this._hash}[nz](e){return B$(e)&&this.key===e.key&&this.value===e.value}pipe(){return _z(this,arguments)}};const z$=(e,t)=>new R$(e,t),B$=e=>SR(e,L$),V$=e=>SY(e,xB),H$=e=>t1(e,K$,N$),U$=e=>DY(e,()=>q(VY(),()=>U$(e)));var W$=(e,t,n,r)=>q(n(r,t),i=>{if(i)return AY(xB(r));let a=e.next();return a.done?AY(bB()):W$(e,t+1,n,a.value)}),G$=(e,t,n)=>{let r=e.next();return r.done?AY(!0):q(n(r.value,t),r=>r?G$(e,t+1,n):AY(r))};const K$=qJ(e=>AY(e.getFiberRefs())),q$=(e,t)=>jY(()=>t.while(e)?q(t.body(e),e=>q$(e,t)):AY(e));var J$=(e,t,n,r)=>jY(()=>t(e)?q(r(e),i=>SY(J$(n(e),t,n,r),LG(i))):J(()=>PG())),Y$=(e,t,n,r)=>jY(()=>t(e)?q(r(e),()=>Y$(n(e),t,n,r)):LY);const X$=e=>r1((t,n)=>G(e,F$(t,n))),Z$=W(3,(e,t,n)=>vZ(r=>yZ(e,QV(r,t,n))));var Q$=(e,t,n,r,i)=>{let a=e.next();return!a.done&&r(n)?q(i(n,a.value,t),n=>Q$(e,t+1,n,r,i)):AY(n)},$$=(e,t)=>q(e,n=>t<=0?AY(n):WY(VY(),$$(e,t-1)));const e1=AY(bB()),t1=W(3,(e,t,n)=>q(t,r=>q(e,e=>SY(t,t=>[n(r,t),e])))),n1=e=>{let t,n;typeof e==`function`?t=e:(t=e.try,n=e.catch);let r=e=>n?lY(()=>n(e)):cY(new WX(e,`An unknown error occurred in Effect.tryPromise`));return t.length>=1?eY((e,n)=>{try{t(n).then(t=>e(AY(t)),t=>e(r(t)))}catch(t){e(r(t))}}):eY(e=>{try{t().then(t=>e(AY(t)),t=>e(r(t)))}catch(t){e(r(t))}})},r1=e=>qJ(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),LY));var i1=jB(e=>$V(e.context,LQ)?e._tag===`Span`?i1(e.parent):bB():xB(e));const a1=`Sequential`,o1=`Parallel`,s1={_tag:a1},c1={_tag:o1},l1=e=>({_tag:`ParallelN`,parallelism:e}),u1=e=>e._tag===a1,d1=e=>e._tag===o1,f1=s1,p1=c1,m1=l1,h1=N$,uce=F$;var g1=`effect/FiberStatus`;const _1=Symbol.for(g1),v1=`Done`;var y1=ZR(`${g1}-${v1}`),b1=class{[_1]=_1;_tag=v1;[GR](){return y1}[nz](e){return E1(e)&&e._tag===`Done`}},x1=class{runtimeFlags;[_1]=_1;_tag=`Running`;constructor(e){this.runtimeFlags=e}[GR](){return G(K(g1),qR(K(this._tag)),qR(K(this.runtimeFlags)),tz(this))}[nz](e){return E1(e)&&e._tag===`Running`&&this.runtimeFlags===e.runtimeFlags}},S1=class{runtimeFlags;blockingOn;[_1]=_1;_tag=`Suspended`;constructor(e,t){this.runtimeFlags=e,this.blockingOn=t}[GR](){return G(K(g1),qR(K(this._tag)),qR(K(this.runtimeFlags)),qR(K(this.blockingOn)),tz(this))}[nz](e){return E1(e)&&e._tag===`Suspended`&&this.runtimeFlags===e.runtimeFlags&&rz(this.blockingOn,e.blockingOn)}};const C1=new b1,w1=e=>new x1(e),T1=(e,t)=>new S1(e,t),E1=e=>SR(e,_1),D1=e=>e._tag===v1,O1=C1,k1=w1,A1=T1,j1=D1,M1=Symbol.for(`effect/Micro`),N1=Symbol.for(`effect/Micro/MicroExit`),P1=Symbol.for(`effect/Micro/MicroCause`);var F1={_E:iR},I1=class extends globalThis.Error{_tag;traces;[P1];constructor(e,t,n){let r=`MicroCause.${e}`,i,a,o;if(t instanceof globalThis.Error){i=`(${r}) ${t.name}`,a=t.message;let e=a.split(`
`).length;o=t.stack?`(${r}) ${t.stack.split(`
`).slice(0,e+3).join(`
`)}`:`${i}: ${a}`}else i=r,a=uz(t,0),o=`${i}: ${a}`;n.length>0&&(o+=`\n    ${n.join(`
    `)}`),super(a),this._tag=e,this.traces=n,this[P1]=F1,this.name=i,this.stack=o}pipe(){return _z(this,arguments)}toString(){return this.stack}[sz](){return this.stack}},L1=class extends I1{defect;constructor(e,t=[]){super(`Die`,e,t),this.defect=e}};const R1=(e,t=[])=>new L1(e,t);var z1=class extends I1{constructor(e=[]){super(`Interrupt`,`interrupted`,e)}};const B1=(e=[])=>new z1(e),V1=e=>e._tag===`Interrupt`,H1=Symbol.for(`effect/Micro/MicroFiber`);var U1={_A:iR,_E:iR},W1=class{context;interruptible;[H1];_stack=[];_observers=[];_exit;_children;currentOpCount=0;constructor(e,t=!0){this.context=e,this.interruptible=t,this[H1]=U1}getRef(e){return WV(this.context,e)}addObserver(e){return this._exit?(e(this._exit),lR):(this._observers.push(e),()=>{let t=this._observers.indexOf(e);t>=0&&this._observers.splice(t,1)})}_interrupted=!1;unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(h0))}unsafePoll(){return this._exit}evaluate(e){if(this._exit)return;if(this._yielded!==void 0){let e=this._yielded;this._yielded=void 0,e()}let t=this.runLoop(e);if(t===Q1)return;let n=G1.interruptChildren&&G1.interruptChildren(this);if(n!==void 0)return this.evaluate(u0(n,()=>t));this._exit=t;for(let e=0;e<this._observers.length;e++)this._observers[e](t);this._observers.length=0}runLoop(e){let t=!1,n=e;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!t&&this.getRef(C0).shouldYield(this)){t=!0;let e=n;n=u0(s0,()=>e)}if(n=n[J1](this),n===Q1){let e=this._yielded;return N1 in e?(this._yielded=void 0,e):Q1}}}catch(e){return SR(n,J1)?g0(e):g0(`MicroFiber.runLoop: Not a valid effect: ${String(n)}`)}}getCont(e){for(;;){let t=this._stack.pop();if(!t)return;let n=t[Z1]&&t[Z1](this);if(n)return{[e]:n};if(t[e])return t}}_yielded=void 0;yieldWith(e){return this._yielded=e,Q1}children(){return this._children??=new Set}},G1=hR(`effect/Micro/fiberMiddleware`,()=>({interruptChildren:void 0})),K1=Symbol.for(`effect/Micro/identifier`),q1=Symbol.for(`effect/Micro/args`),J1=Symbol.for(`effect/Micro/evaluate`),Y1=Symbol.for(`effect/Micro/successCont`),X1=Symbol.for(`effect/Micro/failureCont`),Z1=Symbol.for(`effect/Micro/ensureCont`),Q1=Symbol.for(`effect/Micro/Yield`),$1={_A:iR,_E:iR,_R:iR},e0={...h$,_op:`Micro`,[M1]:$1,pipe(){return _z(this,arguments)},[Symbol.iterator](){return new OR(new zR(this))},toJSON(){return{_id:`Micro`,op:this[K1],...q1 in this?{args:this[q1]}:void 0}},toString(){return lz(this)},[sz](){return lz(this)}};function t0(e){return g0(`Micro.evaluate: Not implemented`)}var n0=e=>({...e0,[K1]:e.op,[J1]:e.eval??t0,[Y1]:e.contA,[X1]:e.contE,[Z1]:e.ensure}),r0=e=>{let t=n0(e);return function(){let n=Object.create(t);return n[q1]=e.single===!1?arguments:arguments[0],n}},i0=e=>{let t={...n0(e),[N1]:N1,_tag:e.op,get[e.prop](){return this[q1]},toJSON(){return{_id:`MicroExit`,_tag:e.op,[e.prop]:this[q1]}},[nz](t){return f0(t)&&t._tag===e.op&&rz(this[q1],t[q1])},[GR](){return tz(this,qR(ZR(e.op))(K(this[q1])))}};return function(e){let n=Object.create(t);return n[q1]=e,n[Y1]=void 0,n[X1]=void 0,n[Z1]=void 0,n}};const a0=i0({op:`Success`,prop:`value`,eval(e){let t=e.getCont(Y1);return t?t[Y1](this[q1],e):e.yieldWith(this)}}),o0=i0({op:`Failure`,prop:`cause`,eval(e){let t=e.getCont(X1);for(;V1(this[q1])&&t&&e.interruptible;)t=e.getCont(X1);return t?t[X1](this[q1],e):e.yieldWith(this)}}),s0=r0({op:`Yield`,eval(e){let t=!1;return e.getRef(C0).scheduleTask(()=>{t||e.evaluate(_0)},this[q1]??0),e.yieldWith(()=>{t=!0})}})(0);var c0=a0(void 0);const l0=r0({op:`WithMicroFiber`,eval(e){return this[q1](e)}}),u0=W(2,(e,t)=>{let n=Object.create(d0);return n[q1]=e,n[Y1]=t,n});var d0=n0({op:`OnSuccess`,eval(e){return e._stack.push(this),this[q1]}});const f0=e=>SR(e,N1),p0=a0,m0=o0,h0=m0(B1()),g0=e=>m0(R1(e)),_0=p0(void 0);var v0=`setImmediate`in globalThis?globalThis.setImmediate:e=>setTimeout(e,0),y0=class{tasks=[];running=!1;scheduleTask(e,t){this.tasks.push(e),this.running||(this.running=!0,v0(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){let e=this.tasks;this.tasks=[];for(let t=0,n=e.length;t<n;t++)e[t]()}shouldYield(e){return e.currentOpCount>=e.getRef(S0)}flush(){for(;this.tasks.length>0;)this.runTasks()}};const b0=W(2,(e,t)=>l0(n=>{let r=n.context;return n.context=t(r),E0(e,()=>(n.context=r,c0))})),x0=W(2,(e,t)=>b0(e,nH(t)));var S0=class extends rH()(`effect/Micro/currentMaxOpsBeforeYield`,{defaultValue:()=>2048}){};rH()(`effect/Micro/currentConcurrency`,{defaultValue:()=>`unbounded`});var C0=class extends rH()(`effect/Micro/currentScheduler`,{defaultValue:()=>new y0}){};const w0=W(2,(e,t)=>{let n=Object.create(T0);return n[q1]=e,n[Y1]=t.onSuccess,n[X1]=t.onFailure,n});var T0=n0({op:`OnSuccessAndFailure`,eval(e){return e._stack.push(this),this[q1]}});const E0=W(2,(e,t)=>k0(n=>w0(n(e),{onFailure:e=>u0(t(m0(e)),()=>o0(e)),onSuccess:e=>u0(t(p0(e)),()=>a0(e))})));var D0=r0({op:`SetInterruptible`,ensure(e){if(e.interruptible=this[q1],e._interrupted&&e.interruptible)return()=>h0}});const O0=e=>l0(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(D0(!1)),t._interrupted?h0:e)),k0=e=>l0(t=>t.interruptible?(t.interruptible=!1,t._stack.push(D0(!0)),e(O0)):e(iR)),A0=(e,t)=>{let n=new W1(C0.context(t?.scheduler??new y0));if(n.evaluate(e),t?.signal)if(t.signal.aborted)n.unsafeInterrupt();else{let e=()=>n.unsafeInterrupt();t.signal.addEventListener(`abort`,e,{once:!0}),n.addObserver(()=>t.signal.removeEventListener(`abort`,e))}return n};var j0=class{buckets=[];scheduleTask(e,t){let n=this.buckets.length,r,i=0;for(;i<n&&this.buckets[i][0]<=t;i++)r=this.buckets[i];r&&r[0]===t?r[1].push(e):i===n?this.buckets.push([t,[e]]):this.buckets.splice(i,0,[t,[e]])}},M0=class{maxNextTickBeforeTimer;running=!1;tasks=new j0;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){let t=this.tasks.buckets;this.tasks.buckets=[];for(let[e,n]of t)for(let e=0;e<n.length;e++)n[e]();this.tasks.buckets.length===0?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(_X)?e.getFiberRef(gX):!1}scheduleTask(e,t){this.tasks.scheduleTask(e,t),this.running||(this.running=!0,this.starve())}};const N0=hR(Symbol.for(`effect/Scheduler/defaultScheduler`),()=>new M0(2048)),P0=hR(Symbol.for(`effect/FiberRef/currentScheduler`),()=>lX(N0)),F0=hR(Symbol.for(`effect/FiberRef/currentRequestMap`),()=>lX(new Map)),I0=(e,t,n,r)=>{switch(e){case void 0:return t();case`unbounded`:return n();case`inherit`:return aX(SX,e=>e===`unbounded`?n():e>1?r(e):t());default:return e>1?r(e):t()}},L0=`InterruptSignal`,R0=`Stateful`,z0=`Resume`,B0=`YieldNow`,V0=e=>({_tag:L0,cause:e}),H0=e=>({_tag:R0,onFiber:e}),U0=e=>({_tag:z0,effect:e}),W0=()=>({_tag:B0}),G0=Symbol.for(`effect/FiberScope`);var K0=class{[G0]=G0;fiberId=lG;roots=new Set;add(e,t){this.roots.add(t),t.addObserver(()=>{this.roots.delete(t)})}},q0=class{fiberId;parent;[G0]=G0;constructor(e,t){this.fiberId=e,this.parent=t}add(e,t){this.parent.tell(H0(e=>{e.addChild(t),t.addObserver(()=>{e.removeChild(t)})}))}};const J0=e=>new q0(e.id(),e),Y0=hR(Symbol.for(`effect/FiberScope/Global`),()=>new K0),X0=Symbol.for(`effect/Fiber`),Z0={_E:e=>e,_A:e=>e};var dce={[X0]:Z0,pipe(){return _z(this,arguments)}};const fce=Symbol.for(`effect/Fiber`),Q0=e=>UY(hY(e.await),e.inheritAll);({...Uz}),{...dce};const $0=`effect/FiberCurrent`;i();const pce=Symbol.for(`effect/Logger`);var mce={_Message:e=>e,_Output:e=>e};const e2=e=>({[pce]:mce,log:e,pipe(){return _z(this,arguments)}});var hce=/^[^\s"=]*$/;const gce=e2(((e,t)=>({annotations:n,cause:r,date:i,fiberId:a,logLevel:o,message:s,spans:c})=>{let l=t=>t.match(hce)?t:e(t),u=(e,t)=>`${p$(e)}=${l(t)}`,d=(e,t)=>` `+u(e,t),f=u(`timestamp`,i.toISOString());f+=d(`level`,o.label),f+=d(`fiber`,oG(a));let p=RB(s);for(let e=0;e<p.length;e++)f+=d(`message`,uz(p[e],t));$q(r)||(f+=d(`cause`,CJ(r,{renderErrorCause:!0})));for(let e of c)f+=` `+m$(i.getTime())(e);for(let[e,r]of n)f+=d(e,uz(r,t));return f})(e=>`"${e.replace(/\\([\s\S])|(")/g,`\\$1$2`)}"`));var t2={bold:`1`,red:`31`,green:`32`,yellow:`33`,blue:`34`,cyan:`36`,white:`37`,gray:`90`,black:`30`,bgBrightRed:`101`};t2.gray,t2.blue,t2.green,t2.yellow,t2.red,t2.bgBrightRed,t2.black;var n2=typeof n==`object`&&!!n&&typeof n.stdout==`object`&&n.stdout!==null;n2&&n.stdout.isTTY,n2||`Deno`in globalThis;var r2=`effect/MetricBoundaries`;const i2=Symbol.for(r2);var _ce=class{values;[i2]=i2;constructor(e){this.values=e,this._hash=G(ZR(r2),qR(ez(this.values)))}_hash;[GR](){return this._hash}[nz](e){return vce(e)&&rz(this.values,e.values)}pipe(){return _z(this,arguments)}};const vce=e=>SR(e,i2),yce=e=>new _ce(G(e,VB(mH(1/0)),xV)),bce=e=>G(IB(e.count-1,t=>e.start*e.factor**+t),bH,yce),a2=Symbol.for(`effect/MetricKeyType`);var o2=`effect/MetricKeyType/Counter`;const s2=Symbol.for(o2),xce=Symbol.for(`effect/MetricKeyType/Frequency`),Sce=Symbol.for(`effect/MetricKeyType/Gauge`);var c2=`effect/MetricKeyType/Histogram`;const l2=Symbol.for(c2),Cce=Symbol.for(`effect/MetricKeyType/Summary`);var u2={_In:e=>e,_Out:e=>e},wce=class{incremental;bigint;[a2]=u2;[s2]=s2;constructor(e,t){this.incremental=e,this.bigint=t,this._hash=ZR(o2)}_hash;[GR](){return this._hash}[nz](e){return d2(e)}pipe(){return _z(this,arguments)}},Tce=class{boundaries;[a2]=u2;[l2]=l2;constructor(e){this.boundaries=e,this._hash=G(ZR(c2),qR(K(this.boundaries)))}_hash;[GR](){return this._hash}[nz](e){return f2(e)&&rz(this.boundaries,e.boundaries)}pipe(){return _z(this,arguments)}};const Ece=e=>new wce(e?.incremental??!1,e?.bigint??!1),Dce=e=>new Tce(e),d2=e=>SR(e,s2),Oce=e=>SR(e,xce),kce=e=>SR(e,Sce),f2=e=>SR(e,l2),Ace=e=>SR(e,Cce),p2=Symbol.for(`effect/MetricKey`);var jce={_Type:e=>e},Mce=yV(rz),m2=class{name;keyType;description;tags;[p2]=jce;constructor(e,t,n,r=[]){this.name=e,this.keyType=t,this.description=n,this.tags=r,this._hash=G(ZR(this.name+this.description),qR(K(this.keyType)),qR(ez(this.tags)))}_hash;[GR](){return this._hash}[nz](e){return Nce(e)&&this.name===e.name&&rz(this.keyType,e.keyType)&&rz(this.description,e.description)&&Mce(this.tags,e.tags)}pipe(){return _z(this,arguments)}};const Nce=e=>SR(e,p2),Pce=(e,t)=>new m2(e,Ece(t),DB(t?.description)),Fce=(e,t,n)=>new m2(e,Dce(t),DB(n)),Ice=W(2,(e,t)=>t.length===0?e:new m2(e.name,e.keyType,e.description,fV(e.tags,t))),h2=Symbol.for(`effect/MetricState`);var g2=`effect/MetricState/Counter`;const _2=Symbol.for(g2);var v2=`effect/MetricState/Frequency`;const y2=Symbol.for(v2);var b2=`effect/MetricState/Gauge`;const x2=Symbol.for(b2);var S2=`effect/MetricState/Histogram`;const C2=Symbol.for(S2);var w2=`effect/MetricState/Summary`;const T2=Symbol.for(w2);var E2={_A:e=>e},Lce=class{count;[h2]=E2;[_2]=_2;constructor(e){this.count=e}[GR](){return G(K(g2),qR(K(this.count)),tz(this))}[nz](e){return Jce(e)&&this.count===e.count}pipe(){return _z(this,arguments)}},Rce=yV(rz),zce=class{occurrences;[h2]=E2;[y2]=y2;constructor(e){this.occurrences=e}_hash;[GR](){return G(ZR(v2),qR(ez(LB(this.occurrences.entries()))),tz(this))}[nz](e){return Yce(e)&&Rce(LB(this.occurrences.entries()),LB(e.occurrences.entries()))}pipe(){return _z(this,arguments)}},Bce=class{value;[h2]=E2;[x2]=x2;constructor(e){this.value=e}[GR](){return G(K(b2),qR(K(this.value)),tz(this))}[nz](e){return Xce(e)&&this.value===e.value}pipe(){return _z(this,arguments)}},Vce=class{buckets;count;min;max;sum;[h2]=E2;[C2]=C2;constructor(e,t,n,r,i){this.buckets=e,this.count=t,this.min=n,this.max=r,this.sum=i}[GR](){return G(K(S2),qR(K(this.buckets)),qR(K(this.count)),qR(K(this.min)),qR(K(this.max)),qR(K(this.sum)),tz(this))}[nz](e){return Zce(e)&&rz(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return _z(this,arguments)}},Hce=class{error;quantiles;count;min;max;sum;[h2]=E2;[T2]=T2;constructor(e,t,n,r,i,a){this.error=e,this.quantiles=t,this.count=n,this.min=r,this.max=i,this.sum=a}[GR](){return G(K(w2),qR(K(this.error)),qR(K(this.quantiles)),qR(K(this.count)),qR(K(this.min)),qR(K(this.max)),qR(K(this.sum)),tz(this))}[nz](e){return Qce(e)&&this.error===e.error&&rz(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return _z(this,arguments)}};const Uce=e=>new Lce(e),Wce=e=>new zce(e),Gce=e=>new Bce(e),Kce=e=>new Vce(e.buckets,e.count,e.min,e.max,e.sum),qce=e=>new Hce(e.error,e.quantiles,e.count,e.min,e.max,e.sum),Jce=e=>SR(e,_2),Yce=e=>SR(e,y2),Xce=e=>SR(e,x2),Zce=e=>SR(e,C2),Qce=e=>SR(e,T2),$ce=Symbol.for(`effect/MetricHook`);var ele={_In:e=>e,_Out:e=>e};const D2=e=>({[$ce]:ele,pipe(){return _z(this,arguments)},...e});var O2=BigInt(0);const tle=e=>{let t=e.keyType.bigint?O2:0,n=e.keyType.incremental?e.keyType.bigint?e=>e>=O2:e=>e>=0:e=>!0,r=e=>{n(e)&&(t+=e)};return D2({get:()=>Uce(t),update:r,modify:r})},nle=e=>{let t=new Map;for(let n of e.keyType.preregisteredWords)t.set(n,0);let n=e=>{let n=t.get(e)??0;t.set(e,n+1)};return D2({get:()=>Wce(t),update:n,modify:n})},rle=(e,t)=>{let n=t;return D2({get:()=>Gce(n),update:e=>{n=e},modify:e=>{n+=e}})},ile=e=>{let t=e.keyType.boundaries.values,n=t.length,r=new Uint32Array(n+1),i=new Float64Array(n),a=0,o=0,s=Number.MAX_VALUE,c=Number.MIN_VALUE;G(t,iV(CV),hV((e,t)=>{i[t]=e}));let l=e=>{let t=0,l=n;for(;t!==l;){let n=Math.floor(t+(l-t)/2);e<=i[n]?l=n:t=n,l===t+1&&(e<=i[t]?l=t:t=l)}r[t]=r[t]+1,a+=1,o+=e,e<s&&(s=e),e>c&&(c=e)},u=()=>{let e=FB(n),t=0;for(let a=0;a<n;a++){let n=i[a],o=r[a];t+=o,e[a]=[n,t]}return e};return D2({get:()=>Kce({buckets:u(),count:a,min:s,max:c,sum:o}),update:l,modify:l})},ale=e=>{let{error:t,maxAge:n,maxSize:r,quantiles:i}=e.keyType,a=G(i,iV(CV)),o=FB(r),s=0,c=0,l=0,u=0,d=0,f=e=>{let i=[],s=0;for(;s!==r-1;){let t=o[s];if(t!=null){let[r,a]=t,o=QH(e-r);dU(o,JH)&&uU(o,n)&&i.push(a)}s+=1}return ole(t,a,iV(i,CV))},p=(e,t)=>{if(r>0){s+=1;let n=s%r;o[n]=[t,e]}u=c===0?e:Math.min(u,e),d=c===0?e:Math.max(d,e),c+=1,l+=e};return D2({get:()=>qce({error:t,quantiles:f(Date.now()),count:c,min:u,max:d,sum:l}),update:([e,t])=>p(e,t),modify:([e,t])=>p(e,t)})};var ole=(e,t,n)=>{let r=n.length;if(!WB(t))return pV();let i=t[0],a=t.slice(1),o=k2(e,r,bB(),0,i,n),s=mV(o);return a.forEach(t=>{s.push(k2(e,r,o.value,o.consumed,t,o.rest))}),hV(s,e=>[e.quantile,e.value])},k2=(e,t,n,r,i,a)=>{let o=e,s=t,c=n,l=r,u=i,d=a,f=e,p=t,m=n,h=r,g=i,_=a;for(;;){if(!WB(d))return{quantile:u,value:bB(),consumed:l,rest:[]};if(u===1)return{quantile:u,value:xB(QB(d)),consumed:l+d.length,rest:[]};let e=XB(d),t=tV(d,t=>t===e),n=u*s,r=o/2*n,i=l+t[0].length,a=Math.abs(i-n);if(i<n-r){f=o,p=s,m=YB(d),h=i,g=u,_=t[1],o=f,s=p,c=m,l=h,u=g,d=_;continue}if(i>n+r){let t=SB(c)?xB(e):c;return{quantile:u,value:t,consumed:l,rest:d}}switch(c._tag){case`None`:f=o,p=s,m=YB(d),h=i,g=u,_=t[1],o=f,s=p,c=m,l=h,u=g,d=_;continue;case`Some`:if(a<Math.abs(n-c.value)){f=o,p=s,m=YB(d),h=i,g=u,_=t[1],o=f,s=p,c=m,l=h,u=g,d=_;continue}return{quantile:u,value:xB(c.value),consumed:l,rest:d}}}throw Error(`BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues`)};const sle=Symbol.for(`effect/MetricPair`);var cle={_Type:e=>e};const lle=(e,t)=>({[sle]:cle,metricKey:e,metricState:t,pipe(){return _z(this,arguments)}}),A2=Symbol.for(`effect/MetricRegistry`);var ule=class{[A2]=A2;map=DZ();snapshot(){let e=[];for(let[t,n]of this.map)e.push(lle(t,n.get()));return e}get(e){let t=G(this.map,OZ(e),OB);if(t==null){if(d2(e.keyType))return this.getCounter(e);if(kce(e.keyType))return this.getGauge(e);if(Oce(e.keyType))return this.getFrequency(e);if(f2(e.keyType))return this.getHistogram(e);if(Ace(e.keyType))return this.getSummary(e);throw Error(`BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues`)}else return t}getCounter(e){let t=G(this.map,OZ(e),OB);if(t==null){let n=tle(e);G(this.map,AZ(e))||G(this.map,jZ(e,n)),t=n}return t}getFrequency(e){let t=G(this.map,OZ(e),OB);if(t==null){let n=nle(e);G(this.map,AZ(e))||G(this.map,jZ(e,n)),t=n}return t}getGauge(e){let t=G(this.map,OZ(e),OB);if(t==null){let n=rle(e,e.keyType.bigint?BigInt(0):0);G(this.map,AZ(e))||G(this.map,jZ(e,n)),t=n}return t}getHistogram(e){let t=G(this.map,OZ(e),OB);if(t==null){let n=ile(e);G(this.map,AZ(e))||G(this.map,jZ(e,n)),t=n}return t}getSummary(e){let t=G(this.map,OZ(e),OB);if(t==null){let n=ale(e);G(this.map,AZ(e))||G(this.map,jZ(e,n)),t=n}return t}};const dle=()=>new ule,fle=Symbol.for(`effect/Metric`);var ple={_Type:e=>e,_In:e=>e,_Out:e=>e};const j2=hR(Symbol.for(`effect/Metric/globalMetricRegistry`),()=>dle()),M2=function(e,t,n,r){let i=Object.assign(e=>MY(e,e=>_le(i,e)),{[fle]:ple,keyType:e,unsafeUpdate:t,unsafeValue:n,unsafeModify:r,register(){return this.unsafeValue([]),this},pipe(){return _z(this,arguments)}});return i},N2=(e,t)=>P2(Pce(e,t)),P2=e=>{let t,n=new WeakMap,r=r=>{if(r.length===0)return t===void 0&&(t=j2.get(e)),t;let i=n.get(r);return i===void 0?(i=j2.get(Ice(e,r)),n.set(r,i),i):i};return M2(e.keyType,(e,t)=>r(t).update(e),e=>r(e).get(),(e,t)=>r(t).modify(e))},mle=(e,t,n)=>P2(Fce(e,t,n)),hle=W(3,(e,t,n)=>gle(e,[z$(t,n)])),gle=W(2,(e,t)=>M2(e.keyType,(n,r)=>e.unsafeUpdate(n,fV(t,r)),n=>e.unsafeValue(fV(t,n)),(n,r)=>e.unsafeModify(n,fV(t,r)))),_le=W(2,(e,t)=>aX(EX,n=>J(()=>e.unsafeUpdate(t,n))));({...Hz});const vle=W(2,(e,t)=>aX(F0,n=>J(()=>{if(n.has(e)){let r=n.get(e);r.state.completed||(r.state.completed=!0,mZ(r.result,t))}}))),F2={Forward:0,Backward:1};Symbol.iterator;var yle=(e,t)=>{let n=e[Symbol.iterator](),r=0;return{[Symbol.iterator]:()=>yle(e,t),next:()=>{r++;let e=n.key;switch(t===F2.Forward?n.moveNext():n.movePrev(),e._tag){case`None`:return{done:!0,value:r};case`Some`:return{done:!1,value:e.value}}}}},ble=(e,t)=>{let n=e[Symbol.iterator](),r=0;return{[Symbol.iterator]:()=>ble(e,t),next:()=>{r++;let e=n.value;switch(t===F2.Forward?n.moveNext():n.movePrev(),e._tag){case`None`:return{done:!0,value:r};case`Some`:return{done:!1,value:e.value}}}}};Symbol.iterator;const I2=Symbol.for(`effect/Supervisor`),L2={_T:e=>e};var R2=class e{underlying;value0;[I2]=L2;constructor(e,t){this.underlying=e,this.value0=t}get value(){return this.value0}onStart(e,t,n,r){this.underlying.onStart(e,t,n,r)}onEnd(e,t){this.underlying.onEnd(e,t)}onEffect(e,t){this.underlying.onEffect(e,t)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(t){return new e(this,G(this.value,SY(t)))}zip(e){return new z2(this,e)}},z2=class e{left;right;_tag=`Zip`;[I2]=L2;constructor(e,t){this.left=e,this.right=t}get value(){return HY(this.left.value,this.right.value)}onStart(e,t,n,r){this.left.onStart(e,t,n,r),this.right.onStart(e,t,n,r)}onEnd(e,t){this.left.onEnd(e,t),this.right.onEnd(e,t)}onEffect(e,t){this.left.onEffect(e,t),this.right.onEffect(e,t)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new R2(this,G(this.value,SY(e)))}zip(t){return new e(this,t)}};const B2=e=>SR(e,I2)&&CR(e,`Zip`);var xle=class{effect;[I2]=L2;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,t,n,r){}onEnd(e,t){}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new R2(this,G(this.value,SY(e)))}zip(e){return new z2(this,e)}onRun(e,t){return e()}};const Sle=e=>new xle(e),V2=hR(`effect/Supervisor/none`,()=>Sle(LY)),Cle=RK,H2=`Empty`,U2=`AddSupervisor`,W2=`RemoveSupervisor`,G2=`AndThen`,K2={_tag:H2},q2=(e,t)=>({_tag:G2,first:e,second:t}),wle=(e,t)=>Tle(t,mH(e));var Tle=(e,t)=>{let n=e,r=t;for(;OH(r);){let e=jH(r);switch(e._tag){case H2:r=MH(r);break;case U2:n=n.zip(e.supervisor),r=MH(r);break;case W2:n=J2(n,e.supervisor),r=MH(r);break;case G2:r=wH(e.first)(wH(e.second)(MH(r)));break}}return n},J2=(e,t)=>rz(e,t)?V2:B2(e)?J2(e.left,t).zip(J2(e.right,t)):e,Y2=e=>rz(e,V2)?jW():B2(e)?G(Y2(e.left),BW(Y2(e.right))):NW(e);const Ele=Cle({empty:K2,patch:wle,combine:q2,diff:(e,t)=>{if(rz(e,t))return K2;let n=Y2(e),r=Y2(t);return q2(G(r,zW(n),VW(K2,(e,t)=>q2(e,{_tag:U2,supervisor:t}))),G(n,zW(r),VW(K2,(e,t)=>q2(e,{_tag:W2,supervisor:t}))))}}),Dle=N2(`effect_fiber_started`,{incremental:!0}),X2=N2(`effect_fiber_active`),Ole=N2(`effect_fiber_successes`,{incremental:!0}),kle=N2(`effect_fiber_failures`,{incremental:!0}),Ale=hle(mle(`effect_fiber_lifetimes`,bce({start:.5,factor:2,count:35})),`time_unit`,`milliseconds`);var Z2=`Continue`,jle=`Done`,Q2=`Yield`,Mle={_E:e=>e,_A:e=>e},$2=e=>{throw Error(`BUG: FiberRuntime - ${uz(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},e4=Symbol.for(`effect/internal/fiberRuntime/YieldedOp`),t4=hR(`effect/internal/fiberRuntime/yieldedOpChannel`,()=>({currentOp:null})),n4={[Sz]:(e,t,n)=>UR(()=>t.effect_instruction_i1(n)),OnStep:(e,t,n)=>rZ(rZ(n)),[Cz]:(e,t,n)=>UR(()=>t.effect_instruction_i2(n)),[jz]:(e,t,n)=>(e.patchRuntimeFlags(e.currentRuntimeFlags,t.patch),rq(e.currentRuntimeFlags)&&e.isInterrupted()?XX(e.getInterruptedCause()):rZ(n)),[Dz]:(e,t,n)=>(UR(()=>t.effect_instruction_i2(n)),UR(()=>t.effect_instruction_i0())?(e.pushStack(t),UR(()=>t.effect_instruction_i1())):LY),[Oz]:(e,t,n)=>{let r=UR(()=>t.effect_instruction_i0.next(n));return r.done?rZ(r.value):(e.pushStack(t),BR(r.value))}},Nle={[L0]:(e,t,n,r)=>(e.processNewInterruptSignal(r.cause),rq(t)?XX(r.cause):n),[z0]:(e,t,n,r)=>{throw Error(`It is illegal to have multiple concurrent run loops in a single fiber`)},[R0]:(e,t,n,r)=>(r.onFiber(e,k1(t)),n),[B0]:(e,t,n,r)=>q(VY(),()=>n)},Ple=e=>bY(vq(e),e=>o4(Iq(e),([e,t])=>{let n=new Map,r=[];for(let e of t){r.push(_H(e));for(let t of e)n.set(t.request,t)}let i=r.flat();return cX(nue(e.runAll(r),i,()=>i.forEach(e=>{e.listeners.interrupted=!0})),F0,n)},!1,!1)),Fle=Nz(),r4=class extends _${[X0]=Z0;[fce]=Mle;_fiberRefs;_fiberId;_queue=[];_children=null;_observers=[];_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_isYielding=!1;currentRuntimeFlags;currentOpCount=0;currentSupervisor;currentScheduler;currentTracer;currentSpan;currentContext;currentDefaultServices;constructor(e,t,n){if(super(),this.currentRuntimeFlags=n,this._fiberId=e,this._fiberRefs=t,cq(n)){let e=this.getFiberRef(EX);Dle.unsafeUpdate(1,e),X2.unsafeUpdate(1,e)}this.refreshRefCache()}commit(){return Q0(this)}id(){return this._fiberId}resume(e){this.tell(U0(e))}get status(){return this.ask((e,t)=>t)}get runtimeFlags(){return this.ask((e,t)=>j1(t)?e.currentRuntimeFlags:t.runtimeFlags)}scope(){return J0(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(OX)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return jY(()=>{let t=sZ(this._fiberId);return this.tell(H0((n,r)=>{mZ(t,J(()=>e(n,r)))})),uZ(t)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return eY(e=>{let t=t=>e(AY(t));return this.tell(H0((e,n)=>{e._exitValue===null?e.addObserver(t):t(this._exitValue)})),J(()=>this.tell(H0((e,n)=>{e.removeObserver(t)})))},this.id())}get inheritAll(){return qJ((e,t)=>{let n=e.id(),r=e.getFiberRefs(),i=t.runtimeFlags,a=GQ(r,n,this.getFiberRefs());return e.setFiberRefs(a),RY(G(uq(i,e.getFiberRef(_4)),hq(1),hq(16)))})}get poll(){return J(()=>DB(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return J(()=>this.tell(V0(Yq(e))))}unsafeInterruptAsFork(e){this.tell(V0(Yq(e)))}addObserver(e){this._exitValue===null?this._observers.push(e):e(this._exitValue)}removeObserver(e){this._observers=this._observers.filter(t=>t!==e)}getFiberRefs(){return this.setFiberRef(_4,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=JQ(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,t){this._fiberRefs=ZQ(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:t}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(zQ),this.currentTracer=this.currentDefaultServices.unsafeMap.get(MQ.key),this.currentSupervisor=this.getFiberRef(tue),this.currentScheduler=this.getFiberRef(P0),this.currentContext=this.getFiberRef(hX),this.currentSpan=this.currentContext.unsafeMap.get(NQ.key)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}transferChildren(e){let t=this._children;if(this._children=null,t!==null&&t.size>0)for(let n of t)n._exitValue===null&&e.add(this.currentRuntimeFlags,n)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let t=Z2,n=globalThis[$0];globalThis[$0]=this;try{for(;t===Z2;)t=this._queue.length===0?jle:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[$0]=n}this._queue.length>0&&!this._running?(this._running=!0,t===Q2?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(gX))}drainQueueWhileRunning(e,t){let n=t;for(;this._queue.length>0;){let t=this._queue.splice(0,1)[0];n=Nle[t._tag](this,e,n,t)}return n}isInterrupted(){return!eJ(this.getFiberRef(OX))}addInterruptedCause(e){let t=this.getFiberRef(OX);this.setFiberRef(OX,Zq(t,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let e=!1;for(let t of this._children)t.tell(V0(Yq(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let e=this._children.values();this._children=null;let t=!1;return BY({while:()=>!t,body:()=>{let n=e.next();return n.done?J(()=>{t=!0}):XJ(n.value.await)},step:()=>{}})}return null}reportExitValue(e){if(cq(this.currentRuntimeFlags)){let t=this.getFiberRef(EX),n=this.id().startTimeMillis,r=Date.now();switch(Ale.unsafeUpdate(r-n,t),X2.unsafeUpdate(-1,t),e._tag){case wz:Ole.unsafeUpdate(1,t);break;case bz:kle.unsafeUpdate(1,t);break}}if(e._tag===`Failure`){let t=this.getFiberRef(wX);!nJ(e.cause)&&t._tag===`Some`&&this.log(`Fiber terminated with an unhandled error`,e.cause,t)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let t=this._observers.length-1;t>=0;t--)this._observers[t](e);this._observers=[]}getLoggers(){return this.getFiberRef(Ble)}log(e,t,n){let r=CB(n)?n.value:this.getFiberRef(yX);if(d$(this.getFiberRef(Ile),r))return;let i=this.getFiberRef(bX),a=this.getFiberRef(vX),o=this.getLoggers(),s=this.getFiberRefs();if(IW(o)>0){let n=$V(this.getFiberRef(zQ),PZ),c=new Date(n.unsafeCurrentTimeMillis());hz(s,()=>{for(let n of o)n.log({fiberId:this.id(),logLevel:r,message:e,cause:t,context:s,spans:i,annotations:a,date:c})})}}evaluateMessageWhileSuspended(e){switch(e._tag){case B0:return Q2;case L0:return this.processNewInterruptSignal(e.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(XX(e.cause)),this._asyncInterruptor=null),Z2;case z0:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),Z2;case R0:return e.onFiber(this,this._exitValue===null?A1(this.currentRuntimeFlags,this._asyncBlockingOn):O1),Z2;default:return $2(e)}}evaluateEffect(e){this.currentSupervisor.onResume(this);try{let t=rq(this.currentRuntimeFlags)&&this.isInterrupted()?XX(this.getInterruptedCause()):e;for(;t!==null;){let e=t,n=this.runLoop(e);if(n===e4){let e=t4.currentOp;t4.currentOp=null,e._op===`Yield`?tq(this.currentRuntimeFlags)?(this.tell(W0()),this.tell(U0(iZ)),t=null):t=iZ:e._op===`Async`&&(t=null)}else{this.currentRuntimeFlags=G(this.currentRuntimeFlags,nq(16));let e=this.interruptAllChildren();e===null?(this._queue.length===0?this.setExitValue(n):this.tell(U0(n)),t=null):t=q(e,()=>n)}}}finally{this.currentSupervisor.onSuspend(this)}}start(e){if(this._running)this.tell(U0(e));else{this._running=!0;let t=globalThis[$0];globalThis[$0]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[$0]=t,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(U0(e))}patchRuntimeFlags(e,t){let n=dq(e,t);return globalThis[$0]=this,this.currentRuntimeFlags=n,n}initiateAsync(e,t){let n=!1,r=e=>{n||(n=!0,this.tell(U0(e)))};rq(e)&&(this._asyncInterruptor=r);try{t(r)}catch(e){r(uY(Jq(e)))}}pushStack(e){this._stack.push(e),e._op===`OnStep`&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){let e=this._stack.pop();if(e)return e._op===`OnStep`&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==`OnFailure`)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==`OnSuccess`&&e._op!==`While`&&e._op!==`Iterator`)return e;e=this.popStack()}}Tag(e){return J(()=>eH(this.currentContext,e))}Left(e){return cY(e.left)}None(e){return cY(new HX)}Right(e){return rZ(e.right)}Some(e){return rZ(e.value)}Micro(e){return QJ(t=>{let n=t,r=A0(x0(e,this.currentContext));return r.addObserver(e=>{if(e._tag===`Success`)return n(rZ(e.value));switch(e.cause._tag){case`Interrupt`:return n(XX(Yq(lG)));case`Fail`:return n(cY(e.cause.error));case`Die`:return n(iY(e.cause.defect))}}),QJ(e=>{n=t=>{e(LY)},r.unsafeInterrupt()})})}[Tz](e){let t=UR(()=>e.effect_instruction_i0()),n=this.getNextSuccessCont();return n===void 0?(t4.currentOp=rZ(t),e4):(n._op in n4||$2(n),n4[n._op](this,n,t))}[wz](e){let t=e,n=this.getNextSuccessCont();return n===void 0?(t4.currentOp=t,e4):(n._op in n4||$2(n),n4[n._op](this,n,t.effect_instruction_i0))}[bz](e){let t=e.effect_instruction_i0,n=this.getNextFailCont();if(n!==void 0)switch(n._op){case xz:case Cz:return rq(this.currentRuntimeFlags)&&this.isInterrupted()?XX(uJ(t)):UR(()=>n.effect_instruction_i1(t));case`OnStep`:return rq(this.currentRuntimeFlags)&&this.isInterrupted()?XX(uJ(t)):rZ(XX(t));case jz:return this.patchRuntimeFlags(this.currentRuntimeFlags,n.patch),rq(this.currentRuntimeFlags)&&this.isInterrupted()?XX(Zq(t,this.getInterruptedCause())):XX(t);default:$2(n)}else return t4.currentOp=XX(t),e4}[kz](e){return UR(()=>e.effect_instruction_i0(this,k1(this.currentRuntimeFlags)))}Blocked(e){let t=this.getFiberRefs(),n=this.currentRuntimeFlags;if(this._steps.length>0){let r=[],i=this._steps[this._steps.length-1],a=this.popStack();for(;a&&a._op!==`OnStep`;)r.push(a),a=this.popStack();this.setFiberRefs(i.refs),this.currentRuntimeFlags=i.flags;let o=h1(i.refs,t),s=uq(i.flags,n);return rZ(zJ(e.effect_instruction_i0,qJ(t=>{for(;r.length>0;)t.pushStack(r.pop());return t.setFiberRefs(uce(t.id(),t.getFiberRefs())(o)),t.currentRuntimeFlags=dq(s)(t.currentRuntimeFlags),e.effect_instruction_i1})))}return IY(t=>q(c4(BJ(e.effect_instruction_i0)),()=>t(e.effect_instruction_i1)))}RunBlocked(e){return Ple(e.effect_instruction_i0)}[Ez](e){let t=e.effect_instruction_i0,n=this.currentRuntimeFlags,r=dq(n,t);if(rq(r)&&this.isInterrupted())return XX(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,t),e.effect_instruction_i1){let t=uq(r,n);return this.pushStack(new HJ(t,e)),UR(()=>e.effect_instruction_i1(n))}else return iZ}[Sz](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[xz](e){return this.pushStack(e),e.effect_instruction_i0}[Cz](e){return this.pushStack(e),e.effect_instruction_i0}[vz](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,e.effect_instruction_i0),t4.currentOp=e,e4}[Az](e){return this._isYielding=!1,t4.currentOp=e,e4}[Dz](e){let t=e.effect_instruction_i0,n=e.effect_instruction_i1;return t()?(this.pushStack(e),n()):iZ}[Oz](e){return n4[Oz](this,e,void 0)}[yz](e){return UR(()=>e.commit())}runLoop(e){let t=e;for(this.currentOpCount=0;;){if(this.currentRuntimeFlags&2&&this.currentSupervisor.onEffect(this,t),this._queue.length>0&&(t=this.drainQueueWhileRunning(this.currentRuntimeFlags,t)),!this._isYielding){this.currentOpCount+=1;let e=this.currentScheduler.shouldYield(this);if(e!==!1){this._isYielding=!0,this.currentOpCount=0;let n=t;t=q(VY({priority:e}),()=>n)}}try{if(t=this.currentTracer.context(()=>{if(Fle!==t[VJ]._V){let e=this.getFiberRef(TX);if(e._tag===`Some`){let n=t[VJ]._V;this.log(`Executing an Effect versioned ${n} with a Runtime of version ${Nz()}, you may want to dedupe the effect dependencies, you can use the language service plugin to detect this at compile time: https://github.com/Effect-TS/language-service`,Kq,e)}}return this[t._op](t)},this),t===e4){let e=t4.currentOp;return e._op===`Yield`||e._op===`Async`?e4:(t4.currentOp=null,e._op===`Success`||e._op===`Failure`?e:XX(Jq(e)))}}catch(e){t=t!==e4&&!SR(t,`_op`)||!(t._op in this)?aY(`Not a valid effect: ${uz(t)}`):BX(e)?XX(Zq(Jq(e),Yq(lG))):iY(e)}}}run=()=>{this.drainQueueOnCurrentThread()}};const Ile=hR(`effect/FiberRef/currentMinimumLogLevel`,()=>lX(f$(`Info`))),Lle=e=>e2(t=>{$V(e$(t.context,zQ),SQ).unsafe.log(e.log(t))}),Rle=hR(Symbol.for(`effect/Logger/defaultLogger`),()=>Lle(gce)),zle=hR(Symbol.for(`effect/Logger/tracerLogger`),()=>e2(({annotations:e,cause:t,context:n,fiberId:r,logLevel:i,message:a})=>{let o=tH(XQ(n,hX),NQ);if(o._tag===`None`||o.value._tag===`ExternalSpan`)return;let s=eH(XQ(n,zQ),PZ),c={};for(let[t,n]of e)c[t]=n;c[`effect.fiberId`]=uG(r),c[`effect.logLevel`]=i.label,t!==null&&t._tag!==`Empty`&&(c[`effect.cause`]=CJ(t,{renderErrorCause:!0})),o.value.event(uz(Array.isArray(a)&&a.length===1?a[0]:a),s.unsafeCurrentTimeNanos(),c)})),Ble=hR(Symbol.for(`effect/FiberRef/currentLoggers`),()=>uX(NW(Rle,zle)));var Vle=(e,t,n)=>{let r=e.next();return r.done?AY(!1):q(n(r.value,t),r=>r?AY(r):Vle(e,t+1,n))},Hle=e=>{if(Array.isArray(e)||TR(e))return[e,bB()];let t=Object.keys(e),n=t.length;return[t.map(t=>e[t]),xB(e=>{let r={};for(let i=0;i<n;i++)r[t[i]]=e[i];return r})]},Ule=(e,t,n)=>{let r=[];for(let t of e)r.push(oY(t));return q(i4(r,iR,{concurrency:n?.concurrency,batching:n?.batching,concurrentFinalizers:n?.concurrentFinalizers}),e=>{let r=bB(),i=e.length,a=Array(i),o=Array(i),s=!1;for(let t=0;t<i;t++){let n=e[t];n._tag===`Left`?(a[t]=xB(n.left),s=!0):(o[t]=n.right,a[t]=r)}return s?t._tag===`Some`?cY(t.value(a)):cY(a):n?.discard?LY:t._tag===`Some`?AY(t.value(o)):AY(o)})},Wle=(e,t,n)=>{let r=[];for(let t of e)r.push(oY(t));return n?.discard?i4(r,iR,{concurrency:n?.concurrency,batching:n?.batching,discard:!0,concurrentFinalizers:n?.concurrentFinalizers}):SY(i4(r,iR,{concurrency:n?.concurrency,batching:n?.batching,concurrentFinalizers:n?.concurrentFinalizers}),e=>t._tag===`Some`?t.value(e):e)};const Gle=(e,t)=>{let[n,r]=Hle(e);return t?.mode===`validate`?Ule(n,r,t):t?.mode===`either`?Wle(n,r,t):t?.discard!==!0&&r._tag===`Some`?SY(i4(n,iR,t),r.value):i4(n,iR,t)},i4=W(e=>TR(e[0]),(e,t,n)=>qJ(r=>{let i=n?.batching===!0||n?.batching===`inherit`&&r.getFiberRef(CX);return n?.discard?I0(n.concurrency,()=>f4(f1,n?.concurrentFinalizers)(n=>i?o4(e,(e,r)=>n(t(e,r)),!0,!1,1):bY(e,(e,r)=>n(t(e,r)))),()=>f4(p1,n?.concurrentFinalizers)(n=>o4(e,(e,r)=>n(t(e,r)),i,!1)),r=>f4(m1(r),n?.concurrentFinalizers)(n=>o4(e,(e,r)=>n(t(e,r)),i,!1,r))):I0(n?.concurrency,()=>f4(f1,n?.concurrentFinalizers)(n=>i?s4(e,1,(e,r)=>n(t(e,r)),!0):yY(e,(e,r)=>n(t(e,r)))),()=>f4(p1,n?.concurrentFinalizers)(n=>a4(e,(e,r)=>n(t(e,r)),i)),r=>f4(m1(r),n?.concurrentFinalizers)(n=>s4(e,r,(e,r)=>n(t(e,r)),i)))})),a4=(e,t,n)=>jY(()=>{let r=LB(e),i=Array(r.length);return WY(o4(r,(e,n)=>q(t(e,n),e=>J(()=>i[n]=e)),n,!1),AY(i))}),o4=(e,t,n,r,i)=>IY(a=>NY(o=>qJ(s=>{let c=Array.from(e).reverse(),l=c.length;if(l===0)return LY;let u=0,d=!1,f=i?Math.min(c.length,i):c.length,p=new Set,m=[],h=()=>p.forEach(e=>{e.currentScheduler.scheduleTask(()=>{e.unsafeInterruptAsFork(s.id())},0)}),g=[],_=[],v=[],ee=()=>{let e=m.filter(({exit:e})=>e._tag===`Failure`).sort((e,t)=>e.index<t.index?-1:e.index===t.index?0:1).map(({exit:e})=>e);return e.length===0&&e.push(iZ),e},te=(e,t=!1)=>{let n=FY(o(e)),r=qle(n,s,s.currentRuntimeFlags,Y0);return s.currentScheduler.scheduleTask(()=>{t&&r.unsafeInterruptAsFork(s.id()),r.resume(n)},0),r},y=()=>{r||(l-=c.length,c=[]),d=!0,h()},b=n?mY:sY,x=te(eY(e=>{let r=(e,t)=>{e._op===`Blocked`?v.push(e):(m.push({index:t,exit:e}),e._op===`Failure`&&!d&&y())},o=()=>{if(c.length>0){let f=c.pop(),h=u++,y=()=>{let e=c.pop();return h=u++,q(VY(),()=>q(b(a(t(e,h))),x))},x=e=>c.length>0&&(r(e,h),c.length>0)?y():AY(e),ne=te(q(b(a(t(f,h))),x));g.push(ne),p.add(ne),d&&ne.currentScheduler.scheduleTask(()=>{ne.unsafeInterruptAsFork(s.id())},0),ne.addObserver(t=>{let a;if(a=t._op===`Failure`?t:t.effect_instruction_i0,_.push(ne),p.delete(ne),r(a,h),m.length===l)e(AY(TB(JX(ee(),{parallel:!0}),()=>iZ)));else if(v.length+m.length===l){let t=ee();e(AY(zJ(v.map(e=>e.effect_instruction_i0).reduce(gq),o4([TB(JX(t,{parallel:!0}),()=>iZ),...v.map(e=>e.effect_instruction_i1)],e=>e,n,!0,i))))}else o()})}};for(let e=0;e<f;e++)o()}));return XJ(TY(hY(a(Q0(x))),tZ({onFailure:e=>{y();let t=v.length+1,n=Math.min(typeof i==`number`?i:v.length,v.length),r=Array.from(v);return eY(i=>{let a=[],o=0,s=0,c=(n,s)=>c=>{a[n]=c,o++,o===t&&i(rZ(XX(e))),r.length>0&&s&&l()},l=()=>{te(r.pop(),!0).addObserver(c(s,!0)),s++};x.addObserver(c(s,!1)),s++;for(let e=0;e<n;e++)l()})},onSuccess:()=>yY(_,e=>e.inheritAll)})))}))),s4=(e,t,n,r)=>jY(()=>{let i=LB(e),a=Array(i.length);return WY(o4(i,(e,t)=>SY(n(e,t),e=>a[t]=e),r,!1,t),AY(a))}),c4=e=>Jle(e,Y0),Kle=(e,t,n,r=null)=>{let i=l4(e,t,n,r);return i.resume(e),i},qle=(e,t,n,r=null)=>l4(e,t,n,r),l4=(e,t,n,r=null)=>{let i=dG(),a=KQ(t.getFiberRefs(),i),o=new r4(i,a,n),s=XQ(a,hX),c=o.currentSupervisor;return c.onStart(s,e,xB(t),o),o.addObserver(e=>c.onEnd(e,o)),(r===null?G(t.getFiberRef(DX),TB(()=>t.scope())):r).add(n,o),o};var Jle=(e,t)=>qJ((n,r)=>AY(Kle(e,n,r.runtimeFlags,t)));const u4=e=>vZ(t=>wB(tH(t,m4),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case`Parallel`:return e;case`Sequential`:case`ParallelN`:return q(PX(t,p1),t=>g4(e,t))}}})),d4=e=>t=>vZ(n=>wB(tH(n,m4),{onNone:()=>t,onSome:n=>n.strategy._tag===`ParallelN`&&n.strategy.parallelism===e?t:q(PX(n,m1(e)),e=>g4(t,e))})),f4=(e,t)=>n=>vZ(r=>wB(tH(r,m4),{onNone:()=>n(iR),onSome:r=>{if(t===!0){let t=e._tag===`Parallel`?u4:e._tag===`Sequential`?p4:d4(e.parallelism);switch(r.strategy._tag){case`Parallel`:return t(n(u4));case`Sequential`:return t(n(p4));case`ParallelN`:return t(n(d4(r.strategy.parallelism)))}}else return n(iR)}})),Yle=e=>q(m4,e),p4=e=>vZ(t=>wB(tH(t,m4),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case`Sequential`:return e;case`Parallel`:case`ParallelN`:return q(PX(t,f1),t=>g4(e,t))}}})),Xle=W(e=>KJ(e[1]),(e,t,n,r)=>SY(Gle([e,t],{concurrency:r?.concurrent?2:1,batching:r?.batching,concurrentFinalizers:r?.concurrentFinalizers}),([e,t])=>n(e,t))),m4=YV(`effect/Scope`);var Zle=(e,t)=>{e.state._tag===`Open`&&e.state.finalizers.set({},t)},Qle={[kX]:kX,[AX]:AX,pipe(){return _z(this,arguments)},fork(e){return J(()=>{let t=h4(e);if(this.state._tag===`Closed`)return t.state=this.state,t;let n={};return this.state.finalizers.set(n,e=>t.close(e)),Zle(t,e=>J(()=>{this.state._tag===`Open`&&this.state.finalizers.delete(n)})),t})},close(e){return jY(()=>{if(this.state._tag===`Closed`)return LY;let t=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:`Closed`,exit:e},t.length===0?LY:u1(this.strategy)?G(yY(t,t=>sY(t(e))),q(e=>G(JX(e),AB(qX),TB(()=>iZ)))):d1(this.strategy)?G(a4(t,t=>sY(t(e)),!1),q(e=>G(JX(e,{parallel:!0}),AB(qX),TB(()=>iZ)))):G(s4(t,this.strategy.parallelism,t=>sY(t(e)),!1),q(e=>G(JX(e,{parallel:!0}),AB(qX),TB(()=>iZ))))})},addFinalizer(e){return jY(()=>this.state._tag===`Closed`?e(this.state.exit):(this.state.finalizers.set({},e),LY))}},h4=(e=s1)=>{let t=Object.create(Qle);return t.strategy=e,t.state={_tag:`Open`,finalizers:new Map},t};const $le=(e=s1)=>J(()=>h4(e)),g4=W(2,(e,t)=>bZ(e,nH(ZV(m4,t)))),eue=e=>pX(e,{differ:Ele,fork:K2}),_4=mX(sq),tue=eue(V2),v4=W(2,(e,t)=>IY(n=>_Y(n(e),{onFailure:e=>_Y(t,{onFailure:t=>uY(Zq(e,t)),onSuccess:()=>uY(e)}),onSuccess:e=>YJ(t,e)}))),nue=(e,t,n)=>pY(r=>q(q(c4(xY(e)),e=>eY(r=>{let i=t.map(e=>e.listeners.count),a=()=>{i.every(e=>e===0)&&t.every(e=>e.result.state.current._tag===`Pending`?!0:!!(e.result.state.current._tag===`Done`&&GX(e.result.state.current.effect)&&e.result.state.current.effect._tag===`Failure`&&tJ(e.result.state.current.effect.cause)))&&(o.forEach(e=>e()),n?.(),r(KY(e)))};e.addObserver(e=>{o.forEach(e=>e()),r(e)});let o=t.map((e,t)=>{let n=e=>{i[t]=e,a()};return e.listeners.addObserver(n),()=>e.listeners.removeObserver(n)});return a(),J(()=>{o.forEach(e=>e())})})),()=>jY(()=>bY(t.flatMap(e=>e.state.completed?[]:[e]),e=>vle(e.request,$X(r)))))),y4=Symbol.for(`effect/ScheduleInterval`),b4={[y4]:y4,startMillis:0,endMillis:0},x4=e=>G(e.intervals,kH,TB(()=>b4)).startMillis,rue=e=>G(e.intervals,kH,TB(()=>b4)).endMillis,iue=W(2,(e,t)=>x4(e)<x4(t)),aue=e=>OH(e.intervals),S4=rue,oue=iue,sue=aue,C4=`Done`,cue=e=>({_tag:`Continue`,intervals:e}),lue={_tag:C4},uue=e=>e._tag===C4;var due=cue;const w4=lue,T4=uue,fue=NX,pue=PX;var mue=class{permits;waiters=new Set;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>$J(t=>{if(this.free<e){let n=()=>{this.free<e||(this.waiters.delete(n),this.taken+=e,t(AY(e)))};return this.waiters.add(n),J(()=>{this.waiters.delete(n)})}return this.taken+=e,t(AY(e))});updateTakenUnsafe(e,t){return this.taken=t(this.taken),this.waiters.size>0&&e.getFiberRef(P0).scheduleTask(()=>{let e=this.waiters.values(),t=e.next();for(;t.done===!1&&this.free>0;)t.value(),t=e.next()},e.getFiberRef(gX)),AY(this.free)}updateTaken(e){return qJ(t=>this.updateTakenUnsafe(t,e))}resize=e=>XJ(qJ(t=>(this.permits=e,this.free<0?LY:this.updateTakenUnsafe(t,e=>e))));release=e=>this.updateTaken(t=>t-e);releaseAll=this.updateTaken(e=>0);withPermits=e=>t=>IY(n=>q(n(this.take(e)),e=>v4(n(t),this.release(e))));withPermitsIfAvailable=e=>t=>IY(n=>jY(()=>this.free<e?e1:(this.taken+=e,v4(n(V$(t)),this.release(e)))))};const hue=e=>new mue(e),gue=Symbol.for(`effect/Ref/SynchronizedRef`),_ue={_A:e=>e};var vue=class extends _${ref;withLock;[gue]=_ue;[y$]=b$;[v$]=v$;constructor(e,t){super(),this.ref=e,this.withLock=t,this.get=w$(this.ref)}get;commit(){return this.get}modify(e){return this.modifyEffect(t=>AY(e(t)))}modifyEffect(e){return this.withLock(G(q(w$(this.ref),e),q(([e,t])=>YJ(T$(this.ref,t),e))))}};const yue=e=>J(()=>E4(e)),E4=e=>new vue(S$(e),hue(1).withPermits(1)),bue=qY;var D4=e=>function(){if(arguments.length===1){let t=arguments[0];return(n,...r)=>e(t,n,...r)}return e.apply(this,arguments)};const O4=D4((e,t,n)=>{let r=dG(),i=[[hX,[[r,e.context]]]];n?.scheduler&&i.push([P0,[[r,n.scheduler]]]);let a=t$(e.fiberRefs,{entries:i,forkAs:r});n?.updateRefs&&(a=n.updateRefs(a,r));let o=new r4(r,a,e.runtimeFlags),s=t;n?.scope&&(s=q(pue(n.scope,s1),e=>WY(jX(e,pY(e=>rz(e,o.id())?LY:qY(o,e))),TY(t,t=>fue(e,t)))));let c=o.currentSupervisor;return c!==V2&&(c.onStart(e.context,s,bB(),o),o.addObserver(e=>c.onEnd(e,o))),Y0.add(e.runtimeFlags,o),n?.immediate===!1?o.resume(s):o.start(s),o}),xue=D4((e,t,n={})=>{let r=O4(e,t,n);return n.onExit&&r.addObserver(e=>{n.onExit(e)}),(t,n)=>xue(e)(G(r,bue(t??lG)),{...n,onExit:n?.onExit?e=>n.onExit(SZ(e)):void 0})});Error;const k4=Symbol.for(`effect/Runtime/FiberFailure`),A4=Symbol.for(`effect/Runtime/FiberFailure/Cause`);var Sue=class extends Error{[k4];[A4];constructor(e){let t=jJ(e)[0];super(t?.message||`An error has occurred`),this[k4]=k4,this[A4]=e,this.name=t?`(FiberFailure) ${t.name}`:`FiberFailure`,t?.stack&&(this.stack=t.stack)}toJSON(){return{_id:`FiberFailure`,cause:this[A4].toJSON()}}toString(){return`(FiberFailure) `+CJ(this[A4],{renderErrorCause:!0})}[sz](){return this.toString()}};const Cue=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let n=new Sue(e);return Error.stackTraceLimit=t,n};var wue=e=>{let t=e;switch(t._op){case`Failure`:case`Success`:return t;case`Left`:return YX(t.left);case`Right`:return rZ(t.right);case`Some`:return rZ(t.value);case`None`:return YX(HX())}};const Tue=D4((e,t,n)=>Eue(e,t,n).then(e=>{switch(e._tag){case wz:return e.effect_instruction_i0;case bz:throw Cue(e.effect_instruction_i0)}})),Eue=D4((e,t,n)=>new Promise(r=>{let i=wue(t);i&&r(i);let a=O4(e)(t);a.addObserver(e=>{r(e)}),n?.signal!==void 0&&(n.signal.aborted?a.unsafeInterruptAsFork(a.id()):n.signal.addEventListener(`abort`,()=>{a.unsafeInterruptAsFork(a.id())},{once:!0}))}));var Due=class{context;runtimeFlags;fiberRefs;constructor(e,t,n){this.context=e,this.runtimeFlags=t,this.fiberRefs=n}pipe(){return _z(this,arguments)}};const Oue=Tue((e=>new Due(e.context,e.runtimeFlags,e.fiberRefs))({context:XV(),runtimeFlags:oq(1,32,4),fiberRefs:n$()})),kue=W(2,(e,t)=>e.modifyEffect(t)),j4=Symbol.for(`effect/Layer/MemoMap`),Aue=rH()(`effect/Layer/CurrentMemoMap`,{defaultValue:()=>Nue()}),jue=e=>e._op_layer===`Fresh`;var M4=class{ref;[j4];constructor(e){this.ref=e,this[j4]=j4}getOrElseMemoize(e,t){return G(kue(this.ref,n=>{let r=n.get(e);if(r!==void 0){let[e,i]=r;return AY([G(e,q(([e,t])=>G(X$(e),YJ(t))),TY(tZ({onFailure:()=>LY,onSuccess:()=>MX(t,i)}))),n])}return G(C$(0),q(r=>G(cZ(),q(i=>G(C$(()=>LY),SY(a=>{let o=IY(o=>G($le(),q(s=>G(o(q(N4(e,s,!0),e=>H$(e(this)))),sY,q(o=>{switch(o._tag){case bz:return G(fZ(i,o.effect_instruction_i0),WY(NX(s,o)),WY(uY(o.effect_instruction_i0)));case wz:return G(T$(a,e=>G(NX(s,e),zY(E$(r,e=>[e===1,e-1])),XJ)),WY(D$(r,e=>e+1)),WY(MX(t,t=>G(J(()=>n.delete(e)),WY(w$(a)),q(e=>e(t))))),WY(pZ(i,o.effect_instruction_i0)),YJ(o.effect_instruction_i0[1]))}}))))),s=[G(uZ(i),TY(nZ({onFailure:()=>LY,onSuccess:()=>D$(r,e=>e+1)}))),e=>G(w$(a),q(t=>t(e)))];return[o,jue(e)?n:n.set(e,s)]}))))))}),hY)}};const Mue=jY(()=>SY(yue(new Map),e=>new M4(e))),Nue=()=>new M4(E4(new Map)),Pue=W(2,(e,t)=>q(Mue,n=>Fue(e,n,t))),Fue=W(3,(e,t,n)=>q(N4(e,n),e=>Z$(e(t),Aue,t)));var N4=(e,t,n=!1)=>{let r=e;switch(r._op_layer){case`Locally`:return J(()=>e=>r.f(e.getOrElseMemoize(r.self,t)));case`ExtendScope`:return J(()=>e=>Yle(t=>e.getOrElseMemoize(r.layer,t)));case`Fold`:return J(()=>e=>G(e.getOrElseMemoize(r.layer,t),_Y({onFailure:n=>e.getOrElseMemoize(r.failureK(n),t),onSuccess:n=>e.getOrElseMemoize(r.successK(n),t)})));case`Fresh`:return J(()=>e=>G(r.layer,Pue(t)));case`FromEffect`:return J(n?()=>e=>r.effect:()=>n=>n.getOrElseMemoize(e,t));case`Provide`:return J(()=>e=>G(e.getOrElseMemoize(r.first,t),q(n=>G(e.getOrElseMemoize(r.second,t),yZ(n)))));case`Scoped`:return J(n?()=>e=>g4(r.effect,t):()=>n=>n.getOrElseMemoize(e,t));case`Suspend`:return J(()=>e=>e.getOrElseMemoize(r.evaluate(),t));case`ProvideMerge`:return J(()=>e=>G(e.getOrElseMemoize(r.first,t),GY(e.getOrElseMemoize(r.second,t),r.zipK)));case`ZipWith`:return J(()=>e=>G(e.getOrElseMemoize(r.first,t),Xle(e.getOrElseMemoize(r.second,t),r.zipK,{concurrent:!0})))}},P4=(e,t,n,r,i,a,o,s,c,l)=>{let u=l(a,c);return sue(u)?AY([[r,o],[i,s],due(u)]):G(a,oue(c))?q(e.step(S4(a),n,r),([r,i,a])=>T4(a)?AY([[r,o],[i,s],w4]):P4(e,t,n,r,i,a.intervals,o,s,c,l)):q(t.step(S4(c),n,o),([o,s,c])=>T4(c)?AY([[r,o],[i,s],w4]):P4(e,t,n,r,i,a,o,s,c.intervals,l))},Iue=(e,t,n,r)=>vY(t.next(r),{onFailure:()=>OY(t.last),onSuccess:r=>vY(e,{onFailure:e=>n(e,xB(r)),onSuccess:r=>Iue(e,t,n,r)})}),Lue=(e,t,n)=>tY(e,r=>vY(t.next(r),{onFailure:()=>G(t.last,OY,q(e=>n(r,e))),onSuccess:()=>Lue(e,t,n)})),Rue=(e,t,n)=>vY(n.next(t),{onFailure:()=>OY(n.last),onSuccess:()=>q(e,t=>Rue(e,t,n))});const F4=AY,I4=tY,L4=n1,R4=SY,z4=Oue;var B4=class extends Error{_tag=`DatabaseError`;constructor(e,t){super(e),this.cause=t,this.name=`DatabaseError`}},V4=class extends Error{_tag=`DuplicateError`;constructor(e){super(e),this.name=`DuplicateError`}},Y=Symbol.for(`drizzle:entityKind`);function X(e,t){if(!e||typeof e!=`object`)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,Y))throw Error(`Class "${t.name??`<unknown>`}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(e).constructor;if(n)for(;n;){if(Y in n&&n[Y]===t[Y])return!0;n=Object.getPrototypeOf(n)}return!1}var H4=class{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static[Y]=`Column`;name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!==`byDefault`}},zue=class{static[Y]=`ColumnBuilder`;config;constructor(e,t,n){this.config={name:e,keyAsName:e===``,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===``&&(this.config.name=e)}},U4=Symbol.for(`drizzle:Name`),Bue=class{static[Y]=`PgForeignKeyBuilder`;reference;_onUpdate=`no action`;_onDelete=`no action`;constructor(e,t){this.reference=()=>{let{name:t,columns:n,foreignColumns:r}=e();return{name:t,columns:n,foreignTable:r[0].table,foreignColumns:r}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?`no action`:e,this}onDelete(e){return this._onDelete=e===void 0?`no action`:e,this}build(e){return new Vue(e,this)}},Vue=class{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static[Y]=`PgForeignKey`;reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),r=t.map(e=>e.name),i=n.map(e=>e.name),a=[this.table[U4],...r,n[0].table[U4],...i];return e??`${a.join(`_`)}_fk`}};function Hue(e,...t){return e(...t)}function Uue(e){return new Gue(e)}function W4(e,t){return`${e[U4]}_${t.join(`_`)}_unique`}var Wue=class{constructor(e,t){this.name=t,this.columns=e}static[Y]=`PgUniqueConstraintBuilder`;columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new Kue(e,this.columns,this.nullsNotDistinctConfig,this.name)}},Gue=class{static[Y]=`PgUniqueOnConstraintBuilder`;name;constructor(e){this.name=e}on(...e){return new Wue(e,this.name)}},Kue=class{constructor(e,t,n,r){this.table=e,this.columns=t,this.name=r??W4(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=n}static[Y]=`PgUniqueConstraint`;columns;name;nullsNotDistinct=!1;getName(){return this.name}};function G4(e,t,n){for(let r=t;r<e.length;r++){let i=e[r];if(i===`\\`){r++;continue}if(i===`"`)return[e.slice(t,r).replace(/\\/g,``),r+1];if(!n&&(i===`,`||i===`}`))return[e.slice(t,r).replace(/\\/g,``),r]}return[e.slice(t).replace(/\\/g,``),e.length]}function K4(e,t=0){let n=[],r=t,i=!1;for(;r<e.length;){let a=e[r];if(a===`,`){(i||r===t)&&n.push(``),i=!0,r++;continue}if(i=!1,a===`\\`){r+=2;continue}if(a===`"`){let[t,i]=G4(e,r+1,!0);n.push(t),r=i;continue}if(a===`}`)return[n,r+1];if(a===`{`){let[t,i]=K4(e,r+1);n.push(t),r=i;continue}let[o,s]=G4(e,r,!1);n.push(o),r=s}return[n,r]}function que(e){let[t]=K4(e,1);return t}function q4(e){return`{${e.map(e=>Array.isArray(e)?q4(e):typeof e==`string`?`"${e.replace(/\\/g,`\\\\`).replace(/"/g,`\\"`)}"`:`${e}`).join(`,`)}}`}var J4=class extends zue{foreignKeyConfigs=[];static[Y]=`PgColumnBuilder`;array(e){return new Yue(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:`always`,mode:`stored`},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:r})=>Hue((n,r)=>{let i=new Bue(()=>{let t=n();return{columns:[e],foreignColumns:[t]}});return r.onUpdate&&i.onUpdate(r.onUpdate),r.onDelete&&i.onDelete(r.onDelete),i.build(t)},n,r))}buildExtraConfigColumn(e){return new Jue(e,this.config)}},Y4=class extends H4{constructor(e,t){t.uniqueName||=W4(e,[t.name]),super(e,t),this.table=e}static[Y]=`PgColumn`},Jue=class extends Y4{static[Y]=`ExtraConfigColumn`;getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??`asc`,nulls:this.config.nulls??`last`,opClass:this.config.opClass};defaultConfig={order:`asc`,nulls:`last`,opClass:void 0};asc(){return this.indexConfig.order=`asc`,this}desc(){return this.indexConfig.order=`desc`,this}nullsFirst(){return this.indexConfig.nulls=`first`,this}nullsLast(){return this.indexConfig.nulls=`last`,this}op(e){return this.indexConfig.opClass=e,this}},Yue=class extends J4{static[Y]=`PgArrayBuilder`;constructor(e,t,n){super(e,`array`,`PgArray`),this.config.baseBuilder=t,this.config.size=n}build(e){let t=this.config.baseBuilder.build(e);return new Xue(e,this.config,t)}},Xue=class e extends Y4{constructor(e,t,n,r){super(e,t),this.baseColumn=n,this.range=r,this.size=t.size}size;static[Y]=`PgArray`;getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size==`number`?this.size:``}]`}mapFromDriverValue(e){return typeof e==`string`&&(e=que(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(t,n=!1){let r=t.map(t=>t===null?null:X(this.baseColumn,e)?this.baseColumn.mapToDriverValue(t,!0):this.baseColumn.mapToDriverValue(t));return n?r:q4(r)}},Zue=class extends J4{static[Y]=`PgEnumObjectColumnBuilder`;constructor(e,t){super(e,`string`,`PgEnumObjectColumn`),this.config.enum=t}build(e){return new Que(e,this.config)}},Que=class extends Y4{static[Y]=`PgEnumObjectColumn`;enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}},X4=Symbol.for(`drizzle:isPgEnum`);function $ue(e){return!!e&&typeof e==`function`&&X4 in e&&e[X4]===!0}var ede=class extends J4{static[Y]=`PgEnumColumnBuilder`;constructor(e,t){super(e,`string`,`PgEnumColumn`),this.config.enum=t}build(e){return new tde(e,this.config)}},tde=class extends Y4{static[Y]=`PgEnumColumn`;enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}};function Z4(e,t){return Array.isArray(t)?nde(e,[...t],void 0):rde(e,t,void 0)}function nde(e,t,n){let r=Object.assign(e=>new ede(e??``,r),{enumName:e,enumValues:t,schema:n,[X4]:!0});return r}function rde(e,t,n){let r=Object.assign(e=>new Zue(e??``,r),{enumName:e,enumValues:Object.values(t),schema:n,[X4]:!0});return r}var Q4=class{static[Y]=`Subquery`;constructor(e,t,n,r=!1,i=[]){this._={brand:`Subquery`,sql:e,selectedFields:t,alias:n,isWith:r,usedTables:i}}},$4=class extends Q4{static[Y]=`WithSubquery`},e3={startActiveSpan(e,t){return t()}},t3=Symbol.for(`drizzle:ViewBaseConfig`),n3=Symbol.for(`drizzle:Schema`),r3=Symbol.for(`drizzle:Columns`),i3=Symbol.for(`drizzle:ExtraConfigColumns`),a3=Symbol.for(`drizzle:OriginalName`),o3=Symbol.for(`drizzle:BaseName`),s3=Symbol.for(`drizzle:IsAlias`),c3=Symbol.for(`drizzle:ExtraConfigBuilder`),ide=Symbol.for(`drizzle:IsDrizzleTable`),Z=class{static[Y]=`Table`;static Symbol={Name:U4,Schema:n3,OriginalName:a3,Columns:r3,ExtraConfigColumns:i3,BaseName:o3,IsAlias:s3,ExtraConfigBuilder:c3};[U4];[a3];[n3];[r3];[i3];[o3];[s3]=!1;[ide]=!0;[c3]=void 0;constructor(e,t,n){this[U4]=this[a3]=e,this[n3]=t,this[o3]=n}};function l3(e){return e[U4]}function u3(e){return`${e[n3]??`public`}.${e[U4]}`}function d3(e){return e!=null&&typeof e.getSQL==`function`}function ade(e){let t={sql:``,params:[]};for(let n of e)t.sql+=n.sql,t.params.push(...n.params),n.typings?.length&&(t.typings||=[],t.typings.push(...n.typings));return t}var f3=class{static[Y]=`StringChunk`;value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new p3([this])}},p3=class e{constructor(e){this.queryChunks=e;for(let t of e)if(X(t,Z)){let e=t[Z.Symbol.Schema];this.usedTables.push(e===void 0?t[Z.Symbol.Name]:e+`.`+t[Z.Symbol.Name])}}static[Y]=`SQL`;decoder=h3;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return e3.startActiveSpan(`drizzle.buildSQL`,t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(t,n){let r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:i,escapeName:a,escapeParam:o,prepareTyping:s,inlineParams:c,paramStartIndex:l}=r;return ade(t.map(t=>{if(X(t,f3))return{sql:t.value.join(``),params:[]};if(X(t,m3))return{sql:a(t.value),params:[]};if(t===void 0)return{sql:``,params:[]};if(Array.isArray(t)){let e=[new f3(`(`)];for(let[n,r]of t.entries())e.push(r),n<t.length-1&&e.push(new f3(`, `));return e.push(new f3(`)`)),this.buildQueryFromSourceParams(e,r)}if(X(t,e))return this.buildQueryFromSourceParams(t.queryChunks,{...r,inlineParams:c||t.shouldInlineParams});if(X(t,Z)){let e=t[Z.Symbol.Schema],n=t[Z.Symbol.Name];return{sql:e===void 0||t[s3]?a(n):a(e)+`.`+a(n),params:[]}}if(X(t,H4)){let e=i.getColumnCasing(t);if(n.invokeSource===`indexes`)return{sql:a(e),params:[]};let r=t.table[Z.Symbol.Schema];return{sql:t.table[s3]||r===void 0?a(t.table[Z.Symbol.Name])+`.`+a(e):a(r)+`.`+a(t.table[Z.Symbol.Name])+`.`+a(e),params:[]}}if(X(t,b3)){let e=t[t3].schema,n=t[t3].name;return{sql:e===void 0||t[t3].isAlias?a(n):a(e)+`.`+a(n),params:[]}}if(X(t,_3)){if(X(t.value,v3))return{sql:o(l.value++,t),params:[t],typings:[`none`]};let n=t.value===null?null:t.encoder.mapToDriverValue(t.value);if(X(n,e))return this.buildQueryFromSourceParams([n],r);if(c)return{sql:this.mapInlineParam(n,r),params:[]};let i=[`none`];return s&&(i=[s(t.encoder)]),{sql:o(l.value++,n),params:[n],typings:i}}return X(t,v3)?{sql:o(l.value++,t),params:[t],typings:[`none`]}:X(t,e.Aliased)&&t.fieldAlias!==void 0?{sql:a(t.fieldAlias),params:[]}:X(t,Q4)?t._.isWith?{sql:a(t._.alias),params:[]}:this.buildQueryFromSourceParams([new f3(`(`),t._.sql,new f3(`) `),new m3(t._.alias)],r):$ue(t)?t.schema?{sql:a(t.schema)+`.`+a(t.enumName),params:[]}:{sql:a(t.enumName),params:[]}:d3(t)?t.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([t.getSQL()],r):this.buildQueryFromSourceParams([new f3(`(`),t.getSQL(),new f3(`)`)],r):c?{sql:this.mapInlineParam(t,r),params:[]}:{sql:o(l.value++,t),params:[t],typings:[`none`]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return`null`;if(typeof e==`number`||typeof e==`boolean`)return e.toString();if(typeof e==`string`)return t(e);if(typeof e==`object`){let n=e.toString();return t(n===`[object Object]`?JSON.stringify(e):n)}throw Error(`Unexpected param value: `+e)}getSQL(){return this}as(t){return t===void 0?this:new e.Aliased(this,t)}mapWith(e){return this.decoder=typeof e==`function`?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},m3=class{constructor(e){this.value=e}static[Y]=`Name`;brand;getSQL(){return new p3([this])}};function ode(e){return typeof e==`object`&&!!e&&`mapToDriverValue`in e&&typeof e.mapToDriverValue==`function`}var h3={mapFromDriverValue:e=>e},g3={mapToDriverValue:e=>e};({...h3,...g3});var _3=class{constructor(e,t=g3){this.value=e,this.encoder=t}static[Y]=`Param`;brand;getSQL(){return new p3([this])}};function Q(e,...t){let n=[];(t.length>0||e.length>0&&e[0]!==``)&&n.push(new f3(e[0]));for(let[r,i]of t.entries())n.push(i,new f3(e[r+1]));return new p3(n)}(e=>{function t(){return new p3([])}e.empty=t;function n(e){return new p3(e)}e.fromList=n;function r(e){return new p3([new f3(e)])}e.raw=r;function i(e,t){let n=[];for(let[r,i]of e.entries())r>0&&t!==void 0&&n.push(t),n.push(i);return new p3(n)}e.join=i;function a(e){return new m3(e)}e.identifier=a;function o(e){return new v3(e)}e.placeholder=o;function s(e,t){return new _3(e,t)}e.param=s})(Q||={}),(e=>{class t{constructor(e,t){this.sql=e,this.fieldAlias=t}static[Y]=`SQL.Aliased`;isSelectionField=!1;getSQL(){return this.sql}clone(){return new t(this.sql,this.fieldAlias)}}e.Aliased=t})(p3||={});var v3=class{constructor(e){this.name=e}static[Y]=`Placeholder`;getSQL(){return new p3([this])}};function y3(e,t){return e.map(e=>{if(X(e,v3)){if(!(e.name in t))throw Error(`No value for placeholder "${e.name}" was provided`);return t[e.name]}if(X(e,_3)&&X(e.value,v3)){if(!(e.value.name in t))throw Error(`No value for placeholder "${e.value.name}" was provided`);return e.encoder.mapToDriverValue(t[e.value.name])}return e})}var sde=Symbol.for(`drizzle:IsDrizzleView`),b3=class{static[Y]=`View`;[t3];[sde]=!0;constructor({name:e,schema:t,selectedFields:n,query:r}){this[t3]={name:e,originalName:e,schema:t,selectedFields:n,query:r,isExisting:!r,isAlias:!1}}getSQL(){return new p3([this])}};H4.prototype.getSQL=function(){return new p3([this])},Z.prototype.getSQL=function(){return new p3([this])},Q4.prototype.getSQL=function(){return new p3([this])};var x3=class{constructor(e){this.table=e}static[Y]=`ColumnAliasProxyHandler`;get(e,t){return t===`table`?this.table:e[t]}},S3=class{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static[Y]=`TableAliasProxyHandler`;get(e,t){if(t===Z.Symbol.IsAlias)return!0;if(t===Z.Symbol.Name||this.replaceOriginalName&&t===Z.Symbol.OriginalName)return this.alias;if(t===t3)return{...e[t3],name:this.alias,isAlias:!0};if(t===Z.Symbol.Columns){let t=e[Z.Symbol.Columns];if(!t)return t;let n={};return Object.keys(t).map(r=>{n[r]=new Proxy(t[r],new x3(new Proxy(e,this)))}),n}let n=e[t];return X(n,H4)?new Proxy(n,new x3(new Proxy(e,this))):n}};function C3(e,t){return new Proxy(e,new S3(t,!1))}function w3(e,t){return new Proxy(e,new x3(new Proxy(e.table,new S3(t,!1))))}function T3(e,t){return new p3.Aliased(E3(e.sql,t),e.fieldAlias)}function E3(e,t){return Q.join(e.queryChunks.map(e=>X(e,H4)?w3(e,t):X(e,p3)?E3(e,t):X(e,p3.Aliased)?T3(e,t):e))}function cde(e,t,n){let r={},i=e.reduce((e,{path:i,field:a},o)=>{let s;s=X(a,H4)?a:X(a,p3)?a.decoder:a.sql.decoder;let c=e;for(let[e,l]of i.entries())if(e<i.length-1)l in c||(c[l]={}),c=c[l];else{let e=t[o],u=c[l]=e===null?null:s.mapFromDriverValue(e);if(n&&X(a,H4)&&i.length===2){let e=i[0];e in r?typeof r[e]==`string`&&r[e]!==l3(a.table)&&(r[e]=!1):r[e]=u===null?l3(a.table):!1}}return e},{});if(n&&Object.keys(r).length>0)for(let[e,t]of Object.entries(r))typeof t==`string`&&!n[t]&&(i[e]=null);return i}function D3(e,t){return Object.entries(e).reduce((e,[n,r])=>{if(typeof n!=`string`)return e;let i=t?[...t,n]:[n];return X(r,H4)||X(r,p3)||X(r,p3.Aliased)?e.push({path:i,field:r}):X(r,Z)?e.push(...D3(r[Z.Symbol.Columns],i)):e.push(...D3(r,i)),e},[])}function O3(e,t){let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let[e,t]of n.entries())if(t!==r[e])return!1;return!0}function k3(e,t){let n=Object.entries(t).filter(([,e])=>e!==void 0).map(([t,n])=>X(n,p3)||X(n,H4)?[t,n]:[t,new _3(n,e[Z.Symbol.Columns][t])]);if(n.length===0)throw Error(`No values to set`);return Object.fromEntries(n)}function lde(e,t){for(let n of t)for(let t of Object.getOwnPropertyNames(n.prototype))t!==`constructor`&&Object.defineProperty(e.prototype,t,Object.getOwnPropertyDescriptor(n.prototype,t)||Object.create(null))}function ude(e){return e[Z.Symbol.Columns]}function A3(e){return X(e,Q4)?e._.alias:X(e,b3)?e[t3].name:X(e,p3)?void 0:e[Z.Symbol.IsAlias]?e[Z.Symbol.Name]:e[Z.Symbol.BaseName]}function j3(e,t){return{name:typeof e==`string`&&e.length>0?e:``,config:typeof e==`object`?e:t}}function dde(e){if(typeof e!=`object`||!e||e.constructor.name!==`Object`)return!1;if(`logger`in e){let t=typeof e.logger;return!(t!==`boolean`&&(t!==`object`||typeof e.logger.logQuery!=`function`)&&t!==`undefined`)}if(`schema`in e){let t=typeof e.schema;return!(t!==`object`&&t!==`undefined`)}if(`casing`in e){let t=typeof e.casing;return!(t!==`string`&&t!==`undefined`)}if(`mode`in e)return!(e.mode!==`default`||e.mode!==`planetscale`||e.mode!==void 0);if(`connection`in e){let t=typeof e.connection;return!(t!==`string`&&t!==`object`&&t!==`undefined`)}if(`client`in e){let t=typeof e.client;return!(t!==`object`&&t!==`function`&&t!==`undefined`)}return Object.keys(e).length===0}typeof TextDecoder>`u`||new TextDecoder;var M3=class extends J4{static[Y]=`PgIntColumnBaseBuilder`;generatedAlwaysAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:`always`,sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:`always`};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:`byDefault`,sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:`byDefault`};return this.config.hasDefault=!0,this.config.notNull=!0,this}},fde=class extends M3{static[Y]=`PgBigInt53Builder`;constructor(e){super(e,`number`,`PgBigInt53`)}build(e){return new pde(e,this.config)}},pde=class extends Y4{static[Y]=`PgBigInt53`;getSQLType(){return`bigint`}mapFromDriverValue(e){return typeof e==`number`?e:Number(e)}},mde=class extends M3{static[Y]=`PgBigInt64Builder`;constructor(e){super(e,`bigint`,`PgBigInt64`)}build(e){return new hde(e,this.config)}},hde=class extends Y4{static[Y]=`PgBigInt64`;getSQLType(){return`bigint`}mapFromDriverValue(e){return BigInt(e)}};function gde(e,t){let{name:n,config:r}=j3(e,t);return r.mode===`number`?new fde(n):new mde(n)}var _de=class extends J4{static[Y]=`PgBigSerial53Builder`;constructor(e){super(e,`number`,`PgBigSerial53`),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new vde(e,this.config)}},vde=class extends Y4{static[Y]=`PgBigSerial53`;getSQLType(){return`bigserial`}mapFromDriverValue(e){return typeof e==`number`?e:Number(e)}},yde=class extends J4{static[Y]=`PgBigSerial64Builder`;constructor(e){super(e,`bigint`,`PgBigSerial64`),this.config.hasDefault=!0}build(e){return new bde(e,this.config)}},bde=class extends Y4{static[Y]=`PgBigSerial64`;getSQLType(){return`bigserial`}mapFromDriverValue(e){return BigInt(e)}};function xde(e,t){let{name:n,config:r}=j3(e,t);return r.mode===`number`?new _de(n):new yde(n)}var Sde=class extends J4{static[Y]=`PgBooleanBuilder`;constructor(e){super(e,`boolean`,`PgBoolean`)}build(e){return new Cde(e,this.config)}},Cde=class extends Y4{static[Y]=`PgBoolean`;getSQLType(){return`boolean`}};function wde(e){return new Sde(e??``)}var Tde=class extends J4{static[Y]=`PgCharBuilder`;constructor(e,t){super(e,`string`,`PgChar`),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Ede(e,this.config)}},Ede=class extends Y4{static[Y]=`PgChar`;length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?`char`:`char(${this.length})`}};function Dde(e,t={}){let{name:n,config:r}=j3(e,t);return new Tde(n,r)}var Ode=class extends J4{static[Y]=`PgCidrBuilder`;constructor(e){super(e,`string`,`PgCidr`)}build(e){return new kde(e,this.config)}},kde=class extends Y4{static[Y]=`PgCidr`;getSQLType(){return`cidr`}};function Ade(e){return new Ode(e??``)}var jde=class extends J4{static[Y]=`PgCustomColumnBuilder`;constructor(e,t,n){super(e,`custom`,`PgCustomColumn`),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new Mde(e,this.config)}},Mde=class extends Y4{static[Y]=`PgCustomColumn`;sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom==`function`?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo==`function`?this.mapTo(e):e}};function Nde(e){return(t,n)=>{let{name:r,config:i}=j3(t,n);return new jde(r,i,e)}}var N3=class extends J4{static[Y]=`PgDateColumnBaseBuilder`;defaultNow(){return this.default(Q`now()`)}},Pde=class extends N3{static[Y]=`PgDateBuilder`;constructor(e){super(e,`date`,`PgDate`)}build(e){return new P3(e,this.config)}},P3=class extends Y4{static[Y]=`PgDate`;getSQLType(){return`date`}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}},Fde=class extends N3{static[Y]=`PgDateStringBuilder`;constructor(e){super(e,`string`,`PgDateString`)}build(e){return new F3(e,this.config)}},F3=class extends Y4{static[Y]=`PgDateString`;getSQLType(){return`date`}};function I3(e,t){let{name:n,config:r}=j3(e,t);return r?.mode===`date`?new Pde(n):new Fde(n)}var Ide=class extends J4{static[Y]=`PgDoublePrecisionBuilder`;constructor(e){super(e,`number`,`PgDoublePrecision`)}build(e){return new Lde(e,this.config)}},Lde=class extends Y4{static[Y]=`PgDoublePrecision`;getSQLType(){return`double precision`}mapFromDriverValue(e){return typeof e==`string`?Number.parseFloat(e):e}};function Rde(e){return new Ide(e??``)}var zde=class extends J4{static[Y]=`PgInetBuilder`;constructor(e){super(e,`string`,`PgInet`)}build(e){return new Bde(e,this.config)}},Bde=class extends Y4{static[Y]=`PgInet`;getSQLType(){return`inet`}};function Vde(e){return new zde(e??``)}var Hde=class extends M3{static[Y]=`PgIntegerBuilder`;constructor(e){super(e,`number`,`PgInteger`)}build(e){return new Ude(e,this.config)}},Ude=class extends Y4{static[Y]=`PgInteger`;getSQLType(){return`integer`}mapFromDriverValue(e){return typeof e==`string`?Number.parseInt(e):e}};function L3(e){return new Hde(e??``)}var Wde=class extends J4{static[Y]=`PgIntervalBuilder`;constructor(e,t){super(e,`string`,`PgInterval`),this.config.intervalConfig=t}build(e){return new Gde(e,this.config)}},Gde=class extends Y4{static[Y]=`PgInterval`;fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){return`interval${this.fields?` ${this.fields}`:``}${this.precision?`(${this.precision})`:``}`}};function Kde(e,t={}){let{name:n,config:r}=j3(e,t);return new Wde(n,r)}var qde=class extends J4{static[Y]=`PgJsonBuilder`;constructor(e){super(e,`json`,`PgJson`)}build(e){return new R3(e,this.config)}},R3=class extends Y4{static[Y]=`PgJson`;constructor(e,t){super(e,t)}getSQLType(){return`json`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e==`string`)try{return JSON.parse(e)}catch{return e}return e}};function Jde(e){return new qde(e??``)}var Yde=class extends J4{static[Y]=`PgJsonbBuilder`;constructor(e){super(e,`json`,`PgJsonb`)}build(e){return new z3(e,this.config)}},z3=class extends Y4{static[Y]=`PgJsonb`;constructor(e,t){super(e,t)}getSQLType(){return`jsonb`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e==`string`)try{return JSON.parse(e)}catch{return e}return e}};function Xde(e){return new Yde(e??``)}var Zde=class extends J4{static[Y]=`PgLineBuilder`;constructor(e){super(e,`array`,`PgLine`)}build(e){return new Qde(e,this.config)}},Qde=class extends Y4{static[Y]=`PgLine`;getSQLType(){return`line`}mapFromDriverValue(e){let[t,n,r]=e.slice(1,-1).split(`,`);return[Number.parseFloat(t),Number.parseFloat(n),Number.parseFloat(r)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},$de=class extends J4{static[Y]=`PgLineABCBuilder`;constructor(e){super(e,`json`,`PgLineABC`)}build(e){return new efe(e,this.config)}},efe=class extends Y4{static[Y]=`PgLineABC`;getSQLType(){return`line`}mapFromDriverValue(e){let[t,n,r]=e.slice(1,-1).split(`,`);return{a:Number.parseFloat(t),b:Number.parseFloat(n),c:Number.parseFloat(r)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function tfe(e,t){let{name:n,config:r}=j3(e,t);return!r?.mode||r.mode===`tuple`?new Zde(n):new $de(n)}var nfe=class extends J4{static[Y]=`PgMacaddrBuilder`;constructor(e){super(e,`string`,`PgMacaddr`)}build(e){return new rfe(e,this.config)}},rfe=class extends Y4{static[Y]=`PgMacaddr`;getSQLType(){return`macaddr`}};function ife(e){return new nfe(e??``)}var afe=class extends J4{static[Y]=`PgMacaddr8Builder`;constructor(e){super(e,`string`,`PgMacaddr8`)}build(e){return new ofe(e,this.config)}},ofe=class extends Y4{static[Y]=`PgMacaddr8`;getSQLType(){return`macaddr8`}};function sfe(e){return new afe(e??``)}var cfe=class extends J4{static[Y]=`PgNumericBuilder`;constructor(e,t,n){super(e,`string`,`PgNumeric`),this.config.precision=t,this.config.scale=n}build(e){return new B3(e,this.config)}},B3=class extends Y4{static[Y]=`PgNumeric`;precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return typeof e==`string`?e:String(e)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?`numeric`:`numeric(${this.precision})`}},lfe=class extends J4{static[Y]=`PgNumericNumberBuilder`;constructor(e,t,n){super(e,`number`,`PgNumericNumber`),this.config.precision=t,this.config.scale=n}build(e){return new ufe(e,this.config)}},ufe=class extends Y4{static[Y]=`PgNumericNumber`;precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return typeof e==`number`?e:Number(e)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?`numeric`:`numeric(${this.precision})`}},dfe=class extends J4{static[Y]=`PgNumericBigIntBuilder`;constructor(e,t,n){super(e,`bigint`,`PgNumericBigInt`),this.config.precision=t,this.config.scale=n}build(e){return new ffe(e,this.config)}},ffe=class extends Y4{static[Y]=`PgNumericBigInt`;precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?`numeric`:`numeric(${this.precision})`}};function pfe(e,t){let{name:n,config:r}=j3(e,t),i=r?.mode;return i===`number`?new lfe(n,r?.precision,r?.scale):i===`bigint`?new dfe(n,r?.precision,r?.scale):new cfe(n,r?.precision,r?.scale)}var mfe=class extends J4{static[Y]=`PgPointTupleBuilder`;constructor(e){super(e,`array`,`PgPointTuple`)}build(e){return new hfe(e,this.config)}},hfe=class extends Y4{static[Y]=`PgPointTuple`;getSQLType(){return`point`}mapFromDriverValue(e){if(typeof e==`string`){let[t,n]=e.slice(1,-1).split(`,`);return[Number.parseFloat(t),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},gfe=class extends J4{static[Y]=`PgPointObjectBuilder`;constructor(e){super(e,`json`,`PgPointObject`)}build(e){return new _fe(e,this.config)}},_fe=class extends Y4{static[Y]=`PgPointObject`;getSQLType(){return`point`}mapFromDriverValue(e){if(typeof e==`string`){let[t,n]=e.slice(1,-1).split(`,`);return{x:Number.parseFloat(t),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};function vfe(e,t){let{name:n,config:r}=j3(e,t);return!r?.mode||r.mode===`tuple`?new mfe(n):new gfe(n)}function yfe(e){let t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}function V3(e,t){let n=new ArrayBuffer(8),r=new DataView(n);for(let n=0;n<8;n++)r.setUint8(n,e[t+n]);return r.getFloat64(0,!0)}function H3(e){let t=yfe(e),n=0,r=t[n];n+=1;let i=new DataView(t.buffer),a=i.getUint32(n,r===1);if(n+=4,a&536870912&&(i.getUint32(n,r===1),n+=4),(a&65535)==1){let e=V3(t,n);n+=8;let r=V3(t,n);return n+=8,[e,r]}throw Error(`Unsupported geometry type`)}var bfe=class extends J4{static[Y]=`PgGeometryBuilder`;constructor(e){super(e,`array`,`PgGeometry`)}build(e){return new xfe(e,this.config)}},xfe=class extends Y4{static[Y]=`PgGeometry`;getSQLType(){return`geometry(point)`}mapFromDriverValue(e){return H3(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},Sfe=class extends J4{static[Y]=`PgGeometryObjectBuilder`;constructor(e){super(e,`json`,`PgGeometryObject`)}build(e){return new Cfe(e,this.config)}},Cfe=class extends Y4{static[Y]=`PgGeometryObject`;getSQLType(){return`geometry(point)`}mapFromDriverValue(e){let t=H3(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};function wfe(e,t){let{name:n,config:r}=j3(e,t);return!r?.mode||r.mode===`tuple`?new bfe(n):new Sfe(n)}var Tfe=class extends J4{static[Y]=`PgRealBuilder`;constructor(e,t){super(e,`number`,`PgReal`),this.config.length=t}build(e){return new Efe(e,this.config)}},Efe=class extends Y4{static[Y]=`PgReal`;constructor(e,t){super(e,t)}getSQLType(){return`real`}mapFromDriverValue=e=>typeof e==`string`?Number.parseFloat(e):e};function Dfe(e){return new Tfe(e??``)}var Ofe=class extends J4{static[Y]=`PgSerialBuilder`;constructor(e){super(e,`number`,`PgSerial`),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new kfe(e,this.config)}},kfe=class extends Y4{static[Y]=`PgSerial`;getSQLType(){return`serial`}};function Afe(e){return new Ofe(e??``)}var jfe=class extends M3{static[Y]=`PgSmallIntBuilder`;constructor(e){super(e,`number`,`PgSmallInt`)}build(e){return new Mfe(e,this.config)}},Mfe=class extends Y4{static[Y]=`PgSmallInt`;getSQLType(){return`smallint`}mapFromDriverValue=e=>typeof e==`string`?Number(e):e};function Nfe(e){return new jfe(e??``)}var Pfe=class extends J4{static[Y]=`PgSmallSerialBuilder`;constructor(e){super(e,`number`,`PgSmallSerial`),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ffe(e,this.config)}},Ffe=class extends Y4{static[Y]=`PgSmallSerial`;getSQLType(){return`smallserial`}};function Ife(e){return new Pfe(e??``)}var Lfe=class extends J4{static[Y]=`PgTextBuilder`;constructor(e,t){super(e,`string`,`PgText`),this.config.enumValues=t.enum}build(e){return new Rfe(e,this.config)}},Rfe=class extends Y4{static[Y]=`PgText`;enumValues=this.config.enumValues;getSQLType(){return`text`}};function U3(e,t={}){let{name:n,config:r}=j3(e,t);return new Lfe(n,r)}var zfe=class extends N3{constructor(e,t,n){super(e,`string`,`PgTime`),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}static[Y]=`PgTimeBuilder`;build(e){return new W3(e,this.config)}},W3=class extends Y4{static[Y]=`PgTime`;withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${this.precision===void 0?``:`(${this.precision})`}${this.withTimezone?` with time zone`:``}`}};function Bfe(e,t={}){let{name:n,config:r}=j3(e,t);return new zfe(n,r.withTimezone??!1,r.precision)}var Vfe=class extends N3{static[Y]=`PgTimestampBuilder`;constructor(e,t,n){super(e,`date`,`PgTimestamp`),this.config.withTimezone=t,this.config.precision=n}build(e){return new G3(e,this.config)}},G3=class extends Y4{static[Y]=`PgTimestamp`;withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?``:` (${this.precision})`}${this.withTimezone?` with time zone`:``}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+`+0000`);mapToDriverValue=e=>e.toISOString()},Hfe=class extends N3{static[Y]=`PgTimestampStringBuilder`;constructor(e,t,n){super(e,`string`,`PgTimestampString`),this.config.withTimezone=t,this.config.precision=n}build(e){return new K3(e,this.config)}},K3=class extends Y4{static[Y]=`PgTimestampString`;withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?``:`(${this.precision})`}${this.withTimezone?` with time zone`:``}`}};function Ufe(e,t={}){let{name:n,config:r}=j3(e,t);return r?.mode===`string`?new Hfe(n,r.withTimezone??!1,r.precision):new Vfe(n,r?.withTimezone??!1,r?.precision)}var Wfe=class extends J4{static[Y]=`PgUUIDBuilder`;constructor(e){super(e,`string`,`PgUUID`)}defaultRandom(){return this.default(Q`gen_random_uuid()`)}build(e){return new q3(e,this.config)}},q3=class extends Y4{static[Y]=`PgUUID`;getSQLType(){return`uuid`}};function Gfe(e){return new Wfe(e??``)}var Kfe=class extends J4{static[Y]=`PgVarcharBuilder`;constructor(e,t){super(e,`string`,`PgVarchar`),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new qfe(e,this.config)}},qfe=class extends Y4{static[Y]=`PgVarchar`;length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?`varchar`:`varchar(${this.length})`}};function J3(e,t={}){let{name:n,config:r}=j3(e,t);return new Kfe(n,r)}var Jfe=class extends J4{static[Y]=`PgBinaryVectorBuilder`;constructor(e,t){super(e,`string`,`PgBinaryVector`),this.config.dimensions=t.dimensions}build(e){return new Yfe(e,this.config)}},Yfe=class extends Y4{static[Y]=`PgBinaryVector`;dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function Xfe(e,t){let{name:n,config:r}=j3(e,t);return new Jfe(n,r)}var Zfe=class extends J4{static[Y]=`PgHalfVectorBuilder`;constructor(e,t){super(e,`array`,`PgHalfVector`),this.config.dimensions=t.dimensions}build(e){return new Qfe(e,this.config)}},Qfe=class extends Y4{static[Y]=`PgHalfVector`;dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(`,`).map(e=>Number.parseFloat(e))}};function $fe(e,t){let{name:n,config:r}=j3(e,t);return new Zfe(n,r)}var epe=class extends J4{static[Y]=`PgSparseVectorBuilder`;constructor(e,t){super(e,`string`,`PgSparseVector`),this.config.dimensions=t.dimensions}build(e){return new tpe(e,this.config)}},tpe=class extends Y4{static[Y]=`PgSparseVector`;dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function npe(e,t){let{name:n,config:r}=j3(e,t);return new epe(n,r)}var rpe=class extends J4{static[Y]=`PgVectorBuilder`;constructor(e,t){super(e,`array`,`PgVector`),this.config.dimensions=t.dimensions}build(e){return new ipe(e,this.config)}},ipe=class extends Y4{static[Y]=`PgVector`;dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(`,`).map(e=>Number.parseFloat(e))}};function ape(e,t){let{name:n,config:r}=j3(e,t);return new rpe(n,r)}var Y3=class{static[Y]=`QueryPromise`;[Symbol.toStringTag]=`QueryPromise`;catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}},X3=class e{static[Y]=`SelectionProxyHandler`;config;constructor(e){this.config={...e}}get(t,n){if(n===`_`)return{...t._,selectedFields:new Proxy(t._.selectedFields,this)};if(n===t3)return{...t[t3],selectedFields:new Proxy(t[t3].selectedFields,this)};if(typeof n==`symbol`)return t[n];let r=(X(t,Q4)?t._.selectedFields:X(t,b3)?t[t3].selectedFields:t)[n];if(X(r,p3.Aliased)){if(this.config.sqlAliasedBehavior===`sql`&&!r.isSelectionField)return r.sql;let e=r.clone();return e.isSelectionField=!0,e}if(X(r,p3)){if(this.config.sqlBehavior===`sql`)return r;throw Error(`You tried to reference "${n}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return X(r,H4)?this.config.alias?new Proxy(r,new x3(new Proxy(r.table,new S3(this.config.alias,this.config.replaceOriginalName??!1)))):r:typeof r!=`object`||!r?r:new Proxy(r,new e(this.config))}};function ope(){return{bigint:gde,bigserial:xde,boolean:wde,char:Dde,cidr:Ade,customType:Nde,date:I3,doublePrecision:Rde,inet:Vde,integer:L3,interval:Kde,json:Jde,jsonb:Xde,line:tfe,macaddr:ife,macaddr8:sfe,numeric:pfe,point:vfe,geometry:wfe,real:Dfe,serial:Afe,smallint:Nfe,smallserial:Ife,text:U3,time:Bfe,timestamp:Ufe,uuid:Gfe,varchar:J3,bit:Xfe,halfvec:$fe,sparsevec:npe,vector:ape}}var Z3=Symbol.for(`drizzle:PgInlineForeignKeys`),Q3=Symbol.for(`drizzle:EnableRLS`),$3=class extends Z{static[Y]=`PgTable`;static Symbol=Object.assign({},Z.Symbol,{InlineForeignKeys:Z3,EnableRLS:Q3});[Z3]=[];[Q3]=!1;[Z.Symbol.ExtraConfigBuilder]=void 0;[Z.Symbol.ExtraConfigColumns]={}};function spe(e,t,n,r,i=e){let a=new $3(e,r,i),o=typeof t==`function`?t(ope()):t,s=Object.fromEntries(Object.entries(o).map(([e,t])=>{let n=t;n.setName(e);let r=n.build(a);return a[Z3].push(...n.buildForeignKeys(r,a)),[e,r]})),c=Object.fromEntries(Object.entries(o).map(([e,t])=>{let n=t;return n.setName(e),[e,n.buildExtraConfigColumn(a)]})),l=Object.assign(a,s);return l[Z.Symbol.Columns]=s,l[Z.Symbol.ExtraConfigColumns]=c,n&&(l[$3.Symbol.ExtraConfigBuilder]=n),Object.assign(l,{enableRLS:()=>(l[$3.Symbol.EnableRLS]=!0,l)})}var e6=(e,t,n)=>spe(e,t,n,void 0),cpe=class{static[Y]=`PgPrimaryKeyBuilder`;columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new lpe(e,this.columns,this.name)}},lpe=class{constructor(e,t,n){this.table=e,this.columns=t,this.name=n}static[Y]=`PgPrimaryKey`;columns;name;getName(){return this.name??`${this.table[$3.Symbol.Name]}_${this.columns.map(e=>e.name).join(`_`)}_pk`}};function upe(e){return(e.replace(/['\u2019]/g,``).match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(e=>e.toLowerCase()).join(`_`)}function dpe(e){return(e.replace(/['\u2019]/g,``).match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((e,t,n)=>e+(n===0?t.toLowerCase():`${t[0].toUpperCase()}${t.slice(1)}`),``)}function fpe(e){return e}var ppe=class{static[Y]=`CasingCache`;cache={};cachedTables={};convert;constructor(e){this.convert=e===`snake_case`?upe:e===`camelCase`?dpe:fpe}getColumnCasing(e){if(!e.keyAsName)return e.name;let t=`${e.table[Z.Symbol.Schema]??`public`}.${e.table[Z.Symbol.OriginalName]}.${e.name}`;return this.cache[t]||this.cacheTable(e.table),this.cache[t]}cacheTable(e){let t=`${e[Z.Symbol.Schema]??`public`}.${e[Z.Symbol.OriginalName]}`;if(!this.cachedTables[t]){for(let n of Object.values(e[Z.Symbol.Columns])){let e=`${t}.${n.name}`;this.cache[e]=this.convert(n.name)}this.cachedTables[t]=!0}}clearCache(){this.cache={},this.cachedTables={}}},t6=class extends Error{static[Y]=`DrizzleError`;constructor({message:e,cause:t}){super(e),this.name=`DrizzleError`,this.cause=t}},n6=class e extends Error{constructor(t,n,r){super(`Failed query: ${t}
params: ${n}`),this.query=t,this.params=n,this.cause=r,Error.captureStackTrace(this,e),r&&(this.cause=r)}},mpe=class extends t6{static[Y]=`TransactionRollbackError`;constructor(){super({message:`Rollback`})}};function r6(e,t){return ode(t)&&!d3(e)&&!X(e,_3)&&!X(e,v3)&&!X(e,H4)&&!X(e,Z)&&!X(e,b3)?new _3(e,t):e}var i6=(e,t)=>Q`${e} = ${r6(t,e)}`,hpe=(e,t)=>Q`${e} <> ${r6(t,e)}`;function a6(...e){let t=e.filter(e=>e!==void 0);if(t.length!==0)return t.length===1?new p3(t):new p3([new f3(`(`),Q.join(t,new f3(` and `)),new f3(`)`)])}function gpe(...e){let t=e.filter(e=>e!==void 0);if(t.length!==0)return t.length===1?new p3(t):new p3([new f3(`(`),Q.join(t,new f3(` or `)),new f3(`)`)])}function _pe(e){return Q`not ${e}`}var vpe=(e,t)=>Q`${e} > ${r6(t,e)}`,ype=(e,t)=>Q`${e} >= ${r6(t,e)}`,bpe=(e,t)=>Q`${e} < ${r6(t,e)}`,xpe=(e,t)=>Q`${e} <= ${r6(t,e)}`;function Spe(e,t){return Array.isArray(t)?t.length===0?Q`false`:Q`${e} in ${t.map(t=>r6(t,e))}`:Q`${e} in ${r6(t,e)}`}function Cpe(e,t){return Array.isArray(t)?t.length===0?Q`true`:Q`${e} not in ${t.map(t=>r6(t,e))}`:Q`${e} not in ${r6(t,e)}`}function wpe(e){return Q`${e} is null`}function Tpe(e){return Q`${e} is not null`}function Epe(e){return Q`exists ${e}`}function Dpe(e){return Q`not exists ${e}`}function Ope(e,t,n){return Q`${e} between ${r6(t,e)} and ${r6(n,e)}`}function kpe(e,t,n){return Q`${e} not between ${r6(t,e)} and ${r6(n,e)}`}function Ape(e,t){return Q`${e} like ${t}`}function jpe(e,t){return Q`${e} not like ${t}`}function Mpe(e,t){return Q`${e} ilike ${t}`}function Npe(e,t){return Q`${e} not ilike ${t}`}function Ppe(e){return Q`${e} asc`}function Fpe(e){return Q`${e} desc`}var o6=class{constructor(e,t,n){this.sourceTable=e,this.referencedTable=t,this.relationName=n,this.referencedTableName=t[Z.Symbol.Name]}static[Y]=`Relation`;referencedTableName;fieldName},Ipe=class{constructor(e,t){this.table=e,this.config=t}static[Y]=`Relations`},s6=class e extends o6{constructor(e,t,n,r){super(e,t,n?.relationName),this.config=n,this.isNullable=r}static[Y]=`One`;withFieldName(t){let n=new e(this.sourceTable,this.referencedTable,this.config,this.isNullable);return n.fieldName=t,n}},c6=class e extends o6{constructor(e,t,n){super(e,t,n?.relationName),this.config=n}static[Y]=`Many`;withFieldName(t){let n=new e(this.sourceTable,this.referencedTable,this.config);return n.fieldName=t,n}};function Lpe(){return{and:a6,between:Ope,eq:i6,exists:Epe,gt:vpe,gte:ype,ilike:Mpe,inArray:Spe,isNull:wpe,isNotNull:Tpe,like:Ape,lt:bpe,lte:xpe,ne:hpe,not:_pe,notBetween:kpe,notExists:Dpe,notLike:jpe,notIlike:Npe,notInArray:Cpe,or:gpe,sql:Q}}function Rpe(){return{sql:Q,asc:Ppe,desc:Fpe}}function zpe(e,t){Object.keys(e).length===1&&`default`in e&&!X(e.default,Z)&&(e=e.default);let n={},r={},i={};for(let[a,o]of Object.entries(e))if(X(o,Z)){let e=u3(o),t=r[e];n[e]=a,i[a]={tsName:a,dbName:o[Z.Symbol.Name],schema:o[Z.Symbol.Schema],columns:o[Z.Symbol.Columns],relations:t?.relations??{},primaryKey:t?.primaryKey??[]};for(let e of Object.values(o[Z.Symbol.Columns]))e.primary&&i[a].primaryKey.push(e);let s=o[Z.Symbol.ExtraConfigBuilder]?.(o[Z.Symbol.ExtraConfigColumns]);if(s)for(let e of Object.values(s))X(e,cpe)&&i[a].primaryKey.push(...e.columns)}else if(X(o,Ipe)){let e=u3(o.table),a=n[e],s=o.config(t(o.table));for(let[t,n]of Object.entries(s))if(a){let e=i[a];e.relations[t]=n}else e in r||(r[e]={relations:{},primaryKey:void 0}),r[e].relations[t]=n}return{tables:i,tableNamesMap:n}}function Bpe(e){return function(t,n){return new s6(e,t,n,n?.fields.reduce((e,t)=>e&&t.notNull,!0)??!1)}}function Vpe(e){return function(t,n){return new c6(e,t,n)}}function Hpe(e,t,n){if(X(n,s6)&&n.config)return{fields:n.config.fields,references:n.config.references};let r=t[u3(n.referencedTable)];if(!r)throw Error(`Table "${n.referencedTable[Z.Symbol.Name]}" not found in schema`);let i=e[r];if(!i)throw Error(`Table "${r}" not found in schema`);let a=n.sourceTable,o=t[u3(a)];if(!o)throw Error(`Table "${a[Z.Symbol.Name]}" not found in schema`);let s=[];for(let e of Object.values(i.relations))(n.relationName&&n!==e&&e.relationName===n.relationName||!n.relationName&&e.referencedTable===n.sourceTable)&&s.push(e);if(s.length>1)throw n.relationName?Error(`There are multiple relations with name "${n.relationName}" in table "${r}"`):Error(`There are multiple relations between "${r}" and "${n.sourceTable[Z.Symbol.Name]}". Please specify relation name`);if(s[0]&&X(s[0],s6)&&s[0].config)return{fields:s[0].config.references,references:s[0].config.fields};throw Error(`There is not enough information to infer relation "${o}.${n.fieldName}"`)}function Upe(e){return{one:Bpe(e),many:Vpe(e)}}function l6(e,t,n,r,i=e=>e){let a={};for(let[o,s]of r.entries())if(s.isJson){let r=t.relations[s.tsKey],c=n[o],l=typeof c==`string`?JSON.parse(c):c;a[s.tsKey]=X(r,s6)?l&&l6(e,e[s.relationTableTsKey],l,s.selection,i):l.map(t=>l6(e,e[s.relationTableTsKey],t,s.selection,i))}else{let e=i(n[o]),t=s.field,r;r=X(t,H4)?t:X(t,p3)?t.decoder:t.sql.decoder,a[s.tsKey]=e===null?null:r.mapFromDriverValue(e)}return a}var u6=class extends b3{static[Y]=`PgViewBase`},d6=class{static[Y]=`PgDialect`;casing;constructor(e){this.casing=new ppe(e?.casing)}async migrate(e,t,n){let r=typeof n==`string`?`__drizzle_migrations`:n.migrationsTable??`__drizzle_migrations`,i=typeof n==`string`?`drizzle`:n.migrationsSchema??`drizzle`,a=Q`
			CREATE TABLE IF NOT EXISTS ${Q.identifier(i)}.${Q.identifier(r)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute(Q`CREATE SCHEMA IF NOT EXISTS ${Q.identifier(i)}`),await t.execute(a);let o=(await t.all(Q`select id, hash, created_at from ${Q.identifier(i)}.${Q.identifier(r)} order by created_at desc limit 1`))[0];await t.transaction(async t=>{for await(let n of e)if(!o||Number(o.created_at)<n.folderMillis){for(let e of n.sql)await t.execute(Q.raw(e));await t.execute(Q`insert into ${Q.identifier(i)}.${Q.identifier(r)} ("hash", "created_at") values(${n.hash}, ${n.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,`''`)}'`}buildWithCTE(e){if(!e?.length)return;let t=[Q`with `];for(let[n,r]of e.entries())t.push(Q`${Q.identifier(r._.alias)} as (${r._.sql})`),n<e.length-1&&t.push(Q`, `);return t.push(Q` `),Q.join(t)}buildDeleteQuery({table:e,where:t,returning:n,withList:r}){let i=this.buildWithCTE(r),a=n?Q` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0;return Q`${i}delete from ${e}${t?Q` where ${t}`:void 0}${a}`}buildUpdateSet(e,t){let n=e[Z.Symbol.Columns],r=Object.keys(n).filter(e=>t[e]!==void 0||n[e]?.onUpdateFn!==void 0),i=r.length;return Q.join(r.flatMap((e,r)=>{let a=n[e],o=t[e]??Q.param(a.onUpdateFn(),a),s=Q`${Q.identifier(this.casing.getColumnCasing(a))} = ${o}`;return r<i-1?[s,Q.raw(`, `)]:[s]}))}buildUpdateQuery({table:e,set:t,where:n,returning:r,withList:i,from:a,joins:o}){let s=this.buildWithCTE(i),c=e[$3.Symbol.Name],l=e[$3.Symbol.Schema],u=e[$3.Symbol.OriginalName],d=c===u?void 0:c,f=Q`${l?Q`${Q.identifier(l)}.`:void 0}${Q.identifier(u)}${d&&Q` ${Q.identifier(d)}`}`,p=this.buildUpdateSet(e,t),m=a&&Q.join([Q.raw(` from `),this.buildFromTable(a)]),h=this.buildJoins(o),g=r?Q` returning ${this.buildSelection(r,{isSingleTable:!a})}`:void 0;return Q`${s}update ${f} set ${p}${m}${h}${n?Q` where ${n}`:void 0}${g}`}buildSelection(e,{isSingleTable:t=!1}={}){let n=e.length,r=e.flatMap(({field:e},r)=>{let i=[];if(X(e,p3.Aliased)&&e.isSelectionField)i.push(Q.identifier(e.fieldAlias));else if(X(e,p3.Aliased)||X(e,p3)){let n=X(e,p3.Aliased)?e.sql:e;t?i.push(new p3(n.queryChunks.map(e=>X(e,Y4)?Q.identifier(this.casing.getColumnCasing(e)):e))):i.push(n),X(e,p3.Aliased)&&i.push(Q` as ${Q.identifier(e.fieldAlias)}`)}else X(e,H4)&&(t?i.push(Q.identifier(this.casing.getColumnCasing(e))):i.push(e));return r<n-1&&i.push(Q`, `),i});return Q.join(r)}buildJoins(e){if(!e||e.length===0)return;let t=[];for(let[n,r]of e.entries()){n===0&&t.push(Q` `);let i=r.table,a=r.lateral?Q` lateral`:void 0,o=r.on?Q` on ${r.on}`:void 0;if(X(i,$3)){let e=i[$3.Symbol.Name],n=i[$3.Symbol.Schema],s=i[$3.Symbol.OriginalName],c=e===s?void 0:r.alias;t.push(Q`${Q.raw(r.joinType)} join${a} ${n?Q`${Q.identifier(n)}.`:void 0}${Q.identifier(s)}${c&&Q` ${Q.identifier(c)}`}${o}`)}else if(X(i,b3)){let e=i[t3].name,n=i[t3].schema,s=i[t3].originalName,c=e===s?void 0:r.alias;t.push(Q`${Q.raw(r.joinType)} join${a} ${n?Q`${Q.identifier(n)}.`:void 0}${Q.identifier(s)}${c&&Q` ${Q.identifier(c)}`}${o}`)}else t.push(Q`${Q.raw(r.joinType)} join${a} ${i}${o}`);n<e.length-1&&t.push(Q` `)}return Q.join(t)}buildFromTable(e){if(X(e,Z)&&e[Z.Symbol.IsAlias]){let t=Q`${Q.identifier(e[Z.Symbol.OriginalName])}`;return e[Z.Symbol.Schema]&&(t=Q`${Q.identifier(e[Z.Symbol.Schema])}.${t}`),Q`${t} ${Q.identifier(e[Z.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:t,fieldsFlat:n,where:r,having:i,table:a,joins:o,orderBy:s,groupBy:c,limit:l,offset:u,lockingClause:d,distinct:f,setOperators:p}){let m=n??D3(t);for(let e of m)if(X(e.field,H4)&&l3(e.field.table)!==(X(a,Q4)?a._.alias:X(a,u6)?a[t3].name:X(a,p3)?void 0:l3(a))&&!(e=>o?.some(({alias:t})=>t===(e[Z.Symbol.IsAlias]?l3(e):e[Z.Symbol.BaseName])))(e.field.table)){let t=l3(e.field.table);throw Error(`Your "${e.path.join(`->`)}" field references a column "${t}"."${e.field.name}", but the table "${t}" is not part of the query! Did you forget to join it?`)}let h=!o||o.length===0,g=this.buildWithCTE(e),_;f&&(_=f===!0?Q` distinct`:Q` distinct on (${Q.join(f.on,Q`, `)})`);let v=this.buildSelection(m,{isSingleTable:h}),ee=this.buildFromTable(a),te=this.buildJoins(o),y=r?Q` where ${r}`:void 0,b=i?Q` having ${i}`:void 0,x;s&&s.length>0&&(x=Q` order by ${Q.join(s,Q`, `)}`);let ne;c&&c.length>0&&(ne=Q` group by ${Q.join(c,Q`, `)}`);let re=typeof l==`object`||typeof l==`number`&&l>=0?Q` limit ${l}`:void 0,S=u?Q` offset ${u}`:void 0,ie=Q.empty();if(d){let e=Q` for ${Q.raw(d.strength)}`;d.config.of&&e.append(Q` of ${Q.join(Array.isArray(d.config.of)?d.config.of:[d.config.of],Q`, `)}`),d.config.noWait?e.append(Q` nowait`):d.config.skipLocked&&e.append(Q` skip locked`),ie.append(e)}let C=Q`${g}select${_} ${v} from ${ee}${te}${y}${ne}${b}${x}${re}${S}${ie}`;return p.length>0?this.buildSetOperations(C,p):C}buildSetOperations(e,t){let[n,...r]=t;if(!n)throw Error(`Cannot pass undefined values to any set operator`);return r.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:n}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:n}),r)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:n,rightSelect:r,limit:i,orderBy:a,offset:o}}){let s=Q`(${e.getSQL()}) `,c=Q`(${r.getSQL()})`,l;if(a&&a.length>0){let e=[];for(let t of a)if(X(t,Y4))e.push(Q.identifier(t.name));else if(X(t,p3)){for(let e=0;e<t.queryChunks.length;e++){let n=t.queryChunks[e];X(n,Y4)&&(t.queryChunks[e]=Q.identifier(n.name))}e.push(Q`${t}`)}else e.push(Q`${t}`);l=Q` order by ${Q.join(e,Q`, `)} `}let u=typeof i==`object`||typeof i==`number`&&i>=0?Q` limit ${i}`:void 0,d=Q.raw(`${t} ${n?`all `:``}`),f=o?Q` offset ${o}`:void 0;return Q`${s}${d}${c}${l}${u}${f}`}buildInsertQuery({table:e,values:t,onConflict:n,returning:r,withList:i,select:a,overridingSystemValue_:o}){let s=[],c=e[Z.Symbol.Columns],l=Object.entries(c).filter(([e,t])=>!t.shouldDisableInsert()),u=l.map(([,e])=>Q.identifier(this.casing.getColumnCasing(e)));if(a){let e=t;X(e,p3)?s.push(e):s.push(e.getSQL())}else{let e=t;s.push(Q.raw(`values `));for(let[t,n]of e.entries()){let r=[];for(let[e,t]of l){let i=n[e];if(i===void 0||X(i,_3)&&i.value===void 0)if(t.defaultFn!==void 0){let e=t.defaultFn(),n=X(e,p3)?e:Q.param(e,t);r.push(n)}else if(!t.default&&t.onUpdateFn!==void 0){let e=t.onUpdateFn(),n=X(e,p3)?e:Q.param(e,t);r.push(n)}else r.push(Q`default`);else r.push(i)}s.push(r),t<e.length-1&&s.push(Q`, `)}}let d=this.buildWithCTE(i),f=Q.join(s),p=r?Q` returning ${this.buildSelection(r,{isSingleTable:!0})}`:void 0,m=n?Q` on conflict ${n}`:void 0;return Q`${d}insert into ${e} ${u} ${o===!0?Q`overriding system value `:void 0}${f}${m}${p}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:n}){return Q`refresh materialized view${t?Q` concurrently`:void 0} ${e}${n?Q` with no data`:void 0}`}prepareTyping(e){return X(e,z3)||X(e,R3)?`json`:X(e,B3)?`decimal`:X(e,W3)?`time`:X(e,G3)||X(e,K3)?`timestamp`:X(e,P3)||X(e,F3)?`date`:X(e,q3)?`uuid`:`none`}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:t})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:r,tableConfig:i,queryConfig:a,tableAlias:o,nestedQueryRelation:s,joinOn:c}){let l=[],u,d,f=[],p,m=[];if(a===!0)l=Object.entries(i.columns).map(([e,t])=>({dbKey:t.name,tsKey:e,field:w3(t,o),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let r=Object.fromEntries(Object.entries(i.columns).map(([e,t])=>[e,w3(t,o)]));if(a.where){let e=typeof a.where==`function`?a.where(r,Lpe()):a.where;p=e&&E3(e,o)}let s=[],c=[];if(a.columns){let e=!1;for(let[t,n]of Object.entries(a.columns))n!==void 0&&t in i.columns&&(!e&&n===!0&&(e=!0),c.push(t));c.length>0&&(c=e?c.filter(e=>a.columns?.[e]===!0):Object.keys(i.columns).filter(e=>!c.includes(e)))}else c=Object.keys(i.columns);for(let e of c){let t=i.columns[e];s.push({tsKey:e,value:t})}let h=[];a.with&&(h=Object.entries(a.with).filter(e=>!!e[1]).map(([e,t])=>({tsKey:e,queryConfig:t,relation:i.relations[e]})));let g;if(a.extras){g=typeof a.extras==`function`?a.extras(r,{sql:Q}):a.extras;for(let[e,t]of Object.entries(g))s.push({tsKey:e,value:T3(t,o)})}for(let{tsKey:e,value:t}of s)l.push({dbKey:X(t,p3.Aliased)?t.fieldAlias:i.columns[e].name,tsKey:e,field:X(t,H4)?w3(t,o):t,relationTableTsKey:void 0,isJson:!1,selection:[]});let _=typeof a.orderBy==`function`?a.orderBy(r,Rpe()):a.orderBy??[];Array.isArray(_)||(_=[_]),f=_.map(e=>X(e,H4)?w3(e,o):E3(e,o)),u=a.limit,d=a.offset;for(let{tsKey:r,queryConfig:i,relation:a}of h){let s=Hpe(t,n,a),c=n[u3(a.referencedTable)],u=`${o}_${r}`,d=a6(...s.fields.map((e,t)=>i6(w3(s.references[t],u),w3(e,o)))),f=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:e[c],tableConfig:t[c],queryConfig:X(a,s6)?i===!0?{limit:1}:{...i,limit:1}:i,tableAlias:u,joinOn:d,nestedQueryRelation:a}),p=Q`${Q.identifier(u)}.${Q.identifier(`data`)}`.as(r);m.push({on:Q`true`,table:new Q4(f.sql,{},u),alias:u,joinType:`left`,lateral:!0}),l.push({dbKey:r,tsKey:r,field:p,relationTableTsKey:c,isJson:!0,selection:f.selection})}}if(l.length===0)throw new t6({message:`No fields selected for table "${i.tsName}" ("${o}")`});let h;if(p=a6(c,p),s){let e=Q`json_build_array(${Q.join(l.map(({field:e,tsKey:t,isJson:n})=>n?Q`${Q.identifier(`${o}_${t}`)}.${Q.identifier(`data`)}`:X(e,p3.Aliased)?e.sql:e),Q`, `)})`;X(s,c6)&&(e=Q`coalesce(json_agg(${e}${f.length>0?Q` order by ${Q.join(f,Q`, `)}`:void 0}), '[]'::json)`);let t=[{dbKey:`data`,tsKey:`data`,field:e.as(`data`),isJson:!0,relationTableTsKey:i.tsName,selection:l}];u!==void 0||d!==void 0||f.length>0?(h=this.buildSelectQuery({table:C3(r,o),fields:{},fieldsFlat:[{path:[],field:Q.raw(`*`)}],where:p,limit:u,offset:d,orderBy:f,setOperators:[]}),p=void 0,u=void 0,d=void 0,f=[]):h=C3(r,o),h=this.buildSelectQuery({table:X(h,$3)?h:new Q4(h,{},o),fields:{},fieldsFlat:t.map(({field:e})=>({path:[],field:X(e,H4)?w3(e,o):e})),joins:m,where:p,limit:u,offset:d,orderBy:f,setOperators:[]})}else h=this.buildSelectQuery({table:C3(r,o),fields:{},fieldsFlat:l.map(({field:e})=>({path:[],field:X(e,H4)?w3(e,o):e})),joins:m,where:p,limit:u,offset:d,orderBy:f,setOperators:[]});return{tableTsKey:i.tsName,sql:h,selection:l}}},Wpe=class{static[Y]=`TypedQueryBuilder`;getSelectedFields(){return this._.selectedFields}},f6=class{static[Y]=`PgSelectBuilder`;fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let t=!!this.fields,n=e,r;return r=this.fields?this.fields:X(n,Q4)?Object.fromEntries(Object.keys(n._.selectedFields).map(e=>[e,n[e]])):X(n,u6)?n[t3].selectedFields:X(n,p3)?{}:ude(n),new p6({table:n,fields:r,isPartialSelect:t,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},Gpe=class extends Wpe{static[Y]=`PgSelectQueryBuilder`;_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:t,isPartialSelect:n,session:r,dialect:i,withList:a,distinct:o}){super(),this.config={withList:a,table:e,fields:{...t},distinct:o,setOperators:[]},this.isPartialSelect=n,this.session=r,this.dialect=i,this._={selectedFields:t,config:this.config},this.tableName=A3(e),this.joinsNotNullableMap=typeof this.tableName==`string`?{[this.tableName]:!0}:{};for(let t of g6(e))this.usedTables.add(t)}getUsedTables(){return[...this.usedTables]}createJoin(e,t){return(n,r)=>{let i=this.tableName,a=A3(n);for(let e of g6(n))this.usedTables.add(e);if(typeof a==`string`&&this.config.joins?.some(e=>e.alias===a))throw Error(`Alias "${a}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof i==`string`&&(this.config.fields={[i]:this.config.fields}),typeof a==`string`&&!X(n,p3))){let e=X(n,Q4)?n._.selectedFields:X(n,b3)?n[t3].selectedFields:n[Z.Symbol.Columns];this.config.fields[a]=e}if(typeof r==`function`&&(r=r(new Proxy(this.config.fields,new X3({sqlAliasedBehavior:`sql`,sqlBehavior:`sql`})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:r,table:n,joinType:e,alias:a,lateral:t}),typeof a==`string`)switch(e){case`left`:this.joinsNotNullableMap[a]=!1;break;case`right`:this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[a]=!0;break;case`cross`:case`inner`:this.joinsNotNullableMap[a]=!0;break;case`full`:this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[a]=!1;break}return this}}leftJoin=this.createJoin(`left`,!1);leftJoinLateral=this.createJoin(`left`,!0);rightJoin=this.createJoin(`right`,!1);innerJoin=this.createJoin(`inner`,!1);innerJoinLateral=this.createJoin(`inner`,!0);fullJoin=this.createJoin(`full`,!1);crossJoin=this.createJoin(`cross`,!1);crossJoinLateral=this.createJoin(`cross`,!0);createSetOperator(e,t){return n=>{let r=typeof n==`function`?n(Kpe()):n;if(!O3(this.getSelectedFields(),r.getSelectedFields()))throw Error(`Set operator error (union / intersect / except): selected fields are not the same or are in a different order`);return this.config.setOperators.push({type:e,isAll:t,rightSelect:r}),this}}union=this.createSetOperator(`union`,!1);unionAll=this.createSetOperator(`union`,!0);intersect=this.createSetOperator(`intersect`,!1);intersectAll=this.createSetOperator(`intersect`,!0);except=this.createSetOperator(`except`,!1);exceptAll=this.createSetOperator(`except`,!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e==`function`&&(e=e(new Proxy(this.config.fields,new X3({sqlAliasedBehavior:`sql`,sqlBehavior:`sql`})))),this.config.where=e,this}having(e){return typeof e==`function`&&(e=e(new Proxy(this.config.fields,new X3({sqlAliasedBehavior:`sql`,sqlBehavior:`sql`})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]==`function`){let t=e[0](new Proxy(this.config.fields,new X3({sqlAliasedBehavior:`alias`,sqlBehavior:`sql`})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]==`function`){let t=e[0](new Proxy(this.config.fields,new X3({sqlAliasedBehavior:`alias`,sqlBehavior:`sql`}))),n=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=n:this.config.orderBy=n}else{let t=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=t:this.config.orderBy=t}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){let t=[];if(t.push(...g6(this.config.table)),this.config.joins)for(let e of this.config.joins)t.push(...g6(e.table));return new Proxy(new Q4(this.getSQL(),this.config.fields,e,!1,[...new Set(t)]),new X3({alias:e,sqlAliasedBehavior:`alias`,sqlBehavior:`error`}))}getSelectedFields(){return new Proxy(this.config.fields,new X3({alias:this.tableName,sqlAliasedBehavior:`alias`,sqlBehavior:`error`}))}$dynamic(){return this}$withCache(e){return this.cacheConfig=e===void 0?{config:{},enable:!0,autoInvalidate:!0}:e===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}},p6=class extends Gpe{static[Y]=`PgSelect`;_prepare(e){let{session:t,config:n,dialect:r,joinsNotNullableMap:i,authToken:a,cacheConfig:o,usedTables:s}=this;if(!t)throw Error(`Cannot execute a query on a query builder. Please use a database instance instead.`);let{fields:c}=n;return e3.startActiveSpan(`drizzle.prepareQuery`,()=>{let n=D3(c),l=t.prepareQuery(r.sqlToQuery(this.getSQL()),n,e,!0,void 0,{type:`select`,tables:[...s]},o);return l.joinsNotNullableMap=i,l.setToken(a)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>e3.startActiveSpan(`drizzle.operation`,()=>this._prepare().execute(e,this.authToken))};lde(p6,[Y3]);function m6(e,t){return(n,r,...i)=>{let a=[r,...i].map(n=>({type:e,isAll:t,rightSelect:n}));for(let e of a)if(!O3(n.getSelectedFields(),e.rightSelect.getSelectedFields()))throw Error(`Set operator error (union / intersect / except): selected fields are not the same or are in a different order`);return n.addSetOperators(a)}}var Kpe=()=>({union:qpe,unionAll:Jpe,intersect:Ype,intersectAll:Xpe,except:Zpe,exceptAll:Qpe}),qpe=m6(`union`,!1),Jpe=m6(`union`,!0),Ype=m6(`intersect`,!1),Xpe=m6(`intersect`,!0),Zpe=m6(`except`,!1),Qpe=m6(`except`,!0),h6=class{static[Y]=`PgQueryBuilder`;dialect;dialectConfig;constructor(e){this.dialect=X(e,d6)?e:void 0,this.dialectConfig=X(e,d6)?void 0:e}$with=(e,t)=>{let n=this;return{as:r=>(typeof r==`function`&&(r=r(n)),new Proxy(new $4(r.getSQL(),t??(`getSelectedFields`in r?r.getSelectedFields()??{}:{}),e,!0),new X3({alias:e,sqlAliasedBehavior:`alias`,sqlBehavior:`error`})))}};with(...e){let t=this;function n(n){return new f6({fields:n??void 0,session:void 0,dialect:t.getDialect(),withList:e})}function r(e){return new f6({fields:e??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})}function i(e,n){return new f6({fields:n??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:e}})}return{select:n,selectDistinct:r,selectDistinctOn:i}}select(e){return new f6({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new f6({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new f6({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||=new d6(this.dialectConfig),this.dialect}};function g6(e){return X(e,$3)?[e[n3]?`${e[n3]}.${e[Z.Symbol.BaseName]}`:e[Z.Symbol.BaseName]]:X(e,Q4)?e._.usedTables??[]:X(e,p3)?e.usedTables??[]:[]}var _6=class extends Y3{constructor(e,t,n,r){super(),this.session=t,this.dialect=n,this.config={table:e,withList:r}}static[Y]=`PgDelete`;config;cacheConfig;where(e){return this.config.where=e,this}returning(e=this.config.table[Z.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=D3(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return e3.startActiveSpan(`drizzle.prepareQuery`,()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:`delete`,tables:g6(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>e3.startActiveSpan(`drizzle.operation`,()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new X3({alias:l3(this.config.table),sqlAliasedBehavior:`alias`,sqlBehavior:`error`})):void 0}$dynamic(){return this}},v6=class{constructor(e,t,n,r,i){this.table=e,this.session=t,this.dialect=n,this.withList=r,this.overridingSystemValue_=i}static[Y]=`PgInsertBuilder`;authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw Error(`values() must be called with at least one value`);let t=e.map(e=>{let t={},n=this.table[Z.Symbol.Columns];for(let r of Object.keys(e)){let i=e[r];t[r]=X(i,p3)?i:new _3(i,n[r])}return t});return new y6(this.table,t,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let t=typeof e==`function`?e(new h6):e;if(!X(t,p3)&&!O3(this.table[r3],t._.selectedFields))throw Error(`Insert select error: selected fields are not the same or are in a different order compared to the table definition`);return new y6(this.table,t,this.session,this.dialect,this.withList,!0)}},y6=class extends Y3{constructor(e,t,n,r,i,a,o){super(),this.session=n,this.dialect=r,this.config={table:e,values:t,withList:i,select:a,overridingSystemValue_:o}}static[Y]=`PgInsert`;config;cacheConfig;returning(e=this.config.table[Z.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=D3(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=Q`do nothing`;else{let t=``;t=Array.isArray(e.target)?e.target.map(e=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(e))).join(`,`):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let n=e.where?Q` where ${e.where}`:void 0;this.config.onConflict=Q`(${Q.raw(t)})${n} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw Error(`You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.`);let t=e.where?Q` where ${e.where}`:void 0,n=e.targetWhere?Q` where ${e.targetWhere}`:void 0,r=e.setWhere?Q` where ${e.setWhere}`:void 0,i=this.dialect.buildUpdateSet(this.config.table,k3(this.config.table,e.set)),a=``;return a=Array.isArray(e.target)?e.target.map(e=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(e))).join(`,`):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=Q`(${Q.raw(a)})${n} do update set ${i}${t}${r}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return e3.startActiveSpan(`drizzle.prepareQuery`,()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:`insert`,tables:g6(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>e3.startActiveSpan(`drizzle.operation`,()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new X3({alias:l3(this.config.table),sqlAliasedBehavior:`alias`,sqlBehavior:`error`})):void 0}$dynamic(){return this}},$pe=class extends Y3{constructor(e,t,n){super(),this.session=t,this.dialect=n,this.config={view:e}}static[Y]=`PgRefreshMaterializedView`;config;concurrently(){if(this.config.withNoData!==void 0)throw Error(`Cannot use concurrently and withNoData together`);return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw Error(`Cannot use concurrently and withNoData together`);return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return e3.startActiveSpan(`drizzle.prepareQuery`,()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>e3.startActiveSpan(`drizzle.operation`,()=>this._prepare().execute(e,this.authToken))},b6=class{constructor(e,t,n,r){this.table=e,this.session=t,this.dialect=n,this.withList=r}static[Y]=`PgUpdateBuilder`;authToken;setToken(e){return this.authToken=e,this}set(e){return new eme(this.table,k3(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},eme=class extends Y3{constructor(e,t,n,r,i){super(),this.session=n,this.dialect=r,this.config={set:t,table:e,withList:i,joins:[]},this.tableName=A3(e),this.joinsNotNullableMap=typeof this.tableName==`string`?{[this.tableName]:!0}:{}}static[Y]=`PgUpdate`;config;tableName;joinsNotNullableMap;cacheConfig;from(e){let t=e,n=A3(t);return typeof n==`string`&&(this.joinsNotNullableMap[n]=!0),this.config.from=t,this}getTableLikeFields(e){return X(e,$3)?e[Z.Symbol.Columns]:X(e,Q4)?e._.selectedFields:e[t3].selectedFields}createJoin(e){return(t,n)=>{let r=A3(t);if(typeof r==`string`&&this.config.joins.some(e=>e.alias===r))throw Error(`Alias "${r}" is already used in this query`);if(typeof n==`function`){let e=this.config.from&&!X(this.config.from,p3)?this.getTableLikeFields(this.config.from):void 0;n=n(new Proxy(this.config.table[Z.Symbol.Columns],new X3({sqlAliasedBehavior:`sql`,sqlBehavior:`sql`})),e&&new Proxy(e,new X3({sqlAliasedBehavior:`sql`,sqlBehavior:`sql`})))}if(this.config.joins.push({on:n,table:t,joinType:e,alias:r}),typeof r==`string`)switch(e){case`left`:this.joinsNotNullableMap[r]=!1;break;case`right`:this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[r]=!0;break;case`inner`:this.joinsNotNullableMap[r]=!0;break;case`full`:this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[r]=!1;break}return this}}leftJoin=this.createJoin(`left`);rightJoin=this.createJoin(`right`);innerJoin=this.createJoin(`inner`);fullJoin=this.createJoin(`full`);where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[Z.Symbol.Columns]),this.config.from)){let t=A3(this.config.from);typeof t==`string`&&this.config.from&&!X(this.config.from,p3)&&(e[t]=this.getTableLikeFields(this.config.from));for(let t of this.config.joins){let n=A3(t.table);typeof n==`string`&&!X(t.table,p3)&&(e[n]=this.getTableLikeFields(t.table))}}return this.config.returningFields=e,this.config.returning=D3(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){let t=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:`insert`,tables:g6(this.config.table)},this.cacheConfig);return t.joinsNotNullableMap=this.joinsNotNullableMap,t}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new X3({alias:l3(this.config.table),sqlAliasedBehavior:`alias`,sqlBehavior:`error`})):void 0}$dynamic(){return this}},tme=class e extends p3{constructor(t){super(e.buildEmbeddedCount(t.source,t.filters).queryChunks),this.params=t,this.mapWith(Number),this.session=t.session,this.sql=e.buildCount(t.source,t.filters)}sql;token;static[Y]=`PgCountBuilder`;[Symbol.toStringTag]=`PgCountBuilder`;session;static buildEmbeddedCount(e,t){return Q`(select count(*) from ${e}${Q.raw(` where `).if(t)}${t})`}static buildCount(e,t){return Q`select count(*) as count from ${e}${Q.raw(` where `).if(t)}${t};`}setToken(e){return this.token=e,this}then(e,t){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}},nme=class{constructor(e,t,n,r,i,a,o){this.fullSchema=e,this.schema=t,this.tableNamesMap=n,this.table=r,this.tableConfig=i,this.dialect=a,this.session=o}static[Y]=`PgRelationalQueryBuilder`;findMany(e){return new x6(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},`many`)}findFirst(e){return new x6(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},`first`)}},x6=class extends Y3{constructor(e,t,n,r,i,a,o,s,c){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=n,this.table=r,this.tableConfig=i,this.dialect=a,this.session=o,this.config=s,this.mode=c}static[Y]=`PgRelationalQuery`;_prepare(e){return e3.startActiveSpan(`drizzle.prepareQuery`,()=>{let{query:t,builtQuery:n}=this._toSQL();return this.session.prepareQuery(n,void 0,e,!0,(e,n)=>{let r=e.map(e=>l6(this.schema,this.tableConfig,e,t.selection,n));return this.mode===`first`?r[0]:r})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery();return{query:e,builtQuery:this.dialect.sqlToQuery(e.sql)}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return e3.startActiveSpan(`drizzle.operation`,()=>this._prepare().execute(void 0,this.authToken))}},rme=class extends Y3{constructor(e,t,n,r){super(),this.execute=e,this.sql=t,this.query=n,this.mapBatchResult=r}static[Y]=`PgRaw`;getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}},S6=class{constructor(e,t,n){if(this.dialect=e,this.session=t,this._=n?{schema:n.schema,fullSchema:n.fullSchema,tableNamesMap:n.tableNamesMap,session:t}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:t},this.query={},this._.schema)for(let[r,i]of Object.entries(this._.schema))this.query[r]=new nme(n.fullSchema,this._.schema,this._.tableNamesMap,n.fullSchema[r],i,e,t);this.$cache={invalidate:async e=>{}}}static[Y]=`PgDatabase`;query;$with=(e,t)=>{let n=this;return{as:r=>(typeof r==`function`&&(r=r(new h6(n.dialect))),new Proxy(new $4(r.getSQL(),t??(`getSelectedFields`in r?r.getSelectedFields()??{}:{}),e,!0),new X3({alias:e,sqlAliasedBehavior:`alias`,sqlBehavior:`error`})))}};$count(e,t){return new tme({source:e,filters:t,session:this.session})}$cache;with(...e){let t=this;function n(n){return new f6({fields:n??void 0,session:t.session,dialect:t.dialect,withList:e})}function r(n){return new f6({fields:n??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})}function i(n,r){return new f6({fields:r??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:{on:n}})}function a(n){return new b6(n,t.session,t.dialect,e)}function o(n){return new v6(n,t.session,t.dialect,e)}function s(n){return new _6(n,t.session,t.dialect,e)}return{select:n,selectDistinct:r,selectDistinctOn:i,update:a,insert:o,delete:s}}select(e){return new f6({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new f6({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new f6({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new b6(e,this.session,this.dialect)}insert(e){return new v6(e,this.session,this.dialect)}delete(e){return new _6(e,this.session,this.dialect)}refreshMaterializedView(e){return new $pe(e,this.session,this.dialect)}authToken;execute(e){let t=typeof e==`string`?Q.raw(e):e.getSQL(),n=this.dialect.sqlToQuery(t),r=this.session.prepareQuery(n,void 0,void 0,!1);return new rme(()=>r.execute(void 0,this.authToken),t,n,e=>r.mapResult(e,!0))}transaction(e,t){return this.session.transaction(e,t)}},ime=class{static[Y]=`Cache`},C6=class extends ime{strategy(){return`all`}static[Y]=`NoopCache`;async get(e){}async put(e,t,n,r){}async onMutate(e){}};async function w6(e,t){let n=`${e}-${JSON.stringify(t)}`,r=new TextEncoder().encode(n),i=await crypto.subtle.digest(`SHA-256`,r);return[...new Uint8Array(i)].map(e=>e.toString(16).padStart(2,`0`)).join(``)}var ame=class{constructor(e,t,n,r){this.query=e,this.cache=t,this.queryMetadata=n,this.cacheConfig=r,t&&t.strategy()===`all`&&r===void 0&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(e,t){return e}setToken(e){return this.authToken=e,this}static[Y]=`PgPreparedQuery`;joinsNotNullableMap;async queryWithCache(e,t,n){if(this.cache===void 0||X(this.cache,C6)||this.queryMetadata===void 0)try{return await n()}catch(n){throw new n6(e,t,n)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await n()}catch(n){throw new n6(e,t,n)}if((this.queryMetadata.type===`insert`||this.queryMetadata.type===`update`||this.queryMetadata.type===`delete`)&&this.queryMetadata.tables.length>0)try{let[e]=await Promise.all([n(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return e}catch(n){throw new n6(e,t,n)}if(!this.cacheConfig)try{return await n()}catch(n){throw new n6(e,t,n)}if(this.queryMetadata.type===`select`){let r=await this.cache.get(this.cacheConfig.tag??await w6(e,t),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(r===void 0){let r;try{r=await n()}catch(n){throw new n6(e,t,n)}return await this.cache.put(this.cacheConfig.tag??await w6(e,t),r,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),r}return r}try{return await n()}catch(n){throw new n6(e,t,n)}}},ome=class{constructor(e){this.dialect=e}static[Y]=`PgSession`;execute(e,t){return e3.startActiveSpan(`drizzle.operation`,()=>e3.startActiveSpan(`drizzle.prepareQuery`,()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(t).execute(void 0,t))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,t){let n=await this.execute(e,t);return Number(n[0].count)}},sme=class extends S6{constructor(e,t,n,r=0){super(e,t,n),this.schema=n,this.nestedIndex=r}static[Y]=`PgTransaction`;rollback(){throw new mpe}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),typeof e.deferrable==`boolean`&&t.push(e.deferrable?`deferrable`:`not deferrable`),Q.raw(t.join(` `))}setTransaction(e){return this.session.execute(Q`set transaction ${this.getTransactionConfigSQL(e)}`)}};const cme=Z4(`careerResult`,[`FRONTEND`,`BACKEND`,`DESIGN`,`FULLSTACK`]),lme=e6(`career`,{id:L3().primaryKey().generatedAlwaysAsIdentity(),name:J3({length:255}).notNull(),email:J3({length:255}).notNull().unique(),year:L3().notNull(),batch:L3().notNull().default(2025),department:J3({length:100}).notNull(),reasonToChooseTech:U3().notNull(),otherInterests:U3().notNull(),result:cme().notNull(),createdAt:U3().notNull().default(`2025-01-01`)});var T6=r(((e,t)=>{t.exports={}})),E6=new Map,D6=new Map,O6=Symbol(`OriginError`);const k6={};var A6=class extends Promise{constructor(e,t,n,r,i={}){let a,o;super((e,t)=>{a=e,o=t}),this.tagged=Array.isArray(e.raw),this.strings=e,this.args=t,this.handler=n,this.canceller=r,this.options=i,this.state=null,this.statement=null,this.resolve=e=>(this.active=!1,a(e)),this.reject=e=>(this.active=!1,o(e)),this.active=!1,this.cancelled=null,this.executed=!1,this.signature=``,this[O6]=this.handler.debug?Error():this.tagged&&ume(this.strings)}get origin(){return(this.handler.debug?this[O6].stack:this.tagged&&D6.has(this.strings)?D6.get(this.strings):D6.set(this.strings,this[O6].stack).get(this.strings))||``}static get[Symbol.species](){return Promise}cancel(){return this.canceller&&=(this.canceller(this),null)}simple(){return this.options.simple=!0,this.options.prepare=!1,this}async readable(){return this.simple(),this.streaming=!0,this}async writable(){return this.simple(),this.streaming=!0,this}cursor(e=1,t){if(this.options.simple=!1,typeof e==`function`&&(t=e,e=1),this.cursorRows=e,typeof t==`function`)return this.cursorFn=t,this;let n;return{[Symbol.asyncIterator]:()=>({next:()=>{if(this.executed&&!this.active)return{done:!0};n&&n();let e=new Promise((e,t)=>{this.cursorFn=t=>(e({value:t,done:!1}),new Promise(e=>n=e)),this.resolve=()=>(this.active=!1,e({done:!0})),this.reject=e=>(this.active=!1,t(e))});return this.execute(),e},return(){return n&&n(k6),{done:!0}}})}}describe(){return this.options.simple=!1,this.onlyDescribe=this.options.prepare=!0,this}stream(){throw Error(`.stream has been renamed to .forEach`)}forEach(e){return this.forEachFn=e,this.handle(),this}raw(){return this.isRaw=!0,this}values(){return this.isRaw=`values`,this}async handle(){!this.executed&&(this.executed=!0)&&await 1&&this.handler(this)}execute(){return this.handle(),this}then(){return this.handle(),super.then.apply(this,arguments)}catch(){return this.handle(),super.catch.apply(this,arguments)}finally(){return this.handle(),super.finally.apply(this,arguments)}};function ume(e){if(E6.has(e))return E6.get(e);let t=Error.stackTraceLimit;return Error.stackTraceLimit=4,E6.set(e,Error()),Error.stackTraceLimit=t,E6.get(e)}var j6=class extends Error{constructor(e){super(e.message),this.name=this.constructor.name,Object.assign(this,e)}};const M6={connection:N6,postgres:P6,generic:F6,notSupported:I6};function N6(e,t,n){let{host:r,port:i}=n||t,a=Object.assign(Error(`write `+e+` `+(t.path||r+`:`+i)),{code:e,errno:e,address:t.path||r},t.path?{}:{port:i});return Error.captureStackTrace(a,N6),a}function P6(e){let t=new j6(e);return Error.captureStackTrace(t,P6),t}function F6(e,t){let n=Object.assign(Error(e+`: `+t),{code:e});return Error.captureStackTrace(n,F6),n}function I6(e){let t=Object.assign(Error(e+` (B) is not supported`),{code:`MESSAGE_NOT_SUPPORTED`,name:e});return Error.captureStackTrace(t,I6),t}const dme={string:{to:25,from:null,serialize:e=>``+e},number:{to:0,from:[21,23,26,700,701],serialize:e=>``+e,parse:e=>+e},json:{to:114,from:[114,3802],serialize:e=>JSON.stringify(e),parse:e=>JSON.parse(e)},boolean:{to:16,from:16,serialize:e=>e===!0?`t`:`f`,parse:e=>e===`t`},date:{to:1184,from:[1082,1114,1184],serialize:e=>(e instanceof Date?e:new Date(e)).toISOString(),parse:e=>new Date(e)},bytea:{to:17,from:17,serialize:e=>`\\x`+Lm.from(e).toString(`hex`),parse:e=>Lm.from(e.slice(2),`hex`)}};var L6=class{then(){Y6()}catch(){Y6()}finally(){Y6()}},R6=class extends L6{constructor(e){super(),this.value=$6(e)}},z6=class extends L6{constructor(e,t,n){super(),this.value=e,this.type=t,this.array=n}},B6=class extends L6{constructor(e,t){super(),this.first=e,this.rest=t}build(e,t,n,r){let i=fme.map(([t,n])=>({fn:n,i:e.search(t)})).sort((e,t)=>e.i-t.i).pop();return i.i===-1?Q6(this.first,r):i.fn(this.first,this.rest,t,n,r)}};function V6(e,t,n,r){let i=e instanceof z6?e.value:e;if(i===void 0&&(e instanceof z6?e.value=r.transform.undefined:i=e=r.transform.undefined,i===void 0))throw M6.generic(`UNDEFINED_VALUE`,`Undefined values are not allowed`);return`$`+n.push(e instanceof z6?(t.push(e.value),e.array?e.array[e.type||e8(e.value)]||e.type||X6(e.value):e.type):(t.push(e),e8(e)))}var H6=Z6(dme);function U6(e,t,n,r,i,a){for(let o=1;o<e.strings.length;o++)t+=W6(t,n,r,i,a)+e.strings[o],n=e.args[o];return t}function W6(e,t,n,r,i){return t instanceof B6?t.build(e,n,r,i):t instanceof A6?G6(t,n,r,i):t instanceof R6?t.value:t&&t[0]instanceof A6?t.reduce((e,t)=>e+` `+G6(t,n,r,i),``):V6(t,n,r,i)}function G6(e,t,n,r){return e.fragment=!0,U6(e,e.strings[0],e.args[0],t,n,r)}function K6(e,t,n,r,i){return e.map(e=>`(`+r.map(r=>W6(`values`,e[r],t,n,i)).join(`,`)+`)`).join(`,`)}function q6(e,t,n,r,i){let a=Array.isArray(e[0]),o=t.length?t.flat():Object.keys(a?e[0]:e);return K6(a?e:[e],n,r,o,i)}function J6(e,t,n,r,i){if(typeof e==`string`&&(e=[e].concat(t)),Array.isArray(e))return Q6(e,i);let a;return(t.length?t.flat():Object.keys(e)).map(t=>(a=e[t],(a instanceof A6?G6(a,n,r,i):a instanceof R6?a.value:V6(a,n,r,i))+` as `+$6(i.transform.column.to?i.transform.column.to(t):t))).join(`,`)}var fme=Object.entries({values:q6,in:(...e)=>{let t=q6(...e);return t===`()`?`(null)`:t},select:J6,as:J6,returning:J6,"\\(":J6,update(e,t,n,r,i){return(t.length?t.flat():Object.keys(e)).map(t=>$6(i.transform.column.to?i.transform.column.to(t):t)+`=`+W6(`values`,e[t],n,r,i))},insert(e,t,n,r,i){let a=t.length?t.flat():Object.keys(Array.isArray(e)?e[0]:e);return`(`+Q6(a,i)+`)values`+K6(Array.isArray(e)?e:[e],n,r,a,i)}}).map(([e,t])=>[RegExp(`((?:^|[\\s(])`+e+`(?:$|[\\s(]))(?![\\s\\S]*\\1)`,`i`),t]);function Y6(){throw M6.generic(`NOT_TAGGED_CALL`,`Query not called as a tagged template literal`)}const pme=H6.serializers,mme=H6.parsers;function X6(e){return Array.isArray(e)?X6(e[0]):typeof e==`string`?1009:0}const hme=function(e){let t=Z6(e||{});return{serializers:Object.assign({},pme,t.serializers),parsers:Object.assign({},mme,t.parsers)}};function Z6(e){return Object.keys(e).reduce((t,n)=>(e[n].from&&[].concat(e[n].from).forEach(r=>t.parsers[r]=e[n].parse),e[n].serialize&&(t.serializers[e[n].to]=e[n].serialize,e[n].from&&[].concat(e[n].from).forEach(r=>t.serializers[r]=e[n].serialize)),t),{parsers:{},serializers:{}})}function Q6(e,{transform:{column:t}}){return e.map(e=>$6(t.to?t.to(e):e)).join(`,`)}const $6=function(e){return`"`+e.replace(/"/g,`""`).replace(/\./g,`"."`)+`"`},e8=function e(t){return t instanceof z6?t.type:t instanceof Date?1184:t instanceof Uint8Array?17:t===!0||t===!1?16:typeof t==`bigint`?20:Array.isArray(t)?e(t[0]):0};var gme=/\\/g,_me=/"/g;function vme(e){return e.replace(gme,`\\\\`).replace(_me,`\\"`)}const yme=function e(t,n,r,i){if(Array.isArray(t)===!1)return t;if(!t.length)return`{}`;let a=t[0],o=i===1020?`;`:`,`;return Array.isArray(a)&&!a.type?`{`+t.map(t=>e(t,n,r,i)).join(o)+`}`:`{`+t.map(e=>{if(e===void 0&&(e=r.transform.undefined,e===void 0))throw M6.generic(`UNDEFINED_VALUE`,`Undefined values are not allowed`);return e===null?`null`:`"`+vme(n?n(e.type?e.value:e):``+e)+`"`}).join(o)+`}`};var t8={i:0,char:null,str:``,quoted:!1,last:0};const bme=function(e,t,n){return t8.i=t8.last=0,n8(t8,e,t,n)};function n8(e,t,n,r){let i=[],a=r===1020?`;`:`,`;for(;e.i<t.length;e.i++){if(e.char=t[e.i],e.quoted)e.char===`\\`?e.str+=t[++e.i]:e.char===`"`?(i.push(n?n(e.str):e.str),e.str=``,e.quoted=t[e.i+1]===`"`,e.last=e.i+2):e.str+=e.char;else if(e.char===`"`)e.quoted=!0;else if(e.char===`{`)e.last=++e.i,i.push(n8(e,t,n,r));else if(e.char===`}`){e.quoted=!1,e.last<e.i&&i.push(n?n(t.slice(e.last,e.i)):t.slice(e.last,e.i)),e.last=e.i+1;break}else e.char===a&&e.p!==`}`&&e.p!==`"`&&(i.push(n?n(t.slice(e.last,e.i)):t.slice(e.last,e.i)),e.last=e.i+1);e.p=e.char}return e.last<e.i&&i.push(n?n(t.slice(e.last,e.i+1)):t.slice(e.last,e.i+1)),i}const r8=e=>{let t=e[0];for(let n=1;n<e.length;n++)t+=e[n]===`_`?e[++n].toUpperCase():e[n];return t},i8=e=>{let t=e[0].toUpperCase();for(let n=1;n<e.length;n++)t+=e[n]===`_`?e[++n].toUpperCase():e[n];return t},a8=e=>e.replace(/_/g,`-`),o8=e=>e.replace(/([A-Z])/g,`_$1`).toLowerCase(),s8=e=>(e.slice(0,1)+e.slice(1).replace(/([A-Z])/g,`_$1`)).toLowerCase(),c8=e=>e.replace(/-/g,`_`);function l8(e){return function t(n,r){return typeof n==`object`&&n&&(r.type===114||r.type===3802)?Array.isArray(n)?n.map(e=>t(e,r)):Object.entries(n).reduce((n,[i,a])=>Object.assign(n,{[e(i)]:t(a,r)}),{}):n}}r8.column={from:r8},r8.value={from:l8(r8)},o8.column={to:o8};const u8={...r8};u8.column.to=o8,i8.column={from:i8},i8.value={from:l8(i8)},s8.column={to:s8};const d8={...i8};d8.column.to=s8,a8.column={from:a8},a8.value={from:l8(a8)},c8.column={to:c8};const f8={...a8};f8.column.to=c8;var p8=class extends Array{constructor(){super(),Object.defineProperties(this,{count:{value:null,writable:!0},state:{value:null,writable:!0},command:{value:null,writable:!0},columns:{value:null,writable:!0},statement:{value:null,writable:!0}})}static get[Symbol.species](){return Array}},m8=xme;function xme(e=[]){let t=e.slice(),n=0;return{get length(){return t.length-n},remove:e=>{let n=t.indexOf(e);return n===-1?null:(t.splice(n,1),e)},push:e=>(t.push(e),e),shift:()=>{let e=t[n++];return n===t.length?(n=0,t=[]):t[n-1]=void 0,e}}}var h8=256,g8=Lm.allocUnsafe(h8),Sme=`BCcDdEFfHPpQSX`.split(``).reduce((e,t)=>{let n=t.charCodeAt(0);return e[t]=()=>(g8[0]=n,_8.i=5,_8),e},{}),_8=Object.assign(Cme,Sme,{N:`\0`,i:0,inc(e){return _8.i+=e,_8},str(e){let t=Lm.byteLength(e);return v8(t),_8.i+=g8.write(e,_8.i,t,`utf8`),_8},i16(e){return v8(2),g8.writeUInt16BE(e,_8.i),_8.i+=2,_8},i32(e,t){return t||t===0?(g8.writeUInt32BE(e,t),_8):(v8(4),g8.writeUInt32BE(e,_8.i),_8.i+=4,_8)},z(e){return v8(e),g8.fill(0,_8.i,_8.i+e),_8.i+=e,_8},raw(e){return g8=Lm.concat([g8.subarray(0,_8.i),e]),_8.i=g8.length,_8},end(e=1){g8.writeUInt32BE(_8.i-e,e);let t=g8.subarray(0,_8.i);return _8.i=0,g8=Lm.allocUnsafe(h8),t}}),$=_8;function v8(e){if(g8.length-_8.i<e){let t=g8,n=t.length;g8=Lm.allocUnsafe(n+(n>>1)+e),t.copy(g8)}}function Cme(){return _8.i=0,_8}var y8=e(T6()),wme=e(T6()),b8=e(T6()),x8=e(T6()),S8=e(T6()),C8=D8,Tme=1,w8=$().S().end(),T8=$().H().end(),Eme=$().i32(8).i32(80877103).end(8),Dme=Lm.concat([$().E().str($.N).i32(0).end(),w8]),Ome=$().D().str(`S`).str($.N).end(),E8=()=>{},kme=new Set([`FetchPreparedStatement`,`RevalidateCachedQuery`,`transformAssignedExpr`]),Ame={83:`severity_local`,86:`severity`,67:`code`,77:`message`,68:`detail`,72:`hint`,80:`position`,112:`internal_position`,113:`internal_query`,87:`where`,115:`schema_name`,116:`table_name`,99:`column_name`,100:`data type_name`,110:`constraint_name`,70:`file`,76:`line`,82:`routine`};function D8(e,t={},{onopen:n=E8,onend:r=E8,onclose:i=E8}={}){let{ssl:a,max:o,user:s,host:c,port:l,database:u,parsers:d,transform:f,onnotice:p,onnotify:m,onparameter:h,max_pipeline:g,keep_alive:_,backoff:v,target_session_attrs:ee}=e,te=m8(),y=Tme++,b={pid:null,secret:null},x=j8(Ge,e.idle_timeout),ne=j8(Ge,e.max_lifetime),re=j8(Fe,e.connect_timeout),S=null,ie,C=new p8,w=Lm.alloc(0),ae=e.fetch_types,oe={},se={},T=Math.random().toString(36).slice(2),ce=1,le=0,E=0,ue=0,de=0,D=0,O=0,fe=0,k=null,pe=null,me=!1,he=null,ge=null,_e=null,ve=null,ye=null,be=null,xe=null,Se=null,A=null,Ce=null,we={queue:t.closed,idleTimer:x,connect(e){_e=e,Be()},terminate:Ke,execute:De,cancel:Ee,end:Ge,count:0,id:y};return t.closed&&t.closed.push(we),we;async function Te(){let t;try{t=e.socket?await Promise.resolve(e.socket(e)):new y8.default.Socket}catch(e){He(e);return}return t.on(`error`,He),t.on(`close`,qe),t.on(`drain`,Le),t}async function Ee({pid:e,secret:t},n,r){try{ie=$().i32(16).i32(80877102).i32(e).i32(t).end(16),await ze(),S.once(`error`,r),S.once(`close`,n)}catch(e){r(e)}}function De(t){if(me)return We(t,M6.connection(`CONNECTION_DESTROYED`,e));if(!t.cancelled)try{return t.state=b,A?te.push(t):(A=t,A.active=!0),Me(t),Ne(Oe(t))&&!t.describeFirst&&!t.cursorFn&&te.length<g&&(!t.options.onexecute||t.options.onexecute(we))}catch(e){return te.length===0&&Ne(w8),Ue(e),!0}}function Oe(e){if(e.parameters.length>=65534)throw M6.generic(`MAX_PARAMETERS_EXCEEDED`,`Max number of parameters (65534) exceeded`);return e.options.simple?$().Q().str(e.statement.string+$.N).end():e.describeFirst?Lm.concat([ke(e),T8]):e.prepare?e.prepared?Ae(e):Lm.concat([ke(e),Ae(e)]):je(e)}function ke(e){return Lm.concat([Nt(e.statement.string,e.parameters,e.statement.types,e.statement.name),Pt(`S`,e.statement.name)])}function Ae(e){return Lm.concat([Mt(e.parameters,e.statement.types,e.statement.name,e.cursorName),e.cursorFn?Ft(``,e.cursorRows):Dme])}function je(e){return Lm.concat([Nt(e.statement.string,e.parameters,e.statement.types),Ome,Ae(e)])}function Me(t){let n=[],r=[],i=U6(t,t.strings[0],t.args[0],n,r,e);!t.tagged&&t.args.forEach(t=>V6(t,n,r,e)),t.prepare=e.prepare&&(`prepare`in t.options?t.options.prepare:!0),t.string=i,t.signature=t.prepare&&r+i,t.onlyDescribe&&delete se[t.signature],t.parameters=t.parameters||n,t.prepared=t.prepare&&t.signature in se,t.describeFirst=t.onlyDescribe||n.length&&!t.prepared,t.statement=t.prepared?se[t.signature]:{string:i,types:r,name:t.prepare?T+ ce++:``},typeof e.debug==`function`&&e.debug(y,i,n,r)}function Ne(e,t){return be=be?Lm.concat([be,e]):Lm.from(e),t||be.length>=1024?Pe(t):(pe===null&&(pe=setImmediate(Pe)),!0)}function Pe(e){let t=S.write(be,e);return pe!==null&&clearImmediate(pe),be=pe=null,t}function Fe(){Ue(M6.connection(`CONNECT_TIMEOUT`,e,S)),S.destroy()}async function Ie(){if(Ne(Eme),!await new Promise(e=>S.once(`data`,t=>e(t[0]===83)))&&a===`prefer`)return Ve();S.removeAllListeners(),S=wme.default.connect({socket:S,servername:y8.default.isIP(S.host)?void 0:S.host,...a===`require`||a===`allow`||a===`prefer`?{rejectUnauthorized:!1}:a===`verify-full`?{}:typeof a==`object`?a:{}}),S.on(`secureConnect`,Ve),S.on(`error`,He),S.on(`close`,qe),S.on(`drain`,Le)}function Le(){!A&&n(we)}function Re(e){if(!(he&&(he.push(e),E-=e.length,E>0)))for(w=he?Lm.concat(he,D-E):w.length===0?e:Lm.concat([w,e],w.length+e.length);w.length>4;){if(D=w.readUInt32BE(1),D>=w.length){E=D-w.length,he=[w];break}try{Je(w.subarray(0,D+1))}catch(e){A&&(A.cursorFn||A.describeFirst)&&Ne(w8),Ue(e)}w=w.subarray(D+1),E=0,he=null}}async function ze(){if(me=!1,oe={},S||=await Te(),S){if(re.start(),e.socket)return a?Ie():Ve();if(S.on(`connect`,a?Ie:Ve),e.path)return S.connect(e.path);S.ssl=a,S.connect(l[ue],c[ue]),S.host=c[ue],S.port=l[ue],ue=(ue+1)%l.length}}function Be(){setTimeout(ze,le?le+O-S8.performance.now():0)}function Ve(){try{se={},ae=e.fetch_types,T=Math.random().toString(36).slice(2),ce=1,ne.start(),S.on(`data`,Re),_&&S.setKeepAlive&&S.setKeepAlive(!0,1e3*_),Ne(Lt())}catch(e){He(e)}}function He(n){if(!(we.queue===t.connecting&&e.host[de+1]))for(Ue(n);te.length;)We(te.shift(),n)}function Ue(e){ye&&=(ye.destroy(e),null),A&&We(A,e),_e&&=(We(_e,e),null)}function We(t,n){if(t.reserve)return t.reject(n);(!n||typeof n!=`object`)&&(n=Error(n)),`query`in n||`parameters`in n||Object.defineProperties(n,{stack:{value:n.stack+t.origin.replace(/.*\n/,`
`),enumerable:e.debug},query:{value:t.string,enumerable:e.debug},parameters:{value:t.parameters,enumerable:e.debug},args:{value:t.args,enumerable:e.debug},types:{value:t.statement&&t.statement.types,enumerable:e.debug}}),t.reject(n)}function Ge(){return ve||(!we.reserved&&r(we),!we.reserved&&!_e&&!A&&te.length===0?(Ke(),new Promise(e=>S&&S.readyState!==`closed`?S.once(`close`,e):e())):ve=new Promise(e=>xe=e))}function Ke(){me=!0,(ye||A||_e||te.length)&&He(M6.connection(`CONNECTION_DESTROYED`,e)),clearImmediate(pe),S&&(S.removeListener(`data`,Re),S.removeListener(`connect`,Ve),S.readyState===`open`&&S.end($().X().end())),xe&&(xe(),ve=xe=null)}async function qe(t){if(w=Lm.alloc(0),E=0,he=null,clearImmediate(pe),S.removeListener(`data`,Re),S.removeListener(`connect`,Ve),x.cancel(),ne.cancel(),re.cancel(),S.removeAllListeners(),S=null,_e)return Be();!t&&(A||te.length)&&He(M6.connection(`CONNECTION_CLOSED`,e,S)),le=S8.performance.now(),t&&e.shared.retries++,O=(typeof v==`function`?v(e.shared.retries):v)*1e3,i(we,M6.connection(`CONNECTION_CLOSED`,e,S))}function Je(e,t=e[0]){(t===68?Ye:t===100?wt:t===65?vt:t===83?Xe:t===90?Ze:t===67?Qe:t===50?et:t===49?$e:t===116?tt:t===84?nt:t===82?rt:t===110?ut:t===75?dt:t===69?gt:t===115?yt:t===51?bt:t===71?xt:t===78?Et:t===72?St:t===99?Tt:t===73?Dt:t===86?Ot:t===118?kt:t===87?Ct:At)(e)}function Ye(e){let t=7,n,r,i,a=A.isRaw?Array(A.statement.columns.length):{};for(let o=0;o<A.statement.columns.length;o++)r=A.statement.columns[o],n=e.readInt32BE(t),t+=4,i=n===-1?null:A.isRaw===!0?e.subarray(t,t+=n):r.parser===void 0?e.toString(`utf8`,t,t+=n):r.parser.array===!0?r.parser(e.toString(`utf8`,t+1,t+=n)):r.parser(e.toString(`utf8`,t,t+=n)),A.isRaw?a[o]=A.isRaw===!0?i:f.value.from?f.value.from(i,r):i:a[r.name]=f.value.from?f.value.from(i,r):i;A.forEachFn?A.forEachFn(f.row.from?f.row.from(a):a,C):C[fe++]=f.row.from?f.row.from(a):a}function Xe(t){let[n,r]=t.toString(`utf8`,5,t.length-1).split($.N);oe[n]=r,e.parameters[n]!==r&&(e.parameters[n]=r,h&&h(n,r))}function Ze(t){if(A&&A.options.simple&&A.resolve(ge||C),A=ge=null,C=new p8,re.cancel(),_e){if(ee){if(!oe.in_hot_standby||!oe.default_transaction_read_only)return ht();if(mt(ee,oe))return Ke()}if(ae)return _e.reserve&&(_e=null),ft();_e&&!_e.reserve&&De(_e),e.shared.retries=de=0,_e=null;return}for(;te.length&&(A=te.shift())&&(A.active=!0,A.cancelled);)D8(e).cancel(A.state,A.cancelled.resolve,A.cancelled.reject);A||(we.reserved?!we.reserved.release&&t[5]===73?ve?Ke():(we.reserved=null,n(we)):we.reserved():ve?Ke():n(we))}function Qe(e){fe=0;for(let t=e.length-1;t>0;t--)if(e[t]===32&&e[t+1]<58&&C.count===null&&(C.count=+e.toString(`utf8`,t+1,e.length-1)),e[t-1]>=65){C.command=e.toString(`utf8`,5,t),C.state=b;break}if(Ce&&=(Ce(),null),C.command===`BEGIN`&&o!==1&&!we.reserved)return Ue(M6.generic(`UNSAFE_TRANSACTION`,`Only use sql.begin, sql.reserved or max: 1`));if(A.options.simple)return et();A.cursorFn&&(C.count&&A.cursorFn(C),Ne(w8)),A.resolve(C)}function $e(){A.parsing=!1}function et(){!C.statement&&(C.statement=A.statement),C.columns=A.statement.columns}function tt(e){let t=e.readUInt16BE(5);for(let n=0;n<t;++n)!A.statement.types[n]&&(A.statement.types[n]=e.readUInt32BE(7+n*4));A.prepare&&(se[A.signature]=A.statement),A.describeFirst&&!A.onlyDescribe&&(Ne(Ae(A)),A.describeFirst=!1)}function nt(e){C.command&&(ge||=[C],ge.push(C=new p8),C.count=null,A.statement.columns=null);let t=e.readUInt16BE(5),n=7,r;A.statement.columns=Array(t);for(let i=0;i<t;++i){for(r=n;e[n++]!==0;);let t=e.readUInt32BE(n),a=e.readUInt16BE(n+4),o=e.readUInt32BE(n+6);A.statement.columns[i]={name:f.column.from?f.column.from(e.toString(`utf8`,r,n-1)):e.toString(`utf8`,r,n-1),parser:d[o],table:t,number:a,type:o},n+=18}if(C.statement=A.statement,A.onlyDescribe)return A.resolve(A.statement),Ne(w8)}async function rt(e,t=e.readUInt32BE(5)){(t===3?it:t===5?at:t===10?ot:t===11?st:t===12?ct:t===0?E8:jt)(e,t)}async function it(){let e=await lt();Ne($().p().str(e).z(1).end())}async function at(e){let t=`md5`+await k8(Lm.concat([Lm.from(await k8(await lt()+s)),e.subarray(9)]));Ne($().p().str(t).z(1).end())}async function ot(){Se=(await b8.default.randomBytes(18)).toString(`base64`),$().p().str(`SCRAM-SHA-256`+$.N);let e=$.i;Ne($.inc(4).str(`n,,n=*,r=`+Se).i32($.i-e-4,e).end())}async function st(e){let t=e.toString(`utf8`,9).split(`,`).reduce((e,t)=>(e[t[0]]=t.slice(2),e),{}),n=await b8.default.pbkdf2Sync(await lt(),Lm.from(t.s,`base64`),parseInt(t.i),32,`sha256`),r=await A8(n,`Client Key`),i=`n=*,r=`+Se+`,r=`+t.r+`,s=`+t.s+`,i=`+t.i+`,c=biws,r=`+t.r;k=(await A8(await A8(n,`Server Key`),i)).toString(`base64`);let a=`c=biws,r=`+t.r+`,p=`+Mme(r,Lm.from(await A8(await jme(r),i))).toString(`base64`);Ne($().p().str(a).end())}function ct(e){e.toString(`utf8`,9).split($.N,1)[0].slice(2)!==k&&(Ue(M6.generic(`SASL_SIGNATURE_MISMATCH`,`The server did not return the correct signature`)),S.destroy())}function lt(){return Promise.resolve(typeof e.pass==`function`?e.pass():e.pass)}function ut(){if(C.statement=A.statement,C.statement.columns=[],A.onlyDescribe)return A.resolve(A.statement),Ne(w8)}function dt(e){b.pid=e.readUInt32BE(5),b.secret=e.readUInt32BE(9)}async function ft(){ae=!1,(await new A6([`
      select b.oid, b.typarray
      from pg_catalog.pg_type a
      left join pg_catalog.pg_type b on b.oid = a.typelem
      where a.typcategory = 'A'
      group by b.oid, b.typarray
      order by b.oid
    `],[],De)).forEach(({oid:e,typarray:t})=>pt(e,t))}function pt(t,n){if(e.parsers[n]&&e.serializers[n])return;let r=e.parsers[t];e.shared.typeArrayMap[t]=n,e.parsers[n]=e=>bme(e,r,n),e.parsers[n].array=!0,e.serializers[n]=r=>yme(r,e.serializers[t],e,n)}function mt(t,n){return t===`read-write`&&n.default_transaction_read_only===`on`||t===`read-only`&&n.default_transaction_read_only===`off`||t===`primary`&&n.in_hot_standby===`on`||t===`standby`&&n.in_hot_standby===`off`||t===`prefer-standby`&&n.in_hot_standby===`off`&&e.host[de]}function ht(){let e=new A6([`
      show transaction_read_only;
      select pg_catalog.pg_is_in_recovery()
    `],[],De,null,{simple:!0});e.resolve=([[e],[t]])=>{oe.default_transaction_read_only=e.transaction_read_only,oe.in_hot_standby=t.pg_is_in_recovery?`on`:`off`},e.execute()}function gt(e){A&&(A.cursorFn||A.describeFirst)&&Ne(w8);let t=M6.postgres(O8(e));A&&A.retried?Ue(A.retried):A&&A.prepared&&kme.has(t.routine)?_t(A,t):Ue(t)}function _t(e,t){delete se[e.signature],e.retried=t,De(e)}function vt(e){if(!m)return;let t=9;for(;e[t++]!==0;);m(e.toString(`utf8`,9,t-1),e.toString(`utf8`,t,e.length-1))}async function yt(){try{let e=await Promise.resolve(A.cursorFn(C));fe=0,e===k6?Ne(It(A.portal)):(C=new p8,Ne(Ft(``,A.cursorRows)))}catch(e){Ne(w8),A.reject(e)}}function bt(){C.count&&A.cursorFn(C),A.resolve(C)}function xt(){ye=new x8.default.Writable({autoDestroy:!0,write(e,t,n){S.write($().d().raw(e).end(),n)},destroy(e,t){t(e),S.write($().f().str(e+$.N).end()),ye=null},final(e){S.write($().c().end()),Ce=e}}),A.resolve(ye)}function St(){ye=new x8.default.Readable({read(){S.resume()}}),A.resolve(ye)}function Ct(){ye=new x8.default.Duplex({autoDestroy:!0,read(){S.resume()},write(e,t,n){S.write($().d().raw(e).end(),n)},destroy(e,t){t(e),S.write($().f().str(e+$.N).end()),ye=null},final(e){S.write($().c().end()),Ce=e}}),A.resolve(ye)}function wt(e){ye&&(ye.push(e.subarray(5))||S.pause())}function Tt(){ye&&ye.push(null),ye=null}function Et(e){p?p(O8(e)):console.log(O8(e))}function Dt(){}function Ot(){Ue(M6.notSupported(`FunctionCallResponse`))}function kt(){Ue(M6.notSupported(`NegotiateProtocolVersion`))}function At(e){console.error(`Postgres.js : Unknown Message:`,e[0])}function jt(e,t){console.error(`Postgres.js : Unknown Auth:`,t)}function Mt(t,n,r=``,i=``){let a,o;return $().B().str(i+$.N).str(r+$.N).i16(0).i16(t.length),t.forEach((r,i)=>{if(r===null)return $.i32(4294967295);o=n[i],t[i]=r=o in e.serializers?e.serializers[o](r):``+r,a=$.i,$.inc(4).str(r).i32($.i-a-4,a)}),$.i16(0),$.end()}function Nt(e,t,n,r=``){return $().P().str(r+$.N).str(e+$.N).i16(t.length),t.forEach((e,t)=>$.i32(n[t]||0)),$.end()}function Pt(e,t=``){return $().D().str(e).str(t+$.N).end()}function Ft(e=``,t=0){return Lm.concat([$().E().str(e+$.N).i32(t).end(),T8])}function It(e=``){return Lm.concat([$().C().str(`P`).str(e+$.N).end(),$().S().end()])}function Lt(){return ie||$().inc(4).i16(3).z(2).str(Object.entries(Object.assign({user:s,database:u,client_encoding:`UTF8`},e.connection)).filter(([,e])=>e).map(([e,t])=>e+$.N+t).join($.N)).z(2).end(0)}}function O8(e){let t={},n=5;for(let r=5;r<e.length-1;r++)e[r]===0&&(t[Ame[e[n]]]=e.toString(`utf8`,n+1,r),n=r+1);return t}function k8(e){return b8.default.createHash(`md5`).update(e).digest(`hex`)}function A8(e,t){return b8.default.createHmac(`sha256`,e).update(t).digest()}function jme(e){return b8.default.createHash(`sha256`).update(e).digest()}function Mme(e,t){let n=Math.max(e.length,t.length),r=Lm.allocUnsafe(n);for(let i=0;i<n;i++)r[i]=e[i]^t[i];return r}function j8(e,t){if(t=typeof t==`function`?t():t,!t)return{cancel:E8,start:E8};let n;return{cancel(){n&&=(clearTimeout(n),null)},start(){n&&clearTimeout(n),n=setTimeout(r,t*1e3,arguments)}};function r(t){e.apply(null,t),n=null}}var M8=()=>{};function Nme(e,t){let n=new Map,r=`postgresjs_`+Math.random().toString(36).slice(2),i={},a,o,s=!1,c=d.sql=e({...t,transform:{column:{},value:{},row:{}},max:1,fetch_types:!1,idle_timeout:null,max_lifetime:null,connection:{...t.connection,replication:`database`},onclose:async function(){s||(o=null,i.pid=i.secret=void 0,f(await p(c,r,t.publications)),n.forEach(e=>e.forEach(({onsubscribe:e})=>e())))},no_subscribe:!0}),l=c.end,u=c.close;return c.end=async()=>(s=!0,o&&await new Promise(e=>(o.once(`close`,e),o.end())),l()),c.close=async()=>(o&&await new Promise(e=>(o.once(`close`,e),o.end())),u()),d;async function d(e,s,l=M8,u=M8){e=Ime(e),a||=p(c,r,t.publications);let d={fn:s,onsubscribe:l},m=n.has(e)?n.get(e).add(d):n.set(e,new Set([d])).get(e),h=()=>{m.delete(d),m.size===0&&n.delete(e)};return a.then(e=>(f(e),l(),o&&o.on(`error`,u),{unsubscribe:h,state:i,sql:c}))}function f(e){o=e.stream,i.pid=e.state.pid,i.secret=e.state.secret}async function p(e,n,r){if(!r)throw Error(`Missing publication names`);let i=await e.unsafe(`CREATE_REPLICATION_SLOT ${n} TEMPORARY LOGICAL pgoutput NOEXPORT_SNAPSHOT`),[a]=i,o=await e.unsafe(`START_REPLICATION SLOT ${n} LOGICAL ${a.consistent_point} (proto_version '1', publication_names '${r}')`).writable(),s={lsn:Lm.concat(a.consistent_point.split(`/`).map(e=>Lm.from((`00000000`+e).slice(-8),`hex`)))};return o.on(`data`,l),o.on(`error`,c),o.on(`close`,e.close),{stream:o,state:i.state};function c(e){console.error(`Unexpected error during logical streaming - reconnecting`,e)}function l(n){n[0]===119?Fme(n.subarray(25),s,e.options.parsers,u,t.transform):n[0]===107&&n[17]&&(s.lsn=n.subarray(1,9),d())}function u(e,t){let n=t.relation.schema+`.`+t.relation.table;m(`*`,e,t),m(`*:`+n,e,t),t.relation.keys.length&&m(`*:`+n+`=`+t.relation.keys.map(t=>e[t.name]),e,t),m(t.command,e,t),m(t.command+`:`+n,e,t),t.relation.keys.length&&m(t.command+`:`+n+`=`+t.relation.keys.map(t=>e[t.name]),e,t)}function d(){let e=Lm.alloc(34);e[0]=114,e.fill(s.lsn,1),e.writeBigInt64BE(BigInt(Date.now()-Date.UTC(2e3,0,1))*BigInt(1e3),25),o.write(e)}}function m(e,t,r){n.has(e)&&n.get(e).forEach(({fn:n})=>n(t,r,e))}}function Pme(e){return new Date(Date.UTC(2e3,0,1)+Number(e/BigInt(1e3)))}function Fme(e,t,n,r,i){Object.entries({R:e=>{let r=1,a=t[e.readUInt32BE(r)]={schema:e.toString(`utf8`,r+=4,r=e.indexOf(0,r))||`pg_catalog`,table:e.toString(`utf8`,r+1,r=e.indexOf(0,r+1)),columns:Array(e.readUInt16BE(r+=2)),keys:[]};r+=2;let o=0,s;for(;r<e.length;)s=a.columns[o++]={key:e[r++],name:i.column.from?i.column.from(e.toString(`utf8`,r,r=e.indexOf(0,r))):e.toString(`utf8`,r,r=e.indexOf(0,r)),type:e.readUInt32BE(r+=1),parser:n[e.readUInt32BE(r)],atttypmod:e.readUInt32BE(r+=4)},s.key&&a.keys.push(s),r+=4},Y:()=>{},O:()=>{},B:e=>{t.date=Pme(e.readBigInt64BE(9)),t.lsn=e.subarray(1,9)},I:e=>{let n=1,a=t[e.readUInt32BE(n)],{row:o}=N8(e,a.columns,n+=7,i);r(o,{command:`insert`,relation:a})},D:e=>{let n=1,a=t[e.readUInt32BE(n)];n+=4;let o=e[n]===75;r(o||e[n]===79?N8(e,a.columns,n+=3,i).row:null,{command:`delete`,relation:a,key:o})},U:e=>{let n=1,a=t[e.readUInt32BE(n)];n+=4;let o=e[n]===75,s=o||e[n]===79?N8(e,a.columns,n+=3,i):null;s&&(n=s.i);let{row:c}=N8(e,a.columns,n+3,i);r(c,{command:`update`,relation:a,key:o,old:s&&s.row})},T:()=>{},C:()=>{}}).reduce((e,[t,n])=>(e[t.charCodeAt(0)]=n,e),{})[e[0]](e)}function N8(e,t,n,r){let i,a,o,s=r.raw?Array(t.length):{};for(let c=0;c<t.length;c++)i=e[n++],a=t[c],o=i===110?null:i===117?void 0:a.parser===void 0?e.toString(`utf8`,n+4,n+=4+e.readUInt32BE(n)):a.parser.array===!0?a.parser(e.toString(`utf8`,n+5,n+=4+e.readUInt32BE(n))):a.parser(e.toString(`utf8`,n+4,n+=4+e.readUInt32BE(n))),r.raw?s[c]=r.raw===!0?o:r.value.from?r.value.from(o,a):o:s[a.name]=r.value.from?r.value.from(o,a):o;return{i:n,row:r.row.from?r.row.from(s):s}}function Ime(e){let t=e.match(/^(\*|insert|update|delete)?:?([^.]+?\.?[^=]+)?=?(.+)?/i)||[];if(!t)throw Error(`Malformed subscribe pattern: `+e);let[,n,r,i]=t;return(n||`*`)+(r?`:`+(r.indexOf(`.`)===-1?`public.`+r:r):``)+(i?`=`+i:``)}var P8=e(T6());function Lme(e,t,n=393216){return new Promise(async(r,i)=>{await e.begin(async e=>{let i;!t&&([{oid:t}]=await e`select lo_creat(-1) as oid`);let[{fd:a}]=await e`select lo_open(${t}, ${n}) as fd`,o={writable:c,readable:s,close:()=>e`select lo_close(${a})`.then(i),tell:()=>e`select lo_tell64(${a})`,read:t=>e`select loread(${a}, ${t}) as data`,write:t=>e`select lowrite(${a}, ${t})`,truncate:t=>e`select lo_truncate64(${a}, ${t})`,seek:(t,n=0)=>e`select lo_lseek64(${a}, ${t}, ${n})`,size:()=>e`
          select
            lo_lseek64(${a}, location, 0) as position,
            seek.size
          from (
            select
              lo_lseek64($1, 0, 2) as size,
              tell.location
            from (select lo_tell64($1) as location) tell
          ) seek
        `};return r(o),new Promise(async e=>i=e);async function s({highWaterMark:e=2048*8,start:t=0,end:n=1/0}={}){let r=n-t;return t&&await o.seek(t),new P8.default.Readable({highWaterMark:e,async read(e){let t=e>r?e-r:e;r-=e;let[{data:n}]=await o.read(t);this.push(n),n.length<e&&this.push(null)}})}async function c({highWaterMark:e=2048*8,start:t=0}={}){return t&&await o.seek(t),new P8.default.Writable({highWaterMark:e,write(e,t,n){o.write(e).then(()=>n(),n)}})}}).catch(i)})}var Rme=e(T6()),zme=e(T6());Object.assign(I8,{PostgresError:j6,toPascal:i8,pascal:d8,toCamel:r8,camel:u8,toKebab:a8,kebab:f8,fromPascal:s8,fromCamel:o8,fromKebab:c8,BigInt:{to:20,from:[20],parse:e=>BigInt(e),serialize:e=>e.toString()}});var F8=I8;function I8(e,t){let n=Bme(e,t),r=n.no_subscribe||Nme(I8,{...n}),i=!1,a=m8(),o=m8(),s=m8(),c=m8(),l=m8(),u=m8(),d=m8(),f=m8(),p={connecting:o,reserved:s,closed:c,ended:l,open:u,busy:d,full:f},m=[...Array(n.max)].map(()=>C8(n,p,{onopen:se,onend:oe,onclose:T})),h=g(ne);return Object.assign(h,{get parameters(){return n.parameters},largeObject:Lme.bind(null,h),subscribe:r,CLOSE:k6,END:k6,PostgresError:j6,options:n,reserve:ee,listen:_,begin:te,close:C,end:ie}),h;function g(e){return e.debug=n.debug,Object.entries(n.types).reduce((e,[t,n])=>(e[t]=e=>new z6(e,n.to),e),t),Object.assign(r,{types:t,typed:t,unsafe:i,notify:v,array:x,json:b,file:a}),r;function t(e,t){return new z6(e,t)}function r(t,...r){return t&&Array.isArray(t.raw)?new A6(t,r,e,S):typeof t==`string`&&!r.length?new R6(n.transform.column.to?n.transform.column.to(t):t):new B6(t,r)}function i(t,n=[],r={}){return arguments.length===2&&!Array.isArray(n)&&(r=n,n=[]),new A6([t],n,e,S,{prepare:!1,...r,simple:`simple`in r?r.simple:n.length===0})}function a(t,n=[],r={}){return arguments.length===2&&!Array.isArray(n)&&(r=n,n=[]),new A6([],n,n=>{zme.default.readFile(t,`utf8`,(t,r)=>{if(t)return n.reject(t);n.strings=[r],e(n)})},S,{...r,simple:`simple`in r?r.simple:n.length===0})}}async function _(e,t,r){let i={fn:t,onlisten:r},a=_.sql||=I8({...n,max:1,idle_timeout:null,max_lifetime:null,fetch_types:!1,onclose(){Object.entries(_.channels).forEach(([e,{listeners:t}])=>{delete _.channels[e],Promise.all(t.map(t=>_(e,t.fn,t.onlisten).catch(()=>{})))})},onnotify(e,t){e in _.channels&&_.channels[e].listeners.forEach(e=>e.fn(t))}}),o=_.channels||={};if(e in o){o[e].listeners.push(i);let t=await o[e].result;return i.onlisten&&i.onlisten(),{state:t.state,unlisten:c}}o[e]={result:a`listen ${a.unsafe(`"`+e.replace(/"/g,`""`)+`"`)}`,listeners:[i]};let s=await o[e].result;return i.onlisten&&i.onlisten(),{state:s.state,unlisten:c};async function c(){if(e in o&&(o[e].listeners=o[e].listeners.filter(e=>e!==i),!o[e].listeners.length))return delete o[e],a`unlisten ${a.unsafe(`"`+e.replace(/"/g,`""`)+`"`)}`}}async function v(e,t){return await h`select pg_notify(${e}, ${``+t})`}async function ee(){let e=m8(),t=u.length?u.shift():await new Promise((e,t)=>{let n={reserve:e,reject:t};a.push(n),c.length&&ae(c.shift(),n)});y(t,s),t.reserved=()=>e.length?t.execute(e.shift()):y(t,s),t.reserved.release=!0;let n=g(r);return n.release=()=>{t.reserved=null,se(t)},n;function r(n){t.queue===f?e.push(n):t.execute(n)||y(t,f)}}async function te(e,t){!t&&(t=e,e=``);let n=m8(),r=0,i,a=null;try{return await h.unsafe(`begin `+e.replace(/[^a-z ]/gi,``),[],{onexecute:c}).execute(),await Promise.race([o(i,t),new Promise((e,t)=>i.onclose=t)])}catch(e){throw e}async function o(e,t,i){let s=g(d);s.savepoint=u,s.prepare=e=>a=e.replace(/[^a-z0-9$-_. ]/gi);let c,l;i&&await s`savepoint ${s(i)}`;try{if(l=await new Promise((e,n)=>{let r=t(s);Promise.resolve(Array.isArray(r)?Promise.all(r):r).then(e,n)}),c)throw c}catch(e){throw await(i?s`rollback to ${s(i)}`:s`rollback`),e instanceof j6&&e.code===`25P02`&&c||e}return i||(a?await s`prepare transaction '${s.unsafe(a)}'`:await s`commit`),l;function u(t,n){return t&&Array.isArray(t.raw)?u(e=>e.apply(e,arguments)):(arguments.length===1&&(n=t,t=null),o(e,n,`s`+ r+++(t?`_`+t:``)))}function d(t){t.catch(e=>c||=e),e.queue===f?n.push(t):e.execute(t)||y(e,f)}}function c(e){i=e,y(e,s),e.reserved=()=>n.length?e.execute(n.shift()):y(e,s)}}function y(e,t){return e.queue.remove(e),t.push(e),e.queue=t,t===u?e.idleTimer.start():e.idleTimer.cancel(),e}function b(e){return new z6(e,3802)}function x(e,t){return Array.isArray(e)?new z6(e,t||(e.length?e8(e)||25:0),n.shared.typeArrayMap):x(Array.from(arguments))}function ne(e){if(i)return e.reject(M6.connection(`CONNECTION_ENDED`,n,n));if(u.length)return re(u.shift(),e);if(c.length)return ae(c.shift(),e);d.length?re(d.shift(),e):a.push(e)}function re(e,t){return e.execute(t)?y(e,d):y(e,f)}function S(e){return new Promise((t,r)=>{e.state?e.active?C8(n).cancel(e.state,t,r):e.cancelled={resolve:t,reject:r}:(a.remove(e),e.cancelled=!0,e.reject(M6.generic(`57014`,`canceling statement due to user request`)),t())})}async function ie({timeout:e=null}={}){if(i)return i;await 1;let t;return i=Promise.race([new Promise(n=>e!==null&&(t=setTimeout(w,e*1e3,n))),Promise.all(m.map(e=>e.end()).concat(_.sql?_.sql.end({timeout:0}):[],r.sql?r.sql.end({timeout:0}):[]))]).then(()=>clearTimeout(t))}async function C(){await Promise.all(m.map(e=>e.end()))}async function w(e){for(await Promise.all(m.map(e=>e.terminate()));a.length;)a.shift().reject(M6.connection(`CONNECTION_DESTROYED`,n));e()}function ae(e,t){return y(e,o),e.connect(t),e}function oe(e){y(e,l)}function se(e){if(a.length===0)return y(e,u);let t=Math.ceil(a.length/(o.length+1)),n=!0;for(;n&&a.length&&t-- >0;){let t=a.shift();if(t.reserve)return t.reserve(e);n=e.execute(t)}n?y(e,d):y(e,f)}function T(e,t){y(e,c),e.reserved=null,e.onclose&&=(e.onclose(t),null),n.onclose&&n.onclose(e.id),a.length&&ae(e,a.shift())}}function Bme(e,t){if(e&&e.shared)return e;let n={},r=(!e||typeof e==`string`?t:e)||{},{url:i,multihost:a}=Gme(e),o=[...i.searchParams].reduce((e,[t,n])=>(e[t]=n,e),{}),s=r.hostname||r.host||a||i.hostname||n.PGHOST||`localhost`,c=r.port||i.port||n.PGPORT||5432,l=r.user||r.username||i.username||n.PGUSERNAME||n.PGUSER||Kme();r.no_prepare&&(r.prepare=!1),o.sslmode&&(o.ssl=o.sslmode,delete o.sslmode),`timeout`in r&&(console.log(`The timeout option is deprecated, use idle_timeout instead`),r.idle_timeout=r.timeout),o.sslrootcert===`system`&&(o.ssl=`verify-full`);let u=[`idle_timeout`,`connect_timeout`,`max_lifetime`,`max_pipeline`,`backoff`,`keep_alive`],d={max:10,ssl:!1,idle_timeout:null,connect_timeout:30,max_lifetime:Ume,max_pipeline:100,backoff:Hme,keep_alive:60,prepare:!0,debug:!1,fetch_types:!0,publications:`alltables`,target_session_attrs:null};return{host:Array.isArray(s)?s:s.split(`,`).map(e=>e.split(`:`)[0]),port:Array.isArray(c)?c:s.split(`,`).map(e=>parseInt(e.split(`:`)[1]||c)),path:r.path||s.indexOf(`/`)>-1&&s+`/.s.PGSQL.`+c,database:r.database||r.db||(i.pathname||``).slice(1)||n.PGDATABASE||l,user:l,pass:r.pass||r.password||i.password||n.PGPASSWORD||``,...Object.entries(d).reduce((e,[t,i])=>{let a=t in r?r[t]:t in o?o[t]===`disable`||o[t]===`false`?!1:o[t]:n[`PG`+t.toUpperCase()]||i;return e[t]=typeof a==`string`&&u.includes(t)?+a:a,e},{}),connection:{application_name:n.PGAPPNAME||`postgres.js`,...r.connection,...Object.entries(o).reduce((e,[t,n])=>(t in d||(e[t]=n),e),{})},types:r.types||{},target_session_attrs:Vme(r,i,n),onnotice:r.onnotice,onnotify:r.onnotify,onclose:r.onclose,onparameter:r.onparameter,socket:r.socket,transform:Wme(r.transform||{undefined:void 0}),parameters:{},shared:{retries:0,typeArrayMap:{}},...hme(r.types)}}function Vme(e,t,n){let r=e.target_session_attrs||t.searchParams.get(`target_session_attrs`)||n.PGTARGETSESSIONATTRS;if(!r||[`read-write`,`read-only`,`primary`,`standby`,`prefer-standby`].includes(r))return r;throw Error(`target_session_attrs `+r+` is not supported`)}function Hme(e){return(.5+Math.random()/2)*Math.min(3**e/100,20)}function Ume(){return 60*(30+Math.random()*30)}function Wme(e){return{undefined:e.undefined,column:{from:typeof e.column==`function`?e.column:e.column&&e.column.from,to:e.column&&e.column.to},value:{from:typeof e.value==`function`?e.value:e.value&&e.value.from,to:e.value&&e.value.to},row:{from:typeof e.row==`function`?e.row:e.row&&e.row.from,to:e.row&&e.row.to}}}function Gme(e){if(!e||typeof e!=`string`)return{url:{searchParams:new Map}};let t=e;t=t.slice(t.indexOf(`://`)+3).split(/[?/]/)[0],t=decodeURIComponent(t.slice(t.indexOf(`@`)+1));let n=new URL(e.replace(t,t.split(`,`)[0]));return{url:{username:decodeURIComponent(n.username),password:decodeURIComponent(n.password),host:n.host,hostname:n.hostname,port:n.port,pathname:n.pathname,searchParams:n.searchParams},multihost:t.indexOf(`,`)>-1&&t}}function Kme(){try{return Rme.default.userInfo().username}catch{return{}.USERNAME||{}.USER||{}.LOGNAME}}var qme=class{static[Y]=`ConsoleLogWriter`;write(e){console.log(e)}},Jme=class{static[Y]=`DefaultLogger`;writer;constructor(e){this.writer=e?.writer??new qme}logQuery(e,t){let n=t.map(e=>{try{return JSON.stringify(e)}catch{return String(e)}}),r=n.length?` -- params: [${n.join(`, `)}]`:``;this.writer.write(`Query: ${e}${r}`)}},Yme=class{static[Y]=`NoopLogger`;logQuery(){}},Xme=class extends ame{constructor(e,t,n,r,i,a,o,s,c,l){super({sql:t,params:n},i,a,o),this.client=e,this.queryString=t,this.params=n,this.logger=r,this.fields=s,this._isResponseInArrayMode=c,this.customResultMapper=l}static[Y]=`PostgresJsPreparedQuery`;async execute(e={}){return e3.startActiveSpan(`drizzle.execute`,async t=>{let n=y3(this.params,e);t?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(n)}),this.logger.logQuery(this.queryString,n);let{fields:r,queryString:i,client:a,joinsNotNullableMap:o,customResultMapper:s}=this;if(!r&&!s)return e3.startActiveSpan(`drizzle.driver.execute`,()=>this.queryWithCache(i,n,async()=>await a.unsafe(i,n)));let c=await e3.startActiveSpan(`drizzle.driver.execute`,()=>(t?.setAttributes({"drizzle.query.text":i,"drizzle.query.params":JSON.stringify(n)}),this.queryWithCache(i,n,async()=>await a.unsafe(i,n).values())));return e3.startActiveSpan(`drizzle.mapResponse`,()=>s?s(c):c.map(e=>cde(r,e,o)))})}all(e={}){return e3.startActiveSpan(`drizzle.execute`,async t=>{let n=y3(this.params,e);return t?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(n)}),this.logger.logQuery(this.queryString,n),e3.startActiveSpan(`drizzle.driver.execute`,()=>(t?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(n)}),this.queryWithCache(this.queryString,n,async()=>this.client.unsafe(this.queryString,n))))})}isResponseInArrayMode(){return this._isResponseInArrayMode}},L8=class e extends ome{constructor(e,t,n,r={}){super(t),this.client=e,this.schema=n,this.options=r,this.logger=r.logger??new Yme,this.cache=r.cache??new C6}static[Y]=`PostgresJsSession`;logger;cache;prepareQuery(e,t,n,r,i,a,o){return new Xme(this.client,e.sql,e.params,this.logger,this.cache,a,o,t,r,i)}query(e,t){return this.logger.logQuery(e,t),this.client.unsafe(e,t).values()}queryObjects(e,t){return this.client.unsafe(e,t)}transaction(t,n){return this.client.begin(async r=>{let i=new e(r,this.dialect,this.schema,this.options),a=new Zme(this.dialect,i,this.schema);return n&&await a.setTransaction(n),t(a)})}},Zme=class e extends sme{constructor(e,t,n,r=0){super(e,t,n,r),this.session=t}static[Y]=`PostgresJsTransaction`;transaction(t){return this.session.client.savepoint(n=>{let r=new L8(n,this.dialect,this.schema,this.session.options);return t(new e(this.dialect,r,this.schema))})}},Qme=class extends S6{static[Y]=`PostgresJsDatabase`};function R8(e,t={}){let n=e=>e;for(let t of[`1184`,`1082`,`1083`,`1114`,`1182`,`1185`,`1115`,`1231`])e.options.parsers[t]=n,e.options.serializers[t]=n;e.options.serializers[114]=n,e.options.serializers[3802]=n;let r=new d6({casing:t.casing}),i;t.logger===!0?i=new Jme:t.logger!==!1&&(i=t.logger);let a;if(t.schema){let e=zpe(t.schema,Upe);a={fullSchema:t.schema,schema:e.tables,tableNamesMap:e.tableNamesMap}}let o=new Qme(r,new L8(e,r,a,{logger:i,cache:t.cache}),a);return o.$client=e,o.$cache=t.cache,o.$cache&&(o.$cache.invalidate=t.cache?.onMutate),o}function z8(...e){if(typeof e[0]==`string`)return R8(F8(e[0]),e[1]);if(dde(e[0])){let{connection:t,client:n,...r}=e[0];if(n)return R8(n,r);if(typeof t==`object`&&t.url!==void 0){let{url:e,...n}=t;return R8(F8(e,n),r)}return R8(F8(t),r)}return R8(e[0],e[1])}(e=>{function t(e){return R8({options:{parsers:{},serializers:{}}},e)}e.mock=t})(z8||={});const $me=Z4(`sessionType`,[`WORKSHOP`,`LECTURE`,`HANDS_ON`,`MOCK_INTERVIEW`]),ehe=Z4(`sessionName`,[`GIT_LINKEDIN_BASE`]),the=e6(`feedback`,{id:L3().primaryKey().generatedAlwaysAsIdentity(),name:J3({length:255}).notNull(),email:J3({length:255}).notNull(),year:L3().notNull(),batch:L3().notNull().default(2025),department:J3({length:100}).notNull(),workedWell:J3({length:1e3}).notNull(),improve:J3({length:1e3}).notNull(),rating:L3().notNull(),sessionType:$me().default(`LECTURE`),sessionName:ehe().notNull().default(`GIT_LINKEDIN_BASE`),sessionDate:I3().notNull().default(`2025-10-14`)},e=>[Uue(`email_date_unique`).on(e.email,e.sessionDate)]),nhe=F8({}.SUPABASE_URL||``,{prepare:!1}),B8=z8(nhe);var V8=class{static createCareerEffect=e=>L4({try:()=>B8.insert(lme).values({...e,createdAt:new Date().toISOString().split(`T`)[0]}).returning(),catch:e=>e instanceof Error&&(e.message.includes(`unique`)||e.cause?.constraint_name?.includes(`unique`))?new V4(`A career submission with this email already exists.`):new B4(`Failed to create career submission. Please try again later.`,e)});static toApiResponse=e=>{let t=e[0];return{status:QL.Success,message:`Career submission created successfully!`,data:t||{}}}},rhe=class{static async create(e){return z4(V8.createCareerEffect(e).pipe(R4(V8.toApiResponse),I4(e=>F4((e._tag,{status:QL.Error,message:e.message,data:void 0})))))}};const ihe=new pv({prefix:`/career`,tags:[`Career`]}).post(``,({body:e})=>rhe.create(e),{body:nR,response:eR,detail:{summary:`Create career submission`,description:`Submit career information to help determine the best career path.`}});var H8=function(e){return e.Lecture=`LECTURE`,e}(H8||{}),U8=function(e){return e.GitLinkedInBase=`GIT_LINKEDIN_BASE`,e}(U8||{}),W8=LL({name:BL(`Name must be a string`),email:HL(BL(),ML(`Please enter your email.`),OL(`The email is badly formatted.`),kL(30,`Your email is too long.`)),year:HL(IL(`Year must be a number`),jL(1,`Year must be at least 1`),AL(5,`Year must be at most 5`)),batch:HL(IL(`Batch must be a number`),jL(2025,`Batch must be at least 2025`)),department:HL(BL(`Department must be a string`),kL(100,`Department name is too long.`)),workedWell:HL(BL(`Worked well must be a string`),kL(1e3,`Your feedback is too long.`)),improve:HL(BL(`Improve must be a string`),kL(1e3,`Your feedback is too long.`)),rating:HL(IL(`Rating must be a number`),jL(1,`Rating must be at least 1`),AL(5,`Rating must be at most 5`)),sessionType:FL(H8,`Session type must be one of the predefined types`),sessionName:FL(U8,`Session name must be one of the predefined names`),sessionDate:BL(`Session date must be a string`)});({...W8.entries});var G8=class{static createFeedbackEffect=e=>L4({try:()=>B8.insert(the).values({...e,sessionDate:new Date(e.sessionDate).toISOString().split(`T`)[0]||new Date().toISOString().split(`T`)[0]}).returning(),catch:e=>e instanceof Error&&(e.message.includes(`unique`)||e.cause?.constraint_name?.includes(`unique`))?new V4(`A feedback with this email for this session date already exists.`):new B4(`Failed to create feedback. Please try again later.`,e)});static toApiResponse=e=>{let t=e[0];return{status:QL.Success,message:`Feedback created successfully!`,data:t?{...t,sessionDate:new Date(t.sessionDate).toISOString().split(`T`)[0]}:{}}}},ahe=class{static async create(e){return z4(G8.createFeedbackEffect(e).pipe(R4(G8.toApiResponse),I4(e=>F4((e._tag,{status:QL.Error,message:e.message,data:void 0})))))}};const ohe=new pv({prefix:`/feedback`,tags:[`Feedback`]}).post(``,({body:e})=>ahe.create(e),{body:W8,response:eR,detail:{summary:`Create feedback`,description:`Create feedback for a session that was conducted.`}});var she=class{static async root(){return{status:QL.Success,message:`Welcome to Mentorship.01 API! Elysia is running!`}}},che=new pv({detail:{tags:[`Root`],summary:`Get welcome message`,description:`Returns a welcome message confirming the API is running`}}).get(``,()=>she.root(),{response:$L});new pv({prefix:`/api`,aot:!0,name:`Mentorship.01`,analytic:!0,sucrose:{}}).use(Wne({origin:!0,methods:[`GET`,`POST`,`PUT`,`DELETE`,`PATCH`,`OPTIONS`],allowedHeaders:[`Content-Type`,`Authorization`],credentials:!0})).use(pL()).use(dL({documentation:{info:{title:`Mentorship.01`,description:`Mentorship.01: A mentorship application for mentoring people, collecting feedback after each session, and providing guidance, extensible to handle future session types.`,version:`0.0.1`},servers:[{url:`http://localhost:3000/api`,description:`Development server`},{url:`https://mentorship01.crazzle.dev/api`,description:`Production server`}]},mapJsonSchema:{valibot:ZL},references:lL(`dist/index.d.ts`)})).get(`/health`,()=>({status:QL.Success,message:`Service is healthy`}),{response:$L,detail:{tags:[`Health`],summary:`Check service health`,description:`Returns the health status of the API service`}}).use(che).use(ohe).use(ihe),se(`/api/$`)({});const lhe=()=>rre(`https://mentorship01.vercel.app`).api;var uhe=[[`path`,{d:`m12 19-7-7 7-7`,key:`1l729n`}],[`path`,{d:`M19 12H5`,key:`x3x0zl`}]],dhe=e=>f(we,T(e,{iconNode:uhe,name:`arrow-left`})),fhe=[[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`rect`,{width:`18`,height:`18`,x:`3`,y:`4`,rx:`2`,key:`1hopcy`}],[`path`,{d:`M3 10h18`,key:`8toen8`}]],phe=e=>f(we,T(e,{iconNode:fhe,name:`calendar`})),mhe=[[`path`,{d:`M21 12a9 9 0 1 1-6.219-8.56`,key:`13zald`}]],hhe=e=>f(we,T(e,{iconNode:mhe,name:`loader-circle`}));function ghe(e,t,n,r){return e.addEventListener(t,n,r),ae(e.removeEventListener.bind(e,t,n,r))}function _he(e,t,n,r){let i=()=>{ce(D(e)).forEach(e=>{e&&ce(D(t)).forEach(t=>ghe(e,t,n,r))})};typeof e==`function`?h(i):C(i)}var K8=new Map,q8=!1;try{q8=new Intl.NumberFormat(`de-DE`,{signDisplay:`exceptZero`}).resolvedOptions().signDisplay===`exceptZero`}catch{}var J8=!1;try{J8=new Intl.NumberFormat(`de-DE`,{style:`unit`,unit:`degree`}).resolvedOptions().style===`unit`}catch{}var Y8={degree:{narrow:{default:`°`,"ja-JP":` 度`,"zh-TW":`度`,"sl-SI":` °`}}},vhe=class{format(e){let t=``;if(t=!q8&&this.options.signDisplay!=null?bhe(this.numberFormatter,this.options.signDisplay,e):this.numberFormatter.format(e),this.options.style===`unit`&&!J8){let{unit:e,unitDisplay:n=`short`,locale:r}=this.resolvedOptions();if(!e)return t;let i=Y8[e]?.[n];t+=i[r]||i.default}return t}formatToParts(e){return this.numberFormatter.formatToParts(e)}formatRange(e,t){if(typeof this.numberFormatter.formatRange==`function`)return this.numberFormatter.formatRange(e,t);if(t<e)throw RangeError(`End date must be >= start date`);return`${this.format(e)} \u{2013} ${this.format(t)}`}formatRangeToParts(e,t){if(typeof this.numberFormatter.formatRangeToParts==`function`)return this.numberFormatter.formatRangeToParts(e,t);if(t<e)throw RangeError(`End date must be >= start date`);let n=this.numberFormatter.formatToParts(e),r=this.numberFormatter.formatToParts(t);return[...n.map(e=>({...e,source:`startRange`})),{type:`literal`,value:` – `,source:`shared`},...r.map(e=>({...e,source:`endRange`}))]}resolvedOptions(){let e=this.numberFormatter.resolvedOptions();return!q8&&this.options.signDisplay!=null&&(e={...e,signDisplay:this.options.signDisplay}),!J8&&this.options.style===`unit`&&(e={...e,style:`unit`,unit:this.options.unit,unitDisplay:this.options.unitDisplay}),e}constructor(e,t={}){this.numberFormatter=yhe(e,t),this.options=t}};function yhe(e,t={}){let{numberingSystem:n}=t;if(n&&e.includes(`-nu-`)&&(e.includes(`-u-`)||(e+=`-u-`),e+=`-nu-${n}`),t.style===`unit`&&!J8){let{unit:e,unitDisplay:n=`short`}=t;if(!e)throw Error(`unit option must be provided with style: "unit"`);if(!Y8[e]?.[n])throw Error(`Unsupported unit ${e} with unitDisplay = ${n}`);t={...t,style:`decimal`}}let r=e+(t?Object.entries(t).sort((e,t)=>e[0]<t[0]?-1:1).join():``);if(K8.has(r))return K8.get(r);let i=new Intl.NumberFormat(e,t);return K8.set(r,i),i}function bhe(e,t,n){if(t===`auto`)return e.format(n);if(t===`never`)return e.format(Math.abs(n));{let r=!1;if(t===`always`?r=n>0||Object.is(n,0):t===`exceptZero`&&(Object.is(n,-0)||Object.is(n,0)?n=Math.abs(n):r=n>0),r){let t=e.format(-n),r=e.format(n),i=t.replace(r,``).replace(/\u200e|\u061C/,``);return[...i].length!==1&&console.warn(`@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case`),t.replace(r,`!!!`).replace(i,`+`).replace(`!!!`,r)}else return e.format(n)}}var xhe=new Set([`Avst`,`Arab`,`Armi`,`Syrc`,`Samr`,`Mand`,`Thaa`,`Mend`,`Nkoo`,`Adlm`,`Rohg`,`Hebr`]),She=new Set([`ae`,`ar`,`arc`,`bcc`,`bqi`,`ckb`,`dv`,`fa`,`glk`,`he`,`ku`,`mzn`,`nqo`,`pnb`,`ps`,`sd`,`ug`,`ur`,`yi`]);function Che(e){if(Intl.Locale){let t=new Intl.Locale(e).maximize().script??``;return xhe.has(t)}let t=e.split(`-`)[0];return She.has(t)}function whe(e){return Che(e)?`rtl`:`ltr`}function X8(){let e=typeof navigator<`u`&&(navigator.language||navigator.userLanguage)||`en-US`;try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e=`en-US`}return{locale:e,direction:whe(e)}}var Z8=X8(),Q8=new Set;function $8(){Z8=X8();for(let e of Q8)e(Z8)}function The(){let[e,t]=b(Z8),n=w(()=>e());return he(()=>{Q8.size===0&&window.addEventListener(`languagechange`,$8),Q8.add(t),O(()=>{Q8.delete(t),Q8.size===0&&window.removeEventListener(`languagechange`,$8)})}),{locale:()=>n().locale,direction:()=>n().direction}}var Ehe=me();function e5(){let e=The();return k(Ehe)||e}var t5=new Map;function n5(e){let{locale:t}=e5(),n=w(()=>t()+(e?Object.entries(e).sort((e,t)=>e[0]<t[0]?-1:1).join():``));return w(()=>{let r=n(),i;return t5.has(r)&&(i=t5.get(r)),i||(i=new Intl.Collator(t(),e),t5.set(r,i)),i})}function r5(e){let{locale:t}=e5();return w(()=>new vhe(t(),D(e)))}function i5(e){return t=>(e(t),()=>e(void 0))}var a5=me();function o5(){let e=k(a5);if(e===void 0)throw Error("[kobalte]: `useMeterContext` must be used within a `Meter.Root` component");return e}function Dhe(e){let t=o5(),[n,r]=E(e,[`style`]);return f(Ve,T({as:`div`,get style(){return fe({"--kb-meter-fill-width":t.meterFillWidth()},n.style)}},()=>t.dataset(),r))}function Ohe(e){let t=o5(),[n,r]=E(Ce({id:t.generateId(`label`)},e),[`id`]);return h(()=>O(t.registerLabelId(n.id))),f(Ve,T({as:`span`,get id(){return n.id}},()=>t.dataset(),r))}function khe(e){let[t,n]=E(Ce({id:`meter-${a()}`,value:0,minValue:0,maxValue:100,role:`meter`,indeterminate:!1},e),[`value`,`minValue`,`maxValue`,`getValueLabel`,`role`,`aria-valuetext`,`aria-labelledby`,`aria-valuemax`,`aria-valuemin`,`aria-valuenow`,`indeterminate`]),[r,i]=b(),o=r5(()=>({style:`percent`})),s=()=>Ge(t.value,t.minValue,t.maxValue),c=()=>(s()-t.minValue)/(t.maxValue-t.minValue),l=()=>{if(!t.indeterminate)return t.getValueLabel?t.getValueLabel({value:s(),min:t.minValue,max:t.maxValue}):o().format(c())},u=()=>`${c()*100}%`,d=w(()=>({})),p={dataset:d,value:s,valuePercent:c,valueLabel:l,labelId:r,meterFillWidth:u,generateId:He(()=>n.id),registerLabelId:i5(i)};return f(a5.Provider,{value:p,get children(){return f(Ve,T({as:`div`,get role(){return t.role||`meter`},get"aria-valuenow"(){return ue(()=>!!t.indeterminate)()?void 0:s()},get"aria-valuemin"(){return t.minValue},get"aria-valuemax"(){return t.maxValue},get"aria-valuetext"(){return l()},get"aria-labelledby"(){return r()}},d,n))}})}function Ahe(e){let t=o5();return f(Ve,T({as:`div`},()=>t.dataset(),e))}function jhe(e){let t=o5();return f(Ve,T({as:`div`},()=>t.dataset(),e,{get children(){return t.valueLabel()}}))}var s5=Object.assign(khe,{Fill:Dhe,Label:Ohe,Track:Ahe,ValueLabel:jhe});Oe({},{Fill:()=>u5,Label:()=>d5,Progress:()=>Mhe,Root:()=>f5,Track:()=>p5,ValueLabel:()=>m5,useProgressContext:()=>l5});var c5=me();function l5(){let e=k(c5);if(e===void 0)throw Error("[kobalte]: `useProgressContext` must be used within a `Progress.Root` component");return e}function u5(e){let t=l5(),[n,r]=E(e,[`style`]);return f(s5.Fill,T({get style(){return fe({"--kb-progress-fill-width":t.progressFillWidth()},n.style)}},()=>t.dataset(),r))}function d5(e){let t=l5(),[n,r]=E(Ce({id:t.generateId(`label`)},e),[`id`]);return h(()=>O(t.registerLabelId(n.id))),f(s5.Label,T({get id(){return n.id}},()=>t.dataset(),r))}function f5(e){let t=Ce({id:`progress-${a()}`,value:0,minValue:0,maxValue:100},e),[n,r]=E(t,[`value`,`minValue`,`maxValue`,`indeterminate`,`getValueLabel`]),[i,o]=b(),s=r5(()=>({style:`percent`})),c=()=>Ge(n.value,n.minValue,n.maxValue),l=()=>(c()-n.minValue)/(n.maxValue-n.minValue),u=()=>{if(!n.indeterminate)return n.getValueLabel?n.getValueLabel({value:c(),min:n.minValue,max:n.maxValue}):s().format(l())},d=()=>n.indeterminate?void 0:`${l()*100}%`,p=w(()=>{let e;return n.indeterminate||(e=l()===1?`complete`:`loading`),{"data-progress":e,"data-indeterminate":n.indeterminate?``:void 0}}),m={dataset:p,value:c,valuePercent:l,valueLabel:u,labelId:i,progressFillWidth:d,generateId:He(()=>r.id),registerLabelId:i5(o)};return f(c5.Provider,{value:m,get children(){return f(s5,T({role:`progressbar`,get indeterminate(){return n.indeterminate||!1}},p,t))}})}function p5(e){let t=l5();return f(s5.Track,T(()=>t.dataset(),e))}function m5(e){let t=l5();return f(s5.ValueLabel,T(()=>t.dataset(),e))}var Mhe=Object.assign(f5,{Fill:u5,Label:d5,Track:p5,ValueLabel:m5}),Nhe=e=>{let[t,n]=E(e,[`children`]);return f(f5,T(n,{get children(){return[ue(()=>t.children),f(p5,{class:`relative h-1 w-full overflow-hidden rounded-full bg-secondary`,get children(){return f(u5,{class:`h-full w-[var(--kb-progress-fill-width)] flex-1 bg-primary transition-all`})}})]}}))},h5=[`id`,`name`,`validationState`,`required`,`disabled`,`readOnly`];function g5(e){let t=Ce({id:`form-control-${a()}`},e),[n,r]=b(),[i,o]=b(),[s,c]=b(),[l,u]=b();return{formControlContext:{name:()=>D(t.name)??D(t.id),dataset:w(()=>({"data-valid":D(t.validationState)===`valid`?``:void 0,"data-invalid":D(t.validationState)===`invalid`?``:void 0,"data-required":D(t.required)?``:void 0,"data-disabled":D(t.disabled)?``:void 0,"data-readonly":D(t.readOnly)?``:void 0})),validationState:()=>D(t.validationState),isRequired:()=>D(t.required),isDisabled:()=>D(t.disabled),isReadOnly:()=>D(t.readOnly),labelId:n,fieldId:i,descriptionId:s,errorMessageId:l,getAriaLabelledBy:(e,t,r)=>{let i=r!=null||n()!=null;return[r,n(),i&&t!=null?e:void 0].filter(Boolean).join(` `)||void 0},getAriaDescribedBy:e=>[s(),l(),e].filter(Boolean).join(` `)||void 0,generateId:He(()=>D(t.id)),registerLabel:i5(r),registerField:i5(o),registerDescription:i5(c),registerErrorMessage:i5(u)}}}var _5=me();function v5(){let e=k(_5);if(e===void 0)throw Error("[kobalte]: `useFormControlContext` must be used within a `FormControlContext.Provider` component");return e}function y5(e){let t=v5(),n=Ce({id:t.generateId(`description`)},e);return h(()=>O(t.registerDescription(n.id))),f(Ve,T({as:`div`},()=>t.dataset(),n))}function b5(e){let t,n=v5(),[r,i]=E(Ce({id:n.generateId(`label`)},e),[`ref`]),a=We(()=>t,()=>`label`);return h(()=>O(n.registerLabel(i.id))),f(Ve,T({as:`label`,ref(e){var n=pe(e=>t=e,r.ref);typeof n==`function`&&n(e)},get for(){return ue(()=>a()===`label`)()?n.fieldId():void 0}},()=>n.dataset(),i))}function x5(e,t){h(ge(e,e=>{if(e==null)return;let n=Phe(e);n!=null&&(n.addEventListener(`reset`,t,{passive:!0}),O(()=>{n.removeEventListener(`reset`,t)}))}))}function Phe(e){return Fhe(e)?e.form:e.closest(`form`)}function Fhe(e){return e.matches(`textarea, input, select, button`)}function S5(e){let t=v5(),[n,r]=E(Ce({id:t.generateId(`error-message`)},e),[`forceMount`]),i=()=>t.validationState()===`invalid`;return h(()=>{i()&&O(t.registerErrorMessage(r.id))}),f(p,{get when(){return n.forceMount||i()},get children(){return f(Ve,T({as:`div`},()=>t.dataset(),r))}})}function C5(e){let[t,n]=b(e.defaultValue?.()),r=w(()=>e.value?.()!==void 0),i=w(()=>r()?e.value?.():t());return[i,t=>{oe(()=>{let a=le(t,i());return Object.is(a,i())||(r()||n(a),e.onChange?.(a)),a})}]}function Ihe(e){let[t,n]=C5(e);return[()=>t()??!1,n]}var w5=e=>typeof e==`function`?e():e,T5=e=>{let t=w(()=>{let t=w5(e.element);if(t)return getComputedStyle(t)}),n=()=>t()?.animationName??`none`,[r,i]=b(w5(e.show)?`present`:`hidden`),a=`none`;return h(r=>{let o=w5(e.show);return oe(()=>{if(r===o)return o;let e=a,s=n();o?i(`present`):s===`none`||t()?.display===`none`?i(`hidden`):i(r===!0&&e!==s?`hiding`:`hidden`)}),o}),h(()=>{let t=w5(e.element);if(!t)return;let o=e=>{e.target===t&&(a=n())},s=e=>{let a=n().includes(e.animationName);e.target===t&&a&&r()===`hiding`&&i(`hidden`)};t.addEventListener(`animationstart`,o),t.addEventListener(`animationcancel`,s),t.addEventListener(`animationend`,s),O(()=>{t.removeEventListener(`animationstart`,o),t.removeEventListener(`animationcancel`,s),t.removeEventListener(`animationend`,s)})}),{present:()=>r()===`present`||r()===`hiding`,state:r,setState:i}},E5=[`id`,`aria-label`,`aria-labelledby`,`aria-describedby`];function D5(e){let t=v5(),n=Ce({id:t.generateId(`field`)},e);return h(()=>O(t.registerField(D(n.id)))),{fieldProps:{id:()=>D(n.id),ariaLabel:()=>D(n[`aria-label`]),ariaLabelledBy:()=>t.getAriaLabelledBy(D(n.id),D(n[`aria-label`]),D(n[`aria-labelledby`])),ariaDescribedBy:()=>t.getAriaDescribedBy(D(n[`aria-describedby`]))}}}Oe({},{Description:()=>y5,ErrorMessage:()=>S5,Input:()=>A5,Label:()=>b5,Root:()=>M5,TextArea:()=>N5,TextField:()=>Rhe,useTextFieldContext:()=>k5});var O5=me();function k5(){let e=k(O5);if(e===void 0)throw Error("[kobalte]: `useTextFieldContext` must be used within a `TextField` component");return e}function A5(e){return f(j5,T({type:`text`},e))}function j5(e){let t=v5(),n=k5(),[r,i,a]=E(Ce({id:n.generateId(`input`)},e),[`onInput`],E5),{fieldProps:o}=D5(i);return f(Ve,T({as:`input`,get id(){return o.id()},get name(){return t.name()},get value(){return n.value()},get required(){return t.isRequired()},get disabled(){return t.isDisabled()},get readonly(){return t.isReadOnly()},get"aria-label"(){return o.ariaLabel()},get"aria-labelledby"(){return o.ariaLabelledBy()},get"aria-describedby"(){return o.ariaDescribedBy()},get"aria-invalid"(){return t.validationState()===`invalid`||void 0},get"aria-required"(){return t.isRequired()||void 0},get"aria-disabled"(){return t.isDisabled()||void 0},get"aria-readonly"(){return t.isReadOnly()||void 0},get onInput(){return je([r.onInput,n.onInput])}},()=>t.dataset(),a))}function M5(e){let t,[n,r,i]=E(Ce({id:`textfield-${a()}`},e),[`ref`,`value`,`defaultValue`,`onChange`],h5),o=n.value,[s,c]=C5({value:()=>o===void 0?void 0:n.value??``,defaultValue:()=>n.defaultValue,onChange:e=>n.onChange?.(e)}),{formControlContext:l}=g5(r);x5(()=>t,()=>c(n.defaultValue??``));let u={value:s,generateId:He(()=>D(r.id)),onInput:e=>{if(l.isReadOnly()||l.isDisabled())return;let t=e.target;c(t.value),t.value=s()??``}};return f(_5.Provider,{value:l,get children(){return f(O5.Provider,{value:u,get children(){return f(Ve,T({as:`div`,ref(e){var r=pe(e=>t=e,n.ref);typeof r==`function`&&r(e)},role:`group`,get id(){return D(r.id)}},()=>l.dataset(),i))}})}})}function N5(e){let t,n=k5(),[r,i]=E(Ce({id:n.generateId(`textarea`)},e),[`ref`,`autoResize`,`submitOnEnter`,`onKeyPress`]);h(ge([()=>t,()=>r.autoResize,()=>n.value()],([e,t])=>{!e||!t||Lhe(e)}));let a=e=>{t&&r.submitOnEnter&&e.key===`Enter`&&!e.shiftKey&&t.form&&(t.form.requestSubmit(),e.preventDefault())};return f(j5,T({as:`textarea`,get"aria-multiline"(){return r.submitOnEnter?`false`:void 0},get onKeyPress(){return je([r.onKeyPress,a])},ref(e){var n=pe(e=>t=e,r.ref);typeof n==`function`&&n(e)}},i))}function Lhe(e){let t=e.style.alignSelf,n=e.style.overflow;`MozAppearance`in e.style||(e.style.overflow=`hidden`),e.style.alignSelf=`start`,e.style.height=`auto`,e.style.height=`${e.scrollHeight+(e.offsetHeight-e.clientHeight)}px`,e.style.overflow=n,e.style.alignSelf=t}var Rhe=Object.assign(M5,{Description:y5,ErrorMessage:S5,Input:A5,Label:b5,TextArea:N5}),P5=e=>{let[t,n]=E(e,[`class`]);return f(M5,T({get class(){return Be(`flex flex-col gap-1`,t.class)}},n))},F5=e=>{let[t,n]=E(T({type:`text`},e),[`type`,`class`]);return f(A5,T({get type(){return t.type},get class(){return Be(`flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[invalid]:border-error-foreground data-[invalid]:text-error-foreground`,t.class)}},n))},zhe=e=>{let[t,n]=E(e,[`class`]);return f(N5,T({get class(){return Be(`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50`,t.class)}},n))},Bhe=Ue(`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70`,{variants:{variant:{label:`data-[invalid]:text-destructive`,description:`font-normal text-muted-foreground`,error:`text-xs text-destructive`}},defaultVariants:{variant:`label`}}),I5=e=>{let[t,n]=E(e,[`class`]);return f(b5,T({get class(){return Be(Bhe(),t.class)}},n))};function L5(e){let t=e.startIndex??0,n=e.startLevel??0,r=[],i=t=>{if(t==null)return``;let n=e.getKey??`key`,r=xe(n)?t[n]:n(t);return r==null?``:String(r)},a=t=>{if(t==null)return``;let n=e.getTextValue??`textValue`,r=xe(n)?t[n]:n(t);return r==null?``:String(r)},o=t=>{if(t==null)return!1;let n=e.getDisabled??`disabled`;return(xe(n)?t[n]:n(t))??!1},s=t=>{if(t!=null)return xe(e.getSectionChildren)?t[e.getSectionChildren]:e.getSectionChildren?.(t)};for(let c of e.dataSource){if(xe(c)||Ee(c)){r.push({type:`item`,rawValue:c,key:String(c),textValue:String(c),disabled:o(c),level:n,index:t}),t++;continue}if(s(c)!=null){r.push({type:`section`,rawValue:c,key:``,textValue:``,disabled:!1,level:n,index:t}),t++;let i=s(c)??[];if(i.length>0){let a=L5({dataSource:i,getKey:e.getKey,getTextValue:e.getTextValue,getDisabled:e.getDisabled,getSectionChildren:e.getSectionChildren,startIndex:t,startLevel:n+1});r.push(...a),t+=a.length}}else r.push({type:`item`,rawValue:c,key:i(c),textValue:a(c),disabled:o(c),level:n,index:t}),t++}return r}function Vhe(e,t=[]){return w(()=>{let n=L5({dataSource:D(e.dataSource),getKey:D(e.getKey),getTextValue:D(e.getTextValue),getDisabled:D(e.getDisabled),getSectionChildren:D(e.getSectionChildren)});for(let e=0;e<t.length;e++)t[e]();return e.factory(n)})}var R5=class e extends Set{anchorKey;currentKey;constructor(t,n,r){super(t),t instanceof e?(this.anchorKey=n||t.anchorKey,this.currentKey=r||t.currentKey):(this.anchorKey=n,this.currentKey=r)}};function Hhe(e){let[t,n]=C5(e);return[()=>t()??new R5,n]}function z5(e){return ke()?e.altKey:e.ctrlKey}function B5(e){return qe()?e.metaKey:e.ctrlKey}function V5(e){return new R5(e)}function H5(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function Uhe(e){let t=Ce({selectionMode:`none`,selectionBehavior:`toggle`},e),[n,r]=b(!1),[i,a]=b(),[o,s]=Hhe({value:w(()=>{let e=D(t.selectedKeys);return e==null?e:V5(e)}),defaultValue:w(()=>{let e=D(t.defaultSelectedKeys);return e==null?new R5:V5(e)}),onChange:e=>t.onSelectionChange?.(e)}),[c,l]=b(D(t.selectionBehavior));return h(()=>{let e=o();D(t.selectionBehavior)===`replace`&&c()===`toggle`&&typeof e==`object`&&e.size===0&&l(`replace`)}),h(()=>{l(D(t.selectionBehavior)??`toggle`)}),{selectionMode:()=>D(t.selectionMode),disallowEmptySelection:()=>D(t.disallowEmptySelection)??!1,selectionBehavior:c,setSelectionBehavior:l,isFocused:n,setFocused:r,focusedKey:i,setFocusedKey:a,selectedKeys:o,setSelectedKeys:e=>{(D(t.allowDuplicateSelectionEvents)||!H5(e,o()))&&s(e)}}}function U5(e){let[t,n]=b(``),[r,i]=b(-1);return{typeSelectHandlers:{onKeyDown:a=>{if(D(e.isDisabled))return;let o=D(e.keyboardDelegate),s=D(e.selectionManager);if(!o.getKeyForSearch)return;let c=Whe(a.key);if(!c||a.ctrlKey||a.metaKey)return;c===` `&&t().trim().length>0&&(a.preventDefault(),a.stopPropagation());let l=n(e=>e+c),u=o.getKeyForSearch(l,s.focusedKey())??o.getKeyForSearch(l);u==null&&Ghe(l)&&(l=l[0],u=o.getKeyForSearch(l,s.focusedKey())??o.getKeyForSearch(l)),u!=null&&(s.setFocusedKey(u),e.onTypeSelect?.(u)),clearTimeout(r()),i(window.setTimeout(()=>n(``),500))}}}}function Whe(e){return e.length===1||!/^[A-Z]/i.test(e)?e:``}function Ghe(e){return e.split(``).every(t=>t===e[0])}function Khe(e,t,n){let r=T({selectOnFocus:()=>D(e.selectionManager).selectionBehavior()===`replace`},e),i=()=>n?.()??t(),{direction:a}=e5(),o={top:0,left:0};_he(()=>D(r.isVirtualized)?void 0:i(),`scroll`,()=>{let e=i();e&&(o={top:e.scrollTop,left:e.scrollLeft})});let{typeSelectHandlers:s}=U5({isDisabled:()=>D(r.disallowTypeAhead),keyboardDelegate:()=>D(r.keyboardDelegate),selectionManager:()=>D(r.selectionManager)}),c=()=>D(r.orientation)??`vertical`,l=e=>{Re(e,s.onKeyDown),e.altKey&&e.key===`Tab`&&e.preventDefault();let n=t();if(!n?.contains(e.target))return;let i=D(r.selectionManager),o=D(r.selectOnFocus),l=t=>{t!=null&&(i.setFocusedKey(t),e.shiftKey&&i.selectionMode()===`multiple`?i.extendSelection(t):o&&!z5(e)&&i.replaceSelection(t))},u=D(r.keyboardDelegate),d=D(r.shouldFocusWrap),f=i.focusedKey();switch(e.key){case c()===`vertical`?`ArrowDown`:`ArrowRight`:if(u.getKeyBelow){e.preventDefault();let t;t=f==null?u.getFirstKey?.():u.getKeyBelow(f),t==null&&d&&(t=u.getFirstKey?.(f)),l(t)}break;case c()===`vertical`?`ArrowUp`:`ArrowLeft`:if(u.getKeyAbove){e.preventDefault();let t;t=f==null?u.getLastKey?.():u.getKeyAbove(f),t==null&&d&&(t=u.getLastKey?.(f)),l(t)}break;case c()===`vertical`?`ArrowLeft`:`ArrowUp`:if(u.getKeyLeftOf){e.preventDefault();let t=a()===`rtl`,n;n=f==null?t?u.getFirstKey?.():u.getLastKey?.():u.getKeyLeftOf(f),l(n)}break;case c()===`vertical`?`ArrowRight`:`ArrowDown`:if(u.getKeyRightOf){e.preventDefault();let t=a()===`rtl`,n;n=f==null?t?u.getLastKey?.():u.getFirstKey?.():u.getKeyRightOf(f),l(n)}break;case`Home`:if(u.getFirstKey){e.preventDefault();let t=u.getFirstKey(f,B5(e));t!=null&&(i.setFocusedKey(t),B5(e)&&e.shiftKey&&i.selectionMode()===`multiple`?i.extendSelection(t):o&&i.replaceSelection(t))}break;case`End`:if(u.getLastKey){e.preventDefault();let t=u.getLastKey(f,B5(e));t!=null&&(i.setFocusedKey(t),B5(e)&&e.shiftKey&&i.selectionMode()===`multiple`?i.extendSelection(t):o&&i.replaceSelection(t))}break;case`PageDown`:u.getKeyPageBelow&&f!=null&&(e.preventDefault(),l(u.getKeyPageBelow(f)));break;case`PageUp`:u.getKeyPageAbove&&f!=null&&(e.preventDefault(),l(u.getKeyPageAbove(f)));break;case`a`:B5(e)&&i.selectionMode()===`multiple`&&D(r.disallowSelectAll)!==!0&&(e.preventDefault(),i.selectAll());break;case`Escape`:e.defaultPrevented||(e.preventDefault(),D(r.disallowEmptySelection)||i.clearSelection());break;case`Tab`:if(!D(r.allowsTabNavigation)){if(e.shiftKey)n.focus();else{let e=Ke(n,{tabbable:!0}),t,r;do r=e.lastChild(),r&&(t=r);while(r);t&&!t.contains(document.activeElement)&&ze(t)}break}}},u=e=>{let t=D(r.selectionManager),n=D(r.keyboardDelegate),a=D(r.selectOnFocus);if(t.isFocused()){e.currentTarget.contains(e.target)||t.setFocused(!1);return}if(e.currentTarget.contains(e.target)){if(t.setFocused(!0),t.focusedKey()==null){let r=e=>{e!=null&&(t.setFocusedKey(e),a&&t.replaceSelection(e))},i=e.relatedTarget;i&&e.currentTarget.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_FOLLOWING?r(t.lastSelectedKey()??n.getLastKey?.()):r(t.firstSelectedKey()??n.getFirstKey?.())}else if(!D(r.isVirtualized)){let e=i();if(e){e.scrollTop=o.top,e.scrollLeft=o.left;let n=e.querySelector(`[data-key="${t.focusedKey()}"]`);n&&(ze(n),Ie(e,n))}}}},d=e=>{let t=D(r.selectionManager);e.currentTarget.contains(e.relatedTarget)||t.setFocused(!1)},f=e=>{i()===e.target&&e.preventDefault()},p=()=>{let e=D(r.autoFocus);if(!e)return;let n=D(r.selectionManager),i=D(r.keyboardDelegate),a;e===`first`&&(a=i.getFirstKey?.()),e===`last`&&(a=i.getLastKey?.());let o=n.selectedKeys();o.size&&(a=o.values().next().value),n.setFocused(!0),n.setFocusedKey(a);let s=t();s&&a==null&&!D(r.shouldUseVirtualFocus)&&ze(s)};return he(()=>{r.deferAutoFocus?setTimeout(p,0):p()}),h(ge([i,()=>D(r.isVirtualized),()=>D(r.selectionManager).focusedKey()],e=>{let[t,n,i]=e;if(n)i&&r.scrollToKey?.(i);else if(i&&t){let e=t.querySelector(`[data-key="${i}"]`);e&&Ie(t,e)}})),{tabIndex:w(()=>{if(!D(r.shouldUseVirtualFocus))return D(r.selectionManager).focusedKey()==null?0:-1}),onKeyDown:l,onMouseDown:f,onFocusIn:u,onFocusOut:d}}function qhe(e,t){let n=()=>D(e.selectionManager),r=()=>D(e.key),i=()=>D(e.shouldUseVirtualFocus),a=e=>{n().selectionMode()!==`none`&&(n().selectionMode()===`single`?n().isSelected(r())&&!n().disallowEmptySelection()?n().toggleSelection(r()):n().replaceSelection(r()):e?.shiftKey?n().extendSelection(r()):n().selectionBehavior()===`toggle`||B5(e)||`pointerType`in e&&e.pointerType===`touch`?n().toggleSelection(r()):n().replaceSelection(r()))},o=()=>n().isSelected(r()),s=()=>D(e.disabled)||n().isDisabled(r()),c=()=>!s()&&n().canSelectItem(r()),l=null,u=t=>{c()&&(l=t.pointerType,t.pointerType===`mouse`&&t.button===0&&!D(e.shouldSelectOnPressUp)&&a(t))},d=t=>{c()&&t.pointerType===`mouse`&&t.button===0&&D(e.shouldSelectOnPressUp)&&D(e.allowsDifferentPressOrigin)&&a(t)},f=t=>{c()&&(D(e.shouldSelectOnPressUp)&&!D(e.allowsDifferentPressOrigin)||l!==`mouse`)&&a(t)},p=e=>{!c()||![`Enter`,` `].includes(e.key)||(z5(e)?n().toggleSelection(r()):a(e))},m=e=>{s()&&e.preventDefault()},g=e=>{let a=t();i()||s()||!a||e.target===a&&n().setFocusedKey(r())},_=w(()=>{if(!(i()||s()))return r()===n().focusedKey()?0:-1}),v=w(()=>D(e.virtualized)?void 0:r());return h(ge([t,r,i,()=>n().focusedKey(),()=>n().isFocused()],([t,n,r,i,a])=>{t&&n===i&&a&&!r&&document.activeElement!==t&&(e.focus?e.focus():ze(t))})),{isSelected:o,isDisabled:s,allowsSelection:c,tabIndex:_,dataKey:v,onPointerDown:u,onPointerUp:d,onClick:f,onKeyDown:p,onMouseDown:m,onFocus:g}}var Jhe=class{collection;state;constructor(e,t){this.collection=e,this.state=t}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}isFocused(){return this.state.isFocused()}setFocused(e){this.state.setFocused(e)}focusedKey(){return this.state.focusedKey()}setFocusedKey(e){(e==null||this.collection().getItem(e))&&this.state.setFocusedKey(e)}selectedKeys(){return this.state.selectedKeys()}isSelected(e){if(this.state.selectionMode()===`none`)return!1;let t=this.getKey(e);return t==null?!1:this.state.selectedKeys().has(t)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;let e=this.state.selectedKeys();return this.getAllSelectableKeys().every(t=>e.has(t))}firstSelectedKey(){let e;for(let t of this.state.selectedKeys()){let n=this.collection().getItem(t),r=n?.index!=null&&e?.index!=null&&n.index<e.index;(!e||r)&&(e=n)}return e?.key}lastSelectedKey(){let e;for(let t of this.state.selectedKeys()){let n=this.collection().getItem(t),r=n?.index!=null&&e?.index!=null&&n.index>e.index;(!e||r)&&(e=n)}return e?.key}extendSelection(e){if(this.selectionMode()===`none`)return;if(this.selectionMode()===`single`){this.replaceSelection(e);return}let t=this.getKey(e);if(t==null)return;let n=this.state.selectedKeys(),r=n.anchorKey||t,i=new R5(n,r,t);for(let e of this.getKeyRange(r,n.currentKey||t))i.delete(e);for(let e of this.getKeyRange(t,r))this.canSelectItem(e)&&i.add(e);this.state.setSelectedKeys(i)}getKeyRange(e,t){let n=this.collection().getItem(e),r=this.collection().getItem(t);return n&&r?n.index!=null&&r.index!=null&&n.index<=r.index?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){let n=[],r=e;for(;r!=null;){let e=this.collection().getItem(r);if(e&&e.type===`item`&&n.push(r),r===t)return n;r=this.collection().getKeyAfter(r)}return[]}getKey(e){let t=this.collection().getItem(e);return t?!t||t.type!==`item`?null:t.key:e}toggleSelection(e){if(this.selectionMode()===`none`)return;if(this.selectionMode()===`single`&&!this.isSelected(e)){this.replaceSelection(e);return}let t=this.getKey(e);if(t==null)return;let n=new R5(this.state.selectedKeys());n.has(t)?n.delete(t):this.canSelectItem(t)&&(n.add(t),n.anchorKey=t,n.currentKey=t),!(this.disallowEmptySelection()&&n.size===0)&&this.state.setSelectedKeys(n)}replaceSelection(e){if(this.selectionMode()===`none`)return;let t=this.getKey(e);if(t==null)return;let n=this.canSelectItem(t)?new R5([t],t,t):new R5;this.state.setSelectedKeys(n)}setSelectedKeys(e){if(this.selectionMode()===`none`)return;let t=new R5;for(let n of e){let e=this.getKey(n);if(e!=null&&(t.add(e),this.selectionMode()===`single`))break}this.state.setSelectedKeys(t)}selectAll(){this.selectionMode()===`multiple`&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){let e=this.state.selectedKeys();!this.disallowEmptySelection()&&e.size>0&&this.state.setSelectedKeys(new R5)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode()!==`none`&&(this.selectionMode()===`single`?this.isSelected(e)&&!this.disallowEmptySelection()?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior()===`toggle`||t&&t.pointerType===`touch`?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys())return!0;let t=this.selectedKeys();if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;for(let n of t)if(!e.has(n))return!1;return!0}canSelectItem(e){if(this.state.selectionMode()===`none`)return!1;let t=this.collection().getItem(e);return t!=null&&!t.disabled}isDisabled(e){let t=this.collection().getItem(e);return!t||t.disabled}getAllSelectableKeys(){let e=[];return(t=>{for(;t!=null;){if(this.canSelectItem(t)){let n=this.collection().getItem(t);if(!n)continue;n.type===`item`&&e.push(t)}t=this.collection().getKeyAfter(t)}})(this.collection().getFirstKey()),e}},W5=class{keyMap=new Map;iterable;firstKey;lastKey;constructor(e){this.iterable=e;for(let t of e)this.keyMap.set(t.key,t);if(this.keyMap.size===0)return;let t,n=0;for(let[e,r]of this.keyMap)t?(t.nextKey=e,r.prevKey=t.key):(this.firstKey=e,r.prevKey=void 0),r.type===`item`&&(r.index=n++),t=r,t.nextKey=void 0;this.lastKey=t.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){return this.keyMap.get(e)?.prevKey}getKeyAfter(e){return this.keyMap.get(e)?.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){let t=[...this.getKeys()];return this.getItem(t[e])}};function G5(e){let t=Uhe(e),n=Vhe({dataSource:()=>D(e.dataSource),getKey:()=>D(e.getKey),getTextValue:()=>D(e.getTextValue),getDisabled:()=>D(e.getDisabled),getSectionChildren:()=>D(e.getSectionChildren),factory:t=>e.filter?new W5(e.filter(t)):new W5(t)},[()=>e.filter]),r=new Jhe(n,t);return g(()=>{let e=t.focusedKey();e!=null&&!n().getItem(e)&&t.setFocusedKey(void 0)}),{collection:n,selectionManager:()=>r}}var Yhe=_(`<option>`),Xhe=_(`<div aria-hidden=true><input type=text style=font-size:16px><select tabindex=-1><option></option><!$><!/>`);function Zhe(e){let t,[n,r]=E(e,[`ref`,`onChange`,`collection`,`selectionManager`,`isOpen`,`isMultiple`,`isVirtualized`,`focusTrigger`]),i=v5(),[a,o]=b(!1),c=e=>{let t=n.collection.getItem(e);return f(p,{get when(){return t?.type===`item`},get children(){var r=l(Yhe);return y(r,`value`,e),de(r,()=>t?.textValue),C(()=>y(r,`selected`,n.selectionManager.isSelected(e))),r}})};return h(ge(()=>n.selectionManager.selectedKeys(),(e,n)=>{n&&H5(e,n)||(o(!0),t?.dispatchEvent(new Event(`input`,{bubbles:!0,cancelable:!0})),t?.dispatchEvent(new Event(`change`,{bubbles:!0,cancelable:!0})))},{defer:!0})),(()=>{var e=l(Xhe),u=e.firstChild,h=u.nextSibling,g=h.firstChild.nextSibling,[_,b]=te(g.nextSibling);u.addEventListener(`focus`,()=>n.focusTrigger()),h.addEventListener(`change`,e=>{Re(e,n.onChange),a()||n.selectionManager.setSelectedKeys(new Set([e.target.value])),o(!1)});var ne=pe(e=>t=e,n.ref);return typeof ne==`function`&&x(ne,h),d(h,T({get multiple(){return n.isMultiple},get name(){return i.name()},get required(){return i.isRequired()},get disabled(){return i.isDisabled()},get size(){return n.collection.getSize()},get value(){return n.selectionManager.firstSelectedKey()??``}},r),!1,!0),de(h,f(p,{get when(){return n.isVirtualized},get fallback(){return f(s,{get each(){return[...n.collection.getKeys()]},children:c})},get children(){return f(s,{get each(){return[...n.selectionManager.selectedKeys()]},children:c})}}),_,b),C(t=>{var r=Se,a=n.selectionManager.isFocused()||n.isOpen?-1:0,o=i.isRequired(),s=i.isDisabled(),c=i.isReadOnly();return t.e=m(e,r,t.e),a!==t.t&&ee(u,`tabindex`,t.t=a),o!==t.a&&y(u,`required`,t.a=o),s!==t.o&&y(u,`disabled`,t.o=s),c!==t.i&&y(u,`readOnly`,t.i=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v(),e})()}var K5=new WeakMap;function Qhe(e){let t=K5.get(e);if(t!=null)return t;t=0;for(let n of e)n.type===`item`&&t++;return K5.set(e,t),t}var q5=class{collection;ref;collator;constructor(e,t,n){this.collection=e,this.ref=t,this.collator=n}getKeyBelow(e){let t=this.collection().getKeyAfter(e);for(;t!=null;){let e=this.collection().getItem(t);if(e&&e.type===`item`&&!e.disabled)return t;t=this.collection().getKeyAfter(t)}}getKeyAbove(e){let t=this.collection().getKeyBefore(e);for(;t!=null;){let e=this.collection().getItem(t);if(e&&e.type===`item`&&!e.disabled)return t;t=this.collection().getKeyBefore(t)}}getFirstKey(){let e=this.collection().getFirstKey();for(;e!=null;){let t=this.collection().getItem(e);if(t&&t.type===`item`&&!t.disabled)return e;e=this.collection().getKeyAfter(e)}}getLastKey(){let e=this.collection().getLastKey();for(;e!=null;){let t=this.collection().getItem(e);if(t&&t.type===`item`&&!t.disabled)return e;e=this.collection().getKeyBefore(e)}}getItem(e){return this.ref?.()?.querySelector(`[data-key="${e}"]`)??null}getKeyPageAbove(e){let t=this.ref?.(),n=this.getItem(e);if(!t||!n)return;let r=Math.max(0,n.offsetTop+n.offsetHeight-t.offsetHeight),i=e;for(;i&&n&&n.offsetTop>r;)i=this.getKeyAbove(i),n=i==null?null:this.getItem(i);return i}getKeyPageBelow(e){let t=this.ref?.(),n=this.getItem(e);if(!t||!n)return;let r=Math.min(t.scrollHeight,n.offsetTop-n.offsetHeight+t.offsetHeight),i=e;for(;i&&n&&n.offsetTop<r;)i=this.getKeyBelow(i),n=i==null?null:this.getItem(i);return i}getKeyForSearch(e,t){let n=this.collator?.();if(!n)return;let r=t==null?this.getFirstKey():this.getKeyBelow(t);for(;r!=null;){let t=this.collection().getItem(r);if(t){let i=t.textValue.slice(0,e.length);if(t.textValue&&n.compare(i,e)===0)return r}r=this.getKeyBelow(r)}}};function $he(e,t,n){let r=n5({usage:`search`,sensitivity:`base`});return Khe({selectionManager:()=>D(e.selectionManager),keyboardDelegate:w(()=>D(e.keyboardDelegate)||new q5(e.collection,t,r)),autoFocus:()=>D(e.autoFocus),deferAutoFocus:()=>D(e.deferAutoFocus),shouldFocusWrap:()=>D(e.shouldFocusWrap),disallowEmptySelection:()=>D(e.disallowEmptySelection),selectOnFocus:()=>D(e.selectOnFocus),disallowTypeAhead:()=>D(e.disallowTypeAhead),shouldUseVirtualFocus:()=>D(e.shouldUseVirtualFocus),allowsTabNavigation:()=>D(e.allowsTabNavigation),isVirtualized:()=>D(e.isVirtualized),scrollToKey:t=>D(e.scrollToKey)?.(t),orientation:()=>D(e.orientation)},t,n)}Oe({},{Item:()=>Q5,ItemDescription:()=>$5,ItemIndicator:()=>e7,ItemLabel:()=>t7,Listbox:()=>ege,Root:()=>n7,Section:()=>r7,useListboxContext:()=>Y5});var J5=me();function Y5(){let e=k(J5);if(e===void 0)throw Error("[kobalte]: `useListboxContext` must be used within a `Listbox` component");return e}var X5=me();function Z5(){let e=k(X5);if(e===void 0)throw Error("[kobalte]: `useListboxItemContext` must be used within a `Listbox.Item` component");return e}function Q5(e){let t,n=Y5(),[r,i]=E(Ce({id:`${n.generateId(`item`)}-${a()}`},e),[`ref`,`item`,`aria-label`,`aria-labelledby`,`aria-describedby`,`onPointerMove`,`onPointerDown`,`onPointerUp`,`onClick`,`onKeyDown`,`onMouseDown`,`onFocus`]),[o,s]=b(),[c,l]=b(),u=()=>n.listState().selectionManager(),d=()=>u().focusedKey()===r.item.key,p=qhe({key:()=>r.item.key,selectionManager:u,shouldSelectOnPressUp:n.shouldSelectOnPressUp,allowsDifferentPressOrigin:()=>n.shouldSelectOnPressUp()&&n.shouldFocusOnHover(),shouldUseVirtualFocus:n.shouldUseVirtualFocus,disabled:()=>r.item.disabled},()=>t),m=()=>{if(u().selectionMode()!==`none`)return p.isSelected()},h=w(()=>!(qe()&&be())),g=()=>h()?r[`aria-label`]:void 0,_=()=>h()?o():void 0,v=()=>h()?c():void 0,ee=()=>{if(!n.isVirtualized())return;let e=n.listState().collection().getItem(r.item.key)?.index;return e==null?void 0:e+1},te=()=>{if(n.isVirtualized())return Qhe(n.listState().collection())},y=e=>{Re(e,r.onPointerMove),e.pointerType===`mouse`&&!p.isDisabled()&&n.shouldFocusOnHover()&&(ze(e.currentTarget),u().setFocused(!0),u().setFocusedKey(r.item.key))},x=w(()=>({"data-disabled":p.isDisabled()?``:void 0,"data-selected":p.isSelected()?``:void 0,"data-highlighted":d()?``:void 0})),ne={isSelected:p.isSelected,dataset:x,generateId:He(()=>i.id),registerLabelId:i5(s),registerDescriptionId:i5(l)};return f(X5.Provider,{value:ne,get children(){return f(Ve,T({as:`li`,ref(e){var n=pe(e=>t=e,r.ref);typeof n==`function`&&n(e)},role:`option`,get tabIndex(){return p.tabIndex()},get"aria-disabled"(){return p.isDisabled()},get"aria-selected"(){return m()},get"aria-label"(){return g()},get"aria-labelledby"(){return _()},get"aria-describedby"(){return v()},get"aria-posinset"(){return ee()},get"aria-setsize"(){return te()},get"data-key"(){return p.dataKey()},get onPointerDown(){return je([r.onPointerDown,p.onPointerDown])},get onPointerUp(){return je([r.onPointerUp,p.onPointerUp])},get onClick(){return je([r.onClick,p.onClick])},get onKeyDown(){return je([r.onKeyDown,p.onKeyDown])},get onMouseDown(){return je([r.onMouseDown,p.onMouseDown])},get onFocus(){return je([r.onFocus,p.onFocus])},onPointerMove:y},x,i))}})}function $5(e){let t=Z5(),n=Ce({id:t.generateId(`description`)},e);return h(()=>O(t.registerDescriptionId(n.id))),f(Ve,T({as:`div`},()=>t.dataset(),n))}function e7(e){let t=Z5(),[n,r]=E(Ce({id:t.generateId(`indicator`)},e),[`forceMount`]);return f(p,{get when(){return n.forceMount||t.isSelected()},get children(){return f(Ve,T({as:`div`,"aria-hidden":`true`},()=>t.dataset(),r))}})}function t7(e){let t=Z5(),n=Ce({id:t.generateId(`label`)},e);return h(()=>O(t.registerLabelId(n.id))),f(Ve,T({as:`div`},()=>t.dataset(),n))}function n7(e){let t,n=Ce({id:`listbox-${a()}`,selectionMode:`single`,virtualized:!1},e),[r,i]=E(n,`ref.children.renderItem.renderSection.value.defaultValue.onChange.options.optionValue.optionTextValue.optionDisabled.optionGroupChildren.state.keyboardDelegate.autoFocus.selectionMode.shouldFocusWrap.shouldUseVirtualFocus.shouldSelectOnPressUp.shouldFocusOnHover.allowDuplicateSelectionEvents.disallowEmptySelection.selectionBehavior.selectOnFocus.disallowTypeAhead.allowsTabNavigation.virtualized.scrollToItem.scrollRef.onKeyDown.onMouseDown.onFocusIn.onFocusOut`.split(`.`)),o=w(()=>r.state?r.state:G5({selectedKeys:()=>r.value,defaultSelectedKeys:()=>r.defaultValue,onSelectionChange:r.onChange,allowDuplicateSelectionEvents:()=>D(r.allowDuplicateSelectionEvents),disallowEmptySelection:()=>D(r.disallowEmptySelection),selectionBehavior:()=>D(r.selectionBehavior),selectionMode:()=>D(r.selectionMode),dataSource:()=>r.options??[],getKey:()=>r.optionValue,getTextValue:()=>r.optionTextValue,getDisabled:()=>r.optionDisabled,getSectionChildren:()=>r.optionGroupChildren})),s=$he({selectionManager:()=>o().selectionManager(),collection:()=>o().collection(),autoFocus:()=>D(r.autoFocus),shouldFocusWrap:()=>D(r.shouldFocusWrap),keyboardDelegate:()=>r.keyboardDelegate,disallowEmptySelection:()=>D(r.disallowEmptySelection),selectOnFocus:()=>D(r.selectOnFocus),disallowTypeAhead:()=>D(r.disallowTypeAhead),shouldUseVirtualFocus:()=>D(r.shouldUseVirtualFocus),allowsTabNavigation:()=>D(r.allowsTabNavigation),isVirtualized:()=>r.virtualized,scrollToKey:()=>r.scrollToItem},()=>t,()=>r.scrollRef?.()),c={listState:o,generateId:He(()=>i.id),shouldUseVirtualFocus:()=>n.shouldUseVirtualFocus,shouldSelectOnPressUp:()=>n.shouldSelectOnPressUp,shouldFocusOnHover:()=>n.shouldFocusOnHover,isVirtualized:()=>r.virtualized};return f(J5.Provider,{value:c,get children(){return f(Ve,T({as:`ul`,ref(e){var n=pe(e=>t=e,r.ref);typeof n==`function`&&n(e)},role:`listbox`,get tabIndex(){return s.tabIndex()},get"aria-multiselectable"(){return o().selectionManager().selectionMode()===`multiple`?!0:void 0},get onKeyDown(){return je([r.onKeyDown,s.onKeyDown])},get onMouseDown(){return je([r.onMouseDown,s.onMouseDown])},get onFocusIn(){return je([r.onFocusIn,s.onFocusIn])},get onFocusOut(){return je([r.onFocusOut,s.onFocusOut])}},i,{get children(){return f(p,{get when(){return!r.virtualized},get fallback(){return r.children?.(o().collection)},get children(){return f(A,{get each(){return[...o().collection()]},by:`key`,children:e=>f(re,{get children(){return[f(S,{get when(){return e().type===`section`},get children(){return r.renderSection?.(e())}}),f(S,{get when(){return e().type===`item`},get children(){return r.renderItem?.(e())}})]}})})}})}}))}})}function r7(e){return f(Ve,T({as:`li`,role:`presentation`},e))}var ege=Object.assign(n7,{Item:Q5,ItemDescription:$5,ItemIndicator:e7,ItemLabel:t7,Section:r7}),tge=[`top`,`right`,`bottom`,`left`],i7=Math.min,a7=Math.max,o7=Math.round,s7=Math.floor,c7=e=>({x:e,y:e}),nge={left:`right`,right:`left`,bottom:`top`,top:`bottom`},rge={start:`end`,end:`start`};function l7(e,t,n){return a7(e,i7(t,n))}function u7(e,t){return typeof e==`function`?e(t):e}function d7(e){return e.split(`-`)[0]}function f7(e){return e.split(`-`)[1]}function p7(e){return e===`x`?`y`:`x`}function m7(e){return e===`y`?`height`:`width`}var ige=new Set([`top`,`bottom`]);function h7(e){return ige.has(d7(e))?`y`:`x`}function g7(e){return p7(h7(e))}function age(e,t,n){n===void 0&&(n=!1);let r=f7(e),i=g7(e),a=m7(i),o=i===`x`?r===(n?`end`:`start`)?`right`:`left`:r===`start`?`bottom`:`top`;return t.reference[a]>t.floating[a]&&(o=b7(o)),[o,b7(o)]}function oge(e){let t=b7(e);return[_7(e),t,_7(t)]}function _7(e){return e.replace(/start|end/g,e=>rge[e])}var v7=[`left`,`right`],y7=[`right`,`left`],sge=[`top`,`bottom`],cge=[`bottom`,`top`];function lge(e,t,n){switch(e){case`top`:case`bottom`:return n?t?y7:v7:t?v7:y7;case`left`:case`right`:return t?sge:cge;default:return[]}}function uge(e,t,n,r){let i=f7(e),a=lge(d7(e),n===`start`,r);return i&&(a=a.map(e=>e+`-`+i),t&&(a=a.concat(a.map(_7)))),a}function b7(e){return e.replace(/left|right|bottom|top/g,e=>nge[e])}function dge(e){return{top:0,right:0,bottom:0,left:0,...e}}function x7(e){return typeof e==`number`?{top:e,right:e,bottom:e,left:e}:dge(e)}function S7(e){let{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function C7(e,t,n){let{reference:r,floating:i}=e,a=h7(t),o=g7(t),s=m7(o),c=d7(t),l=a===`y`,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[s]/2-i[s]/2,p;switch(c){case`top`:p={x:u,y:r.y-i.height};break;case`bottom`:p={x:u,y:r.y+r.height};break;case`right`:p={x:r.x+r.width,y:d};break;case`left`:p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(f7(t)){case`start`:p[o]-=f*(n&&l?-1:1);break;case`end`:p[o]+=f*(n&&l?-1:1);break}return p}var fge=async(e,t,n)=>{let{placement:r=`bottom`,strategy:i=`absolute`,middleware:a=[],platform:o}=n,s=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t)),l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=C7(l,r,c),f=r,p={},m=0;for(let n=0;n<s.length;n++){let{name:a,fn:h}=s[n],{x:g,y:_,data:v,reset:ee}=await h({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:l,platform:o,elements:{reference:e,floating:t}});u=g??u,d=_??d,p={...p,[a]:{...p[a],...v}},ee&&m<=50&&(m++,typeof ee==`object`&&(ee.placement&&(f=ee.placement),ee.rects&&(l=ee.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):ee.rects),{x:u,y:d}=C7(l,f,c)),n=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:p}};async function w7(e,t){t===void 0&&(t={});let{x:n,y:r,platform:i,rects:a,elements:o,strategy:s}=e,{boundary:c=`clippingAncestors`,rootBoundary:l=`viewport`,elementContext:u=`floating`,altBoundary:d=!1,padding:f=0}=u7(t,e),p=x7(f),m=o[d?u===`floating`?`reference`:`floating`:u],h=S7(await i.getClippingRect({element:await(i.isElement==null?void 0:i.isElement(m))??!0?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:c,rootBoundary:l,strategy:s})),g=u===`floating`?{x:n,y:r,width:a.floating.width,height:a.floating.height}:a.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),v=await(i.isElement==null?void 0:i.isElement(_))&&await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1},ee=S7(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:g,offsetParent:_,strategy:s}):g);return{top:(h.top-ee.top+p.top)/v.y,bottom:(ee.bottom-h.bottom+p.bottom)/v.y,left:(h.left-ee.left+p.left)/v.x,right:(ee.right-h.right+p.right)/v.x}}var pge=e=>({name:`arrow`,options:e,async fn(t){let{x:n,y:r,placement:i,rects:a,platform:o,elements:s,middlewareData:c}=t,{element:l,padding:u=0}=u7(e,t)||{};if(l==null)return{};let d=x7(u),f={x:n,y:r},p=g7(i),m=m7(p),h=await o.getDimensions(l),g=p===`y`,_=g?`top`:`left`,v=g?`bottom`:`right`,ee=g?`clientHeight`:`clientWidth`,te=a.reference[m]+a.reference[p]-f[p]-a.floating[m],y=f[p]-a.reference[p],b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l)),x=b?b[ee]:0;(!x||!await(o.isElement==null?void 0:o.isElement(b)))&&(x=s.floating[ee]||a.floating[m]);let ne=te/2-y/2,re=x/2-h[m]/2-1,S=i7(d[_],re),ie=i7(d[v],re),C=S,w=x-h[m]-ie,ae=x/2-h[m]/2+ne,oe=l7(C,ae,w),se=!c.arrow&&f7(i)!=null&&ae!==oe&&a.reference[m]/2-(ae<C?S:ie)-h[m]/2<0,T=se?ae<C?ae-C:ae-w:0;return{[p]:f[p]+T,data:{[p]:oe,centerOffset:ae-oe-T,...se&&{alignmentOffset:T}},reset:se}}}),mge=function(e){return e===void 0&&(e={}),{name:`flip`,options:e,async fn(t){var n;let{placement:r,middlewareData:i,rects:a,initialPlacement:o,platform:s,elements:c}=t,{mainAxis:l=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:f=`bestFit`,fallbackAxisSideDirection:p=`none`,flipAlignment:m=!0,...h}=u7(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};let g=d7(r),_=h7(o),v=d7(o)===o,ee=await(s.isRTL==null?void 0:s.isRTL(c.floating)),te=d||(v||!m?[b7(o)]:oge(o)),y=p!==`none`;!d&&y&&te.push(...uge(o,m,p,ee));let b=[o,...te],x=await w7(t,h),ne=[],re=i.flip?.overflows||[];if(l&&ne.push(x[g]),u){let e=age(r,a,ee);ne.push(x[e[0]],x[e[1]])}if(re=[...re,{placement:r,overflows:ne}],!ne.every(e=>e<=0)){let e=(i.flip?.index||0)+1,t=b[e];if(t&&(!(u===`alignment`&&_!==h7(t))||re.every(e=>h7(e.placement)===_?e.overflows[0]>0:!0)))return{data:{index:e,overflows:re},reset:{placement:t}};let n=re.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0]?.placement;if(!n)switch(f){case`bestFit`:{let e=re.filter(e=>{if(y){let t=h7(e.placement);return t===_||t===`y`}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0]?.[0];e&&(n=e);break}case`initialPlacement`:n=o;break}if(r!==n)return{reset:{placement:n}}}return{}}}};function T7(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function E7(e){return tge.some(t=>e[t]>=0)}var hge=function(e){return e===void 0&&(e={}),{name:`hide`,options:e,async fn(t){let{rects:n}=t,{strategy:r=`referenceHidden`,...i}=u7(e,t);switch(r){case`referenceHidden`:{let e=T7(await w7(t,{...i,elementContext:`reference`}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:E7(e)}}}case`escaped`:{let e=T7(await w7(t,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:E7(e)}}}default:return{}}}}},gge=new Set([`left`,`top`]);async function _ge(e,t){let{placement:n,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=d7(n),s=f7(n),c=h7(n)===`y`,l=gge.has(o)?-1:1,u=a&&c?-1:1,d=u7(t,e),{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof d==`number`?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&typeof m==`number`&&(p=s===`end`?m*-1:m),c?{x:p*u,y:f*l}:{x:f*l,y:p*u}}var vge=function(e){return e===void 0&&(e=0),{name:`offset`,options:e,async fn(t){var n;let{x:r,y:i,placement:a,middlewareData:o}=t,s=await _ge(t,e);return a===o.offset?.placement&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:r+s.x,y:i+s.y,data:{...s,placement:a}}}}},yge=function(e){return e===void 0&&(e={}),{name:`shift`,options:e,async fn(t){let{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=u7(e,t),l={x:n,y:r},u=await w7(t,c),d=h7(d7(i)),f=p7(d),p=l[f],m=l[d];if(a){let e=f===`y`?`top`:`left`,t=f===`y`?`bottom`:`right`,n=p+u[e],r=p-u[t];p=l7(n,p,r)}if(o){let e=d===`y`?`top`:`left`,t=d===`y`?`bottom`:`right`,n=m+u[e],r=m-u[t];m=l7(n,m,r)}let h=s.fn({...t,[f]:p,[d]:m});return{...h,data:{x:h.x-n,y:h.y-r,enabled:{[f]:a,[d]:o}}}}}},bge=function(e){return e===void 0&&(e={}),{name:`size`,options:e,async fn(t){var n,r;let{placement:i,rects:a,platform:o,elements:s}=t,{apply:c=()=>{},...l}=u7(e,t),u=await w7(t,l),d=d7(i),f=f7(i),p=h7(i)===`y`,{width:m,height:h}=a.floating,g,_;d===`top`||d===`bottom`?(g=d,_=f===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?`start`:`end`)?`left`:`right`):(_=d,g=f===`end`?`top`:`bottom`);let v=h-u.top-u.bottom,ee=m-u.left-u.right,te=i7(h-u[g],v),y=i7(m-u[_],ee),b=!t.middlewareData.shift,x=te,ne=y;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(ne=ee),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(x=v),b&&!f){let e=a7(u.left,0),t=a7(u.right,0),n=a7(u.top,0),r=a7(u.bottom,0);p?ne=m-2*(e!==0||t!==0?e+t:a7(u.left,u.right)):x=h-2*(n!==0||r!==0?n+r:a7(u.top,u.bottom))}await c({...t,availableWidth:ne,availableHeight:x});let re=await o.getDimensions(s.floating);return m!==re.width||h!==re.height?{reset:{rects:!0}}:{}}}};function D7(){return typeof window<`u`}function O7(e){return j7(e)?(e.nodeName||``).toLowerCase():`#document`}function k7(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function A7(e){return((j7(e)?e.ownerDocument:e.document)||window.document)?.documentElement}function j7(e){return D7()?e instanceof Node||e instanceof k7(e).Node:!1}function M7(e){return D7()?e instanceof Element||e instanceof k7(e).Element:!1}function N7(e){return D7()?e instanceof HTMLElement||e instanceof k7(e).HTMLElement:!1}function P7(e){return!D7()||typeof ShadowRoot>`u`?!1:e instanceof ShadowRoot||e instanceof k7(e).ShadowRoot}var xge=new Set([`inline`,`contents`]);function F7(e){let{overflow:t,overflowX:n,overflowY:r,display:i}=B7(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!xge.has(i)}var Sge=new Set([`table`,`td`,`th`]);function Cge(e){return Sge.has(O7(e))}var wge=[`:popover-open`,`:modal`];function I7(e){return wge.some(t=>{try{return e.matches(t)}catch{return!1}})}var Tge=[`transform`,`translate`,`scale`,`rotate`,`perspective`],Ege=[`transform`,`translate`,`scale`,`rotate`,`perspective`,`filter`],Dge=[`paint`,`layout`,`strict`,`content`];function L7(e){let t=R7(),n=M7(e)?B7(e):e;return Tge.some(e=>n[e]?n[e]!==`none`:!1)||(n.containerType?n.containerType!==`normal`:!1)||!t&&(n.backdropFilter?n.backdropFilter!==`none`:!1)||!t&&(n.filter?n.filter!==`none`:!1)||Ege.some(e=>(n.willChange||``).includes(e))||Dge.some(e=>(n.contain||``).includes(e))}function Oge(e){let t=H7(e);for(;N7(t)&&!z7(t);){if(L7(t))return t;if(I7(t))return null;t=H7(t)}return null}function R7(){return typeof CSS>`u`||!CSS.supports?!1:CSS.supports(`-webkit-backdrop-filter`,`none`)}var kge=new Set([`html`,`body`,`#document`]);function z7(e){return kge.has(O7(e))}function B7(e){return k7(e).getComputedStyle(e)}function V7(e){return M7(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function H7(e){if(O7(e)===`html`)return e;let t=e.assignedSlot||e.parentNode||P7(e)&&e.host||A7(e);return P7(t)?t.host:t}function U7(e){let t=H7(e);return z7(t)?e.ownerDocument?e.ownerDocument.body:e.body:N7(t)&&F7(t)?t:U7(t)}function W7(e,t,n){t===void 0&&(t=[]),n===void 0&&(n=!0);let r=U7(e),i=r===e.ownerDocument?.body,a=k7(r);if(i){let e=G7(a);return t.concat(a,a.visualViewport||[],F7(r)?r:[],e&&n?W7(e):[])}return t.concat(r,W7(r,[],n))}function G7(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function K7(e){let t=B7(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=N7(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,s=o7(n)!==a||o7(r)!==o;return s&&(n=a,r=o),{width:n,height:r,$:s}}function q7(e){return M7(e)?e:e.contextElement}function J7(e){let t=q7(e);if(!N7(t))return c7(1);let n=t.getBoundingClientRect(),{width:r,height:i,$:a}=K7(t),o=(a?o7(n.width):n.width)/r,s=(a?o7(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}var Age=c7(0);function Y7(e){let t=k7(e);return!R7()||!t.visualViewport?Age:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function jge(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==k7(e)?!1:t}function X7(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);let i=e.getBoundingClientRect(),a=q7(e),o=c7(1);t&&(r?M7(r)&&(o=J7(r)):o=J7(e));let s=jge(a,n,r)?Y7(a):c7(0),c=(i.left+s.x)/o.x,l=(i.top+s.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(a){let e=k7(a),t=r&&M7(r)?k7(r):r,n=e,i=G7(n);for(;i&&r&&t!==n;){let e=J7(i),t=i.getBoundingClientRect(),r=B7(i),a=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,l*=e.y,u*=e.x,d*=e.y,c+=a,l+=o,n=k7(i),i=G7(n)}}return S7({width:u,height:d,x:c,y:l})}function Z7(e,t){let n=V7(e).scrollLeft;return t?t.left+n:X7(A7(e)).left+n}function Q7(e,t){let n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-Z7(e,n),y:n.top+t.scrollTop}}function Mge(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e,a=i===`fixed`,o=A7(r),s=t?I7(t.floating):!1;if(r===o||s&&a)return n;let c={scrollLeft:0,scrollTop:0},l=c7(1),u=c7(0),d=N7(r);if((d||!d&&!a)&&((O7(r)!==`body`||F7(o))&&(c=V7(r)),N7(r))){let e=X7(r);l=J7(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}let f=o&&!d&&!a?Q7(o,c):c7(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+f.x,y:n.y*l.y-c.scrollTop*l.y+u.y+f.y}}function Nge(e){return Array.from(e.getClientRects())}function Pge(e){let t=A7(e),n=V7(e),r=e.ownerDocument.body,i=a7(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=a7(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),o=-n.scrollLeft+Z7(e),s=-n.scrollTop;return B7(r).direction===`rtl`&&(o+=a7(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:s}}var $7=25;function Fge(e,t){let n=k7(e),r=A7(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,c=0;if(i){a=i.width,o=i.height;let e=R7();(!e||e&&t===`fixed`)&&(s=i.offsetLeft,c=i.offsetTop)}let l=Z7(r);if(l<=0){let e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i=e.compatMode===`CSS1Compat`&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,o=Math.abs(r.clientWidth-t.clientWidth-i);o<=$7&&(a-=o)}else l<=$7&&(a+=l);return{width:a,height:o,x:s,y:c}}var Ige=new Set([`absolute`,`fixed`]);function Lge(e,t){let n=X7(e,!0,t===`fixed`),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=N7(e)?J7(e):c7(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:i*a.x,y:r*a.y}}function e9(e,t,n){let r;if(t===`viewport`)r=Fge(e,n);else if(t===`document`)r=Pge(A7(e));else if(M7(t))r=Lge(t,n);else{let n=Y7(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return S7(r)}function t9(e,t){let n=H7(e);return n===t||!M7(n)||z7(n)?!1:B7(n).position===`fixed`||t9(n,t)}function Rge(e,t){let n=t.get(e);if(n)return n;let r=W7(e,[],!1).filter(e=>M7(e)&&O7(e)!==`body`),i=null,a=B7(e).position===`fixed`,o=a?H7(e):e;for(;M7(o)&&!z7(o);){let t=B7(o),n=L7(o);!n&&t.position===`fixed`&&(i=null),(a?!n&&!i:!n&&t.position===`static`&&i&&Ige.has(i.position)||F7(o)&&!n&&t9(e,o))?r=r.filter(e=>e!==o):i=t,o=H7(o)}return t.set(e,r),r}function zge(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e,a=[...n===`clippingAncestors`?I7(t)?[]:Rge(t,this._c):[].concat(n),r],o=a[0],s=a.reduce((e,n)=>{let r=e9(t,n,i);return e.top=a7(r.top,e.top),e.right=i7(r.right,e.right),e.bottom=i7(r.bottom,e.bottom),e.left=a7(r.left,e.left),e},e9(t,o,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function Bge(e){let{width:t,height:n}=K7(e);return{width:t,height:n}}function Vge(e,t,n){let r=N7(t),i=A7(t),a=n===`fixed`,o=X7(e,!0,a,t),s={scrollLeft:0,scrollTop:0},c=c7(0);function l(){c.x=Z7(i)}if(r||!r&&!a)if((O7(t)!==`body`||F7(i))&&(s=V7(t)),r){let e=X7(t,!0,a,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else i&&l();a&&!r&&i&&l();let u=i&&!r&&!a?Q7(i,s):c7(0);return{x:o.left+s.scrollLeft-c.x-u.x,y:o.top+s.scrollTop-c.y-u.y,width:o.width,height:o.height}}function n9(e){return B7(e).position===`static`}function r9(e,t){if(!N7(e)||B7(e).position===`fixed`)return null;if(t)return t(e);let n=e.offsetParent;return A7(e)===n&&(n=n.ownerDocument.body),n}function i9(e,t){let n=k7(e);if(I7(e))return n;if(!N7(e)){let t=H7(e);for(;t&&!z7(t);){if(M7(t)&&!n9(t))return t;t=H7(t)}return n}let r=r9(e,t);for(;r&&Cge(r)&&n9(r);)r=r9(r,t);return r&&z7(r)&&n9(r)&&!L7(r)?n:r||Oge(e)||n}var Hge=async function(e){let t=this.getOffsetParent||i9,n=this.getDimensions,r=await n(e.floating);return{reference:Vge(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Uge(e){return B7(e).direction===`rtl`}var a9={convertOffsetParentRelativeRectToViewportRelativeRect:Mge,getDocumentElement:A7,getClippingRect:zge,getOffsetParent:i9,getElementRects:Hge,getClientRects:Nge,getDimensions:Bge,getScale:J7,isElement:M7,isRTL:Uge};function o9(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Wge(e,t){let n=null,r,i=A7(e);function a(){var e;clearTimeout(r),(e=n)==null||e.disconnect(),n=null}function o(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),a();let l=e.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=l;if(s||t(),!f||!p)return;let m=s7(d),h=s7(i.clientWidth-(u+f)),g=s7(i.clientHeight-(d+p)),_=s7(u),v={rootMargin:-m+`px `+-h+`px `+-g+`px `+-_+`px`,threshold:a7(0,i7(1,c))||1},ee=!0;function te(t){let n=t[0].intersectionRatio;if(n!==c){if(!ee)return o();n?o(!1,n):r=setTimeout(()=>{o(!1,1e-7)},1e3)}n===1&&!o9(l,e.getBoundingClientRect())&&o(),ee=!1}try{n=new IntersectionObserver(te,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(te,v)}n.observe(e)}return o(!0),a}function Gge(e,t,n,r){r===void 0&&(r={});let{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver==`function`,layoutShift:s=typeof IntersectionObserver==`function`,animationFrame:c=!1}=r,l=q7(e),u=i||a?[...l?W7(l):[],...W7(t)]:[];u.forEach(e=>{i&&e.addEventListener(`scroll`,n,{passive:!0}),a&&e.addEventListener(`resize`,n)});let d=l&&s?Wge(l,n):null,f=-1,p=null;o&&(p=new ResizeObserver(e=>{let[r]=e;r&&r.target===l&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;(e=p)==null||e.observe(t)})),n()}),l&&!c&&p.observe(l),p.observe(t));let m,h=c?X7(e):null;c&&g();function g(){let t=X7(e);h&&!o9(h,t)&&n(),h=t,m=requestAnimationFrame(g)}return n(),()=>{var e;u.forEach(e=>{i&&e.removeEventListener(`scroll`,n),a&&e.removeEventListener(`resize`,n)}),d?.(),(e=p)==null||e.disconnect(),p=null,c&&cancelAnimationFrame(m)}}var Kge=vge,qge=yge,Jge=mge,Yge=bge,Xge=hge,Zge=pge,Qge=(e,t,n)=>{let r=new Map,i={platform:a9,...n},a={...i.platform,_c:r};return fge(e,t,{...i,platform:a})},$ge=_(`<svg display=block viewBox="0 0 30 30"style=transform:scale(1.02)><g><path fill=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z></path><path stroke=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z>`),s9=me();function c9(){let e=k(s9);if(e===void 0)throw Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return e}var l9=30,u9=l9/2,e_e={top:180,right:-90,bottom:0,left:90};function d9(e){let t=c9(),[n,r]=E(Ce({size:l9},e),[`ref`,`style`,`size`]),i=()=>t.currentPlacement().split(`-`)[0],a=t_e(t.contentRef),o=()=>a()?.getPropertyValue(`background-color`)||`none`,s=()=>a()?.getPropertyValue(`border-${i()}-color`)||`none`,c=()=>a()?.getPropertyValue(`border-${i()}-width`)||`0px`,u=()=>Number.parseInt(c())*2*(l9/n.size),d=()=>`rotate(${e_e[i()]} ${u9} ${u9}) translate(0 2)`;return f(Ve,T({as:`div`,ref(e){var r=pe(t.setArrowRef,n.ref);typeof r==`function`&&r(e)},"aria-hidden":`true`,get style(){return fe({position:`absolute`,"font-size":`${n.size}px`,width:`1em`,height:`1em`,"pointer-events":`none`,fill:o(),stroke:s(),"stroke-width":u()},n.style)}},r,{get children(){var e=l($ge),t=e.firstChild;return t.firstChild.nextSibling,C(()=>ee(t,`transform`,d())),e}}))}function t_e(e){let[t,n]=b();return h(()=>{let t=e();t&&n(Ye(t).getComputedStyle(t))}),t}function n_e(e){let t=c9(),[n,r]=E(e,[`ref`,`style`]);return f(Ve,T({as:`div`,ref(e){var r=pe(t.setPositionerRef,n.ref);typeof r==`function`&&r(e)},"data-popper-positioner":``,get style(){return fe({position:`absolute`,top:0,left:0,"min-width":`max-content`},n.style)}},r))}function f9(e){let{x:t=0,y:n=0,width:r=0,height:i=0}=e??{};if(typeof DOMRect==`function`)return new DOMRect(t,n,r,i);let a={x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:n+i,left:t};return{...a,toJSON:()=>a}}function r_e(e,t){return{contextElement:e,getBoundingClientRect:()=>{let n=t(e);return n?f9(n):e?e.getBoundingClientRect():f9()}}}function i_e(e){return/^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(e)}var a_e={top:`bottom`,right:`left`,bottom:`top`,left:`right`};function o_e(e,t){let[n,r]=e.split(`-`),i=a_e[n];return r?n===`left`||n===`right`?`${i} ${r===`start`?`top`:`bottom`}`:r===`start`?`${i} ${t===`rtl`?`right`:`left`}`:`${i} ${t===`rtl`?`left`:`right`}`:`${i} center`}function s_e(e){let t=Ce({getAnchorRect:e=>e?.getBoundingClientRect(),placement:`bottom`,gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},e),[n,r]=b(),[i,a]=b(),[o,s]=b(t.placement),c=()=>r_e(t.anchorRef?.(),t.getAnchorRect),{direction:l}=e5();async function u(){let e=c(),r=n(),a=i();if(!e||!r)return;let o=(a?.clientHeight||0)/2,u=typeof t.gutter==`number`?t.gutter+o:t.gutter??o;r.style.setProperty(`--kb-popper-content-overflow-padding`,`${t.overflowPadding}px`),e.getBoundingClientRect();let d=[Kge(({placement:e})=>({mainAxis:u,crossAxis:e.split(`-`)[1]?void 0:t.shift,alignmentAxis:t.shift}))];if(t.flip!==!1){let e=typeof t.flip==`string`?t.flip.split(` `):void 0;if(e!==void 0&&!e.every(i_e))throw Error("`flip` expects a spaced-delimited list of placements");d.push(Jge({padding:t.overflowPadding,fallbackPlacements:e}))}(t.slide||t.overlap)&&d.push(qge({mainAxis:t.slide,crossAxis:t.overlap,padding:t.overflowPadding})),d.push(Yge({padding:t.overflowPadding,apply({availableWidth:e,availableHeight:n,rects:i}){let a=Math.round(i.reference.width);e=Math.floor(e),n=Math.floor(n),r.style.setProperty(`--kb-popper-anchor-width`,`${a}px`),r.style.setProperty(`--kb-popper-content-available-width`,`${e}px`),r.style.setProperty(`--kb-popper-content-available-height`,`${n}px`),t.sameWidth&&(r.style.width=`${a}px`),t.fitViewport&&(r.style.maxWidth=`${e}px`,r.style.maxHeight=`${n}px`)}})),t.hideWhenDetached&&d.push(Xge({padding:t.detachedPadding})),a&&d.push(Zge({element:a,padding:t.arrowPadding}));let f=await Qge(e,r,{placement:t.placement,strategy:`absolute`,middleware:d,platform:{...a9,isRTL:()=>l()===`rtl`}});if(s(f.placement),t.onCurrentPlacementChange?.(f.placement),!r)return;r.style.setProperty(`--kb-popper-content-transform-origin`,o_e(f.placement,l()));let p=Math.round(f.x),m=Math.round(f.y),h;if(t.hideWhenDetached&&(h=f.middlewareData.hide?.referenceHidden?`hidden`:`visible`),Object.assign(r.style,{top:`0`,left:`0`,transform:`translate3d(${p}px, ${m}px, 0)`,visibility:h}),a&&f.middlewareData.arrow){let{x:e,y:t}=f.middlewareData.arrow,n=f.placement.split(`-`)[0];Object.assign(a.style,{left:e==null?``:`${e}px`,top:t==null?``:`${t}px`,[n]:`100%`})}}h(()=>{let e=c(),t=n();!e||!t||O(Gge(e,t,u,{elementResize:typeof ResizeObserver==`function`}))}),h(()=>{let e=n(),r=t.contentRef?.();!e||!r||queueMicrotask(()=>{e.style.zIndex=getComputedStyle(r).zIndex})});let d={currentPlacement:o,contentRef:()=>t.contentRef?.(),setPositionerRef:r,setArrowRef:a};return f(s9.Provider,{value:d,get children(){return t.children}})}var p9=Object.assign(s_e,{Arrow:d9,Context:s9,usePopperContext:c9,Positioner:n_e}),c_e=`data-kb-top-layer`,m9,h9=!1,g9=[];function _9(e){return g9.findIndex(t=>t.node===e)}function l_e(e){return g9[_9(e)]}function u_e(e){return g9[g9.length-1].node===e}function v9(){return g9.filter(e=>e.isPointerBlocking)}function d_e(){return[...v9()].slice(-1)[0]}function y9(){return v9().length>0}function b9(e){let t=_9(d_e()?.node);return _9(e)<t}function f_e(e){g9.push(e)}function p_e(e){let t=_9(e);t<0||g9.splice(t,1)}function m_e(){for(let{node:e}of g9)e.style.pointerEvents=b9(e)?`none`:`auto`}function h_e(e){if(y9()&&!h9){let t=De(e);m9=document.body.style.pointerEvents,t.body.style.pointerEvents=`none`,h9=!0}}function g_e(e){if(y9())return;let t=De(e);t.body.style.pointerEvents=m9,t.body.style.length===0&&t.body.removeAttribute(`style`),h9=!1}var x9={layers:g9,isTopMostLayer:u_e,hasPointerBlockingLayer:y9,isBelowPointerBlockingLayer:b9,addLayer:f_e,removeLayer:p_e,indexOf:_9,find:l_e,assignPointerEventToLayers:m_e,disableBodyPointerEvents:h_e,restoreBodyPointerEvents:g_e},S9=`focusScope.autoFocusOnMount`,C9=`focusScope.autoFocusOnUnmount`,w9={bubbles:!1,cancelable:!0},T9={stack:[],active(){return this.stack[0]},add(e){e!==this.active()&&this.active()?.pause(),this.stack=ve(this.stack,e),this.stack.unshift(e)},remove(e){this.stack=ve(this.stack,e),this.active()?.resume()}};function __e(e,t){let[n,r]=b(!1),i={pause(){r(!0)},resume(){r(!1)}},a=null,o=t=>e.onMountAutoFocus?.(t),s=t=>e.onUnmountAutoFocus?.(t),c=()=>De(t()),l=()=>{let e=c().createElement(`span`);return e.setAttribute(`data-focus-trap`,``),e.tabIndex=0,Object.assign(e.style,Se),e},u=()=>{let e=t();return e?Ne(e,!0).filter(e=>!e.hasAttribute(`data-focus-trap`)):[]},d=()=>{let e=u();return e.length>0?e[0]:null},f=()=>{let e=u();return e.length>0?e[e.length-1]:null},p=()=>{let e=t();if(!e)return!1;let n=Pe(e);return!n||Me(e,n)?!1:Te(n)};h(()=>{let e=t();if(!e)return;T9.add(i);let n=Pe(e);if(!Me(e,n)){let t=new CustomEvent(S9,w9);e.addEventListener(S9,o),e.dispatchEvent(t),t.defaultPrevented||setTimeout(()=>{ze(d()),Pe(e)===n&&ze(e)},0)}O(()=>{e.removeEventListener(S9,o),setTimeout(()=>{let t=new CustomEvent(C9,w9);p()&&t.preventDefault(),e.addEventListener(C9,s),e.dispatchEvent(t),t.defaultPrevented||ze(n??c().body),e.removeEventListener(C9,s),T9.remove(i)},0)})}),h(()=>{let r=t();if(!r||!D(e.trapFocus)||n())return;let i=e=>{let t=e.target;t?.closest(`[data-kb-top-layer]`)||(Me(r,t)?a=t:ze(a))},o=e=>{let t=e.relatedTarget??Pe(r);t?.closest(`[data-kb-top-layer]`)||Me(r,t)||ze(a)};c().addEventListener(`focusin`,i),c().addEventListener(`focusout`,o),O(()=>{c().removeEventListener(`focusin`,i),c().removeEventListener(`focusout`,o)})}),h(()=>{let r=t();if(!r||!D(e.trapFocus)||n())return;let i=l();r.insertAdjacentElement(`afterbegin`,i);let a=l();r.insertAdjacentElement(`beforeend`,a);function o(e){let t=d(),n=f();e.relatedTarget===t?ze(n):ze(t)}i.addEventListener(`focusin`,o),a.addEventListener(`focusin`,o);let s=new MutationObserver(e=>{for(let t of e)t.previousSibling===a&&(a.remove(),r.insertAdjacentElement(`beforeend`,a)),t.nextSibling===i&&(i.remove(),r.insertAdjacentElement(`afterbegin`,i))});s.observe(r,{childList:!0,subtree:!1}),O(()=>{i.removeEventListener(`focusin`,o),a.removeEventListener(`focusin`,o),i.remove(),a.remove(),s.disconnect()})})}var v_e=`data-live-announcer`;function y_e(e){h(()=>{D(e.isDisabled)||O(b_e(D(e.targets),D(e.root)))})}var E9=new WeakMap,D9=[];function b_e(e,t=document.body){let n=new Set(e),r=new Set,i=e=>{for(let t of e.querySelectorAll(`[${v_e}], [${c_e}]`))n.add(t);let t=e=>{if(n.has(e)||e.parentElement&&r.has(e.parentElement)&&e.parentElement.getAttribute(`role`)!==`row`)return NodeFilter.FILTER_REJECT;for(let t of n)if(e.contains(t))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:t}),o=t(e);if(o===NodeFilter.FILTER_ACCEPT&&a(e),o!==NodeFilter.FILTER_REJECT){let e=i.nextNode();for(;e!=null;)a(e),e=i.nextNode()}},a=e=>{let t=E9.get(e)??0;e.getAttribute(`aria-hidden`)===`true`&&t===0||(t===0&&e.setAttribute(`aria-hidden`,`true`),r.add(e),E9.set(e,t+1))};D9.length&&D9[D9.length-1].disconnect(),i(t);let o=new MutationObserver(e=>{for(let t of e)if(!(t.type!==`childList`||t.addedNodes.length===0)&&![...n,...r].some(e=>e.contains(t.target))){for(let e of t.removedNodes)e instanceof Element&&(n.delete(e),r.delete(e));for(let e of t.addedNodes)(e instanceof HTMLElement||e instanceof SVGElement)&&(e.dataset.liveAnnouncer===`true`||e.dataset.reactAriaTopLayer===`true`)?n.add(e):e instanceof Element&&i(e)}});o.observe(t,{childList:!0,subtree:!0});let s={observe(){o.observe(t,{childList:!0,subtree:!0})},disconnect(){o.disconnect()}};return D9.push(s),()=>{o.disconnect();for(let e of r){let t=E9.get(e);if(t==null)return;t===1?(e.removeAttribute(`aria-hidden`),E9.delete(e)):E9.set(e,t-1)}s===D9[D9.length-1]?(D9.pop(),D9.length&&D9[D9.length-1].observe()):D9.splice(D9.indexOf(s),1)}}var O9=`interactOutside.pointerDownOutside`,k9=`interactOutside.focusOutside`;function x_e(e,t){let n,r=Le,i=()=>De(t()),a=t=>e.onPointerDownOutside?.(t),o=t=>e.onFocusOutside?.(t),s=t=>e.onInteractOutside?.(t),c=n=>{let r=n.target;return!(r instanceof Element)||r.closest(`[data-kb-top-layer]`)||!Me(i(),r)||Me(t(),r)?!1:!e.shouldExcludeElement?.(r)},l=e=>{function n(){let n=t(),r=e.target;if(!n||!r||!c(e))return;let i=je([a,s]);r.addEventListener(O9,i,{once:!0});let o=new CustomEvent(O9,{bubbles:!1,cancelable:!0,detail:{originalEvent:e,isContextMenu:e.button===2||Je(e)&&e.button===0}});r.dispatchEvent(o)}e.pointerType===`touch`?(i().removeEventListener(`click`,n),r=n,i().addEventListener(`click`,n,{once:!0})):n()},u=e=>{let n=t(),r=e.target;if(!n||!r||!c(e))return;let i=je([o,s]);r.addEventListener(k9,i,{once:!0});let a=new CustomEvent(k9,{bubbles:!1,cancelable:!0,detail:{originalEvent:e,isContextMenu:!1}});r.dispatchEvent(a)};h(()=>{D(e.isDisabled)||(n=window.setTimeout(()=>{i().addEventListener(`pointerdown`,l,!0)},0),i().addEventListener(`focusin`,u,!0),O(()=>{window.clearTimeout(n),i().removeEventListener(`click`,r),i().removeEventListener(`pointerdown`,l,!0),i().removeEventListener(`focusin`,u,!0)}))})}function S_e(e){let t=t=>{t.key===Ae.Escape&&e.onEscapeKeyDown?.(t)};h(()=>{if(D(e.isDisabled))return;let n=e.ownerDocument?.()??De();n.addEventListener(`keydown`,t),O(()=>{n.removeEventListener(`keydown`,t)})})}var A9=me();function C_e(){return k(A9)}function w_e(e){let t,n=C_e(),[r,i]=E(e,[`ref`,`disableOutsidePointerEvents`,`excludedElements`,`onEscapeKeyDown`,`onPointerDownOutside`,`onFocusOutside`,`onInteractOutside`,`onDismiss`,`bypassTopMostLayerCheck`]),a=new Set([]),o=e=>{a.add(e);let t=n?.registerNestedLayer(e);return()=>{a.delete(e),t?.()}};x_e({shouldExcludeElement:e=>t?r.excludedElements?.some(t=>Me(t(),e))||[...a].some(t=>Me(t,e)):!1,onPointerDownOutside:e=>{!t||x9.isBelowPointerBlockingLayer(t)||!r.bypassTopMostLayerCheck&&!x9.isTopMostLayer(t)||(r.onPointerDownOutside?.(e),r.onInteractOutside?.(e),e.defaultPrevented||r.onDismiss?.())},onFocusOutside:e=>{r.onFocusOutside?.(e),r.onInteractOutside?.(e),e.defaultPrevented||r.onDismiss?.()}},()=>t),S_e({ownerDocument:()=>De(t),onEscapeKeyDown:e=>{!t||!x9.isTopMostLayer(t)||(r.onEscapeKeyDown?.(e),!e.defaultPrevented&&r.onDismiss&&(e.preventDefault(),r.onDismiss()))}}),he(()=>{if(!t)return;x9.addLayer({node:t,isPointerBlocking:r.disableOutsidePointerEvents,dismiss:r.onDismiss});let e=n?.registerNestedLayer(t);x9.assignPointerEventToLayers(),x9.disableBodyPointerEvents(t),O(()=>{t&&(x9.removeLayer(t),e?.(),x9.assignPointerEventToLayers(),x9.restoreBodyPointerEvents(t))})}),h(ge([()=>t,()=>r.disableOutsidePointerEvents],([e,t])=>{if(!e)return;let n=x9.find(e);n&&n.isPointerBlocking!==t&&(n.isPointerBlocking=t,x9.assignPointerEventToLayers()),t&&x9.disableBodyPointerEvents(e),O(()=>{x9.restoreBodyPointerEvents(e)})},{defer:!0}));let s={registerNestedLayer:o};return f(A9.Provider,{value:s,get children(){return f(Ve,T({as:`div`,ref(e){var n=pe(e=>t=e,r.ref);typeof n==`function`&&n(e)}},i))}})}function T_e(e={}){let[t,n]=Ihe({value:()=>D(e.open),defaultValue:()=>!!D(e.defaultOpen),onChange:t=>e.onOpenChange?.(t)}),r=()=>{n(!0)},i=()=>{n(!1)};return{isOpen:t,setIsOpen:n,open:r,close:i,toggle:()=>{t()?i():r()}}}var j9=(e,t)=>{if(e.contains(t))return!0;let n=t;for(;n;){if(n===e)return!0;n=n._$host??n.parentElement}return!1},M9=new Map,N9=e=>{h(()=>{let t=w5(e.style)??{},n=w5(e.properties)??[],r={};for(let n in t)r[n]=e.element.style[n];let i=M9.get(e.key);i?i.activeCount++:M9.set(e.key,{activeCount:1,originalStyles:r,properties:n.map(e=>e.key)}),Object.assign(e.element.style,e.style);for(let t of n)e.element.style.setProperty(t.key,t.value);O(()=>{let t=M9.get(e.key);if(t){if(t.activeCount!==1){t.activeCount--;return}M9.delete(e.key);for(let[n,r]of Object.entries(t.originalStyles))e.element.style[n]=r;for(let n of t.properties)e.element.style.removeProperty(n);e.element.style.length===0&&e.element.removeAttribute(`style`),e.cleanup?.()}})})},E_e=(e,t)=>{switch(t){case`x`:return[e.clientWidth,e.scrollLeft,e.scrollWidth];case`y`:return[e.clientHeight,e.scrollTop,e.scrollHeight]}},D_e=(e,t)=>{let n=getComputedStyle(e),r=t===`x`?n.overflowX:n.overflowY;return r===`auto`||r===`scroll`||e.tagName===`HTML`&&r===`visible`},O_e=(e,t,n)=>{let r=t===`x`&&window.getComputedStyle(e).direction===`rtl`?-1:1,i=e,a=0,o=0,s=!1;do{let[e,c,l]=E_e(i,t),u=l-e-r*c;(c!==0||u!==0)&&D_e(i,t)&&(a+=u,o+=c),i===(n??document.documentElement)?s=!0:i=i._$host??i.parentElement}while(i&&!s);return[a,o]},[P9,F9]=b([]),k_e=e=>P9().indexOf(e)===P9().length-1,A_e=e=>{let t=T({element:null,enabled:!0,hideScrollbar:!0,preventScrollbarShift:!0,preventScrollbarShiftMode:`padding`,restoreScrollPosition:!0,allowPinchZoom:!1},e),n=a(),r=[0,0],i=null,o=null;h(()=>{w5(t.enabled)&&(F9(e=>[...e,n]),O(()=>{F9(e=>e.filter(e=>e!==n))}))}),h(()=>{if(!w5(t.enabled)||!w5(t.hideScrollbar))return;let{body:e}=document,n=window.innerWidth-e.offsetWidth;if(w5(t.preventScrollbarShift)){let r={overflow:`hidden`},i=[];n>0&&(w5(t.preventScrollbarShiftMode)===`padding`?r.paddingRight=`calc(${window.getComputedStyle(e).paddingRight} + ${n}px)`:r.marginRight=`calc(${window.getComputedStyle(e).marginRight} + ${n}px)`,i.push({key:`--scrollbar-width`,value:`${n}px`}));let a=window.scrollY,o=window.scrollX;N9({key:`prevent-scroll`,element:e,style:r,properties:i,cleanup:()=>{w5(t.restoreScrollPosition)&&n>0&&window.scrollTo(o,a)}})}else N9({key:`prevent-scroll`,element:e,style:{overflow:`hidden`}})}),h(()=>{!k_e(n)||!w5(t.enabled)||(document.addEventListener(`wheel`,c,{passive:!1}),document.addEventListener(`touchstart`,s,{passive:!1}),document.addEventListener(`touchmove`,l,{passive:!1}),O(()=>{document.removeEventListener(`wheel`,c),document.removeEventListener(`touchstart`,s),document.removeEventListener(`touchmove`,l)}))});let s=e=>{r=I9(e),i=null,o=null},c=e=>{let n=e.target,r=w5(t.element),i=j_e(e),a=Math.abs(i[0])>Math.abs(i[1])?`x`:`y`,o=L9(n,a,a===`x`?i[0]:i[1],r),s;s=r&&j9(r,n)?!o:!0,s&&e.cancelable&&e.preventDefault()},l=e=>{let n=w5(t.element),a=e.target,s;if(e.touches.length===2)s=!w5(t.allowPinchZoom);else{if(i==null||o===null){let t=I9(e).map((e,t)=>r[t]-e),n=Math.abs(t[0])>Math.abs(t[1])?`x`:`y`;i=n,o=n===`x`?t[0]:t[1]}if(a.type===`range`)s=!1;else{let e=L9(a,i,o,n);s=n&&j9(n,a)?!e:!0}}s&&e.cancelable&&e.preventDefault()}},j_e=e=>[e.deltaX,e.deltaY],I9=e=>e.changedTouches[0]?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0],L9=(e,t,n,r)=>{let[i,a]=O_e(e,t,r!==null&&j9(r,e)?r:void 0);return!(n>0&&Math.abs(i)<=1||n<0&&Math.abs(a)<1)},M_e=A_e;Oe({},{Arrow:()=>d9,Content:()=>B9,Description:()=>y5,ErrorMessage:()=>S5,HiddenSelect:()=>V9,Icon:()=>H9,Item:()=>Q5,ItemDescription:()=>$5,ItemIndicator:()=>e7,ItemLabel:()=>t7,Label:()=>U9,Listbox:()=>W9,Portal:()=>G9,Root:()=>K9,Section:()=>r7,Select:()=>F_e,Trigger:()=>q9,Value:()=>J9,useSelectContext:()=>z9});var R9=me();function z9(){let e=k(R9);if(e===void 0)throw Error("[kobalte]: `useSelectContext` must be used within a `Select` component");return e}function B9(e){let t,n=z9(),[r,i]=E(e,[`ref`,`style`,`onCloseAutoFocus`,`onFocusOutside`]),a=e=>{n.close()},o=e=>{r.onFocusOutside?.(e),n.isOpen()&&n.isModal()&&e.preventDefault()};return y_e({isDisabled:()=>!(n.isOpen()&&n.isModal()),targets:()=>t?[t]:[]}),M_e({element:()=>t??null,enabled:()=>n.contentPresent()&&n.preventScroll()}),__e({trapFocus:()=>n.isOpen()&&n.isModal(),onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:e=>{r.onCloseAutoFocus?.(e),e.defaultPrevented||(ze(n.triggerRef()),e.preventDefault())}},()=>t),f(p,{get when(){return n.contentPresent()},get children(){return f(p9.Positioner,{get children(){return f(w_e,T({ref(e){var i=pe(e=>{n.setContentRef(e),t=e},r.ref);typeof i==`function`&&i(e)},get disableOutsidePointerEvents(){return ue(()=>!!n.isModal())()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},get style(){return fe({"--kb-select-content-transform-origin":`var(--kb-popper-content-transform-origin)`,position:`relative`},r.style)},onEscapeKeyDown:a,onFocusOutside:o,get onDismiss(){return n.close}},()=>n.dataset(),i))}})}})}function V9(e){let t=z9();return f(Zhe,T({get collection(){return t.listState().collection()},get selectionManager(){return t.listState().selectionManager()},get isOpen(){return t.isOpen()},get isMultiple(){return t.isMultiple()},get isVirtualized(){return t.isVirtualized()},focusTrigger:()=>t.triggerRef()?.focus()},e))}function H9(e){let t=z9(),n=Ce({children:`▼`},e);return f(Ve,T({as:`span`,"aria-hidden":`true`},()=>t.dataset(),n))}function U9(e){let t=z9(),[n,r]=E(e,[`onClick`]);return f(b5,T({as:`span`,onClick:e=>{Re(e,n.onClick),t.isDisabled()||t.triggerRef()?.focus()}},r))}function W9(e){let t=z9(),[n,r]=E(Ce({id:t.generateId(`listbox`)},e),[`ref`,`id`,`onKeyDown`]);h(()=>O(t.registerListboxId(n.id)));let i=e=>{Re(e,n.onKeyDown),e.key===`Escape`&&e.preventDefault()};return f(n7,T({ref(e){var r=pe(t.setListboxRef,n.ref);typeof r==`function`&&r(e)},get id(){return n.id},get state(){return t.listState()},get virtualized(){return t.isVirtualized()},get autoFocus(){return t.autoFocus()},shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,get shouldFocusWrap(){return t.shouldFocusWrap()},get disallowTypeAhead(){return t.disallowTypeAhead()},get"aria-labelledby"(){return t.listboxAriaLabelledBy()},get renderItem(){return t.renderItem},get renderSection(){return t.renderSection},onKeyDown:i},r))}function G9(e){let t=z9();return f(p,{get when(){return t.contentPresent()},get children(){return f(c,e)}})}function N_e(e){let[t,n,r,i]=E(Ce({id:`select-${a()}`,selectionMode:`single`,disallowEmptySelection:!1,closeOnSelection:e.selectionMode===`single`,allowDuplicateSelectionEvents:!0,gutter:8,sameWidth:!0,modal:!1},e),`itemComponent.sectionComponent.open.defaultOpen.onOpenChange.value.defaultValue.onChange.placeholder.options.optionValue.optionTextValue.optionDisabled.optionGroupChildren.keyboardDelegate.allowDuplicateSelectionEvents.disallowEmptySelection.closeOnSelection.disallowTypeAhead.shouldFocusWrap.selectionBehavior.selectionMode.virtualized.modal.preventScroll.forceMount`.split(`.`),[`getAnchorRect`,`placement`,`gutter`,`shift`,`flip`,`slide`,`overlap`,`sameWidth`,`fitViewport`,`hideWhenDetached`,`detachedPadding`,`arrowPadding`,`overflowPadding`],h5),[o,s]=b(),[c,l]=b(),[u,d]=b(),[p,m]=b(),[g,_]=b(),[v,ee]=b(),[te,y]=b(),[x,ne]=b(!0),re=e=>{let n=t.optionValue;return n==null?String(e):String(ye(n)?n(e):e[n])},S=w(()=>{let e=t.optionGroupChildren;return e==null?t.options:t.options.flatMap(t=>t[e]??t)}),ie=w(()=>S().map(e=>re(e))),C=e=>[...e].map(e=>S().find(t=>re(t)===e)).filter(e=>e!=null),ae=T_e({open:()=>t.open,defaultOpen:()=>t.defaultOpen,onOpenChange:e=>t.onOpenChange?.(e)}),oe=G5({selectedKeys:()=>t.value==null?t.value:t.value.map(re),defaultSelectedKeys:()=>t.defaultValue==null?t.defaultValue:t.defaultValue.map(re),onSelectionChange:e=>{t.onChange?.(C(e)),t.closeOnSelection&&O()},allowDuplicateSelectionEvents:()=>D(t.allowDuplicateSelectionEvents),disallowEmptySelection:()=>D(t.disallowEmptySelection),selectionBehavior:()=>D(t.selectionBehavior),selectionMode:()=>t.selectionMode,dataSource:()=>t.options??[],getKey:()=>t.optionValue,getTextValue:()=>t.optionTextValue,getDisabled:()=>t.optionDisabled,getSectionChildren:()=>t.optionGroupChildren}),se=w(()=>C(oe.selectionManager().selectedKeys())),ce=e=>{oe.selectionManager().toggleSelection(re(e))},{present:le}=T5({show:()=>t.forceMount||ae.isOpen(),element:()=>g()??null}),ue=()=>{let e=v();e&&ze(e)},de=e=>{if(t.options.length<=0)return;ne(e),ae.open();let n=oe.selectionManager().firstSelectedKey();n??(e===`first`?n=oe.collection().getFirstKey():e===`last`&&(n=oe.collection().getLastKey())),ue(),oe.selectionManager().setFocused(!0),oe.selectionManager().setFocusedKey(n)},O=()=>{ae.close(),oe.selectionManager().setFocused(!1),oe.selectionManager().setFocusedKey(void 0)},fe=e=>{ae.isOpen()?O():de(e)},{formControlContext:k}=g5(r);x5(p,()=>{let e=t.defaultValue?[...t.defaultValue].map(re):new R5;oe.selectionManager().setSelectedKeys(e)});let pe=n5({usage:`search`,sensitivity:`base`}),me=w(()=>D(t.keyboardDelegate)||new q5(oe.collection,void 0,pe)),he=e=>t.itemComponent?.({item:e}),_e=e=>t.sectionComponent?.({section:e});h(ge([ie],([e])=>{let t=[...oe.selectionManager().selectedKeys()].filter(t=>e.includes(t));oe.selectionManager().setSelectedKeys(t)},{defer:!0}));let ve=w(()=>({"data-expanded":ae.isOpen()?``:void 0,"data-closed":ae.isOpen()?void 0:``})),be={dataset:ve,isOpen:ae.isOpen,isDisabled:()=>k.isDisabled()??!1,isMultiple:()=>D(t.selectionMode)===`multiple`,isVirtualized:()=>t.virtualized??!1,isModal:()=>t.modal??!1,preventScroll:()=>t.preventScroll??be.isModal(),disallowTypeAhead:()=>t.disallowTypeAhead??!1,shouldFocusWrap:()=>t.shouldFocusWrap??!1,selectedOptions:se,contentPresent:le,autoFocus:x,triggerRef:p,listState:()=>oe,keyboardDelegate:me,triggerId:o,valueId:c,listboxId:u,listboxAriaLabelledBy:te,setListboxAriaLabelledBy:y,setTriggerRef:m,setContentRef:_,setListboxRef:ee,open:de,close:O,toggle:fe,placeholder:()=>t.placeholder,renderItem:he,renderSection:_e,removeOptionFromSelection:ce,generateId:He(()=>D(r.id)),registerTriggerId:i5(s),registerValueId:i5(l),registerListboxId:i5(d)};return f(_5.Provider,{value:k,get children(){return f(R9.Provider,{value:be,get children(){return f(p9,T({anchorRef:p,contentRef:g},n,{get children(){return f(Ve,T({as:`div`,role:`group`,get id(){return D(r.id)}},()=>k.dataset(),ve,i))}}))}})}})}function K9(e){let[t,n]=E(e,[`value`,`defaultValue`,`onChange`,`multiple`]),r=w(()=>t.value==null||t.multiple?t.value:[t.value]),i=w(()=>t.defaultValue==null||t.multiple?t.defaultValue:[t.defaultValue]);return f(N_e,T({get value(){return r()},get defaultValue(){return i()},onChange:e=>{t.multiple?t.onChange?.(e??[]):t.onChange?.(e[0]??null)},get selectionMode(){return t.multiple?`multiple`:`single`}},n))}function q9(e){let t=v5(),n=z9(),[r,i,a]=E(Ce({id:n.generateId(`trigger`)},e),[`ref`,`disabled`,`onPointerDown`,`onClick`,`onKeyDown`,`onFocus`,`onBlur`],E5),o=()=>n.listState().selectionManager(),s=()=>n.keyboardDelegate(),c=()=>r.disabled||n.isDisabled(),{fieldProps:l}=D5(i),{typeSelectHandlers:u}=U5({keyboardDelegate:s,selectionManager:o,onTypeSelect:e=>o().select(e)}),d=()=>[n.listboxAriaLabelledBy(),n.valueId()].filter(Boolean).join(` `)||void 0,p=e=>{Re(e,r.onPointerDown),e.currentTarget.dataset.pointerType=e.pointerType,!c()&&e.pointerType!==`touch`&&e.button===0&&(e.preventDefault(),n.toggle(!0))},m=e=>{Re(e,r.onClick),!c()&&e.currentTarget.dataset.pointerType===`touch`&&n.toggle(!0)},g=e=>{if(Re(e,r.onKeyDown),!c())switch(Re(e,u.onKeyDown),e.key){case`Enter`:case` `:case`ArrowDown`:e.stopPropagation(),e.preventDefault(),n.toggle(`first`);break;case`ArrowUp`:e.stopPropagation(),e.preventDefault(),n.toggle(`last`);break;case`ArrowLeft`:{if(e.preventDefault(),n.isMultiple())return;let t=o().firstSelectedKey(),r=t==null?s().getFirstKey?.():s().getKeyAbove?.(t);r!=null&&o().select(r);break}case`ArrowRight`:{if(e.preventDefault(),n.isMultiple())return;let t=o().firstSelectedKey(),r=t==null?s().getFirstKey?.():s().getKeyBelow?.(t);r!=null&&o().select(r);break}}},_=e=>{Re(e,r.onFocus),!o().isFocused()&&o().setFocused(!0)},v=e=>{Re(e,r.onBlur),!n.isOpen()&&o().setFocused(!1)};return h(()=>O(n.registerTriggerId(l.id()))),h(()=>{n.setListboxAriaLabelledBy([l.ariaLabelledBy(),l.ariaLabel()&&!l.ariaLabelledBy()?l.id():null].filter(Boolean).join(` `)||void 0)}),f(Fe,T({ref(e){var t=pe(n.setTriggerRef,r.ref);typeof t==`function`&&t(e)},get id(){return l.id()},get disabled(){return c()},"aria-haspopup":`listbox`,get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return ue(()=>!!n.isOpen())()?n.listboxId():void 0},get"aria-label"(){return l.ariaLabel()},get"aria-labelledby"(){return d()},get"aria-describedby"(){return l.ariaDescribedBy()},onPointerDown:p,onClick:m,onKeyDown:g,onFocus:_,onBlur:v},()=>n.dataset(),()=>t.dataset(),a))}function J9(e){let t=v5(),n=z9(),[r,i]=E(Ce({id:n.generateId(`value`)},e),[`id`,`children`]),a=()=>n.listState().selectionManager(),o=()=>{let e=a().selectedKeys();return e.size===1&&e.has(``)?!0:a().isEmpty()};return h(()=>O(n.registerValueId(r.id))),f(Ve,T({as:`span`,get id(){return r.id},get"data-placeholder-shown"(){return o()?``:void 0}},()=>t.dataset(),i,{get children(){return f(p,{get when(){return!o()},get fallback(){return n.placeholder()},get children(){return f(P_e,{state:{selectedOption:()=>n.selectedOptions()[0],selectedOptions:()=>n.selectedOptions(),remove:e=>n.removeOptionFromSelection(e),clear:()=>a().clearSelection()},get children(){return r.children}})}})}}))}function P_e(e){return ue(ie(()=>{let t=e.children;return ye(t)?t(e.state):t}))}var F_e=Object.assign(K9,{Arrow:d9,Content:B9,Description:y5,ErrorMessage:S5,HiddenSelect:V9,Icon:H9,Item:Q5,ItemDescription:$5,ItemIndicator:e7,ItemLabel:t7,Label:U9,Listbox:W9,Portal:G9,Section:r7,Trigger:q9,Value:J9}),I_e=_(`<svg><path d="M8 9l4 -4l4 4"></svg>`,!1,!0,!1),L_e=_(`<svg><path d="M16 15l-4 4l-4 -4"></svg>`,!1,!0,!1),R_e=_(`<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class=size-4><title>Select Arrow</title><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M5 12l5 5l10 -10">`),Y9=K9,X9=J9,Z9=e=>{let[t,n]=E(e,[`class`,`children`]);return f(q9,T({get class(){return Be(`flex h-10 w-full items-center justify-between rounded-md border-2 border-black dark:border-white bg-white dark:bg-gray-950 px-3 py-2 text-sm text-black dark:text-white placeholder:text-muted-foreground focus:outline-none focus:border-neutral-400 focus:dark:border-neutral-600 disabled:cursor-not-allowed disabled:opacity-50`,t.class)}},n,{get children(){return[ue(()=>t.children),f(H9,{as:`svg`,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`size-4 opacity-50`,get children(){return[l(I_e),l(L_e)]}})]}}))},Q9=e=>{let[t,n]=E(e,[`class`]);return f(G9,{get children(){return f(B9,T({get class(){return Be(`relative z-50 min-w-32 overflow-hidden rounded-md border-2 border-black dark:border-white bg-white dark:bg-gray-950 text-black dark:text-white shadow-md animate-in fade-in-80`,t.class)}},n,{get children(){return f(W9,{class:`m-0 p-1`})}}))}})},$9=e=>{let[t,n]=E(e,[`class`,`children`]);return f(Q5,T({get class(){return Be(`relative mt-0 flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none hover:bg-gray-100 dark:hover:bg-gray-800 focus:bg-gray-100 dark:focus:bg-gray-800 text-black dark:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,t.class)}},n,{get children(){return[f(e7,{class:`absolute right-2 flex size-3.5 items-center justify-center`,get children(){return l(R_e)}}),f(t7,{get children(){return t.children}})]}}))};Ue(`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70`,{variants:{variant:{label:`data-[invalid]:text-destructive`,description:`font-normal text-muted-foreground`,error:`text-xs text-destructive`}},defaultVariants:{variant:`label`}});var z_e=_(`<div class="px-3 py-4 text-gray-500 text-center">No years found`),B_e=_(`<div class="absolute top-full left-0 right-0 z-50 mt-1 bg-white dark:bg-gray-950 border-2 border-black dark:border-white rounded-md shadow-lg max-h-48 overflow-hidden"><div class="p-2 border-b border-gray-200 dark:border-gray-700"><input type=text placeholder="Search year..."class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500"></div><div class="max-h-32 overflow-y-auto"><!$><!/><!$><!/>`),V_e=_(`<button type=button class="fixed inset-0 z-40 bg-transparent"aria-label="Close year dropdown">`),H_e=_(`<div class=relative><button type=button><span></span><!$><!/></button><!$><!/><!$><!/>`),U_e=_(`<button type=button>`);function W_e(e){let[t,n]=b(!1),[r,i]=b(``),a=e.startYear||2022,o=e.endYear||2030,c=()=>{let e=[];for(let t=o;t>=a;t--)e.push(t.toString());return e},u=()=>{let e=r().toLowerCase();return e?c().filter(t=>t.includes(e)):c()},d=t=>{e.onChange(t),n(!1),i(``)};return(()=>{var a=l(H_e),o=a.firstChild,c=o.firstChild,m=c.nextSibling,[h,g]=te(m.nextSibling),_=o.nextSibling,[ee,b]=te(_.nextSibling),x=ee.nextSibling,[re,S]=te(x.nextSibling);return o.$$click=()=>n(!t()),de(c,()=>e.value||e.placeholder||`Select year`),de(o,f(phe,{class:`w-5 h-5 text-gray-500 flex-shrink-0`}),h,g),de(a,f(p,{get when(){return t()},get children(){var t=l(B_e),n=t.firstChild,a=n.firstChild,o=n.nextSibling,c=o.firstChild,[m,h]=te(c.nextSibling),g=m.nextSibling,[_,ee]=te(g.nextSibling);return a.addEventListener(`focus`,e=>e.currentTarget.select()),a.$$click=e=>e.stopPropagation(),a.$$input=e=>i(e.currentTarget.value),de(o,f(s,{get each(){return u()},children:t=>(()=>{var n=l(U_e);return n.$$click=()=>d(t),de(n,t),C(()=>ne(n,`w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer transition-colors ${e.value===t?`bg-gray-200 dark:bg-gray-700 text-black dark:text-white`:`text-black dark:text-white`} focus:outline-none focus:bg-gray-100 focus:dark:bg-gray-800`)),v(),n})()}),m,h),de(o,f(p,{get when(){return u().length===0},get children(){return l(z_e)}}),_,ee),C(()=>y(a,`value`,r())),v(),t}}),ee,b),de(a,f(p,{get when(){return t()},get children(){var e=l(V_e);return e.$$click=()=>n(!1),v(),e}}),re,S),C(t=>{var n=`border-2 border-black dark:border-white h-10 bg-white dark:bg-gray-950 w-full text-sm px-3 py-2 rounded-md flex items-center justify-between cursor-pointer transition-colors hover:bg-gray-50 dark:hover:bg-gray-800 ${e.class} focus:outline-none focus:border-neutral-400 focus:dark:border-neutral-600`,r=e.value?`text-black dark:text-white`:`text-gray-500`;return n!==t.e&&ne(o,t.e=n),r!==t.t&&ne(c,t.t=r),t},{e:void 0,t:void 0}),v(),a})()}u([`click`,`input`]);var G_e=_(`<div class=space-y-8><div><h3 class="mb-2 text-black dark:text-white">Let's start with your details</h3><p class="text-neutral-600 dark:text-neutral-400 mb-8"></p></div><div class=space-y-6><!$><!/><!$><!/><div class="grid md:grid-cols-2 gap-6"><!$><!/><!$><!/></div><!$><!/>`);function K_e(e){let t=e.variant||`feedback`,n=[{label:`I`,value:`1`},{label:`II`,value:`2`},{label:`III`,value:`3`},{label:`IV`,value:`4`}],r=[`Computer Science and Engineering`,`AIDS`,`CSBS`],i=t=>n=>{e.onChange({...e.data,[t]:n||``})};return(()=>{var a=l(G_e),o=a.firstChild,s=o.firstChild.nextSibling,c=o.nextSibling,u=c.firstChild,[d,p]=te(u.nextSibling),m=d.nextSibling,[h,g]=te(m.nextSibling),_=h.nextSibling,v=_.firstChild,[ee,y]=te(v.nextSibling),b=ee.nextSibling,[x,ne]=te(b.nextSibling),re=_.nextSibling,[S,ie]=te(re.nextSibling);return de(s,t===`career`?`This helps us personalize your results`:`This helps us organize and personalize feedback`),de(c,f(P5,{get children(){return[f(I5,{class:`text-sm font-medium mb-2 block text-black dark:text-white`,children:`Name *`}),f(F5,{id:t===`career`?`quiz-name`:`name`,type:`text`,get value(){return e.data.name},onInput:e=>i(`name`)(e.currentTarget.value),placeholder:`Your full name`,class:`border-2 border-black dark:border-white h-12 text-sm bg-white dark:bg-gray-950 text-black dark:text-white`})]}}),d,p),de(c,f(P5,{get children(){return[f(I5,{class:`text-sm font-medium mb-2 block text-black dark:text-white`,children:`Email *`}),f(F5,{id:t===`career`?`quiz-email`:`email`,type:`email`,get value(){return e.data.email},onInput:e=>i(`email`)(e.currentTarget.value),placeholder:`your.email@example.com`,class:`border-2 border-black dark:border-white h-12 text-sm bg-white dark:bg-gray-950 text-black dark:text-white`})]}}),h,g),de(_,f(P5,{get children(){return[f(I5,{class:`text-sm font-medium mb-2 block text-black dark:text-white`,children:`Year *`}),f(Y9,{get value(){return e.data.year},get onChange(){return i(`year`)},get options(){return n.map(e=>e.value)},placeholder:`Select year`,itemComponent:e=>{let t=n.find(t=>t.value===e.item.rawValue);return f($9,{get item(){return e.item},get children(){return t?.label||e.item.rawValue}})},get children(){return[f(Z9,{class:`border-2 border-black dark:border-white h-10 bg-white dark:bg-gray-950 w-full text-sm`,get children(){return f(X9,{children:e=>{let t=e.selectedOption();return n.find(e=>e.value===t)?.label||t}})}}),f(Q9,{})]}})]}}),ee,y),de(_,f(P5,{get children(){return[f(I5,{class:`text-sm font-medium mb-2 block text-black dark:text-white`,children:`Batch Year *`}),f(W_e,{get value(){return e.data.batch},get onChange(){return i(`batch`)},startYear:2025,endYear:2035,placeholder:`Select batch year`,class:`border-2 border-black dark:border-white`})]}}),x,ne),de(c,f(P5,{get children(){return[f(I5,{class:`text-sm font-medium mb-2 block text-black dark:text-white`,children:`Department *`}),f(Y9,{get value(){return e.data.department},get onChange(){return i(`department`)},options:r,placeholder:`Select your department`,itemComponent:e=>f($9,{get item(){return e.item},get children(){return e.item.rawValue}}),get children(){return[f(Z9,{class:`border-2 border-black dark:border-white h-10 bg-white dark:bg-gray-950 w-full text-sm`,get children(){return f(X9,{children:e=>e.selectedOption()})}}),f(Q9,{})]}})]}}),S,ie),a})()}export{tt as C,tR as S,hhe as _,T5 as a,U8 as b,x5 as c,_5 as d,y5 as f,i5 as g,Nhe as h,zhe as i,b5 as l,v5 as m,P5 as n,C5 as o,g5 as p,I5 as r,S5 as s,K_e as t,h5 as u,dhe as v,H8 as x,lhe as y};